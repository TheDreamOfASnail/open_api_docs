{"config":{"lang":["en"],"prebuild_index":false,"separator":"[\\s\\-]+"},"docs":[{"location":"","text":"\u6ce8\u610f: DM Hub\u6570\u636e\u63a5\u53e3\u9075\u5faaOAuth 2.0\u534f\u8bae\uff0c\u8c03\u7528\u6240\u6709\u529f\u80fdAPI\u4e4b\u524d\u90fd\u9700\u8981\u5148\u83b7\u53d6access_token\u3002access_token\u662f\u8c03\u7528DM Hub \u6570\u636e\u63a5\u53e3\u7684\u51ed\u8bc1\uff0c\u5f00\u53d1\u8005\u9700\u8981\u59a5\u5584\u4fdd\u7ba1\u3002access_token\u7684\u6709\u6548\u671f\u76ee\u524d\u662f2\u5c0f\u65f6\uff0c\u9700\u5b9a\u65f6\u5237\u65b0\u3002 \u83b7\u53d6access_token\u4e4b\u524d\u9700\u8981\u5148\u5728DM Hub\u8bbe\u7f6e \u5f00\u53d1\u4e0e\u96c6\u6210, \u4e2d\u521b\u5efa\u4e00\u4e2a\u5e94\u7528\uff08\u4ee5\u96c6\u6210\u6f14\u793a\u4e3a\u4f8b\uff09 \u5e94\u7528\u521b\u5efa\u597d\u540e\uff0c\u52fe\u9009\u5141\u8bb8\u5e94\u7528\u6240\u8bbf\u95ee\u63a5\u53e3\u7684\u6743\u9650\uff0c\u70b9\u51fb\u66f4\u65b0\u6309\u94ae\u3002 \u6bcf\u4e2a\u65b0\u521b\u5efa\u7684\u5e94\u7528\u90fd\u4f1a\u6709appid\u548csecret\u4e24\u4e2a\u6570\u636e\uff0c\u8fd9\u4e24\u4e2a\u6570\u636e\u76f8\u5f53\u4e8e\u7cfb\u7edf\u7684\u7528\u6237\u540d\u548c\u5bc6\u7801\uff0c\u5f00\u53d1\u4eba\u5458\u9700\u8981\u59a5\u5584\u4fdd\u5b58\u3002 \u96c6\u6210\u7cfb\u7edf\u53ef\u4ee5\u4f7f\u7528appid\u548csecret\u6765\u8c03\u7528/oauth/accesstoken\u63a5\u53e3\u6765\u83b7\u53d6access_token\u3002 \u6ce8\u610f\uff1a DM Hub\u7684\u6240\u6709\u63a5\u53e3\u90fd\u5fc5\u987b\u662f\u7528https\u534f\u8bae\u3002","title":"\u521b\u5efa\u96c6\u6210\u5e94\u7528"},{"location":"BudweiserDocument/","text":"\u8ba2\u5355\u63a5\u53e3 \u8ba2\u5355\u6a21\u578b \u5c5e\u6027 \u7c7b\u578b \u8bf4\u660e tid varchar \u8ba2\u5355\u7f16\u53f7 orderstatus varchar \u4ea4\u6613\u72b6\u6001 total_weight varchar \u8be5\u7b14\u4ea4\u6613\u4e2d\u6240\u6709\u5546\u54c1\u7684\u603b\u6570\u91cf receiver_address varchar \u6536\u8d27\u4eba\u8be6\u7ec6\u5730\u5740 trade_memo varchar \u4ea4\u6613\u7684\u5907\u6ce8\u5185\u5bb9 created datetime \u4ea4\u6613\u521b\u5efa\u65f6\u95f4 total_goods_fee varchar \u5546\u54c1\u603b\u989d\uff08\u4e0d\u5305\u62ec\u914d\u9001\u8d39\u7528 receiver_city varchar \u6536\u8d27\u4eba\u57ce\u5e02 pay_time datetime \u4ed8\u6b3e\u65f6\u95f4 shipping_fee varchar \u4ea4\u6613\u7269\u6d41\u914d\u9001\u8d39\u7528 receiver_mobile varchar \u6536\u8d27\u4eba\u7535\u8bdd receiver_name varchar \u6536\u8d27\u4eba\u59d3\u540d seller_uname varchar \u5356\u5bb6\u8d26\u53f7 total_trade_fee varchar \u4ea4\u6613\u5e94\u4ed8\u603b\u989d\uff08\u5305\u62ec\u5546\u54c1\u4ef7\u683c+\u914d\u9001\u8d39\u7528\uff09 receiver_state varchar \u6536\u8d27\u4eba\u7701\u4efd receiver_district varchar \u6536\u8d27\u4eba\u5730\u533a orders_number varchar \u5b50\u8ba2\u5355\u6570\u91cf buy_name varchar \u4e70\u5bb6\u4f1a\u5458\u540d buyer_account varchar \u4e70\u5bb6\u652f\u4ed8\u8d26\u53f7 \u5546\u54c1\u6a21\u578b \u5c5e\u6027 \u7c7b\u578b \u8bf4\u660e tid varchar \u8ba2\u5355\u7f16\u53f7 status varchar \u4ea4\u6613\u72b6\u6001 msgid varchar \u65fa\u5e97\u901a\u6570\u636e\u5e93\u7684\u4e3b\u952eid oid varchar \u5b50\u8ba2\u5355\u7f16\u53f7 iid varchar \u5546\u54c1id title varchar \u5546\u54c1\u540d\u79f0 refund_status varchar \u9000\u6b3e\u72b6\u6001 sale_price varchar \u9500\u552e\u5355\u4ef7 sku_properties varchar \u5546\u54c1\u540d\u79f0 bn varchar \u5546\u5bb6\u7f16\u7801 num varchar \u8d27\u54c1\u6570\u91cf price varchar \u539f\u4ef7 sku_id varchar \u89c4\u683c\u7f16\u7801 total_item_fee int \u5b50\u8ba2\u5355\u5b9e\u4ed8\u91d1\u989d \u8c03\u7528\u8bf7\u6c42 HTTP\u8bf7\u6c42\u65b9\u5f0f\uff1aPOST http://(\u751f\u4ea7\u73af\u5883ip)/pushData?customerid=BudweiserTmall POST\u8bf7\u6c42\u793a\u4f8b\uff1a { from_type : \u6dd8\u5b9d , msg_id : 149245 , data : { total_weight : 7.0000 , receiver_address : \u5929\u6daf\u9547\u4e09\u4e9a\u5929\u6daf\u6d77\u89d2\u6f2b\u4eab\u65f6\u5149\u6d77\u666f\u5ba2\u6808 , trade_memo : , created : 2017-04-21 13:52:40 , tid : AT201704210011 , status : TRADE_FINISHED , total_goods_fee : 18.0000 , receiver_city : 460200 , pay_time : 2017-04-21 13:52:40 , shipping_fee : 0.0000 , receiver_mobile : 15001253861 , receiver_name : \u5927\u6d77 , seller_uname : \u7eff\u5c9b , total_trade_fee : 18, receiver_state : 460000 , receiver_district : \u6d77\u5357\u7701 \u4e09\u4e9a\u5e02 , orders_number : 2 , payment_lists : { buy_name : \u5df4\u9ece\u65b0\u7586\u5b89\u5eb7 , buyer_account : }, orders : { iid : 5 , title : , oid : AD201704210025 , refund_status : 0 , orders_items : { sale_price : 0, sku_properties : , bn : 1HSD211-1-A1 , num : 1.0000 , price : 18.0000 , sku_id : sdfffds , total_item_fee : 0 } } } } \u53c2\u6570\u8bf4\u660e customerid\u4e3a\u63a8\u9001\u6570\u636e\u7684\u5ba2\u6237,\u53ea\u63a5\u53d7customerid\u4e3a BudweiserTmall - \u8bf7\u6c42\u4f53\u5185\u5b57\u6bb5\u7684\u610f\u4e49\u8bf7\u53c2\u8003\u5c5e\u6027\u6a21\u578b \u8fd4\u56de\u7ed3\u679c { flag : success , //\u6210\u529f success,\u5931\u8d25 error code : 0 , //success :0 ,error :1 message : // \u7a0b\u5e8f\u5904\u7406\u4fe1\u606f } \u9000\u6362\u8d27\u63a5\u53e3 \u9000\u6362\u8d27\u8ba2\u5355\u6a21\u578b \u5c5e\u6027 \u7c7b\u578b \u63cf\u8ff0 refund_id int \u9000\u6362\u5355\u4e3b\u952e refund_no varchar erp\u9000\u6362\u5355\u53f7 platform_id int \u5e73\u53f0\u7c7b\u578b\uff08\u6b64\u5904\u8fd4\u56de\u7684\u662fid\uff09 src_no varchar \u5e73\u53f0\u9000\u6b3e\u5355\u53f7 type int 1.\u9000\u6b3e(\u672a\u53d1\u8d27\uff0c\u9000\u6b3e\u7533\u8bf7) 2.\u9000\u8d27 3.\u6362\u8d27 4.\u9000\u6b3e\u4e0d\u9000\u8d27 5.\u8ba2\u5355\u8865\u6b3e process_statusYes int \u5904\u7406\u72b6\u6001 status int \u5e73\u53f0\u72b6\u6001 guarantee_mode int \u62c5\u4fdd\u65b9\u5f0f\uff1a1.\u62c5\u4fdd\u4ea4\u6613 2.\u975e\u62c5\u4fdd\u4ea4\u6613 3.\u975e\u62c5\u4fdd\u5728\u7ebf\u4ea4\u6613\uff08ecshop\uff09 cs_status int 1.\u9700\u8981\u5ba2\u670d\u4ecb\u5165 2.\u5ba2\u670d\u5df2\u7ecf\u4ecb\u5165 3.\u5ba2\u670d\u521d\u5ba1\u5b8c\u6210 4.\u5ba2\u670d\u4e3b\u7ba1\u590d\u5ba1\u5931\u8d255.\u5ba2\u670d\u5904\u7406\u5b8c\u6210 shop_no varchar \u5e97\u94fa\u7f16\u53f7 swap_trade_id decimal(19,4) \u6362\u8d27\u8ba2\u5355id pay_account varchar \u4e70\u5bb6\u652f\u4ed8\u5e10\u53f7 pay_no varchar \u652f\u4ed8\u8ba2\u5355\u53f7 goods_amount decimal(19,4) \u8d27\u54c1\u91d1\u989d refund_amount decimal(19,4) \u4e70\u5bb6\u7533\u8bf7\u9000\u6b3e\u91d1\u989d guarante_refund_amount decimal(19,4) \u5e73\u53f0\u9000\u6b3e\u91d1\u989d actual_refund_amount decimal(19,4) \u5b9e\u9645\u9000\u6b3e/\u6536\u6b3e\u91d1\u989d post_amount decimal(19,4) \u90ae\u8d39\u91d1\u989d other_amount decimal(19,4) \u5176\u5b83\u91d1\u989d paid decimal(19,4) \u5df2\u9000\u6b3e/\u5df2\u6536\u6b3e tid varchar \u8ba2\u5355\u7684\u539f\u59cb\u5355\u53f7 sales_trade_id int \u7cfb\u7edf\u8ba2\u5355ID sales_tid varchar \u7cfb\u7edf\u8ba2\u5355\u53f7 buyer_nick varchar \u6635\u79f0 receiver_name varchar \u9000\u6b3e\u8ba2\u5355\u4e2d\u6536\u4ef6\u4eba\u59d3\u540d receiver_address varchar \u9000\u6b3e\u8ba2\u5355\u4e2d\u6536\u4ef6\u4eba\u5730\u5740 receiver_telno varchar \u9000\u6b3e\u8ba2\u5355\u4e2d\u6536\u4ef6\u4eba\u7535\u8bdd return_name varchar \u9000\u8d27\u4eba\u59d3\u540d return_mobile varchar \u9000\u8d27\u4eba\u624b\u673a\u53f7 return_telno varchar \u9000\u8d27\u4eba\u7535\u8bdd return_address varchar \u9000\u56de\u4ed3\u5e93\u5730\u5740 swap_receiver varchar \u6362\u8d27\u6536\u4ef6\u4eba\u59d3\u540d swap_mobile varchar \u6362\u6536\u53d1\u4ef6\u4eba\u59d3\u540d\u624b\u673a swap_telno varchar \u6362\u8d27\u6536\u4ef6\u4eba\u59d3\u540d\u7535\u8bdd swap_province varchar \u6362\u8d27\u6536\u4ef6\u4eba\u7701\u4efd swap_city varchar \u6362\u8d27\u6536\u4ef6\u4eba\u57ce\u5e02 swap_district varchar \u6362\u8d27\u6536\u4ef6\u4eba\u533a\u53bf swap_area varchar \u6362\u8d27\u6536\u4ef6\u4eba\u7701\u5e02\u533a swap_warehouse_no varchar \u6362\u51fa\u8d27\u54c1\u51fa\u5e93\u4ed3\u5e93\u7f16\u53f7 swap_address varchar \u6362\u8d27\u6536\u4ef6\u4eba\u59d3\u540d\u5730\u5740 warehouse_no varchar \u671f\u671b\u9000\u56de\u7684\u4ed3\u5e93\u7f16\u53f7 refund_time date \u9000\u6b3e\u521b\u5efa\u65f6\u95f4 remark varchar \u9000\u6b3e\u8bf4\u660e modified date \u6700\u540e\u4fee\u6539\u65f6\u95f4 return_logistics_name varchar return_logistics_no varchar direct_refund_amount varchar shop_name varchar customer_no varchar customer_name varchar swap_zip varchar swap_logistics_no varchar swap_logistics_typeswap_logistics_name varchar creator_name varchar exchange_amount decimal(19,4) created date \u9000\u8d27\u5546\u54c1\u6a21\u578b \u5b57\u6bb5\u540d\u79f0 \u7c7b\u578b \u63cf\u8ff0 order_id int erp\u5b50\u8ba2\u5355\u4e3b\u952e refund_id int \u9000\u6362\u5355\u4e3b\u952e oid int \u539f\u59cb\u5b50\u8ba2\u5355id tid varchar \u8ba2\u5355\u5b50\u8ba2\u5355\u7684\u539f\u59cb\u5355\u53f7 process_status int \u5904\u7406\u72b6\u6001 sales_tid varchar \u9500\u552e\u8ba2\u5355\u7f16\u53f7 order_num decimal(19,4) \u5b9e\u9645\u6570\u91cf price decimal(19,4) \u4ef7\u683c original_price decimal(19,4) \u539f\u4ef7 discount decimal(19,4) \u4f18\u60e0 paid decimal(19,4) \u5df2\u4ed8\u91d1\u989d refund_num decimal(19,4) \u9000\u6b3e\u6570\u91cf total_amount decimal(19,4) \u9000\u6b3e\u603b\u91d1\u989d spec_id int erp\u5546\u54c1\u4e3b\u952e spec_no varchar \u5546\u5bb6\u7f16\u7801 goods_name varchar \u8d27\u54c1\u540d\u79f0 spec_name varchar \u89c4\u683c\u540d\u79f0 suite_no varchar \u7ec4\u5408\u88c5\u7f16\u53f7 suite_name varchar \u7ec4\u5408\u88c5\u540d\u79f0 suite_num decimal(19,4) \u7ec4\u5408\u88c5\u6570\u91cf stockin_num decimal(19,4) \u9000\u8d27\u5165\u5e93\u6570\u91cf remark varchar \u9000\u6b3e\u8bf4\u660e market_price varchar spec_code varchar goods_no varchar cost_price decimal(19,4) \u6362\u8d27\u5546\u54c1\u6a21\u578b \u5b57\u6bb5\u540d\u79f0 \u7c7b\u578b \u63cf\u8ff0 rec_id int \u4e3b\u952eid refund_id int \u9000\u6362\u5355\u4e3b\u952eid target_type int \u5546\u54c1\u7c7b\u578b 1.\u8868\u793a\u5355\u54c1 2.\u8868\u793a\u7ec4\u5408\u88c5 target_id varchar \u5546\u54c1id goods_name varchar \u5546\u54c1\u540d\u79f0 spec_name varchar \u89c4\u683c\u540d\u79f0 merchant_no varchar \u5546\u5bb6\u7f16\u7801 retail_price decimal(19,4) \u96f6\u552e\u4ef7 num decimal(19,4) \u6570\u91cf remark varchar \u5907\u6ce8 \u8c03\u7528\u8bf7\u6c42 HTTP\u8bf7\u6c42\u65b9\u5f0f\uff1aPOST http://(\u751f\u4ea7\u73af\u5883ip)/pushReturngoods?app_key=24647807 POST\u8bf7\u6c42\u793a\u4f8b\uff1a { data : { refunds : [ { shop_no : api_test , warehouse_no : 0 , exchange_amount : 0.0000 , remark : 0 , receiver_address : \u4e0a\u6d77 \u4e0a\u6d77\u5e02 \u5f90\u6c47\u533a \u5b9c\u5c71\u8def1289\u4e8c\u697c\u524d\u53f0 , type : 2 , return_logistics_name : \u5706\u901a\u901f\u9012 , pay_account : 1 , platform_id : 127 , swap_zip : 0 , created : 2017-12-07 13:29:44 , actual_refund_amount : 0 , return_mobile : 18900890089 , tid : 1712051519002014 , refund_amount : 0.0000 , receiver_telno : 323232 , cs_status : 0 , swap_logistics_name : 0 , refund_out_goods_list : [ { refund_id : 1 , num : 2.0000 , merchant_no : test001 , remark : 2 , goods_name : \u6d4b\u8bd5\u5546\u54c1\u7528\u4f8b1 , retail_price : 10.0000 , target_type : 1 , spec_name : \u9ed8\u8ba4\u89c4\u683c , target_id : 1 , rec_id : 1 } ], status : 5 , customer_name : \u6d4b\u8bd5c , swap_address : 0 , customer_no : KH201712050001 , receiver_name : \u6d4b\u8bd5c , src_no : 0 , modified : 2017-12-07 13:29:44 , buyer_nick : \u6d4b\u8bd5c , swap_logistics_no : 0 , sales_trade_id : 20990 , swap_telno : 1 , return_name : \u6d4b\u8bd5c , refund_order_list : [ { suite_no : 232 , refund_num : 1.0000 , goods_no : lztestyj001 , remark : 2 , original_price : 0.0000 , suite_name : 4343 , suite_num : 0.0000 , spec_code : 4 , goods_name : ERP\u666e\u901a\u6d4b\u8bd5\u5546\u54c10001 , order_id : 1044 , paid : 0.0000 , order_num : 1.0000 , oid : 1001767 , process_status : 0 , tid : 1712051519002014 , refund_id : 884 , total_amount : 0.0000 , refund_order_amount : 0.0000 , cost_price : 0.0000 , spec_id : 2 , stockin_num : 1.0000 , discount : 0.0000 , spec_name : \u9ed8\u8ba4\u89c4\u683c , price : 0.0000 , market_price : 0.0000 , spec_no : 2323 } ], creator_name : 0 , pay_no : 123 , guarante_refund_amount : 0 , refund_no : TK1712070002 , guarantee_mode : 2 , swap_province : 0 , post_amount : 0.0000 , goods_amount : 0.0000 , paid : 0.0000 , other_amount : 0.0000 , sales_tid : JY201712050001 , swap_receiver : 1 , process_status : 90 , refund_id : 884 , swap_mobile : 1 , return_address : \u70ed\u70ed , refund_time : 0 , return_telno : 3232 , swap_area : 0 , return_logistics_no : 0 , swap_trade_id : 0 , shop_name : API\u516c\u5171\u6d4b\u8bd5 , swap_city : 0 , swap_logistics_type : 0 , direct_refund_amount : 0 , swap_district : 0 } ] } } \u53c2\u6570\u8bf4\u660e \"refund_order_list\"\uff1a\u6b64\u8282\u70b9\u4e3a\u9000\u56de\u8d27\u54c1\u8be6\u60c5\u4fe1\u606f\u3002 \"refund_out_goods_list\"\uff1a\u6b64\u8282\u70b9\u4e3a\u6362\u51fa\u8d27\u54c1\u8be6\u60c5\u4fe1\u606f\u3002 \u5982\u679c\u53ea\u9000\u8d27\uff0c\u90a3\u4e48refund_out_goods_list \u7684\u503c\u8bbe\u7f6e\u4e3anull\u5373\u53ef \u5982\u679c\u6362\u8d27\u4e1a\u52a1\uff0c\u6bd4\u5982\u7528A\u6362B\uff0c\u90a3\u4e48refund_order_list\u4e3a\u8d27\u54c1A\u7684\u8be6\u60c5\u4fe1\u606f\uff0crefund_out_goods_list\u4e3a\u8d27\u54c1B\u7684\u8be6\u60c5\u4fe1\u606f\u3002 \u8bf7\u6c42\u4f53\u5185\u5b57\u6bb5\u7684\u610f\u4e49\u8bf7\u53c2\u89c1\u8bbe\u8ba1\u6a21\u578b \u8fd4\u56de\u7ed3\u679c { returnflag : success , //\u5904\u7406\u6210\u529f:success ,\u5931\u8d25:error returncode : 0 , //success :0 error:1 returnmessage : //\u6210\u529f\u4e3a\u7a7a,\u5931\u8d25\u4e3a\u5f02\u5e38\u4fe1\u606f }","title":"Home"},{"location":"BudweiserDocument/#_1","text":"","title":"\u8ba2\u5355\u63a5\u53e3"},{"location":"BudweiserDocument/#_2","text":"\u5c5e\u6027 \u7c7b\u578b \u8bf4\u660e tid varchar \u8ba2\u5355\u7f16\u53f7 orderstatus varchar \u4ea4\u6613\u72b6\u6001 total_weight varchar \u8be5\u7b14\u4ea4\u6613\u4e2d\u6240\u6709\u5546\u54c1\u7684\u603b\u6570\u91cf receiver_address varchar \u6536\u8d27\u4eba\u8be6\u7ec6\u5730\u5740 trade_memo varchar \u4ea4\u6613\u7684\u5907\u6ce8\u5185\u5bb9 created datetime \u4ea4\u6613\u521b\u5efa\u65f6\u95f4 total_goods_fee varchar \u5546\u54c1\u603b\u989d\uff08\u4e0d\u5305\u62ec\u914d\u9001\u8d39\u7528 receiver_city varchar \u6536\u8d27\u4eba\u57ce\u5e02 pay_time datetime \u4ed8\u6b3e\u65f6\u95f4 shipping_fee varchar \u4ea4\u6613\u7269\u6d41\u914d\u9001\u8d39\u7528 receiver_mobile varchar \u6536\u8d27\u4eba\u7535\u8bdd receiver_name varchar \u6536\u8d27\u4eba\u59d3\u540d seller_uname varchar \u5356\u5bb6\u8d26\u53f7 total_trade_fee varchar \u4ea4\u6613\u5e94\u4ed8\u603b\u989d\uff08\u5305\u62ec\u5546\u54c1\u4ef7\u683c+\u914d\u9001\u8d39\u7528\uff09 receiver_state varchar \u6536\u8d27\u4eba\u7701\u4efd receiver_district varchar \u6536\u8d27\u4eba\u5730\u533a orders_number varchar \u5b50\u8ba2\u5355\u6570\u91cf buy_name varchar \u4e70\u5bb6\u4f1a\u5458\u540d buyer_account varchar \u4e70\u5bb6\u652f\u4ed8\u8d26\u53f7","title":"\u8ba2\u5355\u6a21\u578b"},{"location":"BudweiserDocument/#_3","text":"\u5c5e\u6027 \u7c7b\u578b \u8bf4\u660e tid varchar \u8ba2\u5355\u7f16\u53f7 status varchar \u4ea4\u6613\u72b6\u6001 msgid varchar \u65fa\u5e97\u901a\u6570\u636e\u5e93\u7684\u4e3b\u952eid oid varchar \u5b50\u8ba2\u5355\u7f16\u53f7 iid varchar \u5546\u54c1id title varchar \u5546\u54c1\u540d\u79f0 refund_status varchar \u9000\u6b3e\u72b6\u6001 sale_price varchar \u9500\u552e\u5355\u4ef7 sku_properties varchar \u5546\u54c1\u540d\u79f0 bn varchar \u5546\u5bb6\u7f16\u7801 num varchar \u8d27\u54c1\u6570\u91cf price varchar \u539f\u4ef7 sku_id varchar \u89c4\u683c\u7f16\u7801 total_item_fee int \u5b50\u8ba2\u5355\u5b9e\u4ed8\u91d1\u989d \u8c03\u7528\u8bf7\u6c42 HTTP\u8bf7\u6c42\u65b9\u5f0f\uff1aPOST http://(\u751f\u4ea7\u73af\u5883ip)/pushData?customerid=BudweiserTmall POST\u8bf7\u6c42\u793a\u4f8b\uff1a { from_type : \u6dd8\u5b9d , msg_id : 149245 , data : { total_weight : 7.0000 , receiver_address : \u5929\u6daf\u9547\u4e09\u4e9a\u5929\u6daf\u6d77\u89d2\u6f2b\u4eab\u65f6\u5149\u6d77\u666f\u5ba2\u6808 , trade_memo : , created : 2017-04-21 13:52:40 , tid : AT201704210011 , status : TRADE_FINISHED , total_goods_fee : 18.0000 , receiver_city : 460200 , pay_time : 2017-04-21 13:52:40 , shipping_fee : 0.0000 , receiver_mobile : 15001253861 , receiver_name : \u5927\u6d77 , seller_uname : \u7eff\u5c9b , total_trade_fee : 18, receiver_state : 460000 , receiver_district : \u6d77\u5357\u7701 \u4e09\u4e9a\u5e02 , orders_number : 2 , payment_lists : { buy_name : \u5df4\u9ece\u65b0\u7586\u5b89\u5eb7 , buyer_account : }, orders : { iid : 5 , title : , oid : AD201704210025 , refund_status : 0 , orders_items : { sale_price : 0, sku_properties : , bn : 1HSD211-1-A1 , num : 1.0000 , price : 18.0000 , sku_id : sdfffds , total_item_fee : 0 } } } } \u53c2\u6570\u8bf4\u660e customerid\u4e3a\u63a8\u9001\u6570\u636e\u7684\u5ba2\u6237,\u53ea\u63a5\u53d7customerid\u4e3a BudweiserTmall - \u8bf7\u6c42\u4f53\u5185\u5b57\u6bb5\u7684\u610f\u4e49\u8bf7\u53c2\u8003\u5c5e\u6027\u6a21\u578b \u8fd4\u56de\u7ed3\u679c { flag : success , //\u6210\u529f success,\u5931\u8d25 error code : 0 , //success :0 ,error :1 message : // \u7a0b\u5e8f\u5904\u7406\u4fe1\u606f }","title":"\u5546\u54c1\u6a21\u578b"},{"location":"BudweiserDocument/#_4","text":"","title":"\u9000\u6362\u8d27\u63a5\u53e3"},{"location":"BudweiserDocument/#_5","text":"\u5c5e\u6027 \u7c7b\u578b \u63cf\u8ff0 refund_id int \u9000\u6362\u5355\u4e3b\u952e refund_no varchar erp\u9000\u6362\u5355\u53f7 platform_id int \u5e73\u53f0\u7c7b\u578b\uff08\u6b64\u5904\u8fd4\u56de\u7684\u662fid\uff09 src_no varchar \u5e73\u53f0\u9000\u6b3e\u5355\u53f7 type int 1.\u9000\u6b3e(\u672a\u53d1\u8d27\uff0c\u9000\u6b3e\u7533\u8bf7) 2.\u9000\u8d27 3.\u6362\u8d27 4.\u9000\u6b3e\u4e0d\u9000\u8d27 5.\u8ba2\u5355\u8865\u6b3e process_statusYes int \u5904\u7406\u72b6\u6001 status int \u5e73\u53f0\u72b6\u6001 guarantee_mode int \u62c5\u4fdd\u65b9\u5f0f\uff1a1.\u62c5\u4fdd\u4ea4\u6613 2.\u975e\u62c5\u4fdd\u4ea4\u6613 3.\u975e\u62c5\u4fdd\u5728\u7ebf\u4ea4\u6613\uff08ecshop\uff09 cs_status int 1.\u9700\u8981\u5ba2\u670d\u4ecb\u5165 2.\u5ba2\u670d\u5df2\u7ecf\u4ecb\u5165 3.\u5ba2\u670d\u521d\u5ba1\u5b8c\u6210 4.\u5ba2\u670d\u4e3b\u7ba1\u590d\u5ba1\u5931\u8d255.\u5ba2\u670d\u5904\u7406\u5b8c\u6210 shop_no varchar \u5e97\u94fa\u7f16\u53f7 swap_trade_id decimal(19,4) \u6362\u8d27\u8ba2\u5355id pay_account varchar \u4e70\u5bb6\u652f\u4ed8\u5e10\u53f7 pay_no varchar \u652f\u4ed8\u8ba2\u5355\u53f7 goods_amount decimal(19,4) \u8d27\u54c1\u91d1\u989d refund_amount decimal(19,4) \u4e70\u5bb6\u7533\u8bf7\u9000\u6b3e\u91d1\u989d guarante_refund_amount decimal(19,4) \u5e73\u53f0\u9000\u6b3e\u91d1\u989d actual_refund_amount decimal(19,4) \u5b9e\u9645\u9000\u6b3e/\u6536\u6b3e\u91d1\u989d post_amount decimal(19,4) \u90ae\u8d39\u91d1\u989d other_amount decimal(19,4) \u5176\u5b83\u91d1\u989d paid decimal(19,4) \u5df2\u9000\u6b3e/\u5df2\u6536\u6b3e tid varchar \u8ba2\u5355\u7684\u539f\u59cb\u5355\u53f7 sales_trade_id int \u7cfb\u7edf\u8ba2\u5355ID sales_tid varchar \u7cfb\u7edf\u8ba2\u5355\u53f7 buyer_nick varchar \u6635\u79f0 receiver_name varchar \u9000\u6b3e\u8ba2\u5355\u4e2d\u6536\u4ef6\u4eba\u59d3\u540d receiver_address varchar \u9000\u6b3e\u8ba2\u5355\u4e2d\u6536\u4ef6\u4eba\u5730\u5740 receiver_telno varchar \u9000\u6b3e\u8ba2\u5355\u4e2d\u6536\u4ef6\u4eba\u7535\u8bdd return_name varchar \u9000\u8d27\u4eba\u59d3\u540d return_mobile varchar \u9000\u8d27\u4eba\u624b\u673a\u53f7 return_telno varchar \u9000\u8d27\u4eba\u7535\u8bdd return_address varchar \u9000\u56de\u4ed3\u5e93\u5730\u5740 swap_receiver varchar \u6362\u8d27\u6536\u4ef6\u4eba\u59d3\u540d swap_mobile varchar \u6362\u6536\u53d1\u4ef6\u4eba\u59d3\u540d\u624b\u673a swap_telno varchar \u6362\u8d27\u6536\u4ef6\u4eba\u59d3\u540d\u7535\u8bdd swap_province varchar \u6362\u8d27\u6536\u4ef6\u4eba\u7701\u4efd swap_city varchar \u6362\u8d27\u6536\u4ef6\u4eba\u57ce\u5e02 swap_district varchar \u6362\u8d27\u6536\u4ef6\u4eba\u533a\u53bf swap_area varchar \u6362\u8d27\u6536\u4ef6\u4eba\u7701\u5e02\u533a swap_warehouse_no varchar \u6362\u51fa\u8d27\u54c1\u51fa\u5e93\u4ed3\u5e93\u7f16\u53f7 swap_address varchar \u6362\u8d27\u6536\u4ef6\u4eba\u59d3\u540d\u5730\u5740 warehouse_no varchar \u671f\u671b\u9000\u56de\u7684\u4ed3\u5e93\u7f16\u53f7 refund_time date \u9000\u6b3e\u521b\u5efa\u65f6\u95f4 remark varchar \u9000\u6b3e\u8bf4\u660e modified date \u6700\u540e\u4fee\u6539\u65f6\u95f4 return_logistics_name varchar return_logistics_no varchar direct_refund_amount varchar shop_name varchar customer_no varchar customer_name varchar swap_zip varchar swap_logistics_no varchar swap_logistics_typeswap_logistics_name varchar creator_name varchar exchange_amount decimal(19,4) created date","title":"\u9000\u6362\u8d27\u8ba2\u5355\u6a21\u578b"},{"location":"BudweiserDocument/#_6","text":"\u5b57\u6bb5\u540d\u79f0 \u7c7b\u578b \u63cf\u8ff0 order_id int erp\u5b50\u8ba2\u5355\u4e3b\u952e refund_id int \u9000\u6362\u5355\u4e3b\u952e oid int \u539f\u59cb\u5b50\u8ba2\u5355id tid varchar \u8ba2\u5355\u5b50\u8ba2\u5355\u7684\u539f\u59cb\u5355\u53f7 process_status int \u5904\u7406\u72b6\u6001 sales_tid varchar \u9500\u552e\u8ba2\u5355\u7f16\u53f7 order_num decimal(19,4) \u5b9e\u9645\u6570\u91cf price decimal(19,4) \u4ef7\u683c original_price decimal(19,4) \u539f\u4ef7 discount decimal(19,4) \u4f18\u60e0 paid decimal(19,4) \u5df2\u4ed8\u91d1\u989d refund_num decimal(19,4) \u9000\u6b3e\u6570\u91cf total_amount decimal(19,4) \u9000\u6b3e\u603b\u91d1\u989d spec_id int erp\u5546\u54c1\u4e3b\u952e spec_no varchar \u5546\u5bb6\u7f16\u7801 goods_name varchar \u8d27\u54c1\u540d\u79f0 spec_name varchar \u89c4\u683c\u540d\u79f0 suite_no varchar \u7ec4\u5408\u88c5\u7f16\u53f7 suite_name varchar \u7ec4\u5408\u88c5\u540d\u79f0 suite_num decimal(19,4) \u7ec4\u5408\u88c5\u6570\u91cf stockin_num decimal(19,4) \u9000\u8d27\u5165\u5e93\u6570\u91cf remark varchar \u9000\u6b3e\u8bf4\u660e market_price varchar spec_code varchar goods_no varchar cost_price decimal(19,4)","title":"\u9000\u8d27\u5546\u54c1\u6a21\u578b"},{"location":"BudweiserDocument/#_7","text":"\u5b57\u6bb5\u540d\u79f0 \u7c7b\u578b \u63cf\u8ff0 rec_id int \u4e3b\u952eid refund_id int \u9000\u6362\u5355\u4e3b\u952eid target_type int \u5546\u54c1\u7c7b\u578b 1.\u8868\u793a\u5355\u54c1 2.\u8868\u793a\u7ec4\u5408\u88c5 target_id varchar \u5546\u54c1id goods_name varchar \u5546\u54c1\u540d\u79f0 spec_name varchar \u89c4\u683c\u540d\u79f0 merchant_no varchar \u5546\u5bb6\u7f16\u7801 retail_price decimal(19,4) \u96f6\u552e\u4ef7 num decimal(19,4) \u6570\u91cf remark varchar \u5907\u6ce8 \u8c03\u7528\u8bf7\u6c42 HTTP\u8bf7\u6c42\u65b9\u5f0f\uff1aPOST http://(\u751f\u4ea7\u73af\u5883ip)/pushReturngoods?app_key=24647807 POST\u8bf7\u6c42\u793a\u4f8b\uff1a { data : { refunds : [ { shop_no : api_test , warehouse_no : 0 , exchange_amount : 0.0000 , remark : 0 , receiver_address : \u4e0a\u6d77 \u4e0a\u6d77\u5e02 \u5f90\u6c47\u533a \u5b9c\u5c71\u8def1289\u4e8c\u697c\u524d\u53f0 , type : 2 , return_logistics_name : \u5706\u901a\u901f\u9012 , pay_account : 1 , platform_id : 127 , swap_zip : 0 , created : 2017-12-07 13:29:44 , actual_refund_amount : 0 , return_mobile : 18900890089 , tid : 1712051519002014 , refund_amount : 0.0000 , receiver_telno : 323232 , cs_status : 0 , swap_logistics_name : 0 , refund_out_goods_list : [ { refund_id : 1 , num : 2.0000 , merchant_no : test001 , remark : 2 , goods_name : \u6d4b\u8bd5\u5546\u54c1\u7528\u4f8b1 , retail_price : 10.0000 , target_type : 1 , spec_name : \u9ed8\u8ba4\u89c4\u683c , target_id : 1 , rec_id : 1 } ], status : 5 , customer_name : \u6d4b\u8bd5c , swap_address : 0 , customer_no : KH201712050001 , receiver_name : \u6d4b\u8bd5c , src_no : 0 , modified : 2017-12-07 13:29:44 , buyer_nick : \u6d4b\u8bd5c , swap_logistics_no : 0 , sales_trade_id : 20990 , swap_telno : 1 , return_name : \u6d4b\u8bd5c , refund_order_list : [ { suite_no : 232 , refund_num : 1.0000 , goods_no : lztestyj001 , remark : 2 , original_price : 0.0000 , suite_name : 4343 , suite_num : 0.0000 , spec_code : 4 , goods_name : ERP\u666e\u901a\u6d4b\u8bd5\u5546\u54c10001 , order_id : 1044 , paid : 0.0000 , order_num : 1.0000 , oid : 1001767 , process_status : 0 , tid : 1712051519002014 , refund_id : 884 , total_amount : 0.0000 , refund_order_amount : 0.0000 , cost_price : 0.0000 , spec_id : 2 , stockin_num : 1.0000 , discount : 0.0000 , spec_name : \u9ed8\u8ba4\u89c4\u683c , price : 0.0000 , market_price : 0.0000 , spec_no : 2323 } ], creator_name : 0 , pay_no : 123 , guarante_refund_amount : 0 , refund_no : TK1712070002 , guarantee_mode : 2 , swap_province : 0 , post_amount : 0.0000 , goods_amount : 0.0000 , paid : 0.0000 , other_amount : 0.0000 , sales_tid : JY201712050001 , swap_receiver : 1 , process_status : 90 , refund_id : 884 , swap_mobile : 1 , return_address : \u70ed\u70ed , refund_time : 0 , return_telno : 3232 , swap_area : 0 , return_logistics_no : 0 , swap_trade_id : 0 , shop_name : API\u516c\u5171\u6d4b\u8bd5 , swap_city : 0 , swap_logistics_type : 0 , direct_refund_amount : 0 , swap_district : 0 } ] } } \u53c2\u6570\u8bf4\u660e \"refund_order_list\"\uff1a\u6b64\u8282\u70b9\u4e3a\u9000\u56de\u8d27\u54c1\u8be6\u60c5\u4fe1\u606f\u3002 \"refund_out_goods_list\"\uff1a\u6b64\u8282\u70b9\u4e3a\u6362\u51fa\u8d27\u54c1\u8be6\u60c5\u4fe1\u606f\u3002 \u5982\u679c\u53ea\u9000\u8d27\uff0c\u90a3\u4e48refund_out_goods_list \u7684\u503c\u8bbe\u7f6e\u4e3anull\u5373\u53ef \u5982\u679c\u6362\u8d27\u4e1a\u52a1\uff0c\u6bd4\u5982\u7528A\u6362B\uff0c\u90a3\u4e48refund_order_list\u4e3a\u8d27\u54c1A\u7684\u8be6\u60c5\u4fe1\u606f\uff0crefund_out_goods_list\u4e3a\u8d27\u54c1B\u7684\u8be6\u60c5\u4fe1\u606f\u3002 \u8bf7\u6c42\u4f53\u5185\u5b57\u6bb5\u7684\u610f\u4e49\u8bf7\u53c2\u89c1\u8bbe\u8ba1\u6a21\u578b \u8fd4\u56de\u7ed3\u679c { returnflag : success , //\u5904\u7406\u6210\u529f:success ,\u5931\u8d25:error returncode : 0 , //success :0 error:1 returnmessage : //\u6210\u529f\u4e3a\u7a7a,\u5931\u8d25\u4e3a\u5f02\u5e38\u4fe1\u606f }","title":"\u6362\u8d27\u5546\u54c1\u6a21\u578b"},{"location":"api/accesstoken/","text":"\u83b7\u53d6access_token \u901a\u8fc7appid\u548cappsecret\u83b7\u53d6access token, \u5e76\u7528\u4e8e\u5176\u5b83\u529f\u80fd\u6027API\u7684\u8bf7\u6c42\u3002 \u8c03\u7528\u8bf7\u6c42 HTTP\u8bf7\u6c42\u65b9\u5f0f: GET https://api.convertlab.com/security/accesstoken?grant_type=client_credentials appid={appid} secret={secret} \u53c2\u6570\u8bf4\u660e \u53c2\u6570 \u662f\u5426\u5fc5\u586b \u8bf4\u660e grant_type \u662f \u5fc5\u987b\u662fclient_credential appid \u662f \u5728\u4e0a\u4e00\u6b65\u4e2d\u521b\u5efa\u7684\u5e94\u7528\u7684appid secret \u662f \u5728\u4e0a\u4e00\u6b65\u4e2d\u521b\u5efa\u7684\u5e94\u7528\u7684secret \u8fd4\u56de\u8bf4\u660e { error_code : 0, access_token : 47c010ea********d30db952ac , expires_in : 7200 } \u8fd4\u56de\u5b57\u6bb5\u8bf4\u660e \u5b57\u6bb5 \u8bf4\u660e access_token \u83b7\u53d6\u5230\u7684API\u8c03\u7528\u51ed\u8bc1 expires_in \u51ed\u8bc1\u6709\u6548\u65f6\u95f4\uff0c\u5355\u4f4d\uff1a\u79d2 error_code \u9519\u8bef\u7801\uff0c0\u8868\u793a\u8fd4\u56de\u6b63\u5e38 \u6ce8\u610f : \u8bb0\u4f4faccess_token\u7559\u5907\u540e\u7528\u3002","title":"\u83b7\u53d6ACCESS_TOKEN"},{"location":"api/accesstoken/#access_token","text":"\u901a\u8fc7appid\u548cappsecret\u83b7\u53d6access token, \u5e76\u7528\u4e8e\u5176\u5b83\u529f\u80fd\u6027API\u7684\u8bf7\u6c42\u3002 \u8c03\u7528\u8bf7\u6c42 HTTP\u8bf7\u6c42\u65b9\u5f0f: GET https://api.convertlab.com/security/accesstoken?grant_type=client_credentials appid={appid} secret={secret} \u53c2\u6570\u8bf4\u660e \u53c2\u6570 \u662f\u5426\u5fc5\u586b \u8bf4\u660e grant_type \u662f \u5fc5\u987b\u662fclient_credential appid \u662f \u5728\u4e0a\u4e00\u6b65\u4e2d\u521b\u5efa\u7684\u5e94\u7528\u7684appid secret \u662f \u5728\u4e0a\u4e00\u6b65\u4e2d\u521b\u5efa\u7684\u5e94\u7528\u7684secret \u8fd4\u56de\u8bf4\u660e { error_code : 0, access_token : 47c010ea********d30db952ac , expires_in : 7200 } \u8fd4\u56de\u5b57\u6bb5\u8bf4\u660e \u5b57\u6bb5 \u8bf4\u660e access_token \u83b7\u53d6\u5230\u7684API\u8c03\u7528\u51ed\u8bc1 expires_in \u51ed\u8bc1\u6709\u6548\u65f6\u95f4\uff0c\u5355\u4f4d\uff1a\u79d2 error_code \u9519\u8bef\u7801\uff0c0\u8868\u793a\u8fd4\u56de\u6b63\u5e38 \u6ce8\u610f : \u8bb0\u4f4faccess_token\u7559\u5907\u540e\u7528\u3002","title":"\u83b7\u53d6access_token"},{"location":"api/create/","text":"\u6ce8\u610f : DM Hub API\u53ea\u652f\u6301TLSv1.2\u53ca\u4ee5\u4e0a\u534f\u8bae\uff0c\u5728\u5c1d\u8bd5\u8fde\u63a5DM Hub API\u53d1\u751f\u8fde\u63a5\u95ee\u9898\u4e4b\u540e\uff0c\u8bf7\u786e\u8ba4\u4f7f\u7528\u7684\u534f\u8bae\u4e3aTLSv1.2\u3002 \u767b\u5f55DM Hub\u7cfb\u7edf\uff0c\u70b9\u51fb\u83dc\u5355 \u8bbe\u7f6e \u5f00\u53d1\u4e0e\u96c6\u6210 \uff0c \u70b9\u51fb \u65b0\u5efa \uff0c\u521b\u5efa\u4e00\u4e2a\u5e94\u7528\u3002 \u4fdd\u5b58\u4e4b\u540e\uff0c\u9009\u62e9\u6240\u9700\u6743\u9650\uff0c\u70b9\u51fb\u66f4\u65b0\u3002\u8bb0\u4f4f appid \u548c secret \u7559\u5907\u540e\u7528\u3002","title":"Create"},{"location":"api/customer/","text":"\u5ba2\u6237\u6a21\u578b DM Hub\u4e3a\u5ba2\u6237\u5185\u7f6e\u4e00\u4e9b\u6bd4\u8f83\u901a\u7528\u7684\u5ba2\u6237\u5c5e\u6027\uff0c\u8fd9\u4e9b\u5c5e\u6027\u7684\u540d\u79f0\u548c\u7c7b\u578b\u5982\u4e0b\u8868\u6240\u793a\uff1a \u5c5e\u6027 \u754c\u9762\u663e\u793a\u540d\u79f0 \u7c7b\u578b \u8bf4\u660e id \u5ba2\u6237ID Long \u53ea\u8bfb\u5b57\u6bb5 displayName \u663e\u793a\u540d String \u53ea\u8bfb\u5b57\u6bb5\u3002\u5982\u679cname\u4e0d\u4e3a\u7a7a\uff0c\u7b49\u4e8ename\u7684\u503c\uff0c\u5426\u5219\u7b49\u4e8enickName\u7684\u503c name \u59d3\u540d String img \u7528\u6237\u5934\u50cf String \u5934\u50cf\u5730\u5740URL gender \u6027\u522b Integer 0\u548c\u7a7a\u4ee3\u8868\u672a\u77e5\uff0c1\u4ee3\u8868\u7537\uff0c2\u4ee3\u8868\u5973 mobile \u624b\u673a\u53f7\u7801 String mobileVerified \u624b\u673a\u53f7\u7801\u662f\u5426\u9a8c\u8bc1 Boolean \u503c\u4e3atrue\u6216false email \u90ae\u7bb1 String emailVerified \u90ae\u7bb1\u662f\u5426\u9a8c\u8bc1 Boolean \u503c\u4e3atrue\u6216false birthday \u751f\u65e5 String \u683c\u5f0f\u4e3a: wechat \u5fae\u4fe1\u53f7 String nickName \u5fae\u4fe1\u6635\u79f0 String country \u56fd\u5bb6 String province \u7701\u4efd String city \u57ce\u5e02 String county \u533a/\u53bf String homeAddress \u5bb6\u5ead\u5730\u5740 String \u6700\u957f512\u4e2a\u5b57\u7b26 officeAddress \u516c\u53f8\u5730\u5740 String \u6700\u957f512\u4e2a\u5b57\u7b26 qq QQ String weibo \u5fae\u535a String stage \u5f53\u524d\u9636\u6bb5 String dateJoin \u521b\u5efa\u65f6\u95f4 String \u683c\u5f0f\u4e3a:\u201c2017-06-01T12:12:12Z\u201d \u4e3aUTC\u65f6\u95f4 \u5bf9\u4e8e\u5fae\u4fe1\u7c89\u4e1d\uff0c\u8fd9\u4e2a\u5b57\u6bb5\u8bb0\u5f55\u5176\u5173\u6ce8\u5fae\u4fe1\u7684\u65f6\u95f4\u3002 source \u521d\u59cb\u6765\u6e90 String contentName \u521d\u59cb\u6765\u6e90\u5185\u5bb9 String company \u516c\u53f8 String title \u804c\u4f4d String industry \u516c\u53f8\u884c\u4e1a String employeeNumber \u516c\u53f8\u5458\u5de5\u6570 Integer annualRevenue \u516c\u53f8\u5e74\u6536\u5165 BigDecimal website \u516c\u53f8\u7f51\u7ad9 String telephone \u5ea7\u673a String isEmployee \u662f\u5426\u672c\u516c\u53f8\u5458\u5de5 Boolean campaignId \u8425\u9500\u6d3b\u52a8ID String campaignName \u8425\u9500\u6d3b\u52a8 String lastUpdated \u6700\u540e\u66f4\u65b0\u65f6\u95f4 String \u53ea\u8bfb\u5b57\u6bb5\uff0c\u683c\u5f0f\u4e3a:\u201c2017-06-01T12:12:12Z\u201d\u4e3aUTC\u65f6\u95f4 remark \u5907\u6ce8 String dateCreated \u7cfb\u7edf\u521b\u5efa\u65f6\u95f4 String \u53ea\u8bfb\u5b57\u6bb5\uff0c\u683c\u5f0f\u4e3a:\u201c2017-06-01T12:12:12Z\u201d\u4e3aUTC\u65f6\u95f4 attr \u81ea\u5b9a\u4e49\u5b57\u6bb5 Object \u81ea\u5b9a\u4e49\u5b57\u6bb5\u6570\u636e\u5b58\u653e\u5728\u8be5\u5bf9\u8c61\u4e0a \u9664\u4e86\u7cfb\u7edf\u5185\u7f6e\u7684\u5ba2\u6237\u5c5e\u6027\u5916\uff0c\u60a8\u8fd8\u53ef\u4ee5\u589e\u52a0\u81ea\u5b9a\u4e49\u5c5e\u6027\u3002\u8bf7\u767b\u5f55DM Hub\uff0c\u5e76\u6253\u5f00 \u8bbe\u7f6e \u5ba2\u6237\u5c5e\u6027 \u8bbe\u7f6e\u9875\u9762: \u8fdb\u5165\u5ba2\u6237\u5c5e\u6027\u9875\u9762\u540e\uff0c\u70b9\u51fb\u53f3\u4e0a\u89d2\u7684 \u65b0\u5efa\u7528\u6237\u5c5e\u6027 \u6309\u94ae\uff0c\u65b0\u5efa\u5ba2\u6237\u5c5e\u6027\uff1a \u65b0\u5efa\u7684\u7528\u6237\u5c5e\u6027\u4f1a\u5728\u5ba2\u6237\u5c5e\u6027\u5217\u8868\u9875\u663e\u793a\u5176\u6280\u672f\u540d\uff0c\u5982attr1\uff0cattr2\u7b49\uff1a \u5ba2\u6237\u81ea\u5b9a\u4e49\u5c5e\u6027\u4f1a\u4f5c\u4e3a\u5ba2\u6237attr\u5b57\u6bb5\u7684\u5c5e\u6027\uff0cattr\u5b57\u6bb5\u662f\u4e00\u4e2a\u5bf9\u8c61\u7c7b\u578b\u3002\u4ee5\u4e0b\u662f\u542b\u6709\u81ea\u5b9a\u4e49\u5b57\u6bb5attr1\u7684\u5ba2\u6237\u6570\u636e\u7684JSON\u793a\u4f8b\uff1a { name : \u897f\u95e8\u5439\u96ea , attr : { attr1 : \u897f\u95e8\u5251\u94fa } } \u5ba2\u6237\u8eab\u4efd\u6a21\u578b \u5ba2\u6237\u901a\u5e38\u662f\u8de8\u89e6\u70b9\u7684\uff0c\u5373\u4e00\u4e2a\u5ba2\u6237\u540c\u65f6\u5728\u591a\u4e2a\u89e6\u70b9\u4e0a\u4e0e\u60a8\u63a5\u89e6\u3002\u6bd4\u5982\u4e00\u4e2a\u5ba2\u6237\u65e2\u4f7f\u7528\u6d4f\u89c8\u5668\u6d4f\u89c8\u60a8\u7684\u5b98\u7f51\uff0c\u53c8\u5173\u6ce8\u4e86\u60a8\u7684\u5fae\u4fe1\u516c\u4f17\u53f7\uff0c\u540c\u65f6\u53c8\u5728\u60a8\u7684\u67d0\u7f51\u4e0a\u5546\u57ce\u8d2d\u4e70\u4e86\u4e1c\u897f\u3002\u901a\u5e38\u60c5\u51b5\u4e0b\uff0c\u5ba2\u6237\u5728\u4efb\u4e00\u4e2a\u89e6\u70b9\uff0c\u90fd\u62e5\u6709\u4e00\u4e2a\u8be5\u89e6\u70b9\u6240\u7279\u6709\u7684\u8eab\u4efd\u4fe1\u606f\uff0c\u5982\u7f51\u9875\u91cc\u7684cookie\uff0c\u5fae\u4fe1\u7684openid\uff0c\u7f51\u4e0a\u5546\u57ce\u7684\u767b\u5f55\u8d26\u53f7\u3002\u5728DM Hub\u7cfb\u7edf\u4e2d\u4e00\u4e2a\u5ba2\u6237\u53ef\u4ee5\u540c\u65f6\u62e5\u6709\u591a\u4e2a\u8eab\u4efd\u3002DM Hub\u53ef\u4ee5\u901a\u8fc7\u8eab\u4efd\u4fe1\u606f\u5c06\u591a\u4e2a\u89e6\u70b9\u4e0a\u7684\u5ba2\u6237\u4fe1\u606f\u8fdb\u884c\u5408\u5e76\u3002 \u5ba2\u6237\u8eab\u4efd\u6709\u8eab\u4efd\u7c7b\u578b\u548c\u8eab\u4efd\u503c\u4e24\u4e2a\u5b57\u6bb5\u7ec4\u6210\uff1a \u5b57\u6bb5 \u578b \u8bf4\u660e type \u5b57\u7b26\u4e32(String) \u8eab\u4efd\u7c7b\u578b\uff0c\u5982wechat\u8868\u793a\u5fae\u4fe1openid\uff0c\u6700\u957f32\u4f4d\u5b57\u7b26\u3002\u5bf9\u4e8e\u81ea\u5b9a\u4e49\u7684\u8eab\u4efd\u7c7b\u578b\uff0c\u8fdb\u5165\u300c\u8bbe\u7f6e\u4e2d\u5fc3\u300d\u70b9\u51fb\u300c\u5ba2\u6237\u8eab\u4efd\u300d\u5e76\u300c\u65b0\u5efa\u5ba2\u6237\u8eab\u4efd\u300d value \u5b57\u7b26\u4e32(String) \u8eab\u4efd\u503c\uff0c\u4e0etype\u5bf9\u5e94\u7684\u503c\uff0c\u5982\u679ctype\u4e3awechat\uff0cvalue\u5c31\u662f\u5bf9\u5e94\u7684openid\u3002\u6700\u957f128\u4f4d\u5b57\u7b26 DM Hub\u5185\u7f6e\u4e86\u51e0\u4e2a\u8eab\u4efd\u7c7b\u578b: \u5185\u7f6e\u8eab\u4efd\u7c7b\u578b \u542b\u4e49 wechat \u5fae\u4fe1\u7684openid wechat-unionid \u5fae\u4fe1\u7684unionid email \u90ae\u7bb1 mobile \u624b\u673a\u53f7 \u521b\u5efa\u5ba2\u6237 \u5e26\u8eab\u4efd\u521b\u5efa\u5ba2\u6237\u7684API \u5e26\u8eab\u4efd\u7684\u5ba2\u6237\u521b\u5efa\uff0c\u987e\u540d\u601d\u4e49\u662f\u521b\u5efa\u5ba2\u6237\u7684\u65f6\u5019\u63d0\u4f9b\u4e00\u4e2a\u6216\u591a\u4e2a\u5ba2\u6237\u8eab\u4efd\u3002\u5982\u679c\u63d0\u4f9b\u7684\u8eab\u4efd\u5df2\u7ed1\u5b9a\u5230DM Hub\u4e2d\u7684\u73b0\u6709\u5ba2\u6237\uff0c\u90a3\u4e48\u8be5API\u4fbf\u4e0d\u4f1a\u521b\u5efa\u65b0\u7684\u5ba2\u6237\uff0c\u800c\u662f\u66f4\u65b0\u65e2\u6709\u5ba2\u6237\uff0c\u540c\u65f6\u5c06\u5176\u4ed6\u8eab\u4efd\u7ed1\u5b9a\u5230\u8be5\u5ba2\u6237\u4e0a\uff1b\u5982\u679c\u5ba2\u6237\u4fe1\u606f\u5185\u63d0\u4f9b\u4e86\u624b\u673a\u548c\u90ae\u4ef6\u5730\u5740\u4fe1\u606f\uff0c\u5e76\u4e14\u80fd\u901a\u8fc7\u8be5\u624b\u673a\u53f7\u6216\u90ae\u4ef6\u5730\u5740\u5728DM Hub\u67e5\u5230\u5ba2\u6237\uff0c\u90a3\u4e48\u8be5API\u4e5f\u4e0d\u4f1a\u521b\u5efa\u65b0\u5ba2\u6237\uff0c\u800c\u662f\u66f4\u65b0\u627e\u5230\u7684\u5ba2\u6237\uff0c\u5e76\u628a\u8eab\u4efd\u7ed1\u5b9a\u5230\u8be5\u5ba2\u6237\u8eab\u4e0a\u3002\u5982\u679c\u4ee5\u4e0a\u4e24\u79cd\u60c5\u51b5\u90fd\u6ca1\u627e\u5230\u5ba2\u6237\uff0c\u90a3\u4e48\u8be5API\u4f1a\u521b\u5efa\u4e00\u4e2a\u65b0\u5ba2\u6237\uff0c\u5e76\u5c06\u6240\u6709\u5ba2\u6237\u8eab\u4efd\u4fe1\u606f\u7ed1\u5b9a\u5230\u8be5\u5ba2\u6237\u4e0a\u3002 \u9700\u8981\u6ce8\u610f\u7684\u662f\uff0c\u8c03\u7528\u8be5\u63a5\u53e3\u66f4\u65b0\u73b0\u6709\u5ba2\u6237\u7684\u65f6\u5019\uff0c\u65e0\u6cd5\u5c06\u5ba2\u6237\u7684\u5b57\u6bb5\u6e05\u7a7a\u3002\u5982\u679c\u786e\u5b9e\u60f3\u6e05\u7a7a\u5ba2\u6237\u7684\u67d0\u4e9b\u5b57\u6bb5\uff0c\u8bf7\u8c03\u7528 \u66f4\u65b0\u5ba2\u6237API \u8c03\u7528\u8bf7\u6c42 HTTP\u8bf7\u6c42\u65b9\u5f0f: POST https://api.convertlab.com/v1/customerandidentities?access_token={access_token} POST\u6570\u636e\u793a\u4f8b: { customer : { name : \u5c0fD , mobile : 18612341234 , mobileVerified : true, gender : 1, attr :{ attr1 : , attr2 : } }, customerIdentities : [ { identityType : wechat , identityValue : o123456... , identityName : \u5fae\u4fe1\u6635\u79f0 }, { identityType : your-system-account , identityValue : user123 , identityName : \u60a8\u7cfb\u7edf\u91cc\u7684\u7528\u6237\u540d } ] } \u53c2\u6570\u8bf4\u660e {access_token}\u7528\u4ece\u201c\u83b7\u53d6\u8eab\u4efd\u6743\u9650\u201d\u8282\u62ff\u5230\u7684access_token\u66ff\u6362 customerIdentities\u5b57\u6bb5\u53ef\u4ee5\u586b\u5199\u591a\u4e2a\u5ba2\u6237\u7684\u8eab\u4efd\uff0c\u5f53\u8eab\u4efd\u662f\u5fae\u4fe1\u7684openid\u65f6\uff0cidentityType\u586b\u5199\u4e3a\u201dwechat\u201d\uff1b\u5f53\u8eab\u4efd\u4e3a\u5fae\u4fe1\u7684unionid\u65f6\uff0cidentityType\u586b\u4e3a\u201dwechat-unionid\u201d\u3002identityValue\u5219\u5bf9\u5e94\u7684\u586b\u5199\u4e3a\u5ba2\u6237\u7684openid\u6216unionid\u3002 \u8bf7\u6c42\u4f53\u4e2d\u540c\u65f6\u9700\u8981\u63d0\u4f9bcustomer\u548ccustomerIdentities\u7684\u4fe1\u606f\u3002 \u5176\u4e2d\u8eab\u4efd\u7c7b\u578b\uff0c\u53ef\u4ee5\u4f7f\u7528DM Hub\u5185\u7f6e\u7684\u8eab\u4efd\u7c7b\u578b\uff0c\u5982wechat, wechat-unionid, mobile, email\uff0c\u4e5f\u53ef\u4ee5\u4f7f\u7528\u81ea\u5b9a\u4e49\u7684\u8eab\u4efd\u7c7b\u578b\uff0c\u5bf9\u4e8e\u81ea\u5b9a\u4e49\u7684\u8eab\u4efd\u7c7b\u578b\uff0c\u5efa\u8bae\u4f7f\u7528\u5c0f\u5199\u5b57\u6bcd\u52a0\u4e2d\u5212\u7ebf\u6216\u4e0b\u5212\u7ebf\u7684\u65b9\u5f0f\uff0c\u5982taobao-account\uff0c\u8fd9\u6837\u4fbf\u4e8e\u4f7f\u7528\u8eab\u4efd\u641c\u7d22\u5ba2\u6237\u3002 \u8fd4\u56de\u7ed3\u679c { id : 7, displayName : \u5c0fD , name : \u5c0fD , img : null, gender : 1, mobile : 18612341234 , mobileVerified : true, email : null, emailVerified : false, birthday : null, wechat : null, nickName : null, country : null, province : null, city : null, county : null, homeAddress : null, officeAddress : null, qq : null, weibo : null, stage : null, dateJoin : 2017-06-06T03:18:23Z , source : null, contentName : null, company : null, title : null, industry : null, employeeNumber : null, annualRevenue : null, website : null, telephone : null, ownerId : null, ownerName : null, isEmployee : false, campaignId : null, campaignName : null, lastUpdated : 2017-06-06T03:18:23Z , remark : null, isMember : false, dateCreated : 2017-06-06T03:18:23Z , attr : { attr1 : null } } \u6ce8\u610f\u4e8b\u9879: \u4f7f\u7528\u5fae\u4fe1openid\u6216unionid\u4f5c\u4e3a\u5ba2\u6237\u8eab\u4efd\u4e4b\u524d\uff0c\u8bf7\u5c06\u5fae\u4fe1\u516c\u4f17\u53f7\u7ed1\u5b9a\u5230DM Hub\u7cfb\u7edf\uff0c\u5e76\u5c06\u5fae\u4fe1\u7c89\u4e1d\u5bfc\u5165\u5230DM Hub\u7cfb\u7edf\u3002 \u7f3a\u5c11customer\u6570\u636e-\u8fd4\u56de\u7ed3\u679c status: 400 No customer field found \u7f3a\u5c11customerIdentities\u6570\u636e-\u8fd4\u56de\u7ed3\u679c status: 400 No customerIdentities field found customerIdentities\u975elist\u7c7b\u578b-\u8fd4\u56de\u7ed3\u679c status: 400 customerIdentities must be an array of values in customerIdentity \u5b57\u6bb5\u9a8c\u8bc1\u9519\u8bef-\u8fd4\u56de\u7ed3\u679c status: 200 { error : { code : C0002 , message : {\\ field\\ :\\ birthday\\ ,\\ message\\ :\\ testet parse error\\ } } } \u666e\u901a\u521b\u5efa\u5ba2\u6237API \u666e\u901a\u521b\u5efa\u5ba2\u6237API\u4f1a\u6839\u636e\u8bf7\u6c42\u4f53\u4e2d\u7684\u624b\u673a\u53f7\u7801\u548c\u90ae\u4ef6\u5730\u5740\u53bb\u67e5\u627e\u73b0\u6709\u5ba2\u6237\uff0c\u5982\u679c\u80fd\u67e5\u627e\u5230\u5ba2\u6237\uff0c\u5c31\u4f1a\u66f4\u65b0\u73b0\u6709\u5ba2\u6237\uff0c\u5426\u5219\u5219\u521b\u5efa\u4e00\u4e0b\u65b0\u5ba2\u6237\u3002 \u8c03\u7528\u8bf7\u6c42 HTTP\u8bf7\u6c42\u65b9\u5f0f: POST https://api.convertlab.com/v1/customers?access_token={access_token} POST\u6570\u636e\u793a\u4f8b: { name : \u5c0fD , mobile : 18612341234 , mobileVerified : true, gender : 1, createMethod : ImportFromExternalSystem } \u53c2\u6570\u8bf4\u660e {access_token} \u7684\u503c\u4e3a\u8c03\u7528API\u7684\u4ee4\u724c\uff0c\u8bf7\u53c2\u89c1 \u83b7\u53d6access_token \u8fd4\u56de\u7ed3\u679c \u65b0\u5ba2\u6237 status:201 \u5df2\u6709\u5ba2\u6237 status:200 { id : 7, displayName : \u5c0fD , name : \u5c0fD , img : null, gender : 1, mobile : 18612341234 , mobileVerified : true, email : null, emailVerified : false, birthday : null, wechat : null, nickName : null, country : null, province : null, city : null, county : null, homeAddress : null, officeAddress : null, qq : null, weibo : null, stage : null, dateJoin : 2017-06-06T03:18:23Z , source : null, contentName : null, company : null, title : null, industry : null, employeeNumber : null, annualRevenue : null, website : null, telephone : null, ownerId : null, ownerName : null, isEmployee : false, campaignId : null, campaignName : null, lastUpdated : 2017-06-06T03:18:23Z , remark : null, isMember : false, dateCreated : 2017-06-06T03:18:23Z , attr : { attr1 : null } } \u8bf7\u6c42\u5bf9\u8c61\u4e3a\u7a7a-\u8fd4\u56de\u7ed3\u679c status: 400 Request data need at least one field \u5b57\u6bb5\u9a8c\u8bc1\u9519\u8bef-\u8fd4\u56de\u7ed3\u679c status: 200 { error : { code : 400001 , message : field validation exception , fieldErrors : [ { fieldName : birthday , message : testet parse error } ] } } \u66f4\u65b0\u5ba2\u6237\u7684API \u8c03\u7528\u8be5API\u53ef\u4ee5\u5bf9DM Hub\u7cfb\u7edf\u4e2d\u7684\u5ba2\u6237\u8fdb\u884c\u4fee\u6539\u3002 \u9700\u8981\u6ce8\u610f\u7684\u4e00\u70b9\u662f\uff0c\u5bf9\u4e8emobileVerified\u4e3atrue\u7684\u624b\u673a\u53f7\uff0c\u5728\u624b\u673a\u53f7\u7801\u4e0d\u53d8\u7684\u60c5\u51b5\u4e0b\uff0c\u65e0\u6cd5\u5c06mobileVerified\u5b57\u6bb5\u6539\u4e3afalse\u3002\u5bf9\u4e8eemailVerified\u4e3atrue\u7684\u7535\u5b50\u90ae\u7bb1\uff0c\u5728\u90ae\u7bb1\u5730\u5740\u4e0d\u53d8\u7684\u60c5\u51b5\u4e0b\uff0c\u65e0\u6cd5\u5c06emailVerified\u5b57\u6bb5\u6539\u4e3afalse\u3002 \u8c03\u7528\u8bf7\u6c42 HTTP\u8bf7\u6c42\u65b9\u5f0f: PUT https://api.convertlab.com/v1/customers/{id}?access_token={access_token} PUT\u6570\u636e\u793a\u4f8b\uff1a { name : \u5c0fD , mobile : 18612341234 , mobileVerified : true, gender : 1 } \u53c2\u6570\u8bf4\u660e {access_token} \u8bbf\u95ee\u8be5API\u7684\u4ee4\u724c\uff0c\u8bf7\u53c2\u89c1 \u83b7\u53d6access_token id \u8981\u4fee\u6539\u7684\u5ba2\u6237id \u8fd4\u56de\u7ed3\u679c \u8fd4\u56de\u4fee\u6539\u524d\u7684\u5ba2\u6237\u4fe1\u606f \u5220\u9664\u5ba2\u6237\u7684API \u5220\u9664\u6307\u5b9a\u7684\u5ba2\u6237 \u8c03\u7528\u8bf7\u6c42 HTTP\u8bf7\u6c42\u65b9\u5f0f: DELETE https://api.convertlab.com/v1/customers/{id}?access_token={access_token} \u53c2\u6570\u8bf4\u660e access_token \u8bbf\u95ee\u8be5API\u7684\u4ee4\u724c\uff0c\u8bf7\u53c2\u89c1 \u83b7\u53d6access_token id \u8981\u4fee\u6539\u7684\u5ba2\u6237id \u8fd4\u56de\u7ed3\u679c \u8fd4\u56de\u72b6\u6001\u7801\u4e3a204 \u83b7\u53d6\u5355\u4e2a\u5ba2\u6237\u7684API \u8c03\u7528\u8bf7\u6c42 HTTP\u8bf7\u6c42\u65b9\u5f0f: GET https://api.convertlab.com/v1/customers/{id}?access_token={access_token} \u53c2\u6570\u8bf4\u660e {id}\u662f\u8981\u83b7\u53d6\u5ba2\u6237\u7684id {access_token}\u7528\u4ece\u201c\u83b7\u53d6\u8eab\u4efd\u6743\u9650\u201d\u8282\u62ff\u5230\u7684access_token\u66ff\u6362 \u8fd4\u56de\u7ed3\u679c { id : 7, displayName : \u5c0fD , name : \u5c0fD , img : null, gender : 1, mobile : 18612341234 , mobileVerified : true, email : null, emailVerified : false, birthday : null, wechat : null, nickName : null, country : null, province : null, city : null, county : null, homeAddress : null, officeAddress : null, qq : null, weibo : null, stage : null, dateJoin : 2017-06-06T03:18:23Z , source : null, contentName : null, company : null, title : null, industry : null, employeeNumber : null, annualRevenue : null, website : null, telephone : null, ownerId : null, ownerName : null, isEmployee : false, campaignId : null, campaignName : null, lastUpdated : 2017-06-06T03:18:23Z , remark : null, isMember : false, dateCreated : 2017-06-06T03:18:23Z , attr : { attr1 : null } } \u67e5\u8be2\u5ba2\u6237\u7684API \u8c03\u7528\u8bf7\u6c42 HTTP\u8bf7\u6c42\u65b9\u5f0f: GET https://api.convertlab.com/v1/customers?access_token={access_token} stage={stage} source={source} mobile={mobile} email={email} gender={gender} idList={idList} dateCreatedFrom={dateCreatedFrom} dateCreatedTo lastUpdatedFrom={lastUpdatedFrom} lastUpdatedTo={lastUpdatedTo} select={select} rows={rows} page={page} sidx={sidx} sord={sord} \u53c2\u6570\u8bf4\u660e \u53c2\u6570 \u662f\u5426\u5fc5\u586b \u8bf4\u660e access_token \u662f \u8bbf\u95eeAPI\u7684\u4ee4\u724c stage \u5426 \u7528\u5ba2\u6237\u6240\u5904\u7684\u9636\u6bb5\u67e5\u8be2\uff0c\u5982\u8fc7\u67e5\u8be2\u7684\u9636\u6bb5\u4e3a\u7a7a\uff0c\u8bf7\u4f7f\u7528stage=_empty source \u5426 \u7528\u5ba2\u6237\u7684\u521d\u59cb\u6765\u6e90\u67e5\u8be2 mobile \u5426 \u7528\u5ba2\u6237\u7684\u624b\u673a\u67e5\u8be2 email \u5426 \u7528\u5ba2\u6237\u7684\u90ae\u7bb1\u67e5\u8be2 gender \u5426 \u7528\u5ba2\u6237\u7684\u6027\u522b\u67e5\u8be2, 1\u4ee3\u8868\u7537\u6027\uff0c2\u4ee3\u8868\u5973\u6027\uff0c0\u4ee3\u8868\u672a\u77e5 idList \u5426 \u652f\u6301\u4ee5\u9017\u53f7\u5206\u5f00\u7684\u5ba2\u6237id\u5217\u8868\uff0c\u5982idList=1,2,3,4 dateCreatedFrom \u5426 \u5ba2\u6237\u521b\u5efa\u7684\u8d77\u59cb\u65f6\u95f4\uff0c\u65f6\u95f4\u683c\u5f0f\u4e3a \u201c2016-11-11T11:11:11\u201d \u4e3aUTC\u65f6\u95f4,\u5907\u6ce8\uff1a\u5317\u4eac\u65f6\u95f4\u9700\u8981\u51cf8\u540e\u4f20\u5165 dateCreatedTo \u5426 \u5ba2\u6237\u521b\u5efa\u7684\u7ed3\u675f\u65f6\u95f4\uff0c\u65f6\u95f4\u683c\u5f0f\u4e3a \u201c2016-11-11T11:11:11\u201d \u4e3aUTC\u65f6\u95f4 lastUpdatedFrom \u5426 \u5ba2\u6237\u66f4\u65b0\u7684\u8d77\u59cb\u65f6\u95f4(\u5305\u542b)\uff0c\u65f6\u95f4\u683c\u5f0f\u4e3a \u201c2016-11-11T11:11:11\u201d \u4e3aUTC\u65f6\u95f4 lastUpdatedTo \u5426 \u5ba2\u6237\u66f4\u65b0\u7684\u7ed3\u675f\u65f6\u95f4\uff0c\u65f6\u95f4\u683c\u5f0f\u4e3a \u201c2016-11-11T11:11:11\u201d \u4e3aUTC\u65f6\u95f4 select \u5426 \u8fd4\u56de\u7684\u5b57\u6bb5\uff0c\u591a\u4e2a\u5b57\u6bb5\u7528\u9017\u53f7\u9694\u5f00\u3002\u9ed8\u8ba4\u8fd4\u56de\u6240\u6709\u5b57\u6bb5\uff0c\u53ef\u4ee5\u7528select\u6307\u5b9a\u8981\u8fd4\u56de\u7684\u5b57\u6bb5 rows \u5426 \u6bcf\u9875\u7684\u8bb0\u5f55\u6570\uff0c\u9ed8\u8ba4\u6bcf\u9875\u8fd4\u56de20\u884c page \u5426 \u8fd4\u56de\u7b2c\u51e0\u9875\uff0c\u9ed8\u8ba4\u8fd4\u56de\u7b2c1\u9875 sidx \u5426 \u6309\u4ec0\u4e48\u5b57\u6bb5\u6392\u5e8f\uff0c\u9ed8\u8ba4\u6309id\u6392\u5e8f sord \u5426 asc\u8868\u793a\u5347\u5e8f\uff0cdesc\u8868\u793a\u964d\u5e8f\u3002\u9ed8\u8ba4\u6309\u5347\u5e8f\u6392\u5e8f \u8fd4\u56de\u7ed3\u679c - \u8fd4\u56de\u7684\u6240\u6709\u5ba2\u6237\u6570\u636e\u4fdd\u5b58\u5728\u540d\u53ebrows\u7684array\u5b57\u6bb5\u4e2d { rows : [ { id : 1, displayName : \u5927D , name : \u5927D , img : null, gender : 1, mobile : 18612341234 , mobileVerified : true, email : null // \u5ba2\u6237\u7684\u5176\u4ed6\u5b57\u6bb5 }, { id : 7, displayName : \u5c0fD , name : \u5c0fD , img : null, gender : 1, mobile : 18612341235 , mobileVerified : true, email : null // \u5ba2\u6237\u7684\u5176\u4ed6\u5b57\u6bb5 } ] } \u83b7\u53d6\u5ba2\u6237\u6570\u91cf\u7684API \u8c03\u7528\u8bf7\u6c42 HTTP\u8bf7\u6c42\u65b9\u5f0f: GET https://api.convertlab.com/v1/customers/count?access_token={access_token} stage={stage} source={source} mobile={mobile} gender={gender} idList={idList} dateCreatedFrom={dateCreatedFrom} dateCreatedTo lastUpdatedFrom={lastUpdatedFrom} lastUpdatedTo={lastUpdatedTo} \u53c2\u6570\u8bf4\u660e \u53c2\u6570 \u662f\u5426\u5fc5\u586b \u8bf4\u660e access_token \u662f \u8bbf\u95eeAPI\u7684\u4ee4\u724c stage \u5426 \u7528\u5ba2\u6237\u6240\u5904\u7684\u9636\u6bb5\u67e5\u8be2\uff0c\u5982\u8fc7\u67e5\u8be2\u7684\u9636\u6bb5\u4e3a\u7a7a\uff0c\u8bf7\u4f7f\u7528stage=_empty source \u5426 \u7528\u5ba2\u6237\u7684\u521d\u59cb\u6765\u6e90\u67e5\u8be2 mobile \u5426 \u7528\u5ba2\u6237\u7684\u624b\u673a\u67e5\u8be2 gender \u5426 \u7528\u5ba2\u6237\u7684\u6027\u522b\u67e5\u8be2, 1\u4ee3\u8868\u7537\u6027\uff0c2\u4ee3\u8868\u5973\u6027\uff0c0\u4ee3\u8868\u672a\u77e5 idList \u5426 \u652f\u6301\u4ee5\u9017\u53f7\u5206\u5f00\u7684\u5ba2\u6237id\u5217\u8868\uff0c\u5982idList=1,2,3,4 dateCreatedFrom \u5426 \u5ba2\u6237\u521b\u5efa\u7684\u8d77\u59cb\u65f6\u95f4\uff0c\u65f6\u95f4\u683c\u5f0f\u4e3a \u201c2016-11-11T11:11:11\u201d \u4e3aUTC\u65f6\u95f4 dateCreatedTo \u5426 \u5ba2\u6237\u521b\u5efa\u7684\u7ed3\u675f\u65f6\u95f4\uff0c\u683c\u5f0f\u4e3a:\u201c2017-06-01T12:12:12Z\u201d \u4e3aUTC\u65f6\u95f4 lastUpdatedFrom \u5426 \u5ba2\u6237\u66f4\u65b0\u7684\u5176\u5b9e\u65f6\u95f4(\u5305\u542b)\uff0c\u683c\u5f0f\u4e3a:\u201c2017-06-01T12:12:12Z\u201d \u4e3aUTC\u65f6\u95f4 lastUpdateTo \u5426 \u5ba2\u6237\u66f4\u65b0\u7684\u7ed3\u675f\u65f6\u95f4\uff0c\u683c\u5f0f\u4e3a:\u201c2017-06-01T12:12:12Z\u201d \u4e3aUTC\u65f6\u95f4 select \u5426 \u8fd4\u56de\u7684\u5b57\u6bb5\uff0c\u591a\u4e2a\u5b57\u6bb5\u7528\u9017\u53f7\u9694\u5f00\u3002\u9ed8\u8ba4\u8fd4\u56de\u6240\u6709\u5b57\u6bb5\uff0c\u53ef\u4ee5\u7528select\u6307\u5b9a\u8981\u8fd4\u56de\u7684\u5b57\u6bb5 \u8fd4\u56de\u7ed3\u679c \u8fd4\u56de\u6ee1\u8db3\u6761\u4ef6\u7684\u5ba2\u6237\u7684\u6570\u91cf \u6dfb\u52a0\u5ba2\u6237\u8eab\u4efd\u7684API \u53ef\u4ee5\u4e3aDM Hub\u7cfb\u7edf\u4e2d\u7684\u73b0\u6709\u5ba2\u6237\u6dfb\u52a0\u5ba2\u6237\u8eab\u4efd\u3002\u65b0\u6dfb\u52a0\u7684\u8eab\u4efd\u5c06\u51fa\u73b0\u5728\u5ba2\u6237\u8be6\u60c5\u9875\u7684\u5de6\u4e0b\u89d2 \u8c03\u7528\u8bf7\u6c42 HTTP\u8bf7\u6c42\u65b9\u5f0f: POST https://api.convertlab.com/v1/customeridentities?access_token={access_token} POST\u8bf7\u6c42\u793a\u4f8b\uff1a { customerId : 123456 , identityType : myshop-account , identityValue : user12345 , identityName : \u5c0f\u7f8a\u82cf\u897f } \u53c2\u6570\u8bf4\u660e \u53c2\u6570 \u662f\u5426\u5fc5\u586b \u8bf4\u660e access_token \u662f \u8bbf\u95eeAPI\u7684\u4ee4\u724c customerId \u662f \u9700\u8981\u6dfb\u52a0\u8eab\u4efd\u7684\u5ba2\u6237id identityType \u662f \u8981\u6dfb\u52a0\u7684\u5ba2\u6237\u8eab\u4efd\u7c7b\u578b\uff0c\u8be6\u89c1 \u5ba2\u6237\u8eab\u4efd\u6a21\u578b,\u6700\u957f32\u4f4d\u5b57\u7b26 identityValue \u662f \u8981\u6dfb\u52a0\u7684\u5ba2\u6237\u8eab\u4efd\u503c\uff0c\u6700\u957f128\u4f4d\u5b57\u7b26 identityName \u5426 \u5ba2\u6237\u8eab\u4efd\u5bf9\u5e94\u7684\u6635\u79f0\uff0c\u6700\u957f256\u4f4d\u5b57\u7b26 \u8fd4\u56de\u7ed3\u679c { customerId : 123456 , identityType : myshop-account , identityValue : user12345 , identityName : \u5c0f\u7f8a\u82cf\u897f } \u67e5\u8be2\u5ba2\u6237\u8eab\u4efd\u7684API \u53ef\u4ee5\u6839\u636e\u4e00\u4e2a\u6216\u591a\u4e2a\u5ba2\u6237id\u67e5\u8be2\u5ba2\u6237\u7684\u8eab\u4efd\uff0c\u4e5f\u53ef\u4ee5\u901a\u8fc7\u8eab\u4efd\u7684\u7c7b\u578b\u548c\u8eab\u4efd\u503c\u67e5\u8be2\u5ba2\u6237id \u8c03\u7528\u8bf7\u6c42 HTTP\u8bf7\u6c42\u65b9\u5f0f: GET https://api.convertlab.com/v1/customeridentities?access_token={access_token} customerIds={customerIds} identityType={identityType} identityValue={identityValue} \u53c2\u6570\u8bf4\u660e \u53c2\u6570 \u662f\u5426\u5fc5\u586b \u8bf4\u660e access_token \u662f \u8bbf\u95eeAPI\u7684\u4ee4\u724c customerIds \u5426 \u8981\u67e5\u8be2\u5ba2\u6237\u8eab\u4efd\u7684\u5ba2\u6237id\u5217\u8868\uff0c\u591a\u4e2a\u5ba2\u6237id\u7528\u9017\u53f7\u9694\u5f00\uff0c\u5982 \u201c123\uff0c124\u201d identityType \u5426 \u8981\u67e5\u8be2\u5ba2\u6237id\u7684\u8eab\u4efd\u7c7b\u578b\uff0c\u4e0eidentityValue\u540c\u65f6\u4f7f\u7528 identityValue \u5426 \u8981\u67e5\u8be2\u5ba2\u6237id\u7684\u8eab\u4efd\u503c\uff0c\u4e0eidentityType\u540c\u65f6\u4f7f\u7528 \u8fd4\u56de\u7ed3\u679c [ { customerId : 123456 , identityType : myshop-account , identityValue : user12345 , identityName : \u5c0f\u7f8a\u82cf\u897f }, { customerId : 123456 , identityType : wechat , identityValue : openid12345 , identityName : \u5c0f\u7f8a\u82cf\u897f } ] \u8fd4\u56de\u53c2\u6570\u8bf4\u660e identityTyp \u5ba2\u6237\u8eab\u4efd\u7c7b\u578b identityValue \u5ba2\u6237\u7684\u5728\u4f60\u7cfb\u7edf\u4e2d\u7684id customerId \u5ba2\u6237\u7684id identityName\u5ba2\u6237\u8eab\u4efd\u540d\u79f0 customerIds\u975e\u6570\u503c\u7c7b\u578b-\u8fd4\u56de\u7ed3\u679c status: 200 OK { error : { code : 400001 , message : customer id should be a number , fieldErrors : [ { fieldName : customerIds , message : customer id should be a number } ] } } \u67e5\u8be2\u5ba2\u6237\u7684\u7edf\u8ba1\u4fe1\u606f \u8c03\u7528\u8bf7\u6c42 GET /v1/customerStatistics?access_token={access_token} rows={rows} page={page} sidx={sidx} sord={sord} customerId={customerId} needTotal={true} \u8bf7\u6c42\u53c2\u6570\u8bf4\u660e Name In Required Type Description access_token query yes string \u7528\u4ece\u201c\u83b7\u53d6\u8eab\u4efd\u6743\u9650\u201d\u8282\u62ff\u5230\u7684access_token\u66ff\u6362 rows query no number \u4e00\u9875\u5305\u542b\u591a\u5c11\u6761\u8bb0\u5f55\uff0c\u9ed8\u8ba4\u503c\u4e3a5 page query no number \u53d6\u7b2c\u51e0\u9875\u7684\u6570\u636e\uff0c\u9ed8\u8ba4\u503c\u4e3a1 sidx query no string \u7528\u4e8e\u6392\u5e8f\u7684\u5b57\u6bb5\uff0c\u9ed8\u8ba4\u4e3a\u201cid\u201d,\u652f\u6301\"totalScore\"\u5b57\u6bb5 sord query no string \u6392\u5e8f\u65b9\u5f0f\uff0casc\u8868\u793a\u5347\u5e8f\uff0cdesc\u8868\u793a\u964d\u5e8f\uff0c\u9ed8\u8ba4\u4e3aasc customerId query no number \u7cbe\u786e\u67e5\u8be2\u67d0\u4e2a\u5ba2\u6237\u7684\u8bb0\u5f55 needTotal query no boolean \u8fd4\u56de\u7ed3\u679c\u662f\u5426\u9700\u8981\u5305\u542b\u603b\u6570\uff0c\u9ed8\u8ba4\u4e3afalse\uff0c\u4e0d\u8fd4\u56de\u603b\u6570 \u8fd4\u56de\u6570\u636e { items :[ { customerId : 4678, firstOrderDate : 2015-04-28T03:43:33Z , id : 10948, lastOrderDate : 2015-04-28T03:43:33Z , lastOrderDays : 635, lastUpdated : 2017-01-22T16:34:03Z , latest30daysScore : 0, orderAMT : 0.05, orderAMTA : 4.2, orderAPCT : 88, orderTotal : 1, orderTotalAmount : 88, totalScore : 0 } ], meta : { records : 20, total : 7, hasNext : true } } \u8fd4\u56de\u6570\u636e\u8bf4\u660e Name Type Description items array \u6570\u636e\u5757\u6807\u7b7e customerId firstOrderDate \u683c\u5f0f\u4e3a:\u201c2017-06-01T12:12:12Z\u201d \u4e3aUTC\u65f6\u95f4 id number \u8fd9\u6761\u8bb0\u5f55\u7684ID lastOrderDate \u683c\u5f0f\u4e3a:\u201c2017-06-01T12:12:12Z\u201d \u4e3aUTC\u65f6\u95f4 lastOrderDays lastUpdated \u683c\u5f0f\u4e3a:\u201c2017-06-01T12:12:12Z\u201d \u4e3aUTC\u65f6\u95f4 latest30daysScore orderAMT orderAMTA orderAPCT orderTotal orderTotalAmount totalScore number \u5ba2\u6237\u6d3b\u8dc3\u5ea6\u503c meta object \u5143\u6570\u636e\u5757\u6807\u7b7e records number \u603b\u8bb0\u5f55\u6761\u6570 total number \u603b\u9875\u6570 hasNext boolean \u662f\u5426\u8fd8\u6709\u8bb0\u5f55 \u6839\u636e\u5ba2\u6237\u8eab\u4efd\u5408\u5e76\u5ba2\u6237API \u6839\u636e\u5ba2\u6237\u8eab\u4efd\u628a\u4e24\u4e2a\u5ba2\u6237\u8fdb\u884c\u5408\u5e76\uff0c\u5408\u5e76\u540ecustomer\uff08From\uff09\u4f1a\u88ab\u5220\u9664\u6389,customer\uff08To\uff09\u7684customerid \u4f1a\u88ab\u8fd4\u56de \u8c03\u7528\u8bf7\u6c42 HTTP\u8bf7\u6c42\u65b9\u5f0f: POST https://api.convertlab.com/v1/customerService/mergeCustomerByIdentities?access_token={access_token} POST\u8bf7\u6c42\u793a\u4f8b\uff1a { from : { identityType : wechat , identityValue : aaaa }, to : { identityType : wechat-openid , identityValue : oVLMTt0zw5JEZc6PE0tIsA5Kz7f0 } } \u53c2\u6570\u8bf4\u660e \u53c2\u6570 \u662f\u5426\u5fc5\u586b \u8bf4\u660e access_token \u662f \u8bbf\u95eeAPI\u7684\u4ee4\u724c identityType \u662f \u5ba2\u6237\u8eab\u4efd\u7c7b\u578b\uff0c\u8be6\u89c1 \u5ba2\u6237\u8eab\u4efd\u6a21\u578b,\u6700\u957f32\u4f4d\u5b57\u7b26 identityValue \u662f \u5ba2\u6237\u8eab\u4efd\u503c\uff0c\u6700\u957f128\u4f4d\u5b57\u7b26 \u8fd4\u56de\u7ed3\u679c { data : { customerId : {\u5408\u5e76\u540e\u7684\u5ba2\u6237id} } } \u6839\u636e\u5ba2\u6237ID\u5408\u5e76\u5ba2\u6237API \u6839\u636e\u5ba2\u6237ID\u628a\u4e24\u4e2a\u5ba2\u6237\u8fdb\u884c\u5408\u5e76\uff0c\u5408\u5e76\u540ecustomer\uff08From\uff09\u4f1a\u88ab\u5220\u9664\u6389,customer\uff08To\uff09\u7684customerid \u4f1a\u88ab\u8fd4\u56de \u8c03\u7528\u8bf7\u6c42 HTTP\u8bf7\u6c42\u65b9\u5f0f: POST https://api.convertlab.com/v1/customerService/mergeCustomerById?access_token={access_token} fromId={fromId} toId={toId} \u53c2\u6570\u8bf4\u660e \u53c2\u6570 \u662f\u5426\u5fc5\u586b \u8bf4\u660e access_token \u662f \u8bbf\u95eeAPI\u7684\u4ee4\u724c fromId \u662f \u9700\u8981\u5408\u5e76\u7684\u6765\u6e90\u5ba2\u6237ID toId \u662f \u9700\u8981\u5408\u5e76\u7684\u76ee\u6807\u5ba2\u6237ID \u8fd4\u56de\u7ed3\u679c { data : { customerId : {\u5408\u5e76\u540e\u7684\u5ba2\u6237id} } }","title":"\u5ba2\u6237\u4fe1\u606f"},{"location":"api/customer/#_1","text":"DM Hub\u4e3a\u5ba2\u6237\u5185\u7f6e\u4e00\u4e9b\u6bd4\u8f83\u901a\u7528\u7684\u5ba2\u6237\u5c5e\u6027\uff0c\u8fd9\u4e9b\u5c5e\u6027\u7684\u540d\u79f0\u548c\u7c7b\u578b\u5982\u4e0b\u8868\u6240\u793a\uff1a \u5c5e\u6027 \u754c\u9762\u663e\u793a\u540d\u79f0 \u7c7b\u578b \u8bf4\u660e id \u5ba2\u6237ID Long \u53ea\u8bfb\u5b57\u6bb5 displayName \u663e\u793a\u540d String \u53ea\u8bfb\u5b57\u6bb5\u3002\u5982\u679cname\u4e0d\u4e3a\u7a7a\uff0c\u7b49\u4e8ename\u7684\u503c\uff0c\u5426\u5219\u7b49\u4e8enickName\u7684\u503c name \u59d3\u540d String img \u7528\u6237\u5934\u50cf String \u5934\u50cf\u5730\u5740URL gender \u6027\u522b Integer 0\u548c\u7a7a\u4ee3\u8868\u672a\u77e5\uff0c1\u4ee3\u8868\u7537\uff0c2\u4ee3\u8868\u5973 mobile \u624b\u673a\u53f7\u7801 String mobileVerified \u624b\u673a\u53f7\u7801\u662f\u5426\u9a8c\u8bc1 Boolean \u503c\u4e3atrue\u6216false email \u90ae\u7bb1 String emailVerified \u90ae\u7bb1\u662f\u5426\u9a8c\u8bc1 Boolean \u503c\u4e3atrue\u6216false birthday \u751f\u65e5 String \u683c\u5f0f\u4e3a: wechat \u5fae\u4fe1\u53f7 String nickName \u5fae\u4fe1\u6635\u79f0 String country \u56fd\u5bb6 String province \u7701\u4efd String city \u57ce\u5e02 String county \u533a/\u53bf String homeAddress \u5bb6\u5ead\u5730\u5740 String \u6700\u957f512\u4e2a\u5b57\u7b26 officeAddress \u516c\u53f8\u5730\u5740 String \u6700\u957f512\u4e2a\u5b57\u7b26 qq QQ String weibo \u5fae\u535a String stage \u5f53\u524d\u9636\u6bb5 String dateJoin \u521b\u5efa\u65f6\u95f4 String \u683c\u5f0f\u4e3a:\u201c2017-06-01T12:12:12Z\u201d \u4e3aUTC\u65f6\u95f4 \u5bf9\u4e8e\u5fae\u4fe1\u7c89\u4e1d\uff0c\u8fd9\u4e2a\u5b57\u6bb5\u8bb0\u5f55\u5176\u5173\u6ce8\u5fae\u4fe1\u7684\u65f6\u95f4\u3002 source \u521d\u59cb\u6765\u6e90 String contentName \u521d\u59cb\u6765\u6e90\u5185\u5bb9 String company \u516c\u53f8 String title \u804c\u4f4d String industry \u516c\u53f8\u884c\u4e1a String employeeNumber \u516c\u53f8\u5458\u5de5\u6570 Integer annualRevenue \u516c\u53f8\u5e74\u6536\u5165 BigDecimal website \u516c\u53f8\u7f51\u7ad9 String telephone \u5ea7\u673a String isEmployee \u662f\u5426\u672c\u516c\u53f8\u5458\u5de5 Boolean campaignId \u8425\u9500\u6d3b\u52a8ID String campaignName \u8425\u9500\u6d3b\u52a8 String lastUpdated \u6700\u540e\u66f4\u65b0\u65f6\u95f4 String \u53ea\u8bfb\u5b57\u6bb5\uff0c\u683c\u5f0f\u4e3a:\u201c2017-06-01T12:12:12Z\u201d\u4e3aUTC\u65f6\u95f4 remark \u5907\u6ce8 String dateCreated \u7cfb\u7edf\u521b\u5efa\u65f6\u95f4 String \u53ea\u8bfb\u5b57\u6bb5\uff0c\u683c\u5f0f\u4e3a:\u201c2017-06-01T12:12:12Z\u201d\u4e3aUTC\u65f6\u95f4 attr \u81ea\u5b9a\u4e49\u5b57\u6bb5 Object \u81ea\u5b9a\u4e49\u5b57\u6bb5\u6570\u636e\u5b58\u653e\u5728\u8be5\u5bf9\u8c61\u4e0a \u9664\u4e86\u7cfb\u7edf\u5185\u7f6e\u7684\u5ba2\u6237\u5c5e\u6027\u5916\uff0c\u60a8\u8fd8\u53ef\u4ee5\u589e\u52a0\u81ea\u5b9a\u4e49\u5c5e\u6027\u3002\u8bf7\u767b\u5f55DM Hub\uff0c\u5e76\u6253\u5f00 \u8bbe\u7f6e \u5ba2\u6237\u5c5e\u6027 \u8bbe\u7f6e\u9875\u9762: \u8fdb\u5165\u5ba2\u6237\u5c5e\u6027\u9875\u9762\u540e\uff0c\u70b9\u51fb\u53f3\u4e0a\u89d2\u7684 \u65b0\u5efa\u7528\u6237\u5c5e\u6027 \u6309\u94ae\uff0c\u65b0\u5efa\u5ba2\u6237\u5c5e\u6027\uff1a \u65b0\u5efa\u7684\u7528\u6237\u5c5e\u6027\u4f1a\u5728\u5ba2\u6237\u5c5e\u6027\u5217\u8868\u9875\u663e\u793a\u5176\u6280\u672f\u540d\uff0c\u5982attr1\uff0cattr2\u7b49\uff1a \u5ba2\u6237\u81ea\u5b9a\u4e49\u5c5e\u6027\u4f1a\u4f5c\u4e3a\u5ba2\u6237attr\u5b57\u6bb5\u7684\u5c5e\u6027\uff0cattr\u5b57\u6bb5\u662f\u4e00\u4e2a\u5bf9\u8c61\u7c7b\u578b\u3002\u4ee5\u4e0b\u662f\u542b\u6709\u81ea\u5b9a\u4e49\u5b57\u6bb5attr1\u7684\u5ba2\u6237\u6570\u636e\u7684JSON\u793a\u4f8b\uff1a { name : \u897f\u95e8\u5439\u96ea , attr : { attr1 : \u897f\u95e8\u5251\u94fa } }","title":"\u5ba2\u6237\u6a21\u578b"},{"location":"api/customer/#_2","text":"\u5ba2\u6237\u901a\u5e38\u662f\u8de8\u89e6\u70b9\u7684\uff0c\u5373\u4e00\u4e2a\u5ba2\u6237\u540c\u65f6\u5728\u591a\u4e2a\u89e6\u70b9\u4e0a\u4e0e\u60a8\u63a5\u89e6\u3002\u6bd4\u5982\u4e00\u4e2a\u5ba2\u6237\u65e2\u4f7f\u7528\u6d4f\u89c8\u5668\u6d4f\u89c8\u60a8\u7684\u5b98\u7f51\uff0c\u53c8\u5173\u6ce8\u4e86\u60a8\u7684\u5fae\u4fe1\u516c\u4f17\u53f7\uff0c\u540c\u65f6\u53c8\u5728\u60a8\u7684\u67d0\u7f51\u4e0a\u5546\u57ce\u8d2d\u4e70\u4e86\u4e1c\u897f\u3002\u901a\u5e38\u60c5\u51b5\u4e0b\uff0c\u5ba2\u6237\u5728\u4efb\u4e00\u4e2a\u89e6\u70b9\uff0c\u90fd\u62e5\u6709\u4e00\u4e2a\u8be5\u89e6\u70b9\u6240\u7279\u6709\u7684\u8eab\u4efd\u4fe1\u606f\uff0c\u5982\u7f51\u9875\u91cc\u7684cookie\uff0c\u5fae\u4fe1\u7684openid\uff0c\u7f51\u4e0a\u5546\u57ce\u7684\u767b\u5f55\u8d26\u53f7\u3002\u5728DM Hub\u7cfb\u7edf\u4e2d\u4e00\u4e2a\u5ba2\u6237\u53ef\u4ee5\u540c\u65f6\u62e5\u6709\u591a\u4e2a\u8eab\u4efd\u3002DM Hub\u53ef\u4ee5\u901a\u8fc7\u8eab\u4efd\u4fe1\u606f\u5c06\u591a\u4e2a\u89e6\u70b9\u4e0a\u7684\u5ba2\u6237\u4fe1\u606f\u8fdb\u884c\u5408\u5e76\u3002 \u5ba2\u6237\u8eab\u4efd\u6709\u8eab\u4efd\u7c7b\u578b\u548c\u8eab\u4efd\u503c\u4e24\u4e2a\u5b57\u6bb5\u7ec4\u6210\uff1a \u5b57\u6bb5 \u578b \u8bf4\u660e type \u5b57\u7b26\u4e32(String) \u8eab\u4efd\u7c7b\u578b\uff0c\u5982wechat\u8868\u793a\u5fae\u4fe1openid\uff0c\u6700\u957f32\u4f4d\u5b57\u7b26\u3002\u5bf9\u4e8e\u81ea\u5b9a\u4e49\u7684\u8eab\u4efd\u7c7b\u578b\uff0c\u8fdb\u5165\u300c\u8bbe\u7f6e\u4e2d\u5fc3\u300d\u70b9\u51fb\u300c\u5ba2\u6237\u8eab\u4efd\u300d\u5e76\u300c\u65b0\u5efa\u5ba2\u6237\u8eab\u4efd\u300d value \u5b57\u7b26\u4e32(String) \u8eab\u4efd\u503c\uff0c\u4e0etype\u5bf9\u5e94\u7684\u503c\uff0c\u5982\u679ctype\u4e3awechat\uff0cvalue\u5c31\u662f\u5bf9\u5e94\u7684openid\u3002\u6700\u957f128\u4f4d\u5b57\u7b26 DM Hub\u5185\u7f6e\u4e86\u51e0\u4e2a\u8eab\u4efd\u7c7b\u578b: \u5185\u7f6e\u8eab\u4efd\u7c7b\u578b \u542b\u4e49 wechat \u5fae\u4fe1\u7684openid wechat-unionid \u5fae\u4fe1\u7684unionid email \u90ae\u7bb1 mobile \u624b\u673a\u53f7","title":"\u5ba2\u6237\u8eab\u4efd\u6a21\u578b"},{"location":"api/customer/#_3","text":"","title":"\u521b\u5efa\u5ba2\u6237"},{"location":"api/customer/#api","text":"\u5e26\u8eab\u4efd\u7684\u5ba2\u6237\u521b\u5efa\uff0c\u987e\u540d\u601d\u4e49\u662f\u521b\u5efa\u5ba2\u6237\u7684\u65f6\u5019\u63d0\u4f9b\u4e00\u4e2a\u6216\u591a\u4e2a\u5ba2\u6237\u8eab\u4efd\u3002\u5982\u679c\u63d0\u4f9b\u7684\u8eab\u4efd\u5df2\u7ed1\u5b9a\u5230DM Hub\u4e2d\u7684\u73b0\u6709\u5ba2\u6237\uff0c\u90a3\u4e48\u8be5API\u4fbf\u4e0d\u4f1a\u521b\u5efa\u65b0\u7684\u5ba2\u6237\uff0c\u800c\u662f\u66f4\u65b0\u65e2\u6709\u5ba2\u6237\uff0c\u540c\u65f6\u5c06\u5176\u4ed6\u8eab\u4efd\u7ed1\u5b9a\u5230\u8be5\u5ba2\u6237\u4e0a\uff1b\u5982\u679c\u5ba2\u6237\u4fe1\u606f\u5185\u63d0\u4f9b\u4e86\u624b\u673a\u548c\u90ae\u4ef6\u5730\u5740\u4fe1\u606f\uff0c\u5e76\u4e14\u80fd\u901a\u8fc7\u8be5\u624b\u673a\u53f7\u6216\u90ae\u4ef6\u5730\u5740\u5728DM Hub\u67e5\u5230\u5ba2\u6237\uff0c\u90a3\u4e48\u8be5API\u4e5f\u4e0d\u4f1a\u521b\u5efa\u65b0\u5ba2\u6237\uff0c\u800c\u662f\u66f4\u65b0\u627e\u5230\u7684\u5ba2\u6237\uff0c\u5e76\u628a\u8eab\u4efd\u7ed1\u5b9a\u5230\u8be5\u5ba2\u6237\u8eab\u4e0a\u3002\u5982\u679c\u4ee5\u4e0a\u4e24\u79cd\u60c5\u51b5\u90fd\u6ca1\u627e\u5230\u5ba2\u6237\uff0c\u90a3\u4e48\u8be5API\u4f1a\u521b\u5efa\u4e00\u4e2a\u65b0\u5ba2\u6237\uff0c\u5e76\u5c06\u6240\u6709\u5ba2\u6237\u8eab\u4efd\u4fe1\u606f\u7ed1\u5b9a\u5230\u8be5\u5ba2\u6237\u4e0a\u3002 \u9700\u8981\u6ce8\u610f\u7684\u662f\uff0c\u8c03\u7528\u8be5\u63a5\u53e3\u66f4\u65b0\u73b0\u6709\u5ba2\u6237\u7684\u65f6\u5019\uff0c\u65e0\u6cd5\u5c06\u5ba2\u6237\u7684\u5b57\u6bb5\u6e05\u7a7a\u3002\u5982\u679c\u786e\u5b9e\u60f3\u6e05\u7a7a\u5ba2\u6237\u7684\u67d0\u4e9b\u5b57\u6bb5\uff0c\u8bf7\u8c03\u7528 \u66f4\u65b0\u5ba2\u6237API \u8c03\u7528\u8bf7\u6c42 HTTP\u8bf7\u6c42\u65b9\u5f0f: POST https://api.convertlab.com/v1/customerandidentities?access_token={access_token} POST\u6570\u636e\u793a\u4f8b: { customer : { name : \u5c0fD , mobile : 18612341234 , mobileVerified : true, gender : 1, attr :{ attr1 : , attr2 : } }, customerIdentities : [ { identityType : wechat , identityValue : o123456... , identityName : \u5fae\u4fe1\u6635\u79f0 }, { identityType : your-system-account , identityValue : user123 , identityName : \u60a8\u7cfb\u7edf\u91cc\u7684\u7528\u6237\u540d } ] } \u53c2\u6570\u8bf4\u660e {access_token}\u7528\u4ece\u201c\u83b7\u53d6\u8eab\u4efd\u6743\u9650\u201d\u8282\u62ff\u5230\u7684access_token\u66ff\u6362 customerIdentities\u5b57\u6bb5\u53ef\u4ee5\u586b\u5199\u591a\u4e2a\u5ba2\u6237\u7684\u8eab\u4efd\uff0c\u5f53\u8eab\u4efd\u662f\u5fae\u4fe1\u7684openid\u65f6\uff0cidentityType\u586b\u5199\u4e3a\u201dwechat\u201d\uff1b\u5f53\u8eab\u4efd\u4e3a\u5fae\u4fe1\u7684unionid\u65f6\uff0cidentityType\u586b\u4e3a\u201dwechat-unionid\u201d\u3002identityValue\u5219\u5bf9\u5e94\u7684\u586b\u5199\u4e3a\u5ba2\u6237\u7684openid\u6216unionid\u3002 \u8bf7\u6c42\u4f53\u4e2d\u540c\u65f6\u9700\u8981\u63d0\u4f9bcustomer\u548ccustomerIdentities\u7684\u4fe1\u606f\u3002 \u5176\u4e2d\u8eab\u4efd\u7c7b\u578b\uff0c\u53ef\u4ee5\u4f7f\u7528DM Hub\u5185\u7f6e\u7684\u8eab\u4efd\u7c7b\u578b\uff0c\u5982wechat, wechat-unionid, mobile, email\uff0c\u4e5f\u53ef\u4ee5\u4f7f\u7528\u81ea\u5b9a\u4e49\u7684\u8eab\u4efd\u7c7b\u578b\uff0c\u5bf9\u4e8e\u81ea\u5b9a\u4e49\u7684\u8eab\u4efd\u7c7b\u578b\uff0c\u5efa\u8bae\u4f7f\u7528\u5c0f\u5199\u5b57\u6bcd\u52a0\u4e2d\u5212\u7ebf\u6216\u4e0b\u5212\u7ebf\u7684\u65b9\u5f0f\uff0c\u5982taobao-account\uff0c\u8fd9\u6837\u4fbf\u4e8e\u4f7f\u7528\u8eab\u4efd\u641c\u7d22\u5ba2\u6237\u3002 \u8fd4\u56de\u7ed3\u679c { id : 7, displayName : \u5c0fD , name : \u5c0fD , img : null, gender : 1, mobile : 18612341234 , mobileVerified : true, email : null, emailVerified : false, birthday : null, wechat : null, nickName : null, country : null, province : null, city : null, county : null, homeAddress : null, officeAddress : null, qq : null, weibo : null, stage : null, dateJoin : 2017-06-06T03:18:23Z , source : null, contentName : null, company : null, title : null, industry : null, employeeNumber : null, annualRevenue : null, website : null, telephone : null, ownerId : null, ownerName : null, isEmployee : false, campaignId : null, campaignName : null, lastUpdated : 2017-06-06T03:18:23Z , remark : null, isMember : false, dateCreated : 2017-06-06T03:18:23Z , attr : { attr1 : null } } \u6ce8\u610f\u4e8b\u9879: \u4f7f\u7528\u5fae\u4fe1openid\u6216unionid\u4f5c\u4e3a\u5ba2\u6237\u8eab\u4efd\u4e4b\u524d\uff0c\u8bf7\u5c06\u5fae\u4fe1\u516c\u4f17\u53f7\u7ed1\u5b9a\u5230DM Hub\u7cfb\u7edf\uff0c\u5e76\u5c06\u5fae\u4fe1\u7c89\u4e1d\u5bfc\u5165\u5230DM Hub\u7cfb\u7edf\u3002 \u7f3a\u5c11customer\u6570\u636e-\u8fd4\u56de\u7ed3\u679c status: 400 No customer field found \u7f3a\u5c11customerIdentities\u6570\u636e-\u8fd4\u56de\u7ed3\u679c status: 400 No customerIdentities field found customerIdentities\u975elist\u7c7b\u578b-\u8fd4\u56de\u7ed3\u679c status: 400 customerIdentities must be an array of values in customerIdentity \u5b57\u6bb5\u9a8c\u8bc1\u9519\u8bef-\u8fd4\u56de\u7ed3\u679c status: 200 { error : { code : C0002 , message : {\\ field\\ :\\ birthday\\ ,\\ message\\ :\\ testet parse error\\ } } }","title":"\u5e26\u8eab\u4efd\u521b\u5efa\u5ba2\u6237\u7684API"},{"location":"api/customer/#api_1","text":"\u666e\u901a\u521b\u5efa\u5ba2\u6237API\u4f1a\u6839\u636e\u8bf7\u6c42\u4f53\u4e2d\u7684\u624b\u673a\u53f7\u7801\u548c\u90ae\u4ef6\u5730\u5740\u53bb\u67e5\u627e\u73b0\u6709\u5ba2\u6237\uff0c\u5982\u679c\u80fd\u67e5\u627e\u5230\u5ba2\u6237\uff0c\u5c31\u4f1a\u66f4\u65b0\u73b0\u6709\u5ba2\u6237\uff0c\u5426\u5219\u5219\u521b\u5efa\u4e00\u4e0b\u65b0\u5ba2\u6237\u3002 \u8c03\u7528\u8bf7\u6c42 HTTP\u8bf7\u6c42\u65b9\u5f0f: POST https://api.convertlab.com/v1/customers?access_token={access_token} POST\u6570\u636e\u793a\u4f8b: { name : \u5c0fD , mobile : 18612341234 , mobileVerified : true, gender : 1, createMethod : ImportFromExternalSystem } \u53c2\u6570\u8bf4\u660e {access_token} \u7684\u503c\u4e3a\u8c03\u7528API\u7684\u4ee4\u724c\uff0c\u8bf7\u53c2\u89c1 \u83b7\u53d6access_token \u8fd4\u56de\u7ed3\u679c \u65b0\u5ba2\u6237 status:201 \u5df2\u6709\u5ba2\u6237 status:200 { id : 7, displayName : \u5c0fD , name : \u5c0fD , img : null, gender : 1, mobile : 18612341234 , mobileVerified : true, email : null, emailVerified : false, birthday : null, wechat : null, nickName : null, country : null, province : null, city : null, county : null, homeAddress : null, officeAddress : null, qq : null, weibo : null, stage : null, dateJoin : 2017-06-06T03:18:23Z , source : null, contentName : null, company : null, title : null, industry : null, employeeNumber : null, annualRevenue : null, website : null, telephone : null, ownerId : null, ownerName : null, isEmployee : false, campaignId : null, campaignName : null, lastUpdated : 2017-06-06T03:18:23Z , remark : null, isMember : false, dateCreated : 2017-06-06T03:18:23Z , attr : { attr1 : null } } \u8bf7\u6c42\u5bf9\u8c61\u4e3a\u7a7a-\u8fd4\u56de\u7ed3\u679c status: 400 Request data need at least one field \u5b57\u6bb5\u9a8c\u8bc1\u9519\u8bef-\u8fd4\u56de\u7ed3\u679c status: 200 { error : { code : 400001 , message : field validation exception , fieldErrors : [ { fieldName : birthday , message : testet parse error } ] } }","title":"\u666e\u901a\u521b\u5efa\u5ba2\u6237API"},{"location":"api/customer/#api_2","text":"\u8c03\u7528\u8be5API\u53ef\u4ee5\u5bf9DM Hub\u7cfb\u7edf\u4e2d\u7684\u5ba2\u6237\u8fdb\u884c\u4fee\u6539\u3002 \u9700\u8981\u6ce8\u610f\u7684\u4e00\u70b9\u662f\uff0c\u5bf9\u4e8emobileVerified\u4e3atrue\u7684\u624b\u673a\u53f7\uff0c\u5728\u624b\u673a\u53f7\u7801\u4e0d\u53d8\u7684\u60c5\u51b5\u4e0b\uff0c\u65e0\u6cd5\u5c06mobileVerified\u5b57\u6bb5\u6539\u4e3afalse\u3002\u5bf9\u4e8eemailVerified\u4e3atrue\u7684\u7535\u5b50\u90ae\u7bb1\uff0c\u5728\u90ae\u7bb1\u5730\u5740\u4e0d\u53d8\u7684\u60c5\u51b5\u4e0b\uff0c\u65e0\u6cd5\u5c06emailVerified\u5b57\u6bb5\u6539\u4e3afalse\u3002 \u8c03\u7528\u8bf7\u6c42 HTTP\u8bf7\u6c42\u65b9\u5f0f: PUT https://api.convertlab.com/v1/customers/{id}?access_token={access_token} PUT\u6570\u636e\u793a\u4f8b\uff1a { name : \u5c0fD , mobile : 18612341234 , mobileVerified : true, gender : 1 } \u53c2\u6570\u8bf4\u660e {access_token} \u8bbf\u95ee\u8be5API\u7684\u4ee4\u724c\uff0c\u8bf7\u53c2\u89c1 \u83b7\u53d6access_token id \u8981\u4fee\u6539\u7684\u5ba2\u6237id \u8fd4\u56de\u7ed3\u679c \u8fd4\u56de\u4fee\u6539\u524d\u7684\u5ba2\u6237\u4fe1\u606f","title":"\u66f4\u65b0\u5ba2\u6237\u7684API"},{"location":"api/customer/#api_3","text":"\u5220\u9664\u6307\u5b9a\u7684\u5ba2\u6237 \u8c03\u7528\u8bf7\u6c42 HTTP\u8bf7\u6c42\u65b9\u5f0f: DELETE https://api.convertlab.com/v1/customers/{id}?access_token={access_token} \u53c2\u6570\u8bf4\u660e access_token \u8bbf\u95ee\u8be5API\u7684\u4ee4\u724c\uff0c\u8bf7\u53c2\u89c1 \u83b7\u53d6access_token id \u8981\u4fee\u6539\u7684\u5ba2\u6237id \u8fd4\u56de\u7ed3\u679c \u8fd4\u56de\u72b6\u6001\u7801\u4e3a204","title":"\u5220\u9664\u5ba2\u6237\u7684API"},{"location":"api/customer/#api_4","text":"\u8c03\u7528\u8bf7\u6c42 HTTP\u8bf7\u6c42\u65b9\u5f0f: GET https://api.convertlab.com/v1/customers/{id}?access_token={access_token} \u53c2\u6570\u8bf4\u660e {id}\u662f\u8981\u83b7\u53d6\u5ba2\u6237\u7684id {access_token}\u7528\u4ece\u201c\u83b7\u53d6\u8eab\u4efd\u6743\u9650\u201d\u8282\u62ff\u5230\u7684access_token\u66ff\u6362 \u8fd4\u56de\u7ed3\u679c { id : 7, displayName : \u5c0fD , name : \u5c0fD , img : null, gender : 1, mobile : 18612341234 , mobileVerified : true, email : null, emailVerified : false, birthday : null, wechat : null, nickName : null, country : null, province : null, city : null, county : null, homeAddress : null, officeAddress : null, qq : null, weibo : null, stage : null, dateJoin : 2017-06-06T03:18:23Z , source : null, contentName : null, company : null, title : null, industry : null, employeeNumber : null, annualRevenue : null, website : null, telephone : null, ownerId : null, ownerName : null, isEmployee : false, campaignId : null, campaignName : null, lastUpdated : 2017-06-06T03:18:23Z , remark : null, isMember : false, dateCreated : 2017-06-06T03:18:23Z , attr : { attr1 : null } }","title":"\u83b7\u53d6\u5355\u4e2a\u5ba2\u6237\u7684API"},{"location":"api/customer/#api_5","text":"\u8c03\u7528\u8bf7\u6c42 HTTP\u8bf7\u6c42\u65b9\u5f0f: GET https://api.convertlab.com/v1/customers?access_token={access_token} stage={stage} source={source} mobile={mobile} email={email} gender={gender} idList={idList} dateCreatedFrom={dateCreatedFrom} dateCreatedTo lastUpdatedFrom={lastUpdatedFrom} lastUpdatedTo={lastUpdatedTo} select={select} rows={rows} page={page} sidx={sidx} sord={sord} \u53c2\u6570\u8bf4\u660e \u53c2\u6570 \u662f\u5426\u5fc5\u586b \u8bf4\u660e access_token \u662f \u8bbf\u95eeAPI\u7684\u4ee4\u724c stage \u5426 \u7528\u5ba2\u6237\u6240\u5904\u7684\u9636\u6bb5\u67e5\u8be2\uff0c\u5982\u8fc7\u67e5\u8be2\u7684\u9636\u6bb5\u4e3a\u7a7a\uff0c\u8bf7\u4f7f\u7528stage=_empty source \u5426 \u7528\u5ba2\u6237\u7684\u521d\u59cb\u6765\u6e90\u67e5\u8be2 mobile \u5426 \u7528\u5ba2\u6237\u7684\u624b\u673a\u67e5\u8be2 email \u5426 \u7528\u5ba2\u6237\u7684\u90ae\u7bb1\u67e5\u8be2 gender \u5426 \u7528\u5ba2\u6237\u7684\u6027\u522b\u67e5\u8be2, 1\u4ee3\u8868\u7537\u6027\uff0c2\u4ee3\u8868\u5973\u6027\uff0c0\u4ee3\u8868\u672a\u77e5 idList \u5426 \u652f\u6301\u4ee5\u9017\u53f7\u5206\u5f00\u7684\u5ba2\u6237id\u5217\u8868\uff0c\u5982idList=1,2,3,4 dateCreatedFrom \u5426 \u5ba2\u6237\u521b\u5efa\u7684\u8d77\u59cb\u65f6\u95f4\uff0c\u65f6\u95f4\u683c\u5f0f\u4e3a \u201c2016-11-11T11:11:11\u201d \u4e3aUTC\u65f6\u95f4,\u5907\u6ce8\uff1a\u5317\u4eac\u65f6\u95f4\u9700\u8981\u51cf8\u540e\u4f20\u5165 dateCreatedTo \u5426 \u5ba2\u6237\u521b\u5efa\u7684\u7ed3\u675f\u65f6\u95f4\uff0c\u65f6\u95f4\u683c\u5f0f\u4e3a \u201c2016-11-11T11:11:11\u201d \u4e3aUTC\u65f6\u95f4 lastUpdatedFrom \u5426 \u5ba2\u6237\u66f4\u65b0\u7684\u8d77\u59cb\u65f6\u95f4(\u5305\u542b)\uff0c\u65f6\u95f4\u683c\u5f0f\u4e3a \u201c2016-11-11T11:11:11\u201d \u4e3aUTC\u65f6\u95f4 lastUpdatedTo \u5426 \u5ba2\u6237\u66f4\u65b0\u7684\u7ed3\u675f\u65f6\u95f4\uff0c\u65f6\u95f4\u683c\u5f0f\u4e3a \u201c2016-11-11T11:11:11\u201d \u4e3aUTC\u65f6\u95f4 select \u5426 \u8fd4\u56de\u7684\u5b57\u6bb5\uff0c\u591a\u4e2a\u5b57\u6bb5\u7528\u9017\u53f7\u9694\u5f00\u3002\u9ed8\u8ba4\u8fd4\u56de\u6240\u6709\u5b57\u6bb5\uff0c\u53ef\u4ee5\u7528select\u6307\u5b9a\u8981\u8fd4\u56de\u7684\u5b57\u6bb5 rows \u5426 \u6bcf\u9875\u7684\u8bb0\u5f55\u6570\uff0c\u9ed8\u8ba4\u6bcf\u9875\u8fd4\u56de20\u884c page \u5426 \u8fd4\u56de\u7b2c\u51e0\u9875\uff0c\u9ed8\u8ba4\u8fd4\u56de\u7b2c1\u9875 sidx \u5426 \u6309\u4ec0\u4e48\u5b57\u6bb5\u6392\u5e8f\uff0c\u9ed8\u8ba4\u6309id\u6392\u5e8f sord \u5426 asc\u8868\u793a\u5347\u5e8f\uff0cdesc\u8868\u793a\u964d\u5e8f\u3002\u9ed8\u8ba4\u6309\u5347\u5e8f\u6392\u5e8f \u8fd4\u56de\u7ed3\u679c - \u8fd4\u56de\u7684\u6240\u6709\u5ba2\u6237\u6570\u636e\u4fdd\u5b58\u5728\u540d\u53ebrows\u7684array\u5b57\u6bb5\u4e2d { rows : [ { id : 1, displayName : \u5927D , name : \u5927D , img : null, gender : 1, mobile : 18612341234 , mobileVerified : true, email : null // \u5ba2\u6237\u7684\u5176\u4ed6\u5b57\u6bb5 }, { id : 7, displayName : \u5c0fD , name : \u5c0fD , img : null, gender : 1, mobile : 18612341235 , mobileVerified : true, email : null // \u5ba2\u6237\u7684\u5176\u4ed6\u5b57\u6bb5 } ] }","title":"\u67e5\u8be2\u5ba2\u6237\u7684API"},{"location":"api/customer/#api_6","text":"\u8c03\u7528\u8bf7\u6c42 HTTP\u8bf7\u6c42\u65b9\u5f0f: GET https://api.convertlab.com/v1/customers/count?access_token={access_token} stage={stage} source={source} mobile={mobile} gender={gender} idList={idList} dateCreatedFrom={dateCreatedFrom} dateCreatedTo lastUpdatedFrom={lastUpdatedFrom} lastUpdatedTo={lastUpdatedTo} \u53c2\u6570\u8bf4\u660e \u53c2\u6570 \u662f\u5426\u5fc5\u586b \u8bf4\u660e access_token \u662f \u8bbf\u95eeAPI\u7684\u4ee4\u724c stage \u5426 \u7528\u5ba2\u6237\u6240\u5904\u7684\u9636\u6bb5\u67e5\u8be2\uff0c\u5982\u8fc7\u67e5\u8be2\u7684\u9636\u6bb5\u4e3a\u7a7a\uff0c\u8bf7\u4f7f\u7528stage=_empty source \u5426 \u7528\u5ba2\u6237\u7684\u521d\u59cb\u6765\u6e90\u67e5\u8be2 mobile \u5426 \u7528\u5ba2\u6237\u7684\u624b\u673a\u67e5\u8be2 gender \u5426 \u7528\u5ba2\u6237\u7684\u6027\u522b\u67e5\u8be2, 1\u4ee3\u8868\u7537\u6027\uff0c2\u4ee3\u8868\u5973\u6027\uff0c0\u4ee3\u8868\u672a\u77e5 idList \u5426 \u652f\u6301\u4ee5\u9017\u53f7\u5206\u5f00\u7684\u5ba2\u6237id\u5217\u8868\uff0c\u5982idList=1,2,3,4 dateCreatedFrom \u5426 \u5ba2\u6237\u521b\u5efa\u7684\u8d77\u59cb\u65f6\u95f4\uff0c\u65f6\u95f4\u683c\u5f0f\u4e3a \u201c2016-11-11T11:11:11\u201d \u4e3aUTC\u65f6\u95f4 dateCreatedTo \u5426 \u5ba2\u6237\u521b\u5efa\u7684\u7ed3\u675f\u65f6\u95f4\uff0c\u683c\u5f0f\u4e3a:\u201c2017-06-01T12:12:12Z\u201d \u4e3aUTC\u65f6\u95f4 lastUpdatedFrom \u5426 \u5ba2\u6237\u66f4\u65b0\u7684\u5176\u5b9e\u65f6\u95f4(\u5305\u542b)\uff0c\u683c\u5f0f\u4e3a:\u201c2017-06-01T12:12:12Z\u201d \u4e3aUTC\u65f6\u95f4 lastUpdateTo \u5426 \u5ba2\u6237\u66f4\u65b0\u7684\u7ed3\u675f\u65f6\u95f4\uff0c\u683c\u5f0f\u4e3a:\u201c2017-06-01T12:12:12Z\u201d \u4e3aUTC\u65f6\u95f4 select \u5426 \u8fd4\u56de\u7684\u5b57\u6bb5\uff0c\u591a\u4e2a\u5b57\u6bb5\u7528\u9017\u53f7\u9694\u5f00\u3002\u9ed8\u8ba4\u8fd4\u56de\u6240\u6709\u5b57\u6bb5\uff0c\u53ef\u4ee5\u7528select\u6307\u5b9a\u8981\u8fd4\u56de\u7684\u5b57\u6bb5 \u8fd4\u56de\u7ed3\u679c \u8fd4\u56de\u6ee1\u8db3\u6761\u4ef6\u7684\u5ba2\u6237\u7684\u6570\u91cf","title":"\u83b7\u53d6\u5ba2\u6237\u6570\u91cf\u7684API"},{"location":"api/customer/#api_7","text":"\u53ef\u4ee5\u4e3aDM Hub\u7cfb\u7edf\u4e2d\u7684\u73b0\u6709\u5ba2\u6237\u6dfb\u52a0\u5ba2\u6237\u8eab\u4efd\u3002\u65b0\u6dfb\u52a0\u7684\u8eab\u4efd\u5c06\u51fa\u73b0\u5728\u5ba2\u6237\u8be6\u60c5\u9875\u7684\u5de6\u4e0b\u89d2 \u8c03\u7528\u8bf7\u6c42 HTTP\u8bf7\u6c42\u65b9\u5f0f: POST https://api.convertlab.com/v1/customeridentities?access_token={access_token} POST\u8bf7\u6c42\u793a\u4f8b\uff1a { customerId : 123456 , identityType : myshop-account , identityValue : user12345 , identityName : \u5c0f\u7f8a\u82cf\u897f } \u53c2\u6570\u8bf4\u660e \u53c2\u6570 \u662f\u5426\u5fc5\u586b \u8bf4\u660e access_token \u662f \u8bbf\u95eeAPI\u7684\u4ee4\u724c customerId \u662f \u9700\u8981\u6dfb\u52a0\u8eab\u4efd\u7684\u5ba2\u6237id identityType \u662f \u8981\u6dfb\u52a0\u7684\u5ba2\u6237\u8eab\u4efd\u7c7b\u578b\uff0c\u8be6\u89c1 \u5ba2\u6237\u8eab\u4efd\u6a21\u578b,\u6700\u957f32\u4f4d\u5b57\u7b26 identityValue \u662f \u8981\u6dfb\u52a0\u7684\u5ba2\u6237\u8eab\u4efd\u503c\uff0c\u6700\u957f128\u4f4d\u5b57\u7b26 identityName \u5426 \u5ba2\u6237\u8eab\u4efd\u5bf9\u5e94\u7684\u6635\u79f0\uff0c\u6700\u957f256\u4f4d\u5b57\u7b26 \u8fd4\u56de\u7ed3\u679c { customerId : 123456 , identityType : myshop-account , identityValue : user12345 , identityName : \u5c0f\u7f8a\u82cf\u897f }","title":"\u6dfb\u52a0\u5ba2\u6237\u8eab\u4efd\u7684API"},{"location":"api/customer/#api_8","text":"\u53ef\u4ee5\u6839\u636e\u4e00\u4e2a\u6216\u591a\u4e2a\u5ba2\u6237id\u67e5\u8be2\u5ba2\u6237\u7684\u8eab\u4efd\uff0c\u4e5f\u53ef\u4ee5\u901a\u8fc7\u8eab\u4efd\u7684\u7c7b\u578b\u548c\u8eab\u4efd\u503c\u67e5\u8be2\u5ba2\u6237id \u8c03\u7528\u8bf7\u6c42 HTTP\u8bf7\u6c42\u65b9\u5f0f: GET https://api.convertlab.com/v1/customeridentities?access_token={access_token} customerIds={customerIds} identityType={identityType} identityValue={identityValue} \u53c2\u6570\u8bf4\u660e \u53c2\u6570 \u662f\u5426\u5fc5\u586b \u8bf4\u660e access_token \u662f \u8bbf\u95eeAPI\u7684\u4ee4\u724c customerIds \u5426 \u8981\u67e5\u8be2\u5ba2\u6237\u8eab\u4efd\u7684\u5ba2\u6237id\u5217\u8868\uff0c\u591a\u4e2a\u5ba2\u6237id\u7528\u9017\u53f7\u9694\u5f00\uff0c\u5982 \u201c123\uff0c124\u201d identityType \u5426 \u8981\u67e5\u8be2\u5ba2\u6237id\u7684\u8eab\u4efd\u7c7b\u578b\uff0c\u4e0eidentityValue\u540c\u65f6\u4f7f\u7528 identityValue \u5426 \u8981\u67e5\u8be2\u5ba2\u6237id\u7684\u8eab\u4efd\u503c\uff0c\u4e0eidentityType\u540c\u65f6\u4f7f\u7528 \u8fd4\u56de\u7ed3\u679c [ { customerId : 123456 , identityType : myshop-account , identityValue : user12345 , identityName : \u5c0f\u7f8a\u82cf\u897f }, { customerId : 123456 , identityType : wechat , identityValue : openid12345 , identityName : \u5c0f\u7f8a\u82cf\u897f } ] \u8fd4\u56de\u53c2\u6570\u8bf4\u660e identityTyp \u5ba2\u6237\u8eab\u4efd\u7c7b\u578b identityValue \u5ba2\u6237\u7684\u5728\u4f60\u7cfb\u7edf\u4e2d\u7684id customerId \u5ba2\u6237\u7684id identityName\u5ba2\u6237\u8eab\u4efd\u540d\u79f0 customerIds\u975e\u6570\u503c\u7c7b\u578b-\u8fd4\u56de\u7ed3\u679c status: 200 OK { error : { code : 400001 , message : customer id should be a number , fieldErrors : [ { fieldName : customerIds , message : customer id should be a number } ] } }","title":"\u67e5\u8be2\u5ba2\u6237\u8eab\u4efd\u7684API"},{"location":"api/customer/#_4","text":"\u8c03\u7528\u8bf7\u6c42 GET /v1/customerStatistics?access_token={access_token} rows={rows} page={page} sidx={sidx} sord={sord} customerId={customerId} needTotal={true} \u8bf7\u6c42\u53c2\u6570\u8bf4\u660e Name In Required Type Description access_token query yes string \u7528\u4ece\u201c\u83b7\u53d6\u8eab\u4efd\u6743\u9650\u201d\u8282\u62ff\u5230\u7684access_token\u66ff\u6362 rows query no number \u4e00\u9875\u5305\u542b\u591a\u5c11\u6761\u8bb0\u5f55\uff0c\u9ed8\u8ba4\u503c\u4e3a5 page query no number \u53d6\u7b2c\u51e0\u9875\u7684\u6570\u636e\uff0c\u9ed8\u8ba4\u503c\u4e3a1 sidx query no string \u7528\u4e8e\u6392\u5e8f\u7684\u5b57\u6bb5\uff0c\u9ed8\u8ba4\u4e3a\u201cid\u201d,\u652f\u6301\"totalScore\"\u5b57\u6bb5 sord query no string \u6392\u5e8f\u65b9\u5f0f\uff0casc\u8868\u793a\u5347\u5e8f\uff0cdesc\u8868\u793a\u964d\u5e8f\uff0c\u9ed8\u8ba4\u4e3aasc customerId query no number \u7cbe\u786e\u67e5\u8be2\u67d0\u4e2a\u5ba2\u6237\u7684\u8bb0\u5f55 needTotal query no boolean \u8fd4\u56de\u7ed3\u679c\u662f\u5426\u9700\u8981\u5305\u542b\u603b\u6570\uff0c\u9ed8\u8ba4\u4e3afalse\uff0c\u4e0d\u8fd4\u56de\u603b\u6570 \u8fd4\u56de\u6570\u636e { items :[ { customerId : 4678, firstOrderDate : 2015-04-28T03:43:33Z , id : 10948, lastOrderDate : 2015-04-28T03:43:33Z , lastOrderDays : 635, lastUpdated : 2017-01-22T16:34:03Z , latest30daysScore : 0, orderAMT : 0.05, orderAMTA : 4.2, orderAPCT : 88, orderTotal : 1, orderTotalAmount : 88, totalScore : 0 } ], meta : { records : 20, total : 7, hasNext : true } } \u8fd4\u56de\u6570\u636e\u8bf4\u660e Name Type Description items array \u6570\u636e\u5757\u6807\u7b7e customerId firstOrderDate \u683c\u5f0f\u4e3a:\u201c2017-06-01T12:12:12Z\u201d \u4e3aUTC\u65f6\u95f4 id number \u8fd9\u6761\u8bb0\u5f55\u7684ID lastOrderDate \u683c\u5f0f\u4e3a:\u201c2017-06-01T12:12:12Z\u201d \u4e3aUTC\u65f6\u95f4 lastOrderDays lastUpdated \u683c\u5f0f\u4e3a:\u201c2017-06-01T12:12:12Z\u201d \u4e3aUTC\u65f6\u95f4 latest30daysScore orderAMT orderAMTA orderAPCT orderTotal orderTotalAmount totalScore number \u5ba2\u6237\u6d3b\u8dc3\u5ea6\u503c meta object \u5143\u6570\u636e\u5757\u6807\u7b7e records number \u603b\u8bb0\u5f55\u6761\u6570 total number \u603b\u9875\u6570 hasNext boolean \u662f\u5426\u8fd8\u6709\u8bb0\u5f55","title":"\u67e5\u8be2\u5ba2\u6237\u7684\u7edf\u8ba1\u4fe1\u606f"},{"location":"api/customer/#api_9","text":"\u6839\u636e\u5ba2\u6237\u8eab\u4efd\u628a\u4e24\u4e2a\u5ba2\u6237\u8fdb\u884c\u5408\u5e76\uff0c\u5408\u5e76\u540ecustomer\uff08From\uff09\u4f1a\u88ab\u5220\u9664\u6389,customer\uff08To\uff09\u7684customerid \u4f1a\u88ab\u8fd4\u56de \u8c03\u7528\u8bf7\u6c42 HTTP\u8bf7\u6c42\u65b9\u5f0f: POST https://api.convertlab.com/v1/customerService/mergeCustomerByIdentities?access_token={access_token} POST\u8bf7\u6c42\u793a\u4f8b\uff1a { from : { identityType : wechat , identityValue : aaaa }, to : { identityType : wechat-openid , identityValue : oVLMTt0zw5JEZc6PE0tIsA5Kz7f0 } } \u53c2\u6570\u8bf4\u660e \u53c2\u6570 \u662f\u5426\u5fc5\u586b \u8bf4\u660e access_token \u662f \u8bbf\u95eeAPI\u7684\u4ee4\u724c identityType \u662f \u5ba2\u6237\u8eab\u4efd\u7c7b\u578b\uff0c\u8be6\u89c1 \u5ba2\u6237\u8eab\u4efd\u6a21\u578b,\u6700\u957f32\u4f4d\u5b57\u7b26 identityValue \u662f \u5ba2\u6237\u8eab\u4efd\u503c\uff0c\u6700\u957f128\u4f4d\u5b57\u7b26 \u8fd4\u56de\u7ed3\u679c { data : { customerId : {\u5408\u5e76\u540e\u7684\u5ba2\u6237id} } }","title":"\u6839\u636e\u5ba2\u6237\u8eab\u4efd\u5408\u5e76\u5ba2\u6237API"},{"location":"api/customer/#idapi","text":"\u6839\u636e\u5ba2\u6237ID\u628a\u4e24\u4e2a\u5ba2\u6237\u8fdb\u884c\u5408\u5e76\uff0c\u5408\u5e76\u540ecustomer\uff08From\uff09\u4f1a\u88ab\u5220\u9664\u6389,customer\uff08To\uff09\u7684customerid \u4f1a\u88ab\u8fd4\u56de \u8c03\u7528\u8bf7\u6c42 HTTP\u8bf7\u6c42\u65b9\u5f0f: POST https://api.convertlab.com/v1/customerService/mergeCustomerById?access_token={access_token} fromId={fromId} toId={toId} \u53c2\u6570\u8bf4\u660e \u53c2\u6570 \u662f\u5426\u5fc5\u586b \u8bf4\u660e access_token \u662f \u8bbf\u95eeAPI\u7684\u4ee4\u724c fromId \u662f \u9700\u8981\u5408\u5e76\u7684\u6765\u6e90\u5ba2\u6237ID toId \u662f \u9700\u8981\u5408\u5e76\u7684\u76ee\u6807\u5ba2\u6237ID \u8fd4\u56de\u7ed3\u679c { data : { customerId : {\u5408\u5e76\u540e\u7684\u5ba2\u6237id} } }","title":"\u6839\u636e\u5ba2\u6237ID\u5408\u5e76\u5ba2\u6237API"},{"location":"api/customerevent/","text":"\u5ba2\u6237\u4e8b\u4ef6\u6a21\u578b \u5728DM Hub\u4e2d\uff0c\u5ba2\u6237\u7684\u884c\u4e3a\u90fd\u662f\u4ee5\u5ba2\u6237\u4e8b\u4ef6\uff08CustomerEvent\uff09\u7684\u5f62\u5f0f\u8bb0\u5f55\u7684\u3002\u5ba2\u6237\u4e8b\u4ef6\u4f1a\u8bb0\u5f55\u5ba2\u6237\u53d1\u751f\u76f8\u5173\u884c\u4e3a\u7684\u6240\u6709\u4fe1\u606f\uff0c\u4f8b\u5982\u5177\u4f53\u884c\u4e3a\uff0c\u884c\u4e3a\u53d1\u751f\u65f6\u95f4\uff0c\u884c\u4e3a\u6d89\u53ca\u7684\u5185\u5bb9\uff0c\u7b49\u3002DM Hub\u4f1a\u6839\u636e\u5ba2\u6237\u7684\u4e8b\u4ef6\u8bb0\u5f55\u8fdb\u884c\u76f8\u5173\u7684\u5ba2\u6237\u884c\u4e3a\u5206\u6790\uff0c\u6f0f\u6597\u5206\u6790\uff0c\u89e6\u53d1\u81ea\u52a8\u6d41\u7a0b\u7b49\u3002\u901a\u5e38\u6765\u8bb2\uff0c\u5ba2\u6237\u4e8b\u4ef6\u662f\u4e0d\u53ef\u66f4\u6539\u4e0d\u53ef\u5220\u9664\u7684\uff0c\u56e0\u4e3a\u4e00\u822c\u7684\uff0c\u5ba2\u6237\u884c\u4e3a\u4e00\u65e6\u53d1\u751f\u4fbf\u4e0d\u53ef\u9006\u8f6c\u3002\u66f4\u6539\u5ba2\u6237\u4e8b\u4ef6\u53ef\u80fd\u4f1a\u9020\u6210DM Hub\u4e00\u4e9b\u884c\u4e3a\u7684\u4e0d\u51c6\u786e\u3002 DM Hub\u7cfb\u7edf\u5185\u7f6e\u4e86\u4e00\u4e9b\u4e8b\u4ef6\u7c7b\u578b\uff0c\u53ef\u4ee5\u901a\u8fc7\u8bbf\u95ee \u8bbe\u7f6e \u5ba2\u6237\u4e8b\u4ef6 \u9875\u9762\u67e5\u770b \u8be5\u9875\u9762\u5217\u51fa\u4e86\u6240\u6709\u5185\u7f6e\u4e8b\u4ef6\u7684\u7c7b\u578bID\uff0c\u63a8\u8fdb\u9636\u6bb5\u548c\u9ed8\u8ba4\u7684\u6d3b\u8dc3\u5ea6\u8bc4\u5206\u3002 \u6bcf\u4e2a \u5185\u7f6e\u4e8b\u4ef6 \u90fd\u6709\u5982\u4e0b\u5b57\u6bb5: \u5c5e\u6027 \u5c5e\u6027\u610f\u4e49 \u7c7b\u578b \u8bf4\u660e id \u5ba2\u6237\u4e8b\u4ef6ID Long \u53ea\u8bfb\u5b57\u6bb5 customerId \u5ba2\u6237id Long \u53d1\u751f\u884c\u4e3a\u7684\u5ba2\u6237\u3002 event \u4e8b\u4ef6\u7c7b\u578bID String \u4e8b\u4ef6\u7c7b\u578bID\uff0c\u6700\u957f32\u4e2a\u82f1\u6587\u5b57\u7b26\u3002\u53ef\u5728 \u8bbe\u7f6e \u5ba2\u6237\u4e8b\u4ef6\u9875\u9762\u67e5\u770b targetId \u884c\u4e3a\u6240\u5173\u8054\u7684\u76ee\u6807id String \u6bd4\u5982\u5982\u679c\u4e8b\u4ef6\u4e3a\u5173\u6ce8\u516c\u4f17\u53f7\uff0ctargetId\u4e3a\u516c\u4f17\u53f7\u5728DM Hub\u7cfb\u7edf\u4e2d\u7684id\u3002\u6700\u957f255\u4e2a\u5b57\u7b26\u3002 targetName \u884c\u4e3a\u6240\u5173\u8054\u7684\u76ee\u6807\u540d\u79f0 String \u6bd4\u5982\u5982\u679c\u4e8b\u4ef6\u4e3a\u5173\u6ce8\u516c\u4f17\u53f7\uff0ctargetName\u4e3a\u516c\u4f17\u53f7\u7684\u540d\u5b57\u3002\u6700\u957f255\u4e2a\u5b57\u7b26\u3002 date \u884c\u4e3a\u6240\u53d1\u751f\u7684\u65f6\u95f4 String \u683c\u5f0f\u4e3a:\u201c2017-06-01T12:12:12Z\u201d \u4e3aUTC\u65f6\u95f4 source \u6765\u6e90 String \u9884\u5148\u8bbe\u5b9a\u7684\u6765\u6e90\uff0c\u6bd4\u5982\u8ba2\u5355\u662f\u4ece\u6dd8\u5b9d\u6765\u7684\uff0c\u5219\u6765\u6e90\u53ef\u4ee5\u8bbe\u7f6e\u4e3a\u6dd8\u5b9d\u3002 contentName \u6765\u6e90\u5185\u5bb9 String \u6765\u6e90\u5185\u5bb9 score \u5ba2\u6237\u6d3b\u8dc3\u5ea6 Integer \u53d1\u9001\u8be5\u4e8b\u4ef6\u4f1a\u7ed9\u5ba2\u6237\u589e\u52a0\u591a\u5c11\u6d3b\u8dc3\u5ea6\u3002 tag \u4e8b\u4ef6\u53d1\u751f\u540e\u4e3a\u5ba2\u6237\u6dfb\u52a0\u7684\u5185\u5bb9\u6807\u7b7e String \u591a\u4e2a\u6807\u7b7e\u53ef\u4ee5\u7528\u9017\u53f7\u9694\u5f00\u3002\u6700\u957f255\u4e2a\u5b57\u7b26\u3002 campaign \u8425\u9500\u6d3b\u52a8code String DM Hub\u521b\u5efa\u7684\u8425\u9500\u6d3b\u52a8\u4ee3\u7801 campaignName \u8425\u9500\u6d3b\u52a8\u540d\u79f0 String DM Hub\u521b\u5efa\u7684\u8425\u9500\u6d3b\u52a8\u7684\u540d\u79f0 summary \u6458\u8981 String 1024\u4e2a\u5b57\u8282\u6216\u6c49\u5b57 lastUpdated \u4e8b\u4ef6\u8bb0\u5f55\u8fdb\u5165\u5728DM Hub\u7cfb\u7edf\u7684\u65f6\u95f4 String \u53ea\u8bfb\u5b57\u6bb5\uff0c\u683c\u5f0f\u4e3a:\u201c2017-06-01T12:12:12Z\u201d \u4e3aUTC\u65f6\u95f4 \u9664\u4e86\u7cfb\u7edf\u5185\u7f6e\u4e8b\u4ef6\uff0c\u60a8\u8fd8\u53ef\u4ee5\u6dfb\u52a0\u81ea\u5b9a\u4e49\u4e8b\u4ef6\u3002\u8981\u6dfb\u52a0\u81ea\u5b9a\u4e49\u4e8b\u4ef6\uff0c\u8bf7\u5728\u5ba2\u6237\u8bbe\u7f6e\u9875\u9762\u70b9\u51fb \u65b0\u5efa\u81ea\u5b9a\u4e49\u4e8b\u4ef6 \u6309\u94ae\uff1a \u5728\u81ea\u5b9a\u4e49\u4e8b\u4ef6\u521b\u5efa\u5bf9\u8bdd\u6846\u4e2d\uff0c\u60a8\u53ef\u4ee5\u8bbe\u7f6e\u4e8b\u4ef6\u7684\u7c7b\u578bID\uff0c\u9ed8\u8ba4\u6d3b\u8dc3\u5ea6\u5206\u6570\uff0c\u548c\u4e8b\u4ef6\u63a8\u8fdb\u9636\u6bb5\u3002\u4e3a\u4e86\u907f\u514d\u5c06\u6765\u4e0e\u5185\u7f6e\u4e8b\u4ef6\u7c7b\u578b\u53d1\u751f\u51b2\u7a81\uff0c\u81ea\u5b9a\u4e49\u4e8b\u4ef6\u7c7b\u578b\u90fd\u5f3a\u5236\u4ee5c_\u5f00\u5934\uff0c\u6bd4\u5982\u4e0a\u56fe\u4e2d\u7684\u4e8b\u4ef6\u7c7b\u578bid\u4e3ac_apply_card\u3002 \u6bcf\u4e2a \u81ea\u5b9a\u4e49 \u4e8b\u4ef6\uff0c\u6709\u4ee5\u4e0b\u9884\u7f6e\u5c5e\u6027\uff1a \u5c5e\u6027 \u5c5e\u6027\u610f\u4e49 \u7c7b\u578b \u8bf4\u660e id \u5ba2\u6237\u4e8b\u4ef6ID Long \u53ea\u8bfb\u5b57\u6bb5 customerId \u5ba2\u6237id Long \u53d1\u751f\u884c\u4e3a\u7684\u5ba2\u6237\u3002 event \u4e8b\u4ef6\u7c7b\u578bID String \u4e8b\u4ef6\u7c7b\u578bID\uff0c\u6700\u957f32\u4e2a\u82f1\u6587\u5b57\u7b26\u3002\u53ef\u5728 \u8bbe\u7f6e \u5ba2\u6237\u4e8b\u4ef6\u9875\u9762\u67e5\u770b date \u884c\u4e3a\u6240\u53d1\u751f\u7684\u65f6\u95f4 String \u683c\u5f0f\u4e3a:\u201c2017-06-01T12:12:12Z\u201d \u4e3aUTC\u65f6\u95f4 source \u6765\u6e90 String \u9884\u5148\u8bbe\u5b9a\u7684\u6765\u6e90\uff0c\u6bd4\u5982\u8ba2\u5355\u662f\u4ece\u6dd8\u5b9d\u6765\u7684\uff0c\u5219\u6765\u6e90\u53ef\u4ee5\u8bbe\u7f6e\u4e3a\u6dd8\u5b9d\u3002 contentName \u6765\u6e90\u5185\u5bb9 String \u6765\u6e90\u5185\u5bb9 score \u5ba2\u6237\u6d3b\u8dc3\u5ea6 Integer \u53d1\u9001\u8be5\u4e8b\u4ef6\u4f1a\u7ed9\u5ba2\u6237\u589e\u52a0\u591a\u5c11\u6d3b\u8dc3\u5ea6\u3002 tag \u4e8b\u4ef6\u53d1\u751f\u540e\u4e3a\u5ba2\u6237\u6dfb\u52a0\u7684\u5185\u5bb9\u6807\u7b7e String \u591a\u4e2a\u6807\u7b7e\u53ef\u4ee5\u7528\u9017\u53f7\u9694\u5f00\u3002\u6700\u957f255\u4e2a\u5b57\u7b26\u3002 campaign \u8425\u9500\u6d3b\u52a8code String DM Hub\u521b\u5efa\u7684\u8425\u9500\u6d3b\u52a8\u4ee3\u7801 campaignName \u8425\u9500\u6d3b\u52a8\u540d\u79f0 String DM Hub\u521b\u5efa\u7684\u8425\u9500\u6d3b\u52a8\u7684\u540d\u79f0 lastUpdated \u4e8b\u4ef6\u8bb0\u5f55\u8fdb\u5165\u5728DM Hub\u7cfb\u7edf\u7684\u65f6\u95f4 String \u53ea\u8bfb\u5b57\u6bb5\uff0c\u683c\u5f0f\u4e3a:\u201c2017-06-01T12:12:12Z\u201d \u4e3aUTC\u65f6\u95f4 \u9664\u4e86\u9884\u7f6e\u5c5e\u6027\uff0c\u81ea\u5b9a\u4e49\u4e8b\u4ef6\u8fd8\u80fd\u6dfb\u52a0\u6700\u591a16\u4e2a\u81ea\u5b9a\u4e49\u5c5e\u6027(10\u4e2a\u5b57\u7b26\u578b, 3\u4e2a\u6570\u91cf\u578b\uff0c3\u4e2a\u91d1\u989d\u578b)\u3002\u8981\u6dfb\u52a0\u81ea\u5b9a\u4e49\u5c5e\u6027\uff0c\u8bf7\u5728\u81ea\u5b9a\u4e49\u4e8b\u4ef6\u5bf9\u8bdd\u6846\u5185\u70b9\u51fb \u6dfb\u52a0\u81ea\u5b9a\u4e49\u5c5e\u6027 \u6309\u94ae\u3002 \u8fd8\u662f\u4ee5\u7533\u8bf7\u4fe1\u7528\u5361\u4e8b\u4ef6c_apply_card\u4e3a\u4f8b\uff0c\u6211\u4eec\u53ef\u4ee5\u589e\u52a0\u4e00\u4e2a\u5c5e\u6027touter\u6765\u8bb0\u5f55\u5730\u63a8\u4eba\u5458\u7684id\u3002 \u7531\u4e8e\u4e8b\u4ef6\u89c4\u6a21\u5e9e\u5927\uff0c\u76ee\u524d\u5c06\u5386\u53f2\u4e8b\u4ef6\u653e\u5165\u76f8\u5e94\u7684\u5386\u53f2\u5206\u533a\u4e2d\uff0c\u67e5\u8be2\u3001\u5220\u9664\u65f6\u8bf7\u4f7f\u7528 partition \u53c2\u6570,\u5426\u5219\u9ed8\u8ba4 \u4f7f\u7528\u5f53\u524d\u65f6\u95f4\u4f5c\u4e3a\u5206\u533a \u3002\u5177\u4f53\u5206\u533a\u4fe1\u606f\u5982\u4e0b\uff1a \u65f6\u95f4\u5206\u533a partition \u5907\u6ce8 2019\u5e74 201901~201906 \u4ee5\u5e74\u6708\u4f5c\u4e3a\u5206\u533a 2018\u5e74 2018 index\u63a5\u53e3\u67e5\u8be22018\u5e74\u7684\u4e8b\u4ef6\u5fc5\u586b 2017\u5e74 2017 index\u63a5\u53e3\u67e5\u8be22017\u5e74\u7684\u4e8b\u4ef6\u5fc5\u586b 2017\u5e74\u4e4b\u524d 2016 index\u63a5\u53e3\u67e5\u8be22017\u5e74\u4e4b\u524d\u7684\u4e8b\u4ef6\u5fc5\u586b \u6ce8\uff1a\u7cfb\u7edf\u5c06\u5bf9\u4e8b\u4ef6\u8fdb\u884c\u53bb\u91cd\u548c\u81ea\u52a8\u66f4\u65b0\u3002\u5982\u679c\u4f20\u5165externalId\uff0c\u7cfb\u7edf\u4f1a\u6839\u636eexternalId\u5904\u7406\u91cd\u590d\u4e8b\u4ef6\uff1b\u5982\u679c\u672a\u6307\u5b9aexternalId\uff0c\u5219\u6839\u636e\u5bf9\u4e8e\u540c\u4e00\u65f6\u95f4\uff08date\uff09\u3001\u540c\u4e00\u5ba2\u6237\uff08customerId\uff09\u3001\u53d1\u751f\u7684\u540c\u4e00\u4e8b\u4ef6\uff08event\uff09\u6765\u5904\u7406\u3002 \u521b\u5efa\u5ba2\u6237\u4e8b\u4ef6\u7684API \u6211\u4eec\u4ee5\u4e0a\u9762\u5b9a\u4e49\u7684\u81ea\u5b9a\u4e49\u4e8b\u4ef6c_apply_card\u4e3a\u4f8b\u4ecb\u7ecd\u5ba2\u6237\u4e8b\u4ef6\u7684\u521b\u5efa\u3002 \u8c03\u7528\u8bf7\u6c42 HTTP\u8bf7\u6c42\u65b9\u5f0f: POST https://api.convertlab.com/v1/customerevents?access_token={access_token} POST\u8bf7\u6c42\u793a\u4f8b\uff1a { customerId : 123456 , event : c_apply_card , cardType : golden_card , cardTypeLabel : \u91d1\u5361 , date : 2017-06-07T03:43:00Z , source : \u4eba\u6c11\u5e7f\u573a , touter : t00001 } \u53c2\u6570\u8bf4\u660e {access_token}\u4e3a\u8bbf\u95ee\u63a5\u53e3\u7684\u4ee4\u724c \u8bf7\u6c42\u4f53\u5185\u5b57\u6bb5\u7684\u610f\u4e49\u8bf7\u53c2\u89c1\u5ba2\u6237\u4e8b\u4ef6\u6a21\u578b\u90e8\u5206 \u8fd4\u56de\u7ed3\u679c { id : 1, customerId : 123456, event : c_apply_card , cardType : golden_card , cardTypeLabel : \u91d1\u5361 , date : 2017-06-07T03:43:00Z , source : \u4eba\u6c11\u5e7f\u573a , score : 0, tag : null, campaign : null, campaignName : null, contentName : null, externalId : null, lastUpdated : 2017-06-07T05:38:52Z , touter : t00001 } \u91c7\u96c6\u5ba2\u6237\u4e8b\u4ef6\u7684 API \u4e0e\u4e0a\u8ff0\u521b\u5efa\u5ba2\u6237\u4e8b\u4ef6\u7684 API \u4e0d\u540c\uff0c\u91c7\u96c6\u5ba2\u6237\u4e8b\u4ef6\u7684 API \u901a\u8fc7\u5ba2\u6237\u8eab\u4efd\u5c06\u4e8b\u4ef6\u4e0e\u5ba2\u6237\u7ed1\u5b9a\u3002 \u8c03\u7528\u8bf7\u6c42 HTTP\u8bf7\u6c42\u65b9\u5f0f: POST https://api.convertlab.com/v1/collector/pushevent?access_token={access_token} POST\u8bf7\u6c42\u793a\u4f8b\uff1a { identityType : mobile , identityValue : 18612345678 , event : c_apply_card , cardType : golden_card , cardTypeLabel : \u91d1\u5361 , date : 2017-06-07T03:43:00Z , source : \u4eba\u6c11\u5e7f\u573a , touter : t00001 } \u53c2\u6570\u8bf4\u660e {access_token}\u4e3a\u8bbf\u95ee\u63a5\u53e3\u7684\u4ee4\u724c \u8bf7\u6c42\u4f53\u5185\u5b57\u6bb5\u7684\u610f\u4e49\u8bf7\u53c2\u89c1\u5ba2\u6237\u4e8b\u4ef6\u6a21\u578b\u90e8\u5206 \u8fd4\u56de\u7ed3\u679c { success : true } \u6279\u91cf\u91c7\u96c6\u5ba2\u6237\u4e8b\u4ef6\u7684 API \u6279\u91cf\u4e0a\u4f20\u7684\u6bcf\u4e2a\u4e8b\u4ef6\u90fd\u901a\u8fc7\u5ba2\u6237\u8eab\u4efd\u4e0e\u5ba2\u6237\u7ed1\u5b9a\u3002 \u8c03\u7528\u8bf7\u6c42 HTTP\u8bf7\u6c42\u65b9\u5f0f: POST https://api.convertlab.com/v1/collector/batchPushEvents?access_token={access_token} POST\u8bf7\u6c42\u793a\u4f8b\uff1a { events : [ { identityType : mobile , identityValue : 18612345678 , cardType : golden_card , cardTypeLabel : \u91d1\u5361 , date : 2017-06-07T03:43:00Z , source : \u4eba\u6c11\u5e7f\u573a , touter : t00001 }, { identityType : wechat , identityValue : 12sdjfeg , cardType : golden_card , cardTypeLabel : \u91d1\u5361 , date : 2017-06-07T03:43:00Z , source : \u4eba\u6c11\u5e7f\u573a , touter : t00001 } ], commonProps : { event : c_apply_card } } \u53c2\u6570\u8bf4\u660e {access_token}\u4e3a\u8bbf\u95ee\u63a5\u53e3\u7684\u4ee4\u724c \u8bf7\u6c42\u4f53\u5185\u5b57\u6bb5\u7684\u610f\u4e49\u8bf7\u53c2\u89c1\u5ba2\u6237\u4e8b\u4ef6\u6a21\u578b\u90e8\u5206 POST\u8bf7\u6c42\u6570\u636e\u8bf4\u660e events\uff1a\u5fc5\u4f20\uff0c\u4e8b\u4ef6\u5217\u8868\uff0c\u4e8b\u4ef6\u603b\u6570\u4e0d\u80fd\u8d85\u8fc7 100 commonProps\uff1a\u975e\u5fc5\u4f20\uff0c\u4e8b\u4ef6\u5168\u5c40\u5c5e\u6027\u5b57\u5178\uff0c\u5168\u5c40\u5c5e\u6027\u4f1a\u6dfb\u52a0\u5230\u6bcf\u4e2a\u4e8b\u4ef6\u4e2d\uff0c\u5982\u679c\u4e0e events \u4e2d\u7684\u4e8b\u4ef6\u5c5e\u6027\u51b2\u7a81\uff0c\u5219\u4f1a\u8986\u76d6\u4e8b\u4ef6\u5c5e\u6027 \u8fd4\u56de\u7ed3\u679c { success : true } \u83b7\u53d6\u5355\u4e2a\u4e8b\u4ef6\u7684API \u8c03\u7528\u8bf7\u6c42 HTTP\u8bf7\u6c42\u65b9\u5f0f: GET https://api.convertlab.com/v1/customerevents/{id}?access_token={access_token} partition={partition} \u53c2\u6570\u8bf4\u660e - {access_token}\u7528\u4ece\u201c\u83b7\u53d6\u8eab\u4efd\u6743\u9650\u201d\u8282\u62ff\u5230\u7684access_token\u66ff\u6362 - id \u5ba2\u6237\u4e8b\u4ef6id - partition \u4e8b\u4ef6\u5e74\u9650\uff0c\u9009\u586b \u8fd4\u56de\u7ed3\u679c { id : 1, customerId : 123456, event : c_apply_card , cardType : golden_card , cardTypeLabel : \u91d1\u5361 , date : 2017-06-07T03:43:00Z , source : \u4eba\u6c11\u5e7f\u573a , score : 0, tag : null, campaign : null, campaignName : null, contentName : null, externalId : null, lastUpdated : 2017-06-07T05:38:52Z , touter : t00001 } \u67e5\u8be2\u4e8b\u4ef6\u7684API \u8c03\u7528\u8bf7\u6c42 HTTP\u8bf7\u6c42\u65b9\u5f0f: GET https://api.convertlab.com/v1/customerevents?access_token={access_token} customerId={customerId} event={event} idFrom={idFrom} idTo={idTo} lastUpdatedFrom={lastUpdatedFrom} lastUpdatedTo={lastUpdatedTo} partition={partition} max={max} sidx={sidx} sord={sord} \u53c2\u6570\u8bf4\u660e \u53c2\u6570 \u662f\u5426\u5fc5\u586b access_token \u662f \u8bbf\u95eeAPI\u7684\u4ee4\u724c customerId \u5426 \u67e5\u8be2\u6307\u5b9a\u5ba2\u6237\u7684\u4e8b\u4ef6\u5217\u8868 event \u5426 \u67e5\u8be2\u6307\u5b9a\u7684\u4e8b\u4ef6\u7c7b\u578b\u3002\u591a\u4e2a\u4e8b\u4ef6\u7c7b\u578b\u53ef\u7528\u9017\u53f7\u5206\u5f00 idFrom \u5426 \u67e5\u8be2\u4e8b\u4ef6\u7684\u8d77\u59cb id idTo \u5426 \u67e5\u8be2\u4e8b\u4ef6\u7684\u7ed3\u675f id lastUpdatedFrom \u5426 \u4e8b\u4ef6\u66f4\u65b0\u7684\u8d77\u59cb\u65f6\u95f4\u3002\u65f6\u95f4\u683c\u5f0f\u4e3a \u201c2017-06-07T12:13:14Z\u201d, \u4e3aUTC\u65f6\u95f4 lastUpdatedTo \u5426 \u4e8b\u4ef6\u66f4\u65b0\u7684\u7ed3\u675f\u65f6\u95f4\u3002\u65f6\u95f4\u683c\u5f0f\u540c\u4e0a max \u5426 \u6700\u591a\u8fd4\u56de\u591a\u5c11\u6761\u6570\u636e\uff0c\u9ed8\u8ba4\u4e3a20\uff0c\u6700\u5927\u53ef\u52301000 sidx \u5426 \u6392\u5e8f\u7684\u5b57\u6bb5\uff0c\u6bd4\u5982\u5982\u679c\u6309lastUpdated\u6392\u5e8f\uff0csidx=lastUpdated sord \u5426 asc\u8868\u793a\u5347\u5e8f\uff0cdesc\u8868\u793a\u964d\u5e8f\uff0c\u9ed8\u8ba4\u4e3a\u5347\u5e8f partition \u5426 \u5206\u65f6\u95f4\u4fe1\u606f\uff0c\u5982\u679c\u4e0d\u586b\u5219\u4ee3\u8868\u9ed8\u8ba4\u5206\u8868\uff0c\u5177\u4f53\u5206\u8868\u4fe1\u606f\u8bf7\u67e5\u770b\u65f6\u95f4\u5206\u8868 \u8fd4\u56de\u7ed3\u679c [ { id : 1, customerId : 123456, event : c_apply_card , cardType : golden_card , cardTypeLabel : \u91d1\u5361 , date : 2017-06-07T03:43:00Z , source : \u4eba\u6c11\u5e7f\u573a , score : 0, tag : null, campaign : null, campaignName : null, contentName : null, externalId : null, lastUpdated : 2017-06-07T06:43:29Z , touter : t00003 } ]","title":"\u5ba2\u6237\u4e8b\u4ef6"},{"location":"api/customerevent/#_1","text":"\u5728DM Hub\u4e2d\uff0c\u5ba2\u6237\u7684\u884c\u4e3a\u90fd\u662f\u4ee5\u5ba2\u6237\u4e8b\u4ef6\uff08CustomerEvent\uff09\u7684\u5f62\u5f0f\u8bb0\u5f55\u7684\u3002\u5ba2\u6237\u4e8b\u4ef6\u4f1a\u8bb0\u5f55\u5ba2\u6237\u53d1\u751f\u76f8\u5173\u884c\u4e3a\u7684\u6240\u6709\u4fe1\u606f\uff0c\u4f8b\u5982\u5177\u4f53\u884c\u4e3a\uff0c\u884c\u4e3a\u53d1\u751f\u65f6\u95f4\uff0c\u884c\u4e3a\u6d89\u53ca\u7684\u5185\u5bb9\uff0c\u7b49\u3002DM Hub\u4f1a\u6839\u636e\u5ba2\u6237\u7684\u4e8b\u4ef6\u8bb0\u5f55\u8fdb\u884c\u76f8\u5173\u7684\u5ba2\u6237\u884c\u4e3a\u5206\u6790\uff0c\u6f0f\u6597\u5206\u6790\uff0c\u89e6\u53d1\u81ea\u52a8\u6d41\u7a0b\u7b49\u3002\u901a\u5e38\u6765\u8bb2\uff0c\u5ba2\u6237\u4e8b\u4ef6\u662f\u4e0d\u53ef\u66f4\u6539\u4e0d\u53ef\u5220\u9664\u7684\uff0c\u56e0\u4e3a\u4e00\u822c\u7684\uff0c\u5ba2\u6237\u884c\u4e3a\u4e00\u65e6\u53d1\u751f\u4fbf\u4e0d\u53ef\u9006\u8f6c\u3002\u66f4\u6539\u5ba2\u6237\u4e8b\u4ef6\u53ef\u80fd\u4f1a\u9020\u6210DM Hub\u4e00\u4e9b\u884c\u4e3a\u7684\u4e0d\u51c6\u786e\u3002 DM Hub\u7cfb\u7edf\u5185\u7f6e\u4e86\u4e00\u4e9b\u4e8b\u4ef6\u7c7b\u578b\uff0c\u53ef\u4ee5\u901a\u8fc7\u8bbf\u95ee \u8bbe\u7f6e \u5ba2\u6237\u4e8b\u4ef6 \u9875\u9762\u67e5\u770b \u8be5\u9875\u9762\u5217\u51fa\u4e86\u6240\u6709\u5185\u7f6e\u4e8b\u4ef6\u7684\u7c7b\u578bID\uff0c\u63a8\u8fdb\u9636\u6bb5\u548c\u9ed8\u8ba4\u7684\u6d3b\u8dc3\u5ea6\u8bc4\u5206\u3002 \u6bcf\u4e2a \u5185\u7f6e\u4e8b\u4ef6 \u90fd\u6709\u5982\u4e0b\u5b57\u6bb5: \u5c5e\u6027 \u5c5e\u6027\u610f\u4e49 \u7c7b\u578b \u8bf4\u660e id \u5ba2\u6237\u4e8b\u4ef6ID Long \u53ea\u8bfb\u5b57\u6bb5 customerId \u5ba2\u6237id Long \u53d1\u751f\u884c\u4e3a\u7684\u5ba2\u6237\u3002 event \u4e8b\u4ef6\u7c7b\u578bID String \u4e8b\u4ef6\u7c7b\u578bID\uff0c\u6700\u957f32\u4e2a\u82f1\u6587\u5b57\u7b26\u3002\u53ef\u5728 \u8bbe\u7f6e \u5ba2\u6237\u4e8b\u4ef6\u9875\u9762\u67e5\u770b targetId \u884c\u4e3a\u6240\u5173\u8054\u7684\u76ee\u6807id String \u6bd4\u5982\u5982\u679c\u4e8b\u4ef6\u4e3a\u5173\u6ce8\u516c\u4f17\u53f7\uff0ctargetId\u4e3a\u516c\u4f17\u53f7\u5728DM Hub\u7cfb\u7edf\u4e2d\u7684id\u3002\u6700\u957f255\u4e2a\u5b57\u7b26\u3002 targetName \u884c\u4e3a\u6240\u5173\u8054\u7684\u76ee\u6807\u540d\u79f0 String \u6bd4\u5982\u5982\u679c\u4e8b\u4ef6\u4e3a\u5173\u6ce8\u516c\u4f17\u53f7\uff0ctargetName\u4e3a\u516c\u4f17\u53f7\u7684\u540d\u5b57\u3002\u6700\u957f255\u4e2a\u5b57\u7b26\u3002 date \u884c\u4e3a\u6240\u53d1\u751f\u7684\u65f6\u95f4 String \u683c\u5f0f\u4e3a:\u201c2017-06-01T12:12:12Z\u201d \u4e3aUTC\u65f6\u95f4 source \u6765\u6e90 String \u9884\u5148\u8bbe\u5b9a\u7684\u6765\u6e90\uff0c\u6bd4\u5982\u8ba2\u5355\u662f\u4ece\u6dd8\u5b9d\u6765\u7684\uff0c\u5219\u6765\u6e90\u53ef\u4ee5\u8bbe\u7f6e\u4e3a\u6dd8\u5b9d\u3002 contentName \u6765\u6e90\u5185\u5bb9 String \u6765\u6e90\u5185\u5bb9 score \u5ba2\u6237\u6d3b\u8dc3\u5ea6 Integer \u53d1\u9001\u8be5\u4e8b\u4ef6\u4f1a\u7ed9\u5ba2\u6237\u589e\u52a0\u591a\u5c11\u6d3b\u8dc3\u5ea6\u3002 tag \u4e8b\u4ef6\u53d1\u751f\u540e\u4e3a\u5ba2\u6237\u6dfb\u52a0\u7684\u5185\u5bb9\u6807\u7b7e String \u591a\u4e2a\u6807\u7b7e\u53ef\u4ee5\u7528\u9017\u53f7\u9694\u5f00\u3002\u6700\u957f255\u4e2a\u5b57\u7b26\u3002 campaign \u8425\u9500\u6d3b\u52a8code String DM Hub\u521b\u5efa\u7684\u8425\u9500\u6d3b\u52a8\u4ee3\u7801 campaignName \u8425\u9500\u6d3b\u52a8\u540d\u79f0 String DM Hub\u521b\u5efa\u7684\u8425\u9500\u6d3b\u52a8\u7684\u540d\u79f0 summary \u6458\u8981 String 1024\u4e2a\u5b57\u8282\u6216\u6c49\u5b57 lastUpdated \u4e8b\u4ef6\u8bb0\u5f55\u8fdb\u5165\u5728DM Hub\u7cfb\u7edf\u7684\u65f6\u95f4 String \u53ea\u8bfb\u5b57\u6bb5\uff0c\u683c\u5f0f\u4e3a:\u201c2017-06-01T12:12:12Z\u201d \u4e3aUTC\u65f6\u95f4 \u9664\u4e86\u7cfb\u7edf\u5185\u7f6e\u4e8b\u4ef6\uff0c\u60a8\u8fd8\u53ef\u4ee5\u6dfb\u52a0\u81ea\u5b9a\u4e49\u4e8b\u4ef6\u3002\u8981\u6dfb\u52a0\u81ea\u5b9a\u4e49\u4e8b\u4ef6\uff0c\u8bf7\u5728\u5ba2\u6237\u8bbe\u7f6e\u9875\u9762\u70b9\u51fb \u65b0\u5efa\u81ea\u5b9a\u4e49\u4e8b\u4ef6 \u6309\u94ae\uff1a \u5728\u81ea\u5b9a\u4e49\u4e8b\u4ef6\u521b\u5efa\u5bf9\u8bdd\u6846\u4e2d\uff0c\u60a8\u53ef\u4ee5\u8bbe\u7f6e\u4e8b\u4ef6\u7684\u7c7b\u578bID\uff0c\u9ed8\u8ba4\u6d3b\u8dc3\u5ea6\u5206\u6570\uff0c\u548c\u4e8b\u4ef6\u63a8\u8fdb\u9636\u6bb5\u3002\u4e3a\u4e86\u907f\u514d\u5c06\u6765\u4e0e\u5185\u7f6e\u4e8b\u4ef6\u7c7b\u578b\u53d1\u751f\u51b2\u7a81\uff0c\u81ea\u5b9a\u4e49\u4e8b\u4ef6\u7c7b\u578b\u90fd\u5f3a\u5236\u4ee5c_\u5f00\u5934\uff0c\u6bd4\u5982\u4e0a\u56fe\u4e2d\u7684\u4e8b\u4ef6\u7c7b\u578bid\u4e3ac_apply_card\u3002 \u6bcf\u4e2a \u81ea\u5b9a\u4e49 \u4e8b\u4ef6\uff0c\u6709\u4ee5\u4e0b\u9884\u7f6e\u5c5e\u6027\uff1a \u5c5e\u6027 \u5c5e\u6027\u610f\u4e49 \u7c7b\u578b \u8bf4\u660e id \u5ba2\u6237\u4e8b\u4ef6ID Long \u53ea\u8bfb\u5b57\u6bb5 customerId \u5ba2\u6237id Long \u53d1\u751f\u884c\u4e3a\u7684\u5ba2\u6237\u3002 event \u4e8b\u4ef6\u7c7b\u578bID String \u4e8b\u4ef6\u7c7b\u578bID\uff0c\u6700\u957f32\u4e2a\u82f1\u6587\u5b57\u7b26\u3002\u53ef\u5728 \u8bbe\u7f6e \u5ba2\u6237\u4e8b\u4ef6\u9875\u9762\u67e5\u770b date \u884c\u4e3a\u6240\u53d1\u751f\u7684\u65f6\u95f4 String \u683c\u5f0f\u4e3a:\u201c2017-06-01T12:12:12Z\u201d \u4e3aUTC\u65f6\u95f4 source \u6765\u6e90 String \u9884\u5148\u8bbe\u5b9a\u7684\u6765\u6e90\uff0c\u6bd4\u5982\u8ba2\u5355\u662f\u4ece\u6dd8\u5b9d\u6765\u7684\uff0c\u5219\u6765\u6e90\u53ef\u4ee5\u8bbe\u7f6e\u4e3a\u6dd8\u5b9d\u3002 contentName \u6765\u6e90\u5185\u5bb9 String \u6765\u6e90\u5185\u5bb9 score \u5ba2\u6237\u6d3b\u8dc3\u5ea6 Integer \u53d1\u9001\u8be5\u4e8b\u4ef6\u4f1a\u7ed9\u5ba2\u6237\u589e\u52a0\u591a\u5c11\u6d3b\u8dc3\u5ea6\u3002 tag \u4e8b\u4ef6\u53d1\u751f\u540e\u4e3a\u5ba2\u6237\u6dfb\u52a0\u7684\u5185\u5bb9\u6807\u7b7e String \u591a\u4e2a\u6807\u7b7e\u53ef\u4ee5\u7528\u9017\u53f7\u9694\u5f00\u3002\u6700\u957f255\u4e2a\u5b57\u7b26\u3002 campaign \u8425\u9500\u6d3b\u52a8code String DM Hub\u521b\u5efa\u7684\u8425\u9500\u6d3b\u52a8\u4ee3\u7801 campaignName \u8425\u9500\u6d3b\u52a8\u540d\u79f0 String DM Hub\u521b\u5efa\u7684\u8425\u9500\u6d3b\u52a8\u7684\u540d\u79f0 lastUpdated \u4e8b\u4ef6\u8bb0\u5f55\u8fdb\u5165\u5728DM Hub\u7cfb\u7edf\u7684\u65f6\u95f4 String \u53ea\u8bfb\u5b57\u6bb5\uff0c\u683c\u5f0f\u4e3a:\u201c2017-06-01T12:12:12Z\u201d \u4e3aUTC\u65f6\u95f4 \u9664\u4e86\u9884\u7f6e\u5c5e\u6027\uff0c\u81ea\u5b9a\u4e49\u4e8b\u4ef6\u8fd8\u80fd\u6dfb\u52a0\u6700\u591a16\u4e2a\u81ea\u5b9a\u4e49\u5c5e\u6027(10\u4e2a\u5b57\u7b26\u578b, 3\u4e2a\u6570\u91cf\u578b\uff0c3\u4e2a\u91d1\u989d\u578b)\u3002\u8981\u6dfb\u52a0\u81ea\u5b9a\u4e49\u5c5e\u6027\uff0c\u8bf7\u5728\u81ea\u5b9a\u4e49\u4e8b\u4ef6\u5bf9\u8bdd\u6846\u5185\u70b9\u51fb \u6dfb\u52a0\u81ea\u5b9a\u4e49\u5c5e\u6027 \u6309\u94ae\u3002 \u8fd8\u662f\u4ee5\u7533\u8bf7\u4fe1\u7528\u5361\u4e8b\u4ef6c_apply_card\u4e3a\u4f8b\uff0c\u6211\u4eec\u53ef\u4ee5\u589e\u52a0\u4e00\u4e2a\u5c5e\u6027touter\u6765\u8bb0\u5f55\u5730\u63a8\u4eba\u5458\u7684id\u3002 \u7531\u4e8e\u4e8b\u4ef6\u89c4\u6a21\u5e9e\u5927\uff0c\u76ee\u524d\u5c06\u5386\u53f2\u4e8b\u4ef6\u653e\u5165\u76f8\u5e94\u7684\u5386\u53f2\u5206\u533a\u4e2d\uff0c\u67e5\u8be2\u3001\u5220\u9664\u65f6\u8bf7\u4f7f\u7528 partition \u53c2\u6570,\u5426\u5219\u9ed8\u8ba4 \u4f7f\u7528\u5f53\u524d\u65f6\u95f4\u4f5c\u4e3a\u5206\u533a \u3002\u5177\u4f53\u5206\u533a\u4fe1\u606f\u5982\u4e0b\uff1a \u65f6\u95f4\u5206\u533a partition \u5907\u6ce8 2019\u5e74 201901~201906 \u4ee5\u5e74\u6708\u4f5c\u4e3a\u5206\u533a 2018\u5e74 2018 index\u63a5\u53e3\u67e5\u8be22018\u5e74\u7684\u4e8b\u4ef6\u5fc5\u586b 2017\u5e74 2017 index\u63a5\u53e3\u67e5\u8be22017\u5e74\u7684\u4e8b\u4ef6\u5fc5\u586b 2017\u5e74\u4e4b\u524d 2016 index\u63a5\u53e3\u67e5\u8be22017\u5e74\u4e4b\u524d\u7684\u4e8b\u4ef6\u5fc5\u586b \u6ce8\uff1a\u7cfb\u7edf\u5c06\u5bf9\u4e8b\u4ef6\u8fdb\u884c\u53bb\u91cd\u548c\u81ea\u52a8\u66f4\u65b0\u3002\u5982\u679c\u4f20\u5165externalId\uff0c\u7cfb\u7edf\u4f1a\u6839\u636eexternalId\u5904\u7406\u91cd\u590d\u4e8b\u4ef6\uff1b\u5982\u679c\u672a\u6307\u5b9aexternalId\uff0c\u5219\u6839\u636e\u5bf9\u4e8e\u540c\u4e00\u65f6\u95f4\uff08date\uff09\u3001\u540c\u4e00\u5ba2\u6237\uff08customerId\uff09\u3001\u53d1\u751f\u7684\u540c\u4e00\u4e8b\u4ef6\uff08event\uff09\u6765\u5904\u7406\u3002","title":"\u5ba2\u6237\u4e8b\u4ef6\u6a21\u578b"},{"location":"api/customerevent/#api","text":"\u6211\u4eec\u4ee5\u4e0a\u9762\u5b9a\u4e49\u7684\u81ea\u5b9a\u4e49\u4e8b\u4ef6c_apply_card\u4e3a\u4f8b\u4ecb\u7ecd\u5ba2\u6237\u4e8b\u4ef6\u7684\u521b\u5efa\u3002 \u8c03\u7528\u8bf7\u6c42 HTTP\u8bf7\u6c42\u65b9\u5f0f: POST https://api.convertlab.com/v1/customerevents?access_token={access_token} POST\u8bf7\u6c42\u793a\u4f8b\uff1a { customerId : 123456 , event : c_apply_card , cardType : golden_card , cardTypeLabel : \u91d1\u5361 , date : 2017-06-07T03:43:00Z , source : \u4eba\u6c11\u5e7f\u573a , touter : t00001 } \u53c2\u6570\u8bf4\u660e {access_token}\u4e3a\u8bbf\u95ee\u63a5\u53e3\u7684\u4ee4\u724c \u8bf7\u6c42\u4f53\u5185\u5b57\u6bb5\u7684\u610f\u4e49\u8bf7\u53c2\u89c1\u5ba2\u6237\u4e8b\u4ef6\u6a21\u578b\u90e8\u5206 \u8fd4\u56de\u7ed3\u679c { id : 1, customerId : 123456, event : c_apply_card , cardType : golden_card , cardTypeLabel : \u91d1\u5361 , date : 2017-06-07T03:43:00Z , source : \u4eba\u6c11\u5e7f\u573a , score : 0, tag : null, campaign : null, campaignName : null, contentName : null, externalId : null, lastUpdated : 2017-06-07T05:38:52Z , touter : t00001 }","title":"\u521b\u5efa\u5ba2\u6237\u4e8b\u4ef6\u7684API"},{"location":"api/customerevent/#api_1","text":"\u4e0e\u4e0a\u8ff0\u521b\u5efa\u5ba2\u6237\u4e8b\u4ef6\u7684 API \u4e0d\u540c\uff0c\u91c7\u96c6\u5ba2\u6237\u4e8b\u4ef6\u7684 API \u901a\u8fc7\u5ba2\u6237\u8eab\u4efd\u5c06\u4e8b\u4ef6\u4e0e\u5ba2\u6237\u7ed1\u5b9a\u3002 \u8c03\u7528\u8bf7\u6c42 HTTP\u8bf7\u6c42\u65b9\u5f0f: POST https://api.convertlab.com/v1/collector/pushevent?access_token={access_token} POST\u8bf7\u6c42\u793a\u4f8b\uff1a { identityType : mobile , identityValue : 18612345678 , event : c_apply_card , cardType : golden_card , cardTypeLabel : \u91d1\u5361 , date : 2017-06-07T03:43:00Z , source : \u4eba\u6c11\u5e7f\u573a , touter : t00001 } \u53c2\u6570\u8bf4\u660e {access_token}\u4e3a\u8bbf\u95ee\u63a5\u53e3\u7684\u4ee4\u724c \u8bf7\u6c42\u4f53\u5185\u5b57\u6bb5\u7684\u610f\u4e49\u8bf7\u53c2\u89c1\u5ba2\u6237\u4e8b\u4ef6\u6a21\u578b\u90e8\u5206 \u8fd4\u56de\u7ed3\u679c { success : true }","title":"\u91c7\u96c6\u5ba2\u6237\u4e8b\u4ef6\u7684 API"},{"location":"api/customerevent/#api_2","text":"\u6279\u91cf\u4e0a\u4f20\u7684\u6bcf\u4e2a\u4e8b\u4ef6\u90fd\u901a\u8fc7\u5ba2\u6237\u8eab\u4efd\u4e0e\u5ba2\u6237\u7ed1\u5b9a\u3002 \u8c03\u7528\u8bf7\u6c42 HTTP\u8bf7\u6c42\u65b9\u5f0f: POST https://api.convertlab.com/v1/collector/batchPushEvents?access_token={access_token} POST\u8bf7\u6c42\u793a\u4f8b\uff1a { events : [ { identityType : mobile , identityValue : 18612345678 , cardType : golden_card , cardTypeLabel : \u91d1\u5361 , date : 2017-06-07T03:43:00Z , source : \u4eba\u6c11\u5e7f\u573a , touter : t00001 }, { identityType : wechat , identityValue : 12sdjfeg , cardType : golden_card , cardTypeLabel : \u91d1\u5361 , date : 2017-06-07T03:43:00Z , source : \u4eba\u6c11\u5e7f\u573a , touter : t00001 } ], commonProps : { event : c_apply_card } } \u53c2\u6570\u8bf4\u660e {access_token}\u4e3a\u8bbf\u95ee\u63a5\u53e3\u7684\u4ee4\u724c \u8bf7\u6c42\u4f53\u5185\u5b57\u6bb5\u7684\u610f\u4e49\u8bf7\u53c2\u89c1\u5ba2\u6237\u4e8b\u4ef6\u6a21\u578b\u90e8\u5206 POST\u8bf7\u6c42\u6570\u636e\u8bf4\u660e events\uff1a\u5fc5\u4f20\uff0c\u4e8b\u4ef6\u5217\u8868\uff0c\u4e8b\u4ef6\u603b\u6570\u4e0d\u80fd\u8d85\u8fc7 100 commonProps\uff1a\u975e\u5fc5\u4f20\uff0c\u4e8b\u4ef6\u5168\u5c40\u5c5e\u6027\u5b57\u5178\uff0c\u5168\u5c40\u5c5e\u6027\u4f1a\u6dfb\u52a0\u5230\u6bcf\u4e2a\u4e8b\u4ef6\u4e2d\uff0c\u5982\u679c\u4e0e events \u4e2d\u7684\u4e8b\u4ef6\u5c5e\u6027\u51b2\u7a81\uff0c\u5219\u4f1a\u8986\u76d6\u4e8b\u4ef6\u5c5e\u6027 \u8fd4\u56de\u7ed3\u679c { success : true }","title":"\u6279\u91cf\u91c7\u96c6\u5ba2\u6237\u4e8b\u4ef6\u7684 API"},{"location":"api/customerevent/#api_3","text":"\u8c03\u7528\u8bf7\u6c42 HTTP\u8bf7\u6c42\u65b9\u5f0f: GET https://api.convertlab.com/v1/customerevents/{id}?access_token={access_token} partition={partition} \u53c2\u6570\u8bf4\u660e - {access_token}\u7528\u4ece\u201c\u83b7\u53d6\u8eab\u4efd\u6743\u9650\u201d\u8282\u62ff\u5230\u7684access_token\u66ff\u6362 - id \u5ba2\u6237\u4e8b\u4ef6id - partition \u4e8b\u4ef6\u5e74\u9650\uff0c\u9009\u586b \u8fd4\u56de\u7ed3\u679c { id : 1, customerId : 123456, event : c_apply_card , cardType : golden_card , cardTypeLabel : \u91d1\u5361 , date : 2017-06-07T03:43:00Z , source : \u4eba\u6c11\u5e7f\u573a , score : 0, tag : null, campaign : null, campaignName : null, contentName : null, externalId : null, lastUpdated : 2017-06-07T05:38:52Z , touter : t00001 }","title":"\u83b7\u53d6\u5355\u4e2a\u4e8b\u4ef6\u7684API"},{"location":"api/customerevent/#api_4","text":"\u8c03\u7528\u8bf7\u6c42 HTTP\u8bf7\u6c42\u65b9\u5f0f: GET https://api.convertlab.com/v1/customerevents?access_token={access_token} customerId={customerId} event={event} idFrom={idFrom} idTo={idTo} lastUpdatedFrom={lastUpdatedFrom} lastUpdatedTo={lastUpdatedTo} partition={partition} max={max} sidx={sidx} sord={sord} \u53c2\u6570\u8bf4\u660e \u53c2\u6570 \u662f\u5426\u5fc5\u586b access_token \u662f \u8bbf\u95eeAPI\u7684\u4ee4\u724c customerId \u5426 \u67e5\u8be2\u6307\u5b9a\u5ba2\u6237\u7684\u4e8b\u4ef6\u5217\u8868 event \u5426 \u67e5\u8be2\u6307\u5b9a\u7684\u4e8b\u4ef6\u7c7b\u578b\u3002\u591a\u4e2a\u4e8b\u4ef6\u7c7b\u578b\u53ef\u7528\u9017\u53f7\u5206\u5f00 idFrom \u5426 \u67e5\u8be2\u4e8b\u4ef6\u7684\u8d77\u59cb id idTo \u5426 \u67e5\u8be2\u4e8b\u4ef6\u7684\u7ed3\u675f id lastUpdatedFrom \u5426 \u4e8b\u4ef6\u66f4\u65b0\u7684\u8d77\u59cb\u65f6\u95f4\u3002\u65f6\u95f4\u683c\u5f0f\u4e3a \u201c2017-06-07T12:13:14Z\u201d, \u4e3aUTC\u65f6\u95f4 lastUpdatedTo \u5426 \u4e8b\u4ef6\u66f4\u65b0\u7684\u7ed3\u675f\u65f6\u95f4\u3002\u65f6\u95f4\u683c\u5f0f\u540c\u4e0a max \u5426 \u6700\u591a\u8fd4\u56de\u591a\u5c11\u6761\u6570\u636e\uff0c\u9ed8\u8ba4\u4e3a20\uff0c\u6700\u5927\u53ef\u52301000 sidx \u5426 \u6392\u5e8f\u7684\u5b57\u6bb5\uff0c\u6bd4\u5982\u5982\u679c\u6309lastUpdated\u6392\u5e8f\uff0csidx=lastUpdated sord \u5426 asc\u8868\u793a\u5347\u5e8f\uff0cdesc\u8868\u793a\u964d\u5e8f\uff0c\u9ed8\u8ba4\u4e3a\u5347\u5e8f partition \u5426 \u5206\u65f6\u95f4\u4fe1\u606f\uff0c\u5982\u679c\u4e0d\u586b\u5219\u4ee3\u8868\u9ed8\u8ba4\u5206\u8868\uff0c\u5177\u4f53\u5206\u8868\u4fe1\u606f\u8bf7\u67e5\u770b\u65f6\u95f4\u5206\u8868 \u8fd4\u56de\u7ed3\u679c [ { id : 1, customerId : 123456, event : c_apply_card , cardType : golden_card , cardTypeLabel : \u91d1\u5361 , date : 2017-06-07T03:43:00Z , source : \u4eba\u6c11\u5e7f\u573a , score : 0, tag : null, campaign : null, campaignName : null, contentName : null, externalId : null, lastUpdated : 2017-06-07T06:43:29Z , touter : t00003 } ]","title":"\u67e5\u8be2\u4e8b\u4ef6\u7684API"},{"location":"api/deal/","text":"\u5ba2\u6237\u4ea4\u6613\u6a21\u578b DM Hub\u7cfb\u7edf\u4e2d\u6240\u6709\u4ea4\u6613\u4fe1\u606f\u90fd\u53ef\u4ee5\u88ab\u8bb0\u5f55\u4e0b\u6765\u3002\u8fd9\u91cc\u7684\u4ea4\u6613\u53ef\u4ee5\u662f\u6709\u8ba2\u5355\u53d1\u751f\u7684\u8ba2\u5355\u4fe1\u606f\u6216\u6ca1\u6709\u8ba2\u5355\u884c\u4e3a\u7684\u4ea4\u6613\uff0c\u5982\u7535\u8bdd\u5145\u503c\u7b49\u3002 \u901a\u8fc7\u5ba2\u6237\u4ea4\u6613\u63a5\u53e3\uff0c\u60a8\u53ef\u4ee5\u5c06 \u4ea4\u6613\u6210\u529f \u7684\u8ba2\u5355\u5bfc\u5165DM Hub\uff0c\u4e5f\u53ef\u4ee5\u67e5\u8be2\u3001\u4fee\u6539\u548c\u5220\u9664\u5df2\u7ecf\u5bfc\u5165\u7684\u8ba2\u5355\u3002DM Hub\u4f1a\u5c06\u5bfc\u5165\u7684\u8ba2\u5355\u6570\u636e\u8fdb\u884c\u5206\u6790\uff0c\u60a8\u53ef\u4ee5\u5728\u5bfc\u5165\u540e\u901a\u8fc7\u9875\u9762\u64cd\u4f5c\u6d4f\u89c8\uff0c\u7b5b\u9009\uff0c\u5206\u6790\u4ea4\u6613\u6570\u636e\uff0c\u4e5f\u53ef\u4ee5\u901a\u8fc7\u8ba2\u5355\u4e2d\u7684\u4e00\u4e9b\u5ba2\u6237\u4fe1\u606f\u8fdb\u884c\u5ba2\u6237\u89e6\u8fbe\u3002 \u5ba2\u6237\u4ea4\u6613API\u5305\u62ec\u67e5\u770b\u6240\u6709\u8ba2\u5355API\uff0c\u589e\u52a0\u8ba2\u5355API\uff0c\u4fee\u6539\u8ba2\u5355API\uff0c\u67e5\u8be2\u8ba2\u5355API\u548c\u5220\u9664\u8ba2\u5355API\u3002\u8fd9\u4e9bAPI\u4f7f\u7528\u5ba2\u6237\u8ba2\u5355\u6a21\u578b\uff0c\u5982\u4e0b\u6240\u793a\u3002 \u5728\u6a21\u578b\u4e2d\uff0c\u6bcf\u4e00\u4e2a\u4ea4\u6613\u90fd\u4f1a\u5305\u542bn\u4e2a\u8ba2\u5355\u7269\u54c1\uff0c\u4ea4\u6613\u548c\u8ba2\u5355\u7269\u54c1\u901a\u8fc7\u8ba2\u5355\u7f16\u53f7\u76f8\u5173\u8054\u3002\u5177\u4f53\u7684\u6a21\u578b\u7ed3\u6784\u5982\u4e0b\u3002 \u5c5e\u6027 \u5c5e\u6027\u610f\u4e49 \u7c7b\u578b \u8bf4\u660e id \u5ba2\u6237\u4ea4\u6613ID Long \u53ea\u8bfb\u5b57\u6bb5 customerId \u5ba2\u6237id Long \u4ea4\u6613\u6240\u5c5e\u5ba2\u6237 orderNo \u8ba2\u5355\u53f7 String \u4ea4\u6613\u5728\u5bf9\u63a5\u7cfb\u7edf\u4e2d\u7684\u8ba2\u5355\u53f7 amountTotal \u8ba2\u5355\u603b\u91d1\u989d BigDecimal \u5728\u4ea4\u6613\u4e2d\u8ba2\u5355\u7684\u603b\u989d\uff0c\u5305\u62ec\u652f\u4ed8\u91d1\u989d\u548c\u4f18\u60e0\u91d1\u989d amountPaid \u5b9e\u9645\u652f\u4ed8\u91d1\u989d BigDecimal \u5ba2\u6237\u652f\u4ed8\u91d1\u989d amountDiscount \u8ba2\u5355\u6298\u6263\u91d1\u989d BigDecimal \u8ba2\u5355\u6298\u6263 discountType \u4f18\u60e0\u7c7b\u578b String \u4f18\u60e0\u7c7b\u578b couponCode \u4f18\u60e0\u5238 String \u4f18\u60e0\u5238\u7801 groupId \u56e2\u8d2d String \u56e2\u8d2did paymentTerm \u652f\u4ed8\u65b9\u5f0f String \u73b0\u91d1\u3001\u4fe1\u7528\u5361\u3001\u5fae\u4fe1\u652f\u4ed8\u3001\u652f\u4ed8\u5b9d\u7b49\u652f\u4ed8\u65b9\u5f0f paymentNo \u652f\u4ed8\u53f7 String \u652f\u4ed8\u540e\u7684\u4ea4\u6613\u53f7\u7801 type \u8ba2\u5355\u7c7b\u578b String \u7ebf\u4e0a\u3001\u7ebf\u4e0b\u7b49\u7c7b\u578b dateOrder \u8ba2\u5355\u65f6\u95f4 DateTime \u8ba2\u5355\u652f\u4ed8\u5b8c\u6210\u65f6\u95f4\uff0c\u91c7\u7528UTC\u65f6\u95f4\u683c\u5f0f\u4e3a:\u201c2017-06-07T12:20:20Z\u201d \u5982\u662f\u5317\u4eac\u65f6\u95f4\uff0c\u8bf7\u51cf8\u5c0f\u65f6 store \u5e97\u94fa\u540d\u79f0 String \u8ba2\u5355\u5e97\u94fa\uff08\u7ebf\u4e0b\u6216\u7ebf\u4e0a\u7684\u5e97\u94fa\u540d\uff09 salesChannel \u6e20\u9053 String \u8ba2\u5355\u6e20\u9053\uff08\u5982\u7ebf\u4e0b\uff0c\u5929\u732b\u7b49\uff09 shippingMethod \u8fd0\u9001\u65b9\u5f0f String \u8d27\u7269\u7684\u8fd0\u9001\u65b9\u5f0f contactName \u6536\u8d27\u4eba\u540d\u79f0 String \u6536\u8d27\u4eba\u540d\u79f0 contactTel \u6536\u8d27\u4eba\u7535\u8bdd String \u6536\u8d27\u4eba\u7535\u8bdd zipcode \u90ae\u7f16 String \u90ae\u7f16 shippingProvince \u6536\u8d27\u4eba\u7701\u4efd String \u6536\u8d27\u4eba\u7701\u4efd shippingCity \u6536\u8d27\u4eba\u57ce\u5e02 String \u6536\u8d27\u4eba\u57ce\u5e02 shippingCounty \u6536\u8d27\u4eba\u533a\u53bf String \u6536\u8d27\u4eba\u533a\u53bf shippingStreet \u6536\u8d27\u4eba\u8857\u9053 String \u6536\u8d27\u4eba\u8857\u9053 shippingAddress \u6536\u8d27\u4eba\u8be6\u7ec6\u5730\u5740 String \u6536\u8d27\u4eba\u8be6\u7ec6\u5730\u5740 buyerMessage \u4e70\u5bb6\u7559\u8a00 String \u4e70\u5bb6\u7559\u8a00 remark \u8ba2\u5355\u5907\u6ce8 String \u8ba2\u5355\u5907\u6ce8 campaign \u8425\u9500\u6d3b\u52a8\u7f16\u7801 String \u8425\u9500\u6d3b\u52a8\u7f16\u7801 merchantPoint \u8ba2\u5355\u79ef\u5206 Integer \u8ba2\u5355\u79ef\u5206 \u652f\u6301\u8ba2\u5355\u5934\u81ea\u5b9a\u4e49\u5b57\u6bb5 \u8ba2\u5355\u7269\u54c1\u6a21\u578b \u5c5e\u6027 \u5c5e\u6027\u610f\u4e49 \u7c7b\u578b \u8bf4\u660e orderNo \u8ba2\u5355\u53f7 String \u4ea4\u6613\u5728\u5bf9\u63a5\u7cfb\u7edf\u4e2d\u7684\u8ba2\u5355\u53f7 lineId \u8ba2\u5355\u884cID String \u8ba2\u5355\u884c\u5728\u8be5\u8ba2\u5355\u4e2d\u7684\u552f\u4e00\u6807\u8bc6\uff0c\u53ef\u4ee5\u4f20\u5546\u54c1id\u6216skuid discountType \u4f18\u60e0\u7c7b\u578b String \u4f18\u60e0\u7c7b\u578b counponCode \u4f18\u60e0\u5238 String \u4f18\u60e0\u5238\u7801 productName \u5546\u54c1\u540d\u79f0 String \u5546\u54c1\u540d\u79f0 productId \u5546\u54c1ID String \u5546\u54c1ID skuId skuid String skuID brandName \u4ea7\u54c1\u54c1\u724c String \u4ea7\u54c1\u54c1\u724c category \u4ea7\u54c1\u6240\u5c5e\u54c1\u7c7b String \u4ea7\u54c1\u6240\u5c5e\u54c1\u7c7b\uff0c\u6bd4\u5982\u5564\u9152 qty \u8ba2\u8d2d\u6570\u91cf Integer \u8ba2\u8d2d\u6570\u91cf priceUnit \u5355\u4ef6\u5546\u54c1\u4ef7\u683c BigDecimal \u5355\u4ef6\u5546\u54c1\u4ef7\u683c priceSubTotal \u8be5\u5546\u54c1\u603b\u4ef7 BigDecimal \u8be5\u5546\u54c1\u603b\u4ef7 priceSubPaid \u8be5\u5546\u54c1\u5b9e\u9645\u652f\u4ed8\u91d1\u989d BigDecimal \u8be5\u5546\u54c1\u5b9e\u9645\u652f\u4ed8\u91d1\u989d \u652f\u6301\u8ba2\u5355\u884c\u81ea\u5b9a\u4e49\u5b57\u6bb5 \u521b\u5efa\u4e1a\u52a1\u8ba2\u5355\u7684API \u8ba2\u5355\u7269\u54c1\u653e\u5728\u8ba2\u5355\u7684line\u5b57\u6bb5\u4e2d\u4e00\u8d77\u521b\u5efa\u3002 customerId\u548ccustomerIdentities\u9009\u586b\u4e00\u9879\u3002 \u8c03\u7528\u8bf7\u6c42 http\u8bf7\u6c42\u65b9\u5f0f\uff1aPOST https://api.convertlab.com/v1/deals?access_token= access_token POST\u8bf7\u6c42\u793a\u4f8b\uff1a { customerId : 8888, orderNo : 11122233344455 , amountTotal : 69.0, amountPaid : 59.0, amountDiscount : 10, counponCode : 222333444 , groupId : 888 , paymentTerm : wechat , paymentNo : 555666777 , type : online , dateOrder : 2017-04-20T12:56:47Z , store : CL\u5b98\u65b9\u5546\u57ce , salesChannel : tmall , shippingMethod : zto , contactName : JH , contactTel : 12399988877 , shippingProvince : \u4e0a\u6d77 , shippingCity : \u4e0a\u6d77 , shippingCounty : \u5f90\u6c47\u533a , shippingStreet : \u6c47\u8c37\u79d1\u6280\u56ed , shippingAddress : \u4e0a\u6d77\u5e02\u5f90\u6c47\u533a\u6c47\u8c37\u79d1\u6280\u56ed1\u5e62605 , lines : [ { lineId : 149766666 , productName : \u5564\u91526\u74f6\u88c5 , productId : 1497 , skuId : 149766666 , category : \u5564\u9152 , qty : 1, priceUnit : 69.0, priceSubTotal : 69.0 } ], customerIdentities : [ { identityType : wechat , identityValue : o123456... , identityName : \u5fae\u4fe1\u6635\u79f0 }, { identityType : your-system-account , identityValue : user123 , identityName : \u60a8\u7cfb\u7edf\u91cc\u7684\u7528\u6237\u540d } ] } \u53c2\u6570\u8bf4\u660e \u53c2\u6570 \u662f\u5426\u5fc5\u586b \u8bf4\u660e id \u662f \u5ba2\u6237\u4ea4\u6613ID customerId \u662f \u5ba2\u6237id orderNo \u662f \u8ba2\u5355\u53f7 amountTotal \u5426 \u8ba2\u5355\u603b\u91d1\u989d amountPaid \u662f \u5b9e\u9645\u652f\u4ed8\u91d1\u989d amountDiscount \u5426 \u8ba2\u5355\u6298\u6263 discountType \u5426 \u4f18\u60e0\u7c7b\u578b counponCode \u5426 \u4f18\u60e0\u5238\u7801 groupId \u5426 \u56e2\u8d2d paymentTerm \u5426 \u652f\u4ed8\u65b9\u5f0f paymentNo \u5426 \u652f\u4ed8\u53f7 type \u5426 \u8ba2\u5355\u7c7b\u578b dateOrder \u662f \u8ba2\u5355\u65f6\u95f4\uff0c\u65f6\u95f4\u683c\u5f0f\u4e3a \u201c2016-11-11T11:11:11\u201d \u4e3aUTC\u65f6\u95f4 store \u5426 \u5e97\u94fa\u540d\u79f0 salesChannel \u5426 \u6e20\u9053 shippingMethod \u5426 \u8fd0\u9001\u65b9\u5f0f contactName \u5426 \u6536\u8d27\u4eba\u540d\u79f0 contactTel \u5426 \u6536\u8d27\u4eba\u7535\u8bdd zipcode \u5426 \u90ae\u7f16 shippingProvince \u5426 \u6536\u8d27\u4eba\u7701\u4efd shippingCity \u5426 \u6536\u8d27\u4eba\u57ce\u5e02 shippingCounty \u5426 \u6536\u8d27\u4eba\u533a\u53bf shippingStreet \u5426 \u6536\u8d27\u4eba\u8857\u9053 shippingAddress \u5426 \u6536\u8d27\u4eba\u8be6\u7ec6\u5730\u5740 buyerMessage \u5426 \u4e70\u5bb6\u7559\u8a00 remark \u5426 \u8ba2\u5355\u5907\u6ce8 campaign \u5426 \u8425\u9500\u6d3b\u52a8\u7f16\u7801 merchantPoint \u5426 \u8ba2\u5355\u79ef\u5206 orderNo \u662f \u4ea4\u6613\u5728\u5bf9\u63a5\u7cfb\u7edf\u4e2d\u7684\u8ba2\u5355\u53f7 lineId \u662f \u8ba2\u5355\u884c\u5728\u8be5\u8ba2\u5355\u4e2d\u7684\u552f\u4e00\u6807\u8bc6\uff0c\u53ef\u4ee5\u4f20\u5546\u54c1id\u6216skuid discountType \u5426 \u4f18\u60e0\u7c7b\u578b counponCode \u5426 \u4f18\u60e0\u5238\u7801 productName \u662f \u5546\u54c1\u540d\u79f0 productId \u5426 \u5546\u54c1ID skuId \u5426 SkuID brandName \u5426 \u4ea7\u54c1\u54c1\u724c category \u5426 \u4ea7\u54c1\u6240\u5c5e\u54c1\u7c7b qty \u662f \u5546\u54c1\u6570\u91cf priceUnit \u5426 \u5355\u4ef6\u5546\u54c1\u4ef7\u683c priceSubTotal \u5426 \u8be5\u5546\u54c1\u603b\u4ef7 priceSubPaid \u5426 \u8be5\u5546\u54c1\u5b9e\u9645\u652f\u4ed8\u91d1\u989d \u8fd4\u56de\u7ed3\u679c { id : 1234, customerId : 8888, orderNo : 11122233344455 , amountTotal : 69.0, amountPaid : 59.0, amountDiscount : 10, counponCode : 222333444 , groupId : 888 , paymentTerm : wechat , paymentNo : 555666777 , type : online , dateOrder : 2017-04-20T12:56:47Z , store : CL\u5b98\u65b9\u5546\u57ce , salesChannel : tmall , shippingMethod : zto , contactName : JH , contactTel : 12399988877 , shippingProvince : \u4e0a\u6d77 , shippingCity : \u4e0a\u6d77 , shippingCounty : \u5f90\u6c47\u533a , shippingStreet : \u6c47\u8c37\u79d1\u6280\u56ed , shippingAddress : \u4e0a\u6d77\u5e02\u5f90\u6c47\u533a\u6c47\u8c37\u79d1\u6280\u56ed1\u5e62605 , lines : [ { lineId : 149766666 , productName : \u5564\u91526\u74f6\u88c5 , productId : 1497 , skuId : 149766666 , category : \u5564\u9152 , qty : 1, priceUnit : 69.0, priceSubTotal : 69.0 } ] } \u67e5\u8be2\u8ba2\u5355\u7684API \u8c03\u7528\u8bf7\u6c42 HTTP\u8bf7\u6c42\u65b9\u6cd5GET https://api.convertlab.com/v1/deals/{id}?access_token={access_token} \u53c2\u6570\u8bf4\u660e \u53c2\u6570 \u662f\u5426\u5fc5\u586b \u8bf4\u660e access_token \u662f \u8bf7\u6c42\u51ed\u8bc1 id \u662f \u5ba2\u6237\u4ea4\u6613ID \u8fd4\u56de\u6570\u636e { id : 1234, customerId : 8888, orderNo : 11122233344455 , amountTotal : 69.0, amountPaid : 59.0, amountDiscount : 10, counponCode : 222333444 , groupId : 888 , paymentTerm : wechat , paymentNo : 555666777 , type : online , dateOrder : 2017-04-20T12:56:47Z , store : CL\u5b98\u65b9\u5546\u57ce , salesChannel : tmall , shippingMethod : zto , contactName : JH , contactTel : 12399988877 , shippingProvince : \u4e0a\u6d77 , shippingCity : \u4e0a\u6d77 , shippingCounty : \u5f90\u6c47\u533a , shippingStreet : \u6c47\u8c37\u79d1\u6280\u56ed , shippingAddress : \u4e0a\u6d77\u5e02\u5f90\u6c47\u533a\u6c47\u8c37\u79d1\u6280\u56ed1\u5e62605 , lines : [ { lineId : 149766666 , productName : \u5564\u91526\u74f6\u88c5 , productId : 1497 , skuId : 149766666 , category : \u5564\u9152 , qty : 1, priceUnit : 69.0, priceSubTotal : 69.0 } ] } \u67e5\u8be2\u6240\u6709\u8ba2\u5355\u7684API \u8c03\u7528\u8bf7\u6c42 http\u8bf7\u6c42\u65b9\u5f0f\uff1aGET https://api.convertlab.com/v1/deals?access_token={access_token} rows={rows} page={page} sidx={sidx} sord={sord} \u53c2\u6570\u8bf4\u660e \u53c2\u6570 \u662f\u5426\u5fc5\u586b \u8bf4\u660e access_token \u662f \u8bf7\u6c42\u51ed\u8bc1 customer_id \u5426 \u53ea\u67e5\u8be2\u67d0\u4e2a\u5ba2\u6237\u7684\u8ba2\u5355 rows \u5426 \u6bcf\u9875\u7684\u8bb0\u5f55\u6570 page \u5426 \u8d77\u59cb\u9875\u6570\uff0c\u4ee51\u5f00\u59cb sidx \u5426 \u6392\u5e8f\u7684\u5b57\u6bb5\uff0c\u9ed8\u8ba4\u6309id\u6392\u5e8f sord \u5426 asc\u8868\u793a\u5347\u5e8f\uff0cdesc\u8868\u793a\u964d\u5e8f\uff0c\u9ed8\u8ba4\u4e3a\u5347\u5e8f \u8fd4\u56de\u7ed3\u679c { page : 1, records : 1, rows : [ { id : 1234, customerId : 8888, orderNo : 11122233344455 , amountTotal : 69.0, amountPaid : 59.0, amountDiscount : 10, counponCode : 222333444 , groupId : 888 , paymentTerm : wechat , paymentNo : 555666777 , type : online , dateOrder : 2017-04-20T12:56:47Z , store : CL\u5b98\u65b9\u5546\u57ce , salesChannel : tmall , shippingMethod : zto , contactName : JH , contactTel : 12399988877 , shippingProvince : \u4e0a\u6d77 , shippingCity : \u4e0a\u6d77 , shippingCounty : \u5f90\u6c47\u533a , shippingStreet : \u6c47\u8c37\u79d1\u6280\u56ed , shippingAddress : \u4e0a\u6d77\u5e02\u5f90\u6c47\u533a\u6c47\u8c37\u79d1\u6280\u56ed1\u5e62605 , lines : [ { lineId : 149766666 , productName : \u5564\u91526\u74f6\u88c5 , productId : 1497 , skuId : 149766666 , category : \u5564\u9152 , qty : 1, priceUnit : 69.0, priceSubTotal : 69.0, brandName : \u767e\u5a01 } ] } ] \u4fee\u6539\u4e1a\u52a1\u8ba2\u5355\u7684API \u6240\u6709\u8ba2\u5355\u76f8\u5173\u5b57\u6bb5\u5747\u53ef\u4ee5\u4fee\u6539 \u8c03\u7528\u8bf7\u6c42 http\u8bf7\u6c42\u65b9\u5f0f\uff1aPUT https://api.convertlab.com/v1/deals/{id}?access_token={access_token} PUT\u8bf7\u6c42\u793a\u4f8b\uff1a { contactName : CL , contactTel : 18566677788 , } \u53c2\u6570\u8bf4\u660e \u53c2\u6570 \u662f\u5426\u5fc5\u586b \u8bf4\u660e access_token \u662f \u8bf7\u6c42\u51ed\u8bc1 \u8fd4\u56de\u7ed3\u679c { id : 1234, customerId : 8888, orderNo : 11122233344455 , amountTotal : 69.0, amountPaid : 59.0, amountDiscount : 10, counponCode : 222333444 , groupId : 888 , paymentTerm : wechat , paymentNo : 555666777 , type : online , dateOrder : 2017-04-20T12:56:47Z , store : CL\u5b98\u65b9\u5546\u57ce , salesChannel : tmall , shippingMethod : zto , contactName : CL , contactTel : 18566677788 , shippingProvince : \u4e0a\u6d77 , shippingCity : \u4e0a\u6d77 , shippingCounty : \u5f90\u6c47\u533a , shippingStreet : \u6c47\u8c37\u79d1\u6280\u56ed , shippingAddress : \u4e0a\u6d77\u5e02\u5f90\u6c47\u533a\u6c47\u8c37\u79d1\u6280\u56ed1\u5e62605 , lines : [ { lineId : 149766666 , productName : \u5564\u91526\u74f6\u88c5 , productId : 1497 , skuId : 149766666 , category : \u5564\u9152 , qty : 1, priceUnit : 69.0, priceSubTotal : 69.0, brandName : \u767e\u5a01 } ] } \u53d6\u6d88\u4e1a\u52a1\u8ba2\u5355\u7684API \u53d6\u6d88\u4e1a\u52a1\u8ba2\u5355 \u8c03\u7528\u8bf7\u6c42 http\u8bf7\u6c42\u65b9\u5f0f\uff1aPOST https://api.convertlab.com/v1/dealService/cancel?access_token={access_token} POST\u8bf7\u6c42\u793a\u4f8b\uff1a { orderNo : 11122233344455 } \u53c2\u6570\u8bf4\u660e \u53c2\u6570 \u662f\u5426\u5fc5\u586b \u8bf4\u660e access_token \u662f \u8bf7\u6c42\u51ed\u8bc1 \u8fd4\u56de\u7ed3\u679c { id : 1234, customerId : 8888, orderNo : 11122233344455 , amountTotal : 69.0, amountPaid : 59.0, amountDiscount : 10, counponCode : 222333444 , groupId : 888 , paymentTerm : wechat , paymentNo : 555666777 , type : online , dateOrder : 2017-04-20T12:56:47Z , store : CL\u5b98\u65b9\u5546\u57ce , state : \u5df2\u53d6\u6d88 , salesChannel : tmall , shippingMethod : zto , contactName : CL , contactTel : 18566677788 , shippingProvince : \u4e0a\u6d77 , shippingCity : \u4e0a\u6d77 , shippingCounty : \u5f90\u6c47\u533a , shippingStreet : \u6c47\u8c37\u79d1\u6280\u56ed , shippingAddress : \u4e0a\u6d77\u5e02\u5f90\u6c47\u533a\u6c47\u8c37\u79d1\u6280\u56ed1\u5e62605 , lines : [ { lineId : 149766666 , productName : \u5564\u91526\u74f6\u88c5 , productId : 1497 , skuId : 149766666 , category : \u5564\u9152 , qty : 1, priceUnit : 69.0, priceSubTotal : 69.0, brandName : \u767e\u5a01 } ] } \u9000\u8d27\u8ba2\u5355\u7684API \u9000\u8d27\u4e1a\u52a1\u8ba2\u5355 \u8c03\u7528\u8bf7\u6c42 http\u8bf7\u6c42\u65b9\u5f0f\uff1aPOST https://api.convertlab.com/v1/dealService/refund?access_token={access_token} POST\u8bf7\u6c42\u793a\u4f8b\uff1a { refundLines : [ { lineId : 149766666 } ], refundTotal : 69.0, // \u9000\u6b3e\u91d1\u989d orderNo : 11122233344455 } \u53c2\u6570\u8bf4\u660e \u53c2\u6570 \u662f\u5426\u5fc5\u586b \u8bf4\u660e access_token \u662f \u8bf7\u6c42\u51ed\u8bc1 \u8fd4\u56de\u7ed3\u679c { dateRefund : null, dateCreated : 2018-12-20T03:14:02Z , orderNo : 11122233344455 , refundTotal : 69, lastUpdated : 2018-12-20T03:14:02Z , customerId : 8888, reason : null, id : 2100032073, refundLines : [ { customerId : 8888, skuId : 149766699 , orderNo : 11111111024 , productId : 1497 , qty : 1, category : \u5564\u9152 , priceUnit : 69.000000, productName : \u5564\u915212\u74f6\u88c5 , lineId : 149766666 , refundId : 2100032073, priceSubTotal : 69.000000 } ] } \u5220\u9664\u9000\u8d27\u8ba2\u5355\u7684API \u5220\u9664\u9000\u8d27\u8ba2\u5355 \u8c03\u7528\u8bf7\u6c42 http\u8bf7\u6c42\u65b9\u5f0f\uff1aPOST https://api.convertlab.com/v1/dealService/deleteRefund?access_token={access_token} POST\u8bf7\u6c42\u793a\u4f8b\uff1a { orderNo : E20180115140107 } \u53c2\u6570\u8bf4\u660e \u53c2\u6570 \u662f\u5426\u5fc5\u586b \u8bf4\u660e access_token \u662f \u8bf7\u6c42\u51ed\u8bc1 \u8fd4\u56de\u7ed3\u679c { dateRefund : null, dateCreated : 2018-12-20T03:14:02Z , orderNo : E20180115140107 , refundTotal : 69, lastUpdated : 2018-12-20T03:14:02Z , customerId : 8888, reason : null, id : 2100032073, refundLines : [] } \u5220\u9664\u4e1a\u52a1\u8ba2\u5355\u7684API \u8c03\u7528\u8bf7\u6c42 http\u8bf7\u6c42\u65b9\u5f0f\uff1aDELETE https://api.convertlab.com/v1/deals/{id}?access_token={access_token} \u53c2\u6570\u8bf4\u660e \u53c2\u6570 \u662f\u5426\u5fc5\u586b \u8bf4\u660e access_token \u662f \u8bf7\u6c42\u51ed\u8bc1 \u6839\u636e\u8ba2\u5355\u53f7\u67e5\u8be2\u8ba2\u5355\u8be6\u60c5\u7684API \u8c03\u7528\u8bf7\u6c42 http\u8bf7\u6c42\u65b9\u5f0f\uff1aGET https://api.convertlab.com/v1/dealService/getDealByOrderNo?access_token={access_token} orderNo={orderNo} \u53c2\u6570\u8bf4\u660e \u53c2\u6570 \u662f\u5426\u5fc5\u586b \u8bf4\u660e access_token \u662f \u8bf7\u6c42\u51ed\u8bc1 orderNo \u662f \u9700\u8981\u67e5\u8be2\u7684\u8ba2\u5355\u53f7 \u8fd4\u56de\u7ed3\u679c { campaign : null, shippingCounty : \u5f90\u6c47\u533a , shippingStreet : \u6c47\u8c37\u79d1\u6280\u56ed , zipcode : null, shippingAddress : \u4e0a\u6d77\u5e02\u5f90\u6c47\u533a\u6c47\u8c37\u79d1\u6280\u56ed1\u5e62605 , salesChannel : tmall , amountPaid : 59.000000, contactName : JH , shippingCity : \u4e0a\u6d77 , state : \u5df2\u4ed8\u6b3e , merchantPoint : null, groupId : 888 , amountTotal : 69.000000, couponCode : null, contactTel : 12399988877 , dateOrder : 2018-12-20T12:56:47Z , buyerMessage : null, customerId : 90840682394599424, shippingMethod : zto , paymentTerm : wechat , shippingProvince : \u4e0a\u6d77 , store : CL\u5b98\u65b9\u5546\u57ce , amountDiscount : 10.000000, discountType : null, paymentNo : 555666777 , remark : null, type : online , lines : [ { couponCode : null, priceSubPaid : null, skuId : 149766666 , lNum3 : null, lNum2 : null, lNum4 : null, category : \u5564\u9152 , priceUnit : 69.000000, brandName : null, priceSubTotal : 69.000000, lNum1 : null, discountType : null, lDate3 : null, lDate2 : null, lAttr6 : null, productId : 1497 , lDate4 : null, lAttr5 : null, productName : \u5564\u91526\u74f6\u88c5 , qty : 1, lineId : 149766666 , lAttr4 : null, lAttr3 : null, lDate1 : null, lAttr2 : null, lAttr1 : null }, { couponCode : null, priceSubPaid : null, lNum3 : null, lNum2 : null, lNum4 : null, category : \u5564\u9152 , priceUnit : 69.000000, productName : \u5564\u915212\u74f6\u88c5 , lineId : 149766699 , brandName : null, priceSubTotal : 69.000000, lNum1 : null, discountType : null, skuId : 149766699 , lDate3 : null, lDate2 : null, lAttr6 : null, productId : 1497 , lDate4 : null, lAttr5 : null, qty : 1, lAttr4 : null, lAttr3 : null, lDate1 : null, lAttr2 : null, lAttr1 : null } ], id : 2307902913, orderNo : 11111111024 , customerIdStr : 90840682394599424 }","title":"\u5ba2\u6237\u4ea4\u6613"},{"location":"api/deal/#_1","text":"DM Hub\u7cfb\u7edf\u4e2d\u6240\u6709\u4ea4\u6613\u4fe1\u606f\u90fd\u53ef\u4ee5\u88ab\u8bb0\u5f55\u4e0b\u6765\u3002\u8fd9\u91cc\u7684\u4ea4\u6613\u53ef\u4ee5\u662f\u6709\u8ba2\u5355\u53d1\u751f\u7684\u8ba2\u5355\u4fe1\u606f\u6216\u6ca1\u6709\u8ba2\u5355\u884c\u4e3a\u7684\u4ea4\u6613\uff0c\u5982\u7535\u8bdd\u5145\u503c\u7b49\u3002 \u901a\u8fc7\u5ba2\u6237\u4ea4\u6613\u63a5\u53e3\uff0c\u60a8\u53ef\u4ee5\u5c06 \u4ea4\u6613\u6210\u529f \u7684\u8ba2\u5355\u5bfc\u5165DM Hub\uff0c\u4e5f\u53ef\u4ee5\u67e5\u8be2\u3001\u4fee\u6539\u548c\u5220\u9664\u5df2\u7ecf\u5bfc\u5165\u7684\u8ba2\u5355\u3002DM Hub\u4f1a\u5c06\u5bfc\u5165\u7684\u8ba2\u5355\u6570\u636e\u8fdb\u884c\u5206\u6790\uff0c\u60a8\u53ef\u4ee5\u5728\u5bfc\u5165\u540e\u901a\u8fc7\u9875\u9762\u64cd\u4f5c\u6d4f\u89c8\uff0c\u7b5b\u9009\uff0c\u5206\u6790\u4ea4\u6613\u6570\u636e\uff0c\u4e5f\u53ef\u4ee5\u901a\u8fc7\u8ba2\u5355\u4e2d\u7684\u4e00\u4e9b\u5ba2\u6237\u4fe1\u606f\u8fdb\u884c\u5ba2\u6237\u89e6\u8fbe\u3002 \u5ba2\u6237\u4ea4\u6613API\u5305\u62ec\u67e5\u770b\u6240\u6709\u8ba2\u5355API\uff0c\u589e\u52a0\u8ba2\u5355API\uff0c\u4fee\u6539\u8ba2\u5355API\uff0c\u67e5\u8be2\u8ba2\u5355API\u548c\u5220\u9664\u8ba2\u5355API\u3002\u8fd9\u4e9bAPI\u4f7f\u7528\u5ba2\u6237\u8ba2\u5355\u6a21\u578b\uff0c\u5982\u4e0b\u6240\u793a\u3002 \u5728\u6a21\u578b\u4e2d\uff0c\u6bcf\u4e00\u4e2a\u4ea4\u6613\u90fd\u4f1a\u5305\u542bn\u4e2a\u8ba2\u5355\u7269\u54c1\uff0c\u4ea4\u6613\u548c\u8ba2\u5355\u7269\u54c1\u901a\u8fc7\u8ba2\u5355\u7f16\u53f7\u76f8\u5173\u8054\u3002\u5177\u4f53\u7684\u6a21\u578b\u7ed3\u6784\u5982\u4e0b\u3002 \u5c5e\u6027 \u5c5e\u6027\u610f\u4e49 \u7c7b\u578b \u8bf4\u660e id \u5ba2\u6237\u4ea4\u6613ID Long \u53ea\u8bfb\u5b57\u6bb5 customerId \u5ba2\u6237id Long \u4ea4\u6613\u6240\u5c5e\u5ba2\u6237 orderNo \u8ba2\u5355\u53f7 String \u4ea4\u6613\u5728\u5bf9\u63a5\u7cfb\u7edf\u4e2d\u7684\u8ba2\u5355\u53f7 amountTotal \u8ba2\u5355\u603b\u91d1\u989d BigDecimal \u5728\u4ea4\u6613\u4e2d\u8ba2\u5355\u7684\u603b\u989d\uff0c\u5305\u62ec\u652f\u4ed8\u91d1\u989d\u548c\u4f18\u60e0\u91d1\u989d amountPaid \u5b9e\u9645\u652f\u4ed8\u91d1\u989d BigDecimal \u5ba2\u6237\u652f\u4ed8\u91d1\u989d amountDiscount \u8ba2\u5355\u6298\u6263\u91d1\u989d BigDecimal \u8ba2\u5355\u6298\u6263 discountType \u4f18\u60e0\u7c7b\u578b String \u4f18\u60e0\u7c7b\u578b couponCode \u4f18\u60e0\u5238 String \u4f18\u60e0\u5238\u7801 groupId \u56e2\u8d2d String \u56e2\u8d2did paymentTerm \u652f\u4ed8\u65b9\u5f0f String \u73b0\u91d1\u3001\u4fe1\u7528\u5361\u3001\u5fae\u4fe1\u652f\u4ed8\u3001\u652f\u4ed8\u5b9d\u7b49\u652f\u4ed8\u65b9\u5f0f paymentNo \u652f\u4ed8\u53f7 String \u652f\u4ed8\u540e\u7684\u4ea4\u6613\u53f7\u7801 type \u8ba2\u5355\u7c7b\u578b String \u7ebf\u4e0a\u3001\u7ebf\u4e0b\u7b49\u7c7b\u578b dateOrder \u8ba2\u5355\u65f6\u95f4 DateTime \u8ba2\u5355\u652f\u4ed8\u5b8c\u6210\u65f6\u95f4\uff0c\u91c7\u7528UTC\u65f6\u95f4\u683c\u5f0f\u4e3a:\u201c2017-06-07T12:20:20Z\u201d \u5982\u662f\u5317\u4eac\u65f6\u95f4\uff0c\u8bf7\u51cf8\u5c0f\u65f6 store \u5e97\u94fa\u540d\u79f0 String \u8ba2\u5355\u5e97\u94fa\uff08\u7ebf\u4e0b\u6216\u7ebf\u4e0a\u7684\u5e97\u94fa\u540d\uff09 salesChannel \u6e20\u9053 String \u8ba2\u5355\u6e20\u9053\uff08\u5982\u7ebf\u4e0b\uff0c\u5929\u732b\u7b49\uff09 shippingMethod \u8fd0\u9001\u65b9\u5f0f String \u8d27\u7269\u7684\u8fd0\u9001\u65b9\u5f0f contactName \u6536\u8d27\u4eba\u540d\u79f0 String \u6536\u8d27\u4eba\u540d\u79f0 contactTel \u6536\u8d27\u4eba\u7535\u8bdd String \u6536\u8d27\u4eba\u7535\u8bdd zipcode \u90ae\u7f16 String \u90ae\u7f16 shippingProvince \u6536\u8d27\u4eba\u7701\u4efd String \u6536\u8d27\u4eba\u7701\u4efd shippingCity \u6536\u8d27\u4eba\u57ce\u5e02 String \u6536\u8d27\u4eba\u57ce\u5e02 shippingCounty \u6536\u8d27\u4eba\u533a\u53bf String \u6536\u8d27\u4eba\u533a\u53bf shippingStreet \u6536\u8d27\u4eba\u8857\u9053 String \u6536\u8d27\u4eba\u8857\u9053 shippingAddress \u6536\u8d27\u4eba\u8be6\u7ec6\u5730\u5740 String \u6536\u8d27\u4eba\u8be6\u7ec6\u5730\u5740 buyerMessage \u4e70\u5bb6\u7559\u8a00 String \u4e70\u5bb6\u7559\u8a00 remark \u8ba2\u5355\u5907\u6ce8 String \u8ba2\u5355\u5907\u6ce8 campaign \u8425\u9500\u6d3b\u52a8\u7f16\u7801 String \u8425\u9500\u6d3b\u52a8\u7f16\u7801 merchantPoint \u8ba2\u5355\u79ef\u5206 Integer \u8ba2\u5355\u79ef\u5206 \u652f\u6301\u8ba2\u5355\u5934\u81ea\u5b9a\u4e49\u5b57\u6bb5","title":"\u5ba2\u6237\u4ea4\u6613\u6a21\u578b"},{"location":"api/deal/#_2","text":"\u5c5e\u6027 \u5c5e\u6027\u610f\u4e49 \u7c7b\u578b \u8bf4\u660e orderNo \u8ba2\u5355\u53f7 String \u4ea4\u6613\u5728\u5bf9\u63a5\u7cfb\u7edf\u4e2d\u7684\u8ba2\u5355\u53f7 lineId \u8ba2\u5355\u884cID String \u8ba2\u5355\u884c\u5728\u8be5\u8ba2\u5355\u4e2d\u7684\u552f\u4e00\u6807\u8bc6\uff0c\u53ef\u4ee5\u4f20\u5546\u54c1id\u6216skuid discountType \u4f18\u60e0\u7c7b\u578b String \u4f18\u60e0\u7c7b\u578b counponCode \u4f18\u60e0\u5238 String \u4f18\u60e0\u5238\u7801 productName \u5546\u54c1\u540d\u79f0 String \u5546\u54c1\u540d\u79f0 productId \u5546\u54c1ID String \u5546\u54c1ID skuId skuid String skuID brandName \u4ea7\u54c1\u54c1\u724c String \u4ea7\u54c1\u54c1\u724c category \u4ea7\u54c1\u6240\u5c5e\u54c1\u7c7b String \u4ea7\u54c1\u6240\u5c5e\u54c1\u7c7b\uff0c\u6bd4\u5982\u5564\u9152 qty \u8ba2\u8d2d\u6570\u91cf Integer \u8ba2\u8d2d\u6570\u91cf priceUnit \u5355\u4ef6\u5546\u54c1\u4ef7\u683c BigDecimal \u5355\u4ef6\u5546\u54c1\u4ef7\u683c priceSubTotal \u8be5\u5546\u54c1\u603b\u4ef7 BigDecimal \u8be5\u5546\u54c1\u603b\u4ef7 priceSubPaid \u8be5\u5546\u54c1\u5b9e\u9645\u652f\u4ed8\u91d1\u989d BigDecimal \u8be5\u5546\u54c1\u5b9e\u9645\u652f\u4ed8\u91d1\u989d \u652f\u6301\u8ba2\u5355\u884c\u81ea\u5b9a\u4e49\u5b57\u6bb5","title":"\u8ba2\u5355\u7269\u54c1\u6a21\u578b"},{"location":"api/deal/#api","text":"\u8ba2\u5355\u7269\u54c1\u653e\u5728\u8ba2\u5355\u7684line\u5b57\u6bb5\u4e2d\u4e00\u8d77\u521b\u5efa\u3002 customerId\u548ccustomerIdentities\u9009\u586b\u4e00\u9879\u3002 \u8c03\u7528\u8bf7\u6c42 http\u8bf7\u6c42\u65b9\u5f0f\uff1aPOST https://api.convertlab.com/v1/deals?access_token= access_token POST\u8bf7\u6c42\u793a\u4f8b\uff1a { customerId : 8888, orderNo : 11122233344455 , amountTotal : 69.0, amountPaid : 59.0, amountDiscount : 10, counponCode : 222333444 , groupId : 888 , paymentTerm : wechat , paymentNo : 555666777 , type : online , dateOrder : 2017-04-20T12:56:47Z , store : CL\u5b98\u65b9\u5546\u57ce , salesChannel : tmall , shippingMethod : zto , contactName : JH , contactTel : 12399988877 , shippingProvince : \u4e0a\u6d77 , shippingCity : \u4e0a\u6d77 , shippingCounty : \u5f90\u6c47\u533a , shippingStreet : \u6c47\u8c37\u79d1\u6280\u56ed , shippingAddress : \u4e0a\u6d77\u5e02\u5f90\u6c47\u533a\u6c47\u8c37\u79d1\u6280\u56ed1\u5e62605 , lines : [ { lineId : 149766666 , productName : \u5564\u91526\u74f6\u88c5 , productId : 1497 , skuId : 149766666 , category : \u5564\u9152 , qty : 1, priceUnit : 69.0, priceSubTotal : 69.0 } ], customerIdentities : [ { identityType : wechat , identityValue : o123456... , identityName : \u5fae\u4fe1\u6635\u79f0 }, { identityType : your-system-account , identityValue : user123 , identityName : \u60a8\u7cfb\u7edf\u91cc\u7684\u7528\u6237\u540d } ] } \u53c2\u6570\u8bf4\u660e \u53c2\u6570 \u662f\u5426\u5fc5\u586b \u8bf4\u660e id \u662f \u5ba2\u6237\u4ea4\u6613ID customerId \u662f \u5ba2\u6237id orderNo \u662f \u8ba2\u5355\u53f7 amountTotal \u5426 \u8ba2\u5355\u603b\u91d1\u989d amountPaid \u662f \u5b9e\u9645\u652f\u4ed8\u91d1\u989d amountDiscount \u5426 \u8ba2\u5355\u6298\u6263 discountType \u5426 \u4f18\u60e0\u7c7b\u578b counponCode \u5426 \u4f18\u60e0\u5238\u7801 groupId \u5426 \u56e2\u8d2d paymentTerm \u5426 \u652f\u4ed8\u65b9\u5f0f paymentNo \u5426 \u652f\u4ed8\u53f7 type \u5426 \u8ba2\u5355\u7c7b\u578b dateOrder \u662f \u8ba2\u5355\u65f6\u95f4\uff0c\u65f6\u95f4\u683c\u5f0f\u4e3a \u201c2016-11-11T11:11:11\u201d \u4e3aUTC\u65f6\u95f4 store \u5426 \u5e97\u94fa\u540d\u79f0 salesChannel \u5426 \u6e20\u9053 shippingMethod \u5426 \u8fd0\u9001\u65b9\u5f0f contactName \u5426 \u6536\u8d27\u4eba\u540d\u79f0 contactTel \u5426 \u6536\u8d27\u4eba\u7535\u8bdd zipcode \u5426 \u90ae\u7f16 shippingProvince \u5426 \u6536\u8d27\u4eba\u7701\u4efd shippingCity \u5426 \u6536\u8d27\u4eba\u57ce\u5e02 shippingCounty \u5426 \u6536\u8d27\u4eba\u533a\u53bf shippingStreet \u5426 \u6536\u8d27\u4eba\u8857\u9053 shippingAddress \u5426 \u6536\u8d27\u4eba\u8be6\u7ec6\u5730\u5740 buyerMessage \u5426 \u4e70\u5bb6\u7559\u8a00 remark \u5426 \u8ba2\u5355\u5907\u6ce8 campaign \u5426 \u8425\u9500\u6d3b\u52a8\u7f16\u7801 merchantPoint \u5426 \u8ba2\u5355\u79ef\u5206 orderNo \u662f \u4ea4\u6613\u5728\u5bf9\u63a5\u7cfb\u7edf\u4e2d\u7684\u8ba2\u5355\u53f7 lineId \u662f \u8ba2\u5355\u884c\u5728\u8be5\u8ba2\u5355\u4e2d\u7684\u552f\u4e00\u6807\u8bc6\uff0c\u53ef\u4ee5\u4f20\u5546\u54c1id\u6216skuid discountType \u5426 \u4f18\u60e0\u7c7b\u578b counponCode \u5426 \u4f18\u60e0\u5238\u7801 productName \u662f \u5546\u54c1\u540d\u79f0 productId \u5426 \u5546\u54c1ID skuId \u5426 SkuID brandName \u5426 \u4ea7\u54c1\u54c1\u724c category \u5426 \u4ea7\u54c1\u6240\u5c5e\u54c1\u7c7b qty \u662f \u5546\u54c1\u6570\u91cf priceUnit \u5426 \u5355\u4ef6\u5546\u54c1\u4ef7\u683c priceSubTotal \u5426 \u8be5\u5546\u54c1\u603b\u4ef7 priceSubPaid \u5426 \u8be5\u5546\u54c1\u5b9e\u9645\u652f\u4ed8\u91d1\u989d \u8fd4\u56de\u7ed3\u679c { id : 1234, customerId : 8888, orderNo : 11122233344455 , amountTotal : 69.0, amountPaid : 59.0, amountDiscount : 10, counponCode : 222333444 , groupId : 888 , paymentTerm : wechat , paymentNo : 555666777 , type : online , dateOrder : 2017-04-20T12:56:47Z , store : CL\u5b98\u65b9\u5546\u57ce , salesChannel : tmall , shippingMethod : zto , contactName : JH , contactTel : 12399988877 , shippingProvince : \u4e0a\u6d77 , shippingCity : \u4e0a\u6d77 , shippingCounty : \u5f90\u6c47\u533a , shippingStreet : \u6c47\u8c37\u79d1\u6280\u56ed , shippingAddress : \u4e0a\u6d77\u5e02\u5f90\u6c47\u533a\u6c47\u8c37\u79d1\u6280\u56ed1\u5e62605 , lines : [ { lineId : 149766666 , productName : \u5564\u91526\u74f6\u88c5 , productId : 1497 , skuId : 149766666 , category : \u5564\u9152 , qty : 1, priceUnit : 69.0, priceSubTotal : 69.0 } ] }","title":"\u521b\u5efa\u4e1a\u52a1\u8ba2\u5355\u7684API"},{"location":"api/deal/#api_1","text":"\u8c03\u7528\u8bf7\u6c42 HTTP\u8bf7\u6c42\u65b9\u6cd5GET https://api.convertlab.com/v1/deals/{id}?access_token={access_token} \u53c2\u6570\u8bf4\u660e \u53c2\u6570 \u662f\u5426\u5fc5\u586b \u8bf4\u660e access_token \u662f \u8bf7\u6c42\u51ed\u8bc1 id \u662f \u5ba2\u6237\u4ea4\u6613ID \u8fd4\u56de\u6570\u636e { id : 1234, customerId : 8888, orderNo : 11122233344455 , amountTotal : 69.0, amountPaid : 59.0, amountDiscount : 10, counponCode : 222333444 , groupId : 888 , paymentTerm : wechat , paymentNo : 555666777 , type : online , dateOrder : 2017-04-20T12:56:47Z , store : CL\u5b98\u65b9\u5546\u57ce , salesChannel : tmall , shippingMethod : zto , contactName : JH , contactTel : 12399988877 , shippingProvince : \u4e0a\u6d77 , shippingCity : \u4e0a\u6d77 , shippingCounty : \u5f90\u6c47\u533a , shippingStreet : \u6c47\u8c37\u79d1\u6280\u56ed , shippingAddress : \u4e0a\u6d77\u5e02\u5f90\u6c47\u533a\u6c47\u8c37\u79d1\u6280\u56ed1\u5e62605 , lines : [ { lineId : 149766666 , productName : \u5564\u91526\u74f6\u88c5 , productId : 1497 , skuId : 149766666 , category : \u5564\u9152 , qty : 1, priceUnit : 69.0, priceSubTotal : 69.0 } ] }","title":"\u67e5\u8be2\u8ba2\u5355\u7684API"},{"location":"api/deal/#api_2","text":"\u8c03\u7528\u8bf7\u6c42 http\u8bf7\u6c42\u65b9\u5f0f\uff1aGET https://api.convertlab.com/v1/deals?access_token={access_token} rows={rows} page={page} sidx={sidx} sord={sord} \u53c2\u6570\u8bf4\u660e \u53c2\u6570 \u662f\u5426\u5fc5\u586b \u8bf4\u660e access_token \u662f \u8bf7\u6c42\u51ed\u8bc1 customer_id \u5426 \u53ea\u67e5\u8be2\u67d0\u4e2a\u5ba2\u6237\u7684\u8ba2\u5355 rows \u5426 \u6bcf\u9875\u7684\u8bb0\u5f55\u6570 page \u5426 \u8d77\u59cb\u9875\u6570\uff0c\u4ee51\u5f00\u59cb sidx \u5426 \u6392\u5e8f\u7684\u5b57\u6bb5\uff0c\u9ed8\u8ba4\u6309id\u6392\u5e8f sord \u5426 asc\u8868\u793a\u5347\u5e8f\uff0cdesc\u8868\u793a\u964d\u5e8f\uff0c\u9ed8\u8ba4\u4e3a\u5347\u5e8f \u8fd4\u56de\u7ed3\u679c { page : 1, records : 1, rows : [ { id : 1234, customerId : 8888, orderNo : 11122233344455 , amountTotal : 69.0, amountPaid : 59.0, amountDiscount : 10, counponCode : 222333444 , groupId : 888 , paymentTerm : wechat , paymentNo : 555666777 , type : online , dateOrder : 2017-04-20T12:56:47Z , store : CL\u5b98\u65b9\u5546\u57ce , salesChannel : tmall , shippingMethod : zto , contactName : JH , contactTel : 12399988877 , shippingProvince : \u4e0a\u6d77 , shippingCity : \u4e0a\u6d77 , shippingCounty : \u5f90\u6c47\u533a , shippingStreet : \u6c47\u8c37\u79d1\u6280\u56ed , shippingAddress : \u4e0a\u6d77\u5e02\u5f90\u6c47\u533a\u6c47\u8c37\u79d1\u6280\u56ed1\u5e62605 , lines : [ { lineId : 149766666 , productName : \u5564\u91526\u74f6\u88c5 , productId : 1497 , skuId : 149766666 , category : \u5564\u9152 , qty : 1, priceUnit : 69.0, priceSubTotal : 69.0, brandName : \u767e\u5a01 } ] } ]","title":"\u67e5\u8be2\u6240\u6709\u8ba2\u5355\u7684API"},{"location":"api/deal/#api_3","text":"\u6240\u6709\u8ba2\u5355\u76f8\u5173\u5b57\u6bb5\u5747\u53ef\u4ee5\u4fee\u6539 \u8c03\u7528\u8bf7\u6c42 http\u8bf7\u6c42\u65b9\u5f0f\uff1aPUT https://api.convertlab.com/v1/deals/{id}?access_token={access_token} PUT\u8bf7\u6c42\u793a\u4f8b\uff1a { contactName : CL , contactTel : 18566677788 , } \u53c2\u6570\u8bf4\u660e \u53c2\u6570 \u662f\u5426\u5fc5\u586b \u8bf4\u660e access_token \u662f \u8bf7\u6c42\u51ed\u8bc1 \u8fd4\u56de\u7ed3\u679c { id : 1234, customerId : 8888, orderNo : 11122233344455 , amountTotal : 69.0, amountPaid : 59.0, amountDiscount : 10, counponCode : 222333444 , groupId : 888 , paymentTerm : wechat , paymentNo : 555666777 , type : online , dateOrder : 2017-04-20T12:56:47Z , store : CL\u5b98\u65b9\u5546\u57ce , salesChannel : tmall , shippingMethod : zto , contactName : CL , contactTel : 18566677788 , shippingProvince : \u4e0a\u6d77 , shippingCity : \u4e0a\u6d77 , shippingCounty : \u5f90\u6c47\u533a , shippingStreet : \u6c47\u8c37\u79d1\u6280\u56ed , shippingAddress : \u4e0a\u6d77\u5e02\u5f90\u6c47\u533a\u6c47\u8c37\u79d1\u6280\u56ed1\u5e62605 , lines : [ { lineId : 149766666 , productName : \u5564\u91526\u74f6\u88c5 , productId : 1497 , skuId : 149766666 , category : \u5564\u9152 , qty : 1, priceUnit : 69.0, priceSubTotal : 69.0, brandName : \u767e\u5a01 } ] }","title":"\u4fee\u6539\u4e1a\u52a1\u8ba2\u5355\u7684API"},{"location":"api/deal/#api_4","text":"\u53d6\u6d88\u4e1a\u52a1\u8ba2\u5355 \u8c03\u7528\u8bf7\u6c42 http\u8bf7\u6c42\u65b9\u5f0f\uff1aPOST https://api.convertlab.com/v1/dealService/cancel?access_token={access_token} POST\u8bf7\u6c42\u793a\u4f8b\uff1a { orderNo : 11122233344455 } \u53c2\u6570\u8bf4\u660e \u53c2\u6570 \u662f\u5426\u5fc5\u586b \u8bf4\u660e access_token \u662f \u8bf7\u6c42\u51ed\u8bc1 \u8fd4\u56de\u7ed3\u679c { id : 1234, customerId : 8888, orderNo : 11122233344455 , amountTotal : 69.0, amountPaid : 59.0, amountDiscount : 10, counponCode : 222333444 , groupId : 888 , paymentTerm : wechat , paymentNo : 555666777 , type : online , dateOrder : 2017-04-20T12:56:47Z , store : CL\u5b98\u65b9\u5546\u57ce , state : \u5df2\u53d6\u6d88 , salesChannel : tmall , shippingMethod : zto , contactName : CL , contactTel : 18566677788 , shippingProvince : \u4e0a\u6d77 , shippingCity : \u4e0a\u6d77 , shippingCounty : \u5f90\u6c47\u533a , shippingStreet : \u6c47\u8c37\u79d1\u6280\u56ed , shippingAddress : \u4e0a\u6d77\u5e02\u5f90\u6c47\u533a\u6c47\u8c37\u79d1\u6280\u56ed1\u5e62605 , lines : [ { lineId : 149766666 , productName : \u5564\u91526\u74f6\u88c5 , productId : 1497 , skuId : 149766666 , category : \u5564\u9152 , qty : 1, priceUnit : 69.0, priceSubTotal : 69.0, brandName : \u767e\u5a01 } ] }","title":"\u53d6\u6d88\u4e1a\u52a1\u8ba2\u5355\u7684API"},{"location":"api/deal/#api_5","text":"\u9000\u8d27\u4e1a\u52a1\u8ba2\u5355 \u8c03\u7528\u8bf7\u6c42 http\u8bf7\u6c42\u65b9\u5f0f\uff1aPOST https://api.convertlab.com/v1/dealService/refund?access_token={access_token} POST\u8bf7\u6c42\u793a\u4f8b\uff1a { refundLines : [ { lineId : 149766666 } ], refundTotal : 69.0, // \u9000\u6b3e\u91d1\u989d orderNo : 11122233344455 } \u53c2\u6570\u8bf4\u660e \u53c2\u6570 \u662f\u5426\u5fc5\u586b \u8bf4\u660e access_token \u662f \u8bf7\u6c42\u51ed\u8bc1 \u8fd4\u56de\u7ed3\u679c { dateRefund : null, dateCreated : 2018-12-20T03:14:02Z , orderNo : 11122233344455 , refundTotal : 69, lastUpdated : 2018-12-20T03:14:02Z , customerId : 8888, reason : null, id : 2100032073, refundLines : [ { customerId : 8888, skuId : 149766699 , orderNo : 11111111024 , productId : 1497 , qty : 1, category : \u5564\u9152 , priceUnit : 69.000000, productName : \u5564\u915212\u74f6\u88c5 , lineId : 149766666 , refundId : 2100032073, priceSubTotal : 69.000000 } ] }","title":"\u9000\u8d27\u8ba2\u5355\u7684API"},{"location":"api/deal/#api_6","text":"\u5220\u9664\u9000\u8d27\u8ba2\u5355 \u8c03\u7528\u8bf7\u6c42 http\u8bf7\u6c42\u65b9\u5f0f\uff1aPOST https://api.convertlab.com/v1/dealService/deleteRefund?access_token={access_token} POST\u8bf7\u6c42\u793a\u4f8b\uff1a { orderNo : E20180115140107 } \u53c2\u6570\u8bf4\u660e \u53c2\u6570 \u662f\u5426\u5fc5\u586b \u8bf4\u660e access_token \u662f \u8bf7\u6c42\u51ed\u8bc1 \u8fd4\u56de\u7ed3\u679c { dateRefund : null, dateCreated : 2018-12-20T03:14:02Z , orderNo : E20180115140107 , refundTotal : 69, lastUpdated : 2018-12-20T03:14:02Z , customerId : 8888, reason : null, id : 2100032073, refundLines : [] }","title":"\u5220\u9664\u9000\u8d27\u8ba2\u5355\u7684API"},{"location":"api/deal/#api_7","text":"\u8c03\u7528\u8bf7\u6c42 http\u8bf7\u6c42\u65b9\u5f0f\uff1aDELETE https://api.convertlab.com/v1/deals/{id}?access_token={access_token} \u53c2\u6570\u8bf4\u660e \u53c2\u6570 \u662f\u5426\u5fc5\u586b \u8bf4\u660e access_token \u662f \u8bf7\u6c42\u51ed\u8bc1","title":"\u5220\u9664\u4e1a\u52a1\u8ba2\u5355\u7684API"},{"location":"api/deal/#api_8","text":"\u8c03\u7528\u8bf7\u6c42 http\u8bf7\u6c42\u65b9\u5f0f\uff1aGET https://api.convertlab.com/v1/dealService/getDealByOrderNo?access_token={access_token} orderNo={orderNo} \u53c2\u6570\u8bf4\u660e \u53c2\u6570 \u662f\u5426\u5fc5\u586b \u8bf4\u660e access_token \u662f \u8bf7\u6c42\u51ed\u8bc1 orderNo \u662f \u9700\u8981\u67e5\u8be2\u7684\u8ba2\u5355\u53f7 \u8fd4\u56de\u7ed3\u679c { campaign : null, shippingCounty : \u5f90\u6c47\u533a , shippingStreet : \u6c47\u8c37\u79d1\u6280\u56ed , zipcode : null, shippingAddress : \u4e0a\u6d77\u5e02\u5f90\u6c47\u533a\u6c47\u8c37\u79d1\u6280\u56ed1\u5e62605 , salesChannel : tmall , amountPaid : 59.000000, contactName : JH , shippingCity : \u4e0a\u6d77 , state : \u5df2\u4ed8\u6b3e , merchantPoint : null, groupId : 888 , amountTotal : 69.000000, couponCode : null, contactTel : 12399988877 , dateOrder : 2018-12-20T12:56:47Z , buyerMessage : null, customerId : 90840682394599424, shippingMethod : zto , paymentTerm : wechat , shippingProvince : \u4e0a\u6d77 , store : CL\u5b98\u65b9\u5546\u57ce , amountDiscount : 10.000000, discountType : null, paymentNo : 555666777 , remark : null, type : online , lines : [ { couponCode : null, priceSubPaid : null, skuId : 149766666 , lNum3 : null, lNum2 : null, lNum4 : null, category : \u5564\u9152 , priceUnit : 69.000000, brandName : null, priceSubTotal : 69.000000, lNum1 : null, discountType : null, lDate3 : null, lDate2 : null, lAttr6 : null, productId : 1497 , lDate4 : null, lAttr5 : null, productName : \u5564\u91526\u74f6\u88c5 , qty : 1, lineId : 149766666 , lAttr4 : null, lAttr3 : null, lDate1 : null, lAttr2 : null, lAttr1 : null }, { couponCode : null, priceSubPaid : null, lNum3 : null, lNum2 : null, lNum4 : null, category : \u5564\u9152 , priceUnit : 69.000000, productName : \u5564\u915212\u74f6\u88c5 , lineId : 149766699 , brandName : null, priceSubTotal : 69.000000, lNum1 : null, discountType : null, skuId : 149766699 , lDate3 : null, lDate2 : null, lAttr6 : null, productId : 1497 , lDate4 : null, lAttr5 : null, qty : 1, lAttr4 : null, lAttr3 : null, lDate1 : null, lAttr2 : null, lAttr1 : null } ], id : 2307902913, orderNo : 11111111024 , customerIdStr : 90840682394599424 }","title":"\u6839\u636e\u8ba2\u5355\u53f7\u67e5\u8be2\u8ba2\u5355\u8be6\u60c5\u7684API"},{"location":"api/list/","text":"\u7fa4\u7ec4\u6a21\u578b \u60a8\u53ef\u4ee5\u5c06\u5ba2\u6237\u6309\u4e0d\u540c\u7684\u6761\u4ef6\u5206\u6210\u4e0d\u540c\u7684\u7fa4\u7ec4\uff0c\u5e76\u5bf9\u4e0d\u540c\u7fa4\u7ec4\u7684\u5ba2\u6237\u91c7\u7528\u4e0d\u540c\u7684\u7b56\u7565\u8fdb\u884c\u57f9\u80b2\u3002\u8fd9\u79cd\u5206\u7ec4\u9664\u4e86\u53ef\u4ee5DM Hub\u7cfb\u7edf\u4e2d\u8fdb\u884c\uff0c\u60a8\u4e5f\u53ef\u4ee5\u901a\u8fc7\u5f00\u53d1API\u6765\u5b8c\u6210\u3002DM Hub\u7684\u7fa4\u7ec4API\u5141\u8bb8\u64cd\u4f5c\u9759\u6001\u7fa4\u7ec4\uff0c\u5411\u7fa4\u7ec4\u4e2d\u6dfb\u52a0\u6210\u5458\uff0c\u67e5\u8be2\u6210\u5458\u5217\u8868\u7b49\u3002 \u7fa4\u7ec4\u6a21\u578b \u5c5e\u6027 \u5c5e\u6027\u610f\u4e49 \u7c7b\u578b \u8bf4\u660e id \u7fa4\u7ec4id Long \u53ea\u8bfb\u5b57\u6bb5 name \u7fa4\u7ec4\u540d String \u6700\u957f\u8fd0\u884c255\u4e2a\u5b57\u7b26 dateCreated \u7fa4\u7ec4\u521b\u5efa\u65f6\u95f4 String \u683c\u5f0f\u4e3a: \u201c2017-06-07T12:20:20Z\u201d \u4e3aUTC\u65f6\u95f4 lastUpdated \u7fa4\u7ec4\u4fee\u6539\u65f6\u95f4 String \u683c\u5f0f\u540cdateCreated \u7fa4\u7ec4\u6210\u5458\u6a21\u578b \u5c5e\u6027 \u5c5e\u6027\u610f\u4e49 \u7c7b\u578b \u8bf4\u660e id \u5ba2\u6237\u5728\u7fa4\u7ec4\u4e2d\u7684\u6210\u5458id Long \u53ea\u8bfb\u5b57\u6bb5 listId \u7fa4\u7ec4id Long customerId \u5ba2\u6237id Long dateCreated \u52a0\u5165\u7fa4\u7ec4\u65f6\u95f4 String \u683c\u5f0f\u4e3a: \u201c2017-06-07T12:20:20Z\u201d \u4e3aUTC\u65f6\u95f4 \u521b\u5efa\u7fa4\u7ec4API \u8c03\u7528\u8bf7\u6c42 http\u8bf7\u6c42\u65b9\u5f0f\uff1aPOST https://api.convertlab.com/v1/lists?access_token={access_token} POST\u8bf7\u6c42\u793a\u4f8b\uff1a { name : \u91d1\u5361\u4f1a\u5458 } \u53c2\u6570\u8bf4\u660e \u53c2\u6570 \u662f\u5426\u5fc5\u586b \u8bf4\u660e access_token \u662f \u8bbf\u95eeAPI\u7684\u4ee4\u724c name \u662f \u7fa4\u7ec4\u540d\u79f0 \u8fd4\u56de\u7ed3\u679c { id : 1, name : \u91d1\u5361\u4f1a\u5458 , dateCreated : 2017-05-23T02:42:14Z , lastUpdated : 2017-06-08T06:04:25Z } \u5220\u9664\u7fa4\u7ec4\u7684API \u8c03\u7528\u8bf7\u6c42 http\u8bf7\u6c42\u65b9\u5f0f\uff1aDELETE https://api.convertlab.com/v1/lists/{id}?access_token={access_token} \u53c2\u6570\u8bf4\u660e \u53c2\u6570 \u662f\u5426\u5fc5\u586b \u8bf4\u660e access_token \u662f \u8bbf\u95eeAPI\u7684\u4ee4\u724c id \u662f \u7fa4\u7ec4id \u6ce8\uff1a \u5220\u9664\u7fa4\u7ec4\u5e76\u4e0d\u4f1a\u5220\u9664\u5ba2\u6237 \u67e5\u8be2\u7fa4\u7ec4\u5217\u8868\u7684API \u8c03\u7528\u8bf7\u6c42 http\u8bf7\u6c42\u65b9\u5f0fGET https://api.convertlab.com/v1/lists?access_token={access_token} rows={rows} page={page} sidx={sidx} sord={sord} \u53c2\u6570\u8bf4\u660e \u53c2\u6570 \u662f\u5426\u5fc5\u586b \u8bf4\u660e access_token \u662f \u8bbf\u95eeAPI\u7684\u4ee4\u724c rows \u5426 \u6bcf\u9875\u7684\u8bb0\u5f55\u6570 page \u5426 \u8d77\u59cb\u9875\u6570\uff0c\u4ee51\u5f00\u59cb sidx \u5426 \u6392\u5e8f\u7684\u5b57\u6bb5\uff0c\u9ed8\u8ba4\u6309id\u6392\u5e8f sord \u5426 asc\u8868\u793a\u5347\u5e8f\uff0cdesc\u8868\u793a\u964d\u5e8f\uff0c\u9ed8\u8ba4\u4e3a\u5347\u5e8f \u8fd4\u56de\u7ed3\u679c { page : 1, records : 1, rows : [ { id : 1, name : test2 , dateCreated : 2017-05-23T02:42:14Z , lastUpdated : 2017-06-08T06:04:25Z } ], total : 1 } \u8fd4\u56de\u7ed3\u679c\u8bf4\u660e page \u7ed3\u679c\u4e3a\u7b2c\u51e0\u9875 records \u8fd4\u56de\u7684\u8bb0\u5f55\u6761\u6570 total \u7cfb\u7edf\u62e5\u6709\u6807\u7b7e\u7684\u603b\u9875\u6570 rows \u8fd4\u56de\u7684\u8bb0\u5f55\u6570\u7ec4 \u5c06\u4e00\u4e2a\u5ba2\u6237\u52a0\u5165\u67d0\u4e2a\u7fa4\u7ec4API \u8bf7\u6c42\u8c03\u7528 http\u8bf7\u6c42\u65b9\u5f0f\uff1aPOST https://api.convertlab.com/v1/listMembers?access_token={access_token} POST\u8bf7\u6c42\u793a\u4f8b\uff1a { data : { customerId : 4, listId : 1 } } \u53c2\u6570\u8bf4\u660e \u53c2\u6570 \u662f\u5426\u5fc5\u586b \u8bf4\u660e access_token \u662f \u8bbf\u95eeAPI\u7684\u4ee4\u724c data \u662f \u5177\u4f53\u6570\u636e\u90fd\u5b58\u653e\u5728\u8be5\u5b57\u6bb5\u5185 customerId \u662f \u8981\u52a0\u5165\u7fa4\u7ec4\u7684\u5ba2\u6237id listId \u662f \u8981\u52a0\u5165\u7684\u7fa4\u7ec4id \u8fd4\u56de\u7ed3\u679c { data : { id : 36345, customerId : 5, dateCreated : 2017-06-08T07:12:56Z , lastUpdated : 2017-06-08T07:12:56Z , listId : 1 } } \u8fd4\u56de\u7ed3\u679c\u8bf4\u660e id\u4e3a\u5ba2\u6237\u5728\u7fa4\u7ec4\u4e2d\u7684id dateCreated \u4e3a\u5ba2\u6237\u52a0\u5165\u7fa4\u7ec4\u4e2d\u7684\u65f6\u95f4, \u683c\u5f0f\u4e3a:\u201c2017-06-01T12:12:12Z\u201d \u4e3aUTC\u65f6\u95f4 \u5c06\u4e00\u4e2a\u5ba2\u6237\u4ece\u67d0\u4e2a\u7fa4\u7ec4\u4e2d\u5220\u9664\u7684API \u8c03\u7528\u8bf7\u6c42 http\u8bf7\u6c42\u65b9\u5f0f\uff1aDELETE https://api.convertlab.com/v1/listMembers/{id}?access_token={access_token} \u53c2\u6570\u8bf4\u660e \u53c2\u6570 \u662f\u5426\u5fc5\u586b \u8bf4\u660e access_token \u662f \u8bbf\u95eeAPI\u7684\u4ee4\u724c id \u662f \u8981\u5220\u9664\u5ba2\u6237\u5728\u7fa4\u7ec4\u4e2d\u7684id \u5c06\u591a\u4e2a\u5ba2\u6237\u4ece\u67d0\u4e2a\u7fa4\u7ec4\u4e2d\u5220\u9664\u7684API \u8c03\u7528\u8bf7\u6c42 http\u8bf7\u6c42\u65b9\u5f0f\uff1aPOST https://api.convertlab.com/v1/listservice/removeFromList?customerIds={customerIds} listId={listId} access_token={access_token} \u53c2\u6570\u8bf4\u660e \u53c2\u6570 \u662f\u5426\u5fc5\u586b \u8bf4\u660e access_token \u662f \u8bbf\u95eeAPI\u7684\u4ee4\u724c customerIds \u662f \u8981\u5220\u9664\u7684\u591a\u4e2a\u5ba2\u6237id\uff0c\u5ba2\u6237id\u4e4b\u95f4\u7528\u9017\u53f7\u9694\u5f00 listId \u662f \u8981\u628a\u5ba2\u6237\u5220\u9664\u7684\u7fa4\u7ec4id \u5c06\u591a\u4e2a\u5ba2\u6237\u52a0\u5165\u67d0\u7fa4\u7ec4\u7684API \u8c03\u7528\u8bf7\u6c42 HTTP\u8bf7\u6c42\u65b9\u5f0f\uff1aPOST https://api.convertlab.com/v1/listMembersBatch?access_token={access_token} POST\u8bf7\u6c42\u793a\u4f8b\uff1a { items : [ { customerId : 91, listId : 1 }, { customerId : 92, listId : 1 } ] } \u53c2\u6570\u8bf4\u660e \u53c2\u6570 \u662f\u5426\u5fc5\u586b \u8bf4\u660e access_token \u662f \u8bbf\u95eeAPI\u7684\u4ee4\u724c items \u662f \u5b58\u653e\u5177\u4f53\u6570\u636e\u6570\u7ec4 customerId \u662f \u8981\u52a0\u5165\u7fa4\u7ec4\u7684\u5ba2\u6237id listId \u662f \u8981\u52a0\u5165\u7684\u7fa4\u7ec4id \u8fd4\u56de\u7ed3\u679c { items : [ { id : 1, customerId : 92, dateCreated : 2017-01-24T07:32:33Z , lastUpdated : 2017-01-24T07:32:34Z , listId : 1 }, { id : 2, customerId : 91, dateCreated : 2017-01-24T07:33:34Z , lastUpdated : 2017-01-24T07:33:34Z , listId : 1 } ] } \u67e5\u770b\u7fa4\u7ec4\u6210\u5458\u8be6\u60c5\u7684API \u8c03\u7528\u8bf7\u6c42 HTTP\u8bf7\u6c42\u65b9\u5f0f\uff1aGET https://api.convertlab.com/v1/listMembers?access_token={access_token} listId={listId} customerId={customerId} page={page} rows={rows} sidx={sidx} sord={sord} \u53c2\u6570\u8bf4\u660e \u53c2\u6570 \u662f\u5426\u5fc5\u586b \u8bf4\u660e access_token \u662f \u8bbf\u95eeAPI\u7684\u4ee4\u724c listId \u5426 \u8981\u67e5\u8be2\u7fa4\u7ec4\u6210\u5458\u8be6\u60c5\u7684\u7fa4\u7ec4id customerId \u5426 \u8981\u67e5\u8be2\u7fa4\u7ec4\u6210\u5458\u8be6\u60c5\u7684\u5ba2\u6237id page \u5426 \u8d77\u59cb\u9875\uff0c\u4ece1\u5f00\u59cb rows \u5426 \u6bcf\u9875\u7684\u8bb0\u5f55\u6570 sidx \u5426 \u6392\u5e8f\u7684\u5b57\u6bb5\uff0c\u9ed8\u8ba4\u6309id\u6392\u5e8f sord \u5426 asc\u8868\u793a\u5347\u5e8f\uff0cdesc\u8868\u793a\u964d\u5e8f\uff0c\u9ed8\u8ba4\u4e3a\u5347\u5e8f \u8fd4\u56de\u7ed3\u679c { items : [ { id : 1, customerId : 92, dateCreated : 2017-01-24T07:32:33Z , lastUpdated : 2017-01-24T07:32:34Z , listId : 1 }, { id : 2, customerId : 91, dateCreated : 2017-01-24T07:33:34Z , lastUpdated : 2017-01-24T07:33:34Z , listId : 1 } ] } \u6839\u636e\u6761\u4ef6\u83b7\u53d6\u7fa4\u7ec4\u6210\u5458\u7684\u5ba2\u6237\u8be6\u60c5\u7684API \u8c03\u7528\u8bf7\u6c42 HTTP\u8bf7\u6c42\u65b9\u5f0f\uff1aGET https://api.convertlab.com/v1/listservice/members?access_token={access_token} listId={listId} joinListDateSince={joinListDateSince} joinListDateTo={joinListDateTo} rows={rows} page={page} sidx={sidx} sord={sord} \u53c2\u6570\u8bf4\u660e \u53c2\u6570 \u662f\u5426\u5fc5\u586b \u8bf4\u660e access_token \u662f \u8bbf\u95eeAPI\u7684\u4ee4\u724c listId \u662f \u8981\u67e5\u8be2\u7684\u7fa4\u7ec4 joinListDateSince \u5426 \u52a0\u5165\u7fa4\u7ec4\u7684\u6700\u65e9\u65f6\u95f4\uff0c\u65f6\u95f4\u683c\u5f0f\u4e3a \u201c2016-11-11T11:11:11\u201d \u4e3aUTC\u65f6\u95f4 joinListDateTo \u5426 \u52a0\u5165\u7fa4\u7ec4\u7684\u6700\u665a\u65f6\u95f4\uff0c\u65f6\u95f4\u683c\u5f0f\u4e3a \u201c2016-11-11T11:11:11\u201d \u4e3aUTC\u65f6\u95f4 rows \u5426 \u6bcf\u9875\u7684\u8bb0\u5f55\u6570 page \u5426 \u8d77\u59cb\u9875\u6570\uff0c\u4ee51\u5f00\u59cb sidx \u5426 \u6392\u5e8f\u7684\u5b57\u6bb5\uff0c\u9ed8\u8ba4\u6309id\u6392\u5e8f sord \u5426 asc\u8868\u793a\u5347\u5e8f\uff0cdesc\u8868\u793a\u964d\u5e8f\uff0c\u9ed8\u8ba4\u4e3a\u5347\u5e8f \u8fd4\u56de\u7ed3\u679c { rows : [ { id : 5, displayName : test6 , name : test6 , img : null, gender : 0, mobile : null, mobileVerified : false, email : null, emailVerified : false, birthday : null, wechat : null, nickName : null, country : null, province : null, city : null }, { id : 7, displayName : \u5c0fD , name : \u5c0fD , img : null, gender : 1, mobile : 18612341234 , mobileVerified : true, email : null, emailVerified : false, birthday : null, wechat : null, nickName : null, country : null, province : null, city : null } ] } \u6839\u636e\u6761\u4ef6\u83b7\u53d6\u7fa4\u7ec4\u6210\u5458\u7684\u6570\u91cf\u7684API \u8c03\u7528\u8bf7\u6c42 HTTP\u8bf7\u6c42\u65b9\u6cd5\uff1aGET https://api.convertlab.com/v1/listservice/memberCount?access_token={access_token} listId={listId} joinListDateSince={joinListDateSince} joinListDateTo={joinListDateTo} \u53c2\u6570\u8bf4\u660e \u53c2\u6570 \u662f\u5426\u5fc5\u586b \u8bf4\u660e access_token \u662f \u8bbf\u95eeAPI\u7684\u4ee4\u724c listId \u662f \u8981\u67e5\u8be2\u7684\u7fa4\u7ec4 joinListDateSince \u5426 \u52a0\u5165\u7fa4\u7ec4\u7684\u6700\u65e9\u65f6\u95f4\uff0c\u65f6\u95f4\u683c\u5f0f\u4e3a \u201c2016-11-11T11:11:11\u201d \u4e3aUTC\u65f6\u95f4 joinListDateTo \u5426 \u52a0\u5165\u7fa4\u7ec4\u7684\u6700\u665a\u65f6\u95f4\uff0c\u65f6\u95f4\u683c\u5f0f\u4e3a \u201c2016-11-11T11:11:11\u201d \u4e3aUTC\u65f6\u95f4","title":"\u5ba2\u6237\u7fa4\u7ec4"},{"location":"api/list/#_1","text":"\u60a8\u53ef\u4ee5\u5c06\u5ba2\u6237\u6309\u4e0d\u540c\u7684\u6761\u4ef6\u5206\u6210\u4e0d\u540c\u7684\u7fa4\u7ec4\uff0c\u5e76\u5bf9\u4e0d\u540c\u7fa4\u7ec4\u7684\u5ba2\u6237\u91c7\u7528\u4e0d\u540c\u7684\u7b56\u7565\u8fdb\u884c\u57f9\u80b2\u3002\u8fd9\u79cd\u5206\u7ec4\u9664\u4e86\u53ef\u4ee5DM Hub\u7cfb\u7edf\u4e2d\u8fdb\u884c\uff0c\u60a8\u4e5f\u53ef\u4ee5\u901a\u8fc7\u5f00\u53d1API\u6765\u5b8c\u6210\u3002DM Hub\u7684\u7fa4\u7ec4API\u5141\u8bb8\u64cd\u4f5c\u9759\u6001\u7fa4\u7ec4\uff0c\u5411\u7fa4\u7ec4\u4e2d\u6dfb\u52a0\u6210\u5458\uff0c\u67e5\u8be2\u6210\u5458\u5217\u8868\u7b49\u3002 \u7fa4\u7ec4\u6a21\u578b \u5c5e\u6027 \u5c5e\u6027\u610f\u4e49 \u7c7b\u578b \u8bf4\u660e id \u7fa4\u7ec4id Long \u53ea\u8bfb\u5b57\u6bb5 name \u7fa4\u7ec4\u540d String \u6700\u957f\u8fd0\u884c255\u4e2a\u5b57\u7b26 dateCreated \u7fa4\u7ec4\u521b\u5efa\u65f6\u95f4 String \u683c\u5f0f\u4e3a: \u201c2017-06-07T12:20:20Z\u201d \u4e3aUTC\u65f6\u95f4 lastUpdated \u7fa4\u7ec4\u4fee\u6539\u65f6\u95f4 String \u683c\u5f0f\u540cdateCreated \u7fa4\u7ec4\u6210\u5458\u6a21\u578b \u5c5e\u6027 \u5c5e\u6027\u610f\u4e49 \u7c7b\u578b \u8bf4\u660e id \u5ba2\u6237\u5728\u7fa4\u7ec4\u4e2d\u7684\u6210\u5458id Long \u53ea\u8bfb\u5b57\u6bb5 listId \u7fa4\u7ec4id Long customerId \u5ba2\u6237id Long dateCreated \u52a0\u5165\u7fa4\u7ec4\u65f6\u95f4 String \u683c\u5f0f\u4e3a: \u201c2017-06-07T12:20:20Z\u201d \u4e3aUTC\u65f6\u95f4","title":"\u7fa4\u7ec4\u6a21\u578b"},{"location":"api/list/#api","text":"\u8c03\u7528\u8bf7\u6c42 http\u8bf7\u6c42\u65b9\u5f0f\uff1aPOST https://api.convertlab.com/v1/lists?access_token={access_token} POST\u8bf7\u6c42\u793a\u4f8b\uff1a { name : \u91d1\u5361\u4f1a\u5458 } \u53c2\u6570\u8bf4\u660e \u53c2\u6570 \u662f\u5426\u5fc5\u586b \u8bf4\u660e access_token \u662f \u8bbf\u95eeAPI\u7684\u4ee4\u724c name \u662f \u7fa4\u7ec4\u540d\u79f0 \u8fd4\u56de\u7ed3\u679c { id : 1, name : \u91d1\u5361\u4f1a\u5458 , dateCreated : 2017-05-23T02:42:14Z , lastUpdated : 2017-06-08T06:04:25Z }","title":"\u521b\u5efa\u7fa4\u7ec4API"},{"location":"api/list/#api_1","text":"\u8c03\u7528\u8bf7\u6c42 http\u8bf7\u6c42\u65b9\u5f0f\uff1aDELETE https://api.convertlab.com/v1/lists/{id}?access_token={access_token} \u53c2\u6570\u8bf4\u660e \u53c2\u6570 \u662f\u5426\u5fc5\u586b \u8bf4\u660e access_token \u662f \u8bbf\u95eeAPI\u7684\u4ee4\u724c id \u662f \u7fa4\u7ec4id \u6ce8\uff1a \u5220\u9664\u7fa4\u7ec4\u5e76\u4e0d\u4f1a\u5220\u9664\u5ba2\u6237","title":"\u5220\u9664\u7fa4\u7ec4\u7684API"},{"location":"api/list/#api_2","text":"\u8c03\u7528\u8bf7\u6c42 http\u8bf7\u6c42\u65b9\u5f0fGET https://api.convertlab.com/v1/lists?access_token={access_token} rows={rows} page={page} sidx={sidx} sord={sord} \u53c2\u6570\u8bf4\u660e \u53c2\u6570 \u662f\u5426\u5fc5\u586b \u8bf4\u660e access_token \u662f \u8bbf\u95eeAPI\u7684\u4ee4\u724c rows \u5426 \u6bcf\u9875\u7684\u8bb0\u5f55\u6570 page \u5426 \u8d77\u59cb\u9875\u6570\uff0c\u4ee51\u5f00\u59cb sidx \u5426 \u6392\u5e8f\u7684\u5b57\u6bb5\uff0c\u9ed8\u8ba4\u6309id\u6392\u5e8f sord \u5426 asc\u8868\u793a\u5347\u5e8f\uff0cdesc\u8868\u793a\u964d\u5e8f\uff0c\u9ed8\u8ba4\u4e3a\u5347\u5e8f \u8fd4\u56de\u7ed3\u679c { page : 1, records : 1, rows : [ { id : 1, name : test2 , dateCreated : 2017-05-23T02:42:14Z , lastUpdated : 2017-06-08T06:04:25Z } ], total : 1 } \u8fd4\u56de\u7ed3\u679c\u8bf4\u660e page \u7ed3\u679c\u4e3a\u7b2c\u51e0\u9875 records \u8fd4\u56de\u7684\u8bb0\u5f55\u6761\u6570 total \u7cfb\u7edf\u62e5\u6709\u6807\u7b7e\u7684\u603b\u9875\u6570 rows \u8fd4\u56de\u7684\u8bb0\u5f55\u6570\u7ec4","title":"\u67e5\u8be2\u7fa4\u7ec4\u5217\u8868\u7684API"},{"location":"api/list/#api_3","text":"\u8bf7\u6c42\u8c03\u7528 http\u8bf7\u6c42\u65b9\u5f0f\uff1aPOST https://api.convertlab.com/v1/listMembers?access_token={access_token} POST\u8bf7\u6c42\u793a\u4f8b\uff1a { data : { customerId : 4, listId : 1 } } \u53c2\u6570\u8bf4\u660e \u53c2\u6570 \u662f\u5426\u5fc5\u586b \u8bf4\u660e access_token \u662f \u8bbf\u95eeAPI\u7684\u4ee4\u724c data \u662f \u5177\u4f53\u6570\u636e\u90fd\u5b58\u653e\u5728\u8be5\u5b57\u6bb5\u5185 customerId \u662f \u8981\u52a0\u5165\u7fa4\u7ec4\u7684\u5ba2\u6237id listId \u662f \u8981\u52a0\u5165\u7684\u7fa4\u7ec4id \u8fd4\u56de\u7ed3\u679c { data : { id : 36345, customerId : 5, dateCreated : 2017-06-08T07:12:56Z , lastUpdated : 2017-06-08T07:12:56Z , listId : 1 } } \u8fd4\u56de\u7ed3\u679c\u8bf4\u660e id\u4e3a\u5ba2\u6237\u5728\u7fa4\u7ec4\u4e2d\u7684id dateCreated \u4e3a\u5ba2\u6237\u52a0\u5165\u7fa4\u7ec4\u4e2d\u7684\u65f6\u95f4, \u683c\u5f0f\u4e3a:\u201c2017-06-01T12:12:12Z\u201d \u4e3aUTC\u65f6\u95f4","title":"\u5c06\u4e00\u4e2a\u5ba2\u6237\u52a0\u5165\u67d0\u4e2a\u7fa4\u7ec4API"},{"location":"api/list/#api_4","text":"\u8c03\u7528\u8bf7\u6c42 http\u8bf7\u6c42\u65b9\u5f0f\uff1aDELETE https://api.convertlab.com/v1/listMembers/{id}?access_token={access_token} \u53c2\u6570\u8bf4\u660e \u53c2\u6570 \u662f\u5426\u5fc5\u586b \u8bf4\u660e access_token \u662f \u8bbf\u95eeAPI\u7684\u4ee4\u724c id \u662f \u8981\u5220\u9664\u5ba2\u6237\u5728\u7fa4\u7ec4\u4e2d\u7684id","title":"\u5c06\u4e00\u4e2a\u5ba2\u6237\u4ece\u67d0\u4e2a\u7fa4\u7ec4\u4e2d\u5220\u9664\u7684API"},{"location":"api/list/#api_5","text":"\u8c03\u7528\u8bf7\u6c42 http\u8bf7\u6c42\u65b9\u5f0f\uff1aPOST https://api.convertlab.com/v1/listservice/removeFromList?customerIds={customerIds} listId={listId} access_token={access_token} \u53c2\u6570\u8bf4\u660e \u53c2\u6570 \u662f\u5426\u5fc5\u586b \u8bf4\u660e access_token \u662f \u8bbf\u95eeAPI\u7684\u4ee4\u724c customerIds \u662f \u8981\u5220\u9664\u7684\u591a\u4e2a\u5ba2\u6237id\uff0c\u5ba2\u6237id\u4e4b\u95f4\u7528\u9017\u53f7\u9694\u5f00 listId \u662f \u8981\u628a\u5ba2\u6237\u5220\u9664\u7684\u7fa4\u7ec4id","title":"\u5c06\u591a\u4e2a\u5ba2\u6237\u4ece\u67d0\u4e2a\u7fa4\u7ec4\u4e2d\u5220\u9664\u7684API"},{"location":"api/list/#api_6","text":"\u8c03\u7528\u8bf7\u6c42 HTTP\u8bf7\u6c42\u65b9\u5f0f\uff1aPOST https://api.convertlab.com/v1/listMembersBatch?access_token={access_token} POST\u8bf7\u6c42\u793a\u4f8b\uff1a { items : [ { customerId : 91, listId : 1 }, { customerId : 92, listId : 1 } ] } \u53c2\u6570\u8bf4\u660e \u53c2\u6570 \u662f\u5426\u5fc5\u586b \u8bf4\u660e access_token \u662f \u8bbf\u95eeAPI\u7684\u4ee4\u724c items \u662f \u5b58\u653e\u5177\u4f53\u6570\u636e\u6570\u7ec4 customerId \u662f \u8981\u52a0\u5165\u7fa4\u7ec4\u7684\u5ba2\u6237id listId \u662f \u8981\u52a0\u5165\u7684\u7fa4\u7ec4id \u8fd4\u56de\u7ed3\u679c { items : [ { id : 1, customerId : 92, dateCreated : 2017-01-24T07:32:33Z , lastUpdated : 2017-01-24T07:32:34Z , listId : 1 }, { id : 2, customerId : 91, dateCreated : 2017-01-24T07:33:34Z , lastUpdated : 2017-01-24T07:33:34Z , listId : 1 } ] }","title":"\u5c06\u591a\u4e2a\u5ba2\u6237\u52a0\u5165\u67d0\u7fa4\u7ec4\u7684API"},{"location":"api/list/#api_7","text":"\u8c03\u7528\u8bf7\u6c42 HTTP\u8bf7\u6c42\u65b9\u5f0f\uff1aGET https://api.convertlab.com/v1/listMembers?access_token={access_token} listId={listId} customerId={customerId} page={page} rows={rows} sidx={sidx} sord={sord} \u53c2\u6570\u8bf4\u660e \u53c2\u6570 \u662f\u5426\u5fc5\u586b \u8bf4\u660e access_token \u662f \u8bbf\u95eeAPI\u7684\u4ee4\u724c listId \u5426 \u8981\u67e5\u8be2\u7fa4\u7ec4\u6210\u5458\u8be6\u60c5\u7684\u7fa4\u7ec4id customerId \u5426 \u8981\u67e5\u8be2\u7fa4\u7ec4\u6210\u5458\u8be6\u60c5\u7684\u5ba2\u6237id page \u5426 \u8d77\u59cb\u9875\uff0c\u4ece1\u5f00\u59cb rows \u5426 \u6bcf\u9875\u7684\u8bb0\u5f55\u6570 sidx \u5426 \u6392\u5e8f\u7684\u5b57\u6bb5\uff0c\u9ed8\u8ba4\u6309id\u6392\u5e8f sord \u5426 asc\u8868\u793a\u5347\u5e8f\uff0cdesc\u8868\u793a\u964d\u5e8f\uff0c\u9ed8\u8ba4\u4e3a\u5347\u5e8f \u8fd4\u56de\u7ed3\u679c { items : [ { id : 1, customerId : 92, dateCreated : 2017-01-24T07:32:33Z , lastUpdated : 2017-01-24T07:32:34Z , listId : 1 }, { id : 2, customerId : 91, dateCreated : 2017-01-24T07:33:34Z , lastUpdated : 2017-01-24T07:33:34Z , listId : 1 } ] }","title":"\u67e5\u770b\u7fa4\u7ec4\u6210\u5458\u8be6\u60c5\u7684API"},{"location":"api/list/#api_8","text":"\u8c03\u7528\u8bf7\u6c42 HTTP\u8bf7\u6c42\u65b9\u5f0f\uff1aGET https://api.convertlab.com/v1/listservice/members?access_token={access_token} listId={listId} joinListDateSince={joinListDateSince} joinListDateTo={joinListDateTo} rows={rows} page={page} sidx={sidx} sord={sord} \u53c2\u6570\u8bf4\u660e \u53c2\u6570 \u662f\u5426\u5fc5\u586b \u8bf4\u660e access_token \u662f \u8bbf\u95eeAPI\u7684\u4ee4\u724c listId \u662f \u8981\u67e5\u8be2\u7684\u7fa4\u7ec4 joinListDateSince \u5426 \u52a0\u5165\u7fa4\u7ec4\u7684\u6700\u65e9\u65f6\u95f4\uff0c\u65f6\u95f4\u683c\u5f0f\u4e3a \u201c2016-11-11T11:11:11\u201d \u4e3aUTC\u65f6\u95f4 joinListDateTo \u5426 \u52a0\u5165\u7fa4\u7ec4\u7684\u6700\u665a\u65f6\u95f4\uff0c\u65f6\u95f4\u683c\u5f0f\u4e3a \u201c2016-11-11T11:11:11\u201d \u4e3aUTC\u65f6\u95f4 rows \u5426 \u6bcf\u9875\u7684\u8bb0\u5f55\u6570 page \u5426 \u8d77\u59cb\u9875\u6570\uff0c\u4ee51\u5f00\u59cb sidx \u5426 \u6392\u5e8f\u7684\u5b57\u6bb5\uff0c\u9ed8\u8ba4\u6309id\u6392\u5e8f sord \u5426 asc\u8868\u793a\u5347\u5e8f\uff0cdesc\u8868\u793a\u964d\u5e8f\uff0c\u9ed8\u8ba4\u4e3a\u5347\u5e8f \u8fd4\u56de\u7ed3\u679c { rows : [ { id : 5, displayName : test6 , name : test6 , img : null, gender : 0, mobile : null, mobileVerified : false, email : null, emailVerified : false, birthday : null, wechat : null, nickName : null, country : null, province : null, city : null }, { id : 7, displayName : \u5c0fD , name : \u5c0fD , img : null, gender : 1, mobile : 18612341234 , mobileVerified : true, email : null, emailVerified : false, birthday : null, wechat : null, nickName : null, country : null, province : null, city : null } ] }","title":"\u6839\u636e\u6761\u4ef6\u83b7\u53d6\u7fa4\u7ec4\u6210\u5458\u7684\u5ba2\u6237\u8be6\u60c5\u7684API"},{"location":"api/list/#api_9","text":"\u8c03\u7528\u8bf7\u6c42 HTTP\u8bf7\u6c42\u65b9\u6cd5\uff1aGET https://api.convertlab.com/v1/listservice/memberCount?access_token={access_token} listId={listId} joinListDateSince={joinListDateSince} joinListDateTo={joinListDateTo} \u53c2\u6570\u8bf4\u660e \u53c2\u6570 \u662f\u5426\u5fc5\u586b \u8bf4\u660e access_token \u662f \u8bbf\u95eeAPI\u7684\u4ee4\u724c listId \u662f \u8981\u67e5\u8be2\u7684\u7fa4\u7ec4 joinListDateSince \u5426 \u52a0\u5165\u7fa4\u7ec4\u7684\u6700\u65e9\u65f6\u95f4\uff0c\u65f6\u95f4\u683c\u5f0f\u4e3a \u201c2016-11-11T11:11:11\u201d \u4e3aUTC\u65f6\u95f4 joinListDateTo \u5426 \u52a0\u5165\u7fa4\u7ec4\u7684\u6700\u665a\u65f6\u95f4\uff0c\u65f6\u95f4\u683c\u5f0f\u4e3a \u201c2016-11-11T11:11:11\u201d \u4e3aUTC\u65f6\u95f4","title":"\u6839\u636e\u6761\u4ef6\u83b7\u53d6\u7fa4\u7ec4\u6210\u5458\u7684\u6570\u91cf\u7684API"},{"location":"api/tag/","text":"\u5ba2\u6237\u6807\u7b7e\u6a21\u578b \u5ba2\u6237\u6807\u7b7e\u5728\u6a21\u578b\u4e0a\u5206\u4e3a\u6807\u7b7e\u5206\u7ec4(dimension)\u548c\u6807\u7b7e(tag) \u6807\u7b7e\u5206\u7ec4\u7684\u6a21\u578b\uff1a \u5c5e\u6027 \u5c5e\u6027\u610f\u4e49 \u7c7b\u578b \u8bf4\u660e dimensionKey \u5206\u7ec4\u4e3b\u952e String \u6700\u957f255\u4e2a\u5b57\u7b26 name \u5206\u7ec4\u7684\u540d\u5b57 String \u6700\u957f255\u4e2a\u5b57\u7b26 dateCreated \u521b\u5efa\u65f6\u95f4 Datetime \u683c\u5f0f\u4e3a:\u201c2017-06-01T12:12:12Z\u201d \u4e3aUTC\u65f6\u95f4 lastUpdated \u6700\u540e\u66f4\u65b0\u65f6\u95f4 Datetime \u683c\u5f0f\u4e3a:\u201c2017-06-01T12:12:12Z\u201d \u4e3aUTC\u65f6\u95f4 \u6807\u7b7e\u7684\u6a21\u578b\uff1a \u5c5e\u6027 \u5c5e\u6027\u610f\u4e49 \u7c7b\u578b \u8bf4\u660e name \u6807\u7b7e\u7684\u540d\u5b57 String \u6700\u957f32\u4e2a\u5b57\u7b26 dimension \u6240\u5c5e\u5206\u7ec4\u7684\u4e3b\u952e String \u6700\u957f255\u4e2a\u5b57\u7b26 dateCreated \u521b\u5efa\u65f6\u95f4 Datetime \u683c\u5f0f\u4e3a:\u201c2017-06-01T12:12:12Z\u201d \u4e3aUTC\u65f6\u95f4 lastUpdated \u6700\u540e\u66f4\u65b0\u65f6\u95f4 Datetime \u683c\u5f0f\u4e3a:\u201c2017-06-01T12:12:12Z\u201d \u4e3aUTC\u65f6\u95f4 \u521b\u5efa\u6807\u7b7e\u5206\u7ec4\u7684API \u8c03\u7528\u8bf7\u6c42 HTTP\u8bf7\u6c42\u65b9\u5f0f\uff1aPOST https://api.convertlab.com/v1/tagdimensions?access_token={access_token} POST\u8bf7\u6c42\u793a\u4f8b\uff1a { name : \u8d2d\u4e70\u6c7d\u8f66\u5206\u7ec4 , dimensionKey : purchase_car_group } \u8fd4\u56de\u7ed3\u679c { id : 1, dimensionKey : purchase_car_group , name : \u8d2d\u4e70\u6c7d\u8f66\u5206\u7ec4 , lastUpdated : 2017-06-07T12:19:05Z , dateCreated : 2017-06-07T12:19:05Z } \u83b7\u53d6\u6807\u7b7e\u5206\u7ec4\u7684\u5217\u8868\u7684API \u8c03\u7528\u8bf7\u6c42 HTTP\u8bf7\u6c42\u65b9\u5f0f\uff1aGET https://api.convertlab.com/v1/tagdimensions?access_token={access_token} max={max} \u53c2\u6570\u8bf4\u660e \u53c2\u6570 \u662f\u5426\u5fc5\u586b \u8bf4\u660e access_token \u662f \u8bbf\u95eeAPI\u7684\u4ee4\u724c max \u5426 \u8fd4\u56de\u7684\u5217\u8868\u6570\u91cf\uff0c\u9ed8\u8ba4\u4e3a20 \u8fd4\u56de\u7ed3\u679c [ { id : 1, dimensionKey : purchase_car_group , name : \u8d2d\u4e70\u6c7d\u8f66\u5206\u7ec4 , lastUpdated : 2017-06-07T12:19:05Z , dateCreated : 2017-06-07T12:19:05Z } ] DM Hub\u7cfb\u7edf\u5185\u7f6e\u4e86\u4e09\u4e2a\u6807\u7b7e\u5206\u7ec4 \u5206\u7ec4\u4e3b\u952e \u5206\u7ec4\u540d\u79f0 basic \u57fa\u672c\u5c5e\u6027 interests \u5174\u8da3\u504f\u597d consumptive_habit \u6d88\u8d39\u503e\u5411 \u521b\u5efa\u6807\u7b7e\u7684API \u8c03\u7528\u8bf7\u6c42 HTTP\u8bf7\u6c42\u65b9\u5f0f\uff1aPOST https://api.convertlab.com/v1/tags?access_token={access_token} POST\u8bf7\u6c42\u793a\u4f8b\uff1a { name : \u6cd5\u62c9\u5229 , dimension : purchase_car_group } \u53c2\u6570\u8bf4\u660e - access_token \u8bf7\u6c42\u63a5\u53e3\u7684\u4ee4\u724c \u8fd4\u56de\u7ed3\u679c { id : 3, name : \u6cd5\u62c9\u5229 , dimension : purchase_car_group , dateCreated : 2017-06-08T02:15:31Z , lastUpdated : 2017-06-08T02:15:31Z } \u66f4\u65b0\u6807\u7b7e\u7684API \u8c03\u7528\u8bf7\u6c42 HTTP\u8bf7\u6c42\u65b9\u5f0f\uff1aPUT https://api.convertlab.com/v1/tags/{id}?access_token={access_token} POST\u8bf7\u6c42\u793a\u4f8b\uff1a { name : \u4fdd\u65f6\u6377 , dimension : purchase_car_group } \u53c2\u6570\u8bf4\u660e \u53c2\u6570 \u662f\u5426\u5fc5\u586b \u8bf4\u660e access_token \u662f \u8bbf\u95eeAPI\u7684\u4ee4\u724c id \u662f \u8981\u66f4\u65b0\u7684\u6807\u7b7e\u7684id name \u5426 \u5c06\u6807\u7b7e\u66f4\u65b0\u4e3a\u65b0\u540d\u5b57 dimension \u5426 \u5c06\u6807\u7b7e\u52a0\u5165\u65b0\u7684\u6807\u7b7e\u7ec4 \u8fd4\u56de\u7ed3\u679c { id : 3, name : \u4fdd\u65f6\u6377 , dimension : purchase_car_group , dateCreated : 2017-06-08T02:15:31Z , lastUpdated : 2017-06-08T02:15:31Z } \u5220\u9664\u6807\u7b7e\u7684API \u8c03\u7528\u8bf7\u6c42 http\u8bf7\u6c42\u65b9\u5f0f\uff1aDELETE https://api.convertlab.com/v1/tags/{id}?access_token={access_token} \u53c2\u6570\u8bf4\u660e \u53c2\u6570 \u662f\u5426\u5fc5\u586b \u8bf4\u660e access_token \u662f \u8bbf\u95eeAPI\u7684\u4ee4\u724c id \u662f \u8981\u66f4\u65b0\u7684\u6807\u7b7e\u7684id \u67e5\u8be2\u6807\u7b7e\u7684API \u8c03\u7528\u8bf7\u6c42 http\u8bf7\u6c42\u65b9\u5f0f\uff1aGET https://api.convertlab.com/v1/tags?access_token={access_token} rows={rows} page={page} sidx={sidx} sord={sord} \u53c2\u6570\u8bf4\u660e \u53c2\u6570 \u662f\u5426\u5fc5\u586b \u8bf4\u660e access_token \u662f \u8bbf\u95eeAPI\u7684\u4ee4\u724c rows \u5426 \u6bcf\u9875\u7684\u8bb0\u5f55\u6570 page \u5426 \u8d77\u59cb\u9875\u6570\uff0c\u4ee51\u5f00\u59cb sidx \u5426 \u6392\u5e8f\u7684\u5b57\u6bb5\uff0c\u9ed8\u8ba4\u6309id\u6392\u5e8f sord \u5426 asc\u8868\u793a\u5347\u5e8f\uff0cdesc\u8868\u793a\u964d\u5e8f\uff0c\u9ed8\u8ba4\u4e3a\u5347\u5e8f \u8fd4\u56de\u7ed3\u679c { page : 1, records : 1, total : 1, rows : [ { id : 3, dateCreated : 2017-06-08T02:15:32Z , dimension : purchase_car_group , lastUpdated : 2017-06-08T02:15:32Z , name : \u6cd5\u62c9\u5229 } ] } \u8fd4\u56de\u7ed3\u679c\u8bf4\u660e - page \u7ed3\u679c\u4e3a\u7b2c\u51e0\u9875 - records \u8fd4\u56de\u7684\u8bb0\u5f55\u6761\u6570 - total \u7cfb\u7edf\u62e5\u6709\u6807\u7b7e\u7684\u603b\u9875\u6570 - rows \u8fd4\u56de\u7684\u8bb0\u5f55\u6570\u7ec4 \u4e3a\u5ba2\u6237\u6dfb\u52a0\u6807\u7b7e\u7684API http\u8bf7\u6c42\u65b9\u5f0f\uff1aPOST https://api.convertlab.com/v1/tagservice/addCustomerTag?access_token={access_token} POST\u8bf7\u6c42\u793a\u4f8b\uff1a { customerId : 12345, tags : [ { name : \u571f\u8c6a } ] } \u53c2\u6570\u8bf4\u660e \u53c2\u6570 \u662f\u5426\u5fc5\u586b \u8bf4\u660e access_token \u662f \u8bbf\u95eeAPI\u7684\u4ee4\u724c customerId \u662f \u8981\u6dfb\u52a0\u6807\u7b7e\u7684\u5ba2\u6237id tags \u662f \u8981\u6dfb\u52a0\u7684\u6807\u7b7e\u7684\u6570\u7ec4 \u8fd4\u56de\u7ed3\u679c [ name : \u571f\u8c6a ] \u5c06\u6807\u7b7e\u4ece\u5ba2\u6237\u5220\u9664\u7684API http\u8bf7\u6c42\u65b9\u5f0f:POST https://api.convertlab.com/v1/tagservice/removeCustomerTag?access_token= access_token POST\u8bf7\u6c42\u793a\u4f8b\uff1a { customerId : 12345, tags : [ \u571f\u8c6a , \u9752\u5e74 ] } \u53c2\u6570\u8bf4\u660e \u53c2\u6570 \u662f\u5426\u5fc5\u586b \u8bf4\u660e access_token \u662f \u8bbf\u95eeAPI\u7684\u4ee4\u724c customerId \u662f \u8981\u5220\u9664\u6807\u7b7e\u7684\u5ba2\u6237id tags \u662f \u8981\u5220\u9664\u7684\u6807\u7b7e\u7684\u6570\u7ec4 \u8fd4\u56de\u7ed3\u679c [ \u571f\u8c6a , \u9752\u5e74 ] \u67e5\u8be2\u5ba2\u6237\u6807\u7b7eAPI http\u8bf7\u6c42\u65b9\u5f0f\uff1aGET https://api.convertlab.com/v1/tagservice/getCustomerTags?access_token={access_token} customerId={customerId} \u53c2\u6570\u8bf4\u660e \u53c2\u6570 \u662f\u5426\u5fc5\u586b \u8bf4\u660e access_token \u662f \u8bbf\u95eeAPI\u7684\u4ee4\u724c customerId \u662f \u8981\u67e5\u8be2\u6807\u7b7e\u7684\u5ba2\u6237\u7684id\u5217\u8868\uff0c\u591a\u4e2a\u5ba2\u6237id\u7528\u9017\u53f7\u9694\u5f00 \u8fd4\u56de\u7ed3\u679c { 12345 : \u571f\u8c6a,\u7cbe\u82f1 } \u5408\u5e76\u6807\u7b7e\u7684API http\u8bf7\u6c42\u65b9\u5f0f\uff1aPOST https://api.convertlab.com/v1/tags/{fromId}/mergeto/{toid}?access_token={access_token} \u53c2\u6570\u8bf4\u660e \u53c2\u6570 \u662f\u5426\u5fc5\u586b \u8bf4\u660e access_token \u662f \u8bbf\u95eeAPI\u7684\u4ee4\u724c fromId \u662f \u8981\u5408\u5e76\u7684\u6e90\u6807\u7b7eid\u3002\u6253\u4e0a\u8be5\u6807\u7b7e\u7684\u5ba2\u6237\u90fd\u4f1a\u6253\u4e0a\u76ee\u6807\u6807\u7b7e\uff0c\u540c\u65f6\u8be5\u6807\u7b7e\u8981\u7ed9\u5220\u9664 toId \u662f \u8981\u5408\u5e76\u6807\u7b7e\u7684\u76ee\u6807\u6807\u7b7e \u8fd4\u56de\u7ed3\u679c { success : true}","title":"\u5ba2\u6237\u6807\u7b7e"},{"location":"api/tag/#_1","text":"\u5ba2\u6237\u6807\u7b7e\u5728\u6a21\u578b\u4e0a\u5206\u4e3a\u6807\u7b7e\u5206\u7ec4(dimension)\u548c\u6807\u7b7e(tag) \u6807\u7b7e\u5206\u7ec4\u7684\u6a21\u578b\uff1a \u5c5e\u6027 \u5c5e\u6027\u610f\u4e49 \u7c7b\u578b \u8bf4\u660e dimensionKey \u5206\u7ec4\u4e3b\u952e String \u6700\u957f255\u4e2a\u5b57\u7b26 name \u5206\u7ec4\u7684\u540d\u5b57 String \u6700\u957f255\u4e2a\u5b57\u7b26 dateCreated \u521b\u5efa\u65f6\u95f4 Datetime \u683c\u5f0f\u4e3a:\u201c2017-06-01T12:12:12Z\u201d \u4e3aUTC\u65f6\u95f4 lastUpdated \u6700\u540e\u66f4\u65b0\u65f6\u95f4 Datetime \u683c\u5f0f\u4e3a:\u201c2017-06-01T12:12:12Z\u201d \u4e3aUTC\u65f6\u95f4 \u6807\u7b7e\u7684\u6a21\u578b\uff1a \u5c5e\u6027 \u5c5e\u6027\u610f\u4e49 \u7c7b\u578b \u8bf4\u660e name \u6807\u7b7e\u7684\u540d\u5b57 String \u6700\u957f32\u4e2a\u5b57\u7b26 dimension \u6240\u5c5e\u5206\u7ec4\u7684\u4e3b\u952e String \u6700\u957f255\u4e2a\u5b57\u7b26 dateCreated \u521b\u5efa\u65f6\u95f4 Datetime \u683c\u5f0f\u4e3a:\u201c2017-06-01T12:12:12Z\u201d \u4e3aUTC\u65f6\u95f4 lastUpdated \u6700\u540e\u66f4\u65b0\u65f6\u95f4 Datetime \u683c\u5f0f\u4e3a:\u201c2017-06-01T12:12:12Z\u201d \u4e3aUTC\u65f6\u95f4","title":"\u5ba2\u6237\u6807\u7b7e\u6a21\u578b"},{"location":"api/tag/#api","text":"\u8c03\u7528\u8bf7\u6c42 HTTP\u8bf7\u6c42\u65b9\u5f0f\uff1aPOST https://api.convertlab.com/v1/tagdimensions?access_token={access_token} POST\u8bf7\u6c42\u793a\u4f8b\uff1a { name : \u8d2d\u4e70\u6c7d\u8f66\u5206\u7ec4 , dimensionKey : purchase_car_group } \u8fd4\u56de\u7ed3\u679c { id : 1, dimensionKey : purchase_car_group , name : \u8d2d\u4e70\u6c7d\u8f66\u5206\u7ec4 , lastUpdated : 2017-06-07T12:19:05Z , dateCreated : 2017-06-07T12:19:05Z }","title":"\u521b\u5efa\u6807\u7b7e\u5206\u7ec4\u7684API"},{"location":"api/tag/#api_1","text":"\u8c03\u7528\u8bf7\u6c42 HTTP\u8bf7\u6c42\u65b9\u5f0f\uff1aGET https://api.convertlab.com/v1/tagdimensions?access_token={access_token} max={max} \u53c2\u6570\u8bf4\u660e \u53c2\u6570 \u662f\u5426\u5fc5\u586b \u8bf4\u660e access_token \u662f \u8bbf\u95eeAPI\u7684\u4ee4\u724c max \u5426 \u8fd4\u56de\u7684\u5217\u8868\u6570\u91cf\uff0c\u9ed8\u8ba4\u4e3a20 \u8fd4\u56de\u7ed3\u679c [ { id : 1, dimensionKey : purchase_car_group , name : \u8d2d\u4e70\u6c7d\u8f66\u5206\u7ec4 , lastUpdated : 2017-06-07T12:19:05Z , dateCreated : 2017-06-07T12:19:05Z } ] DM Hub\u7cfb\u7edf\u5185\u7f6e\u4e86\u4e09\u4e2a\u6807\u7b7e\u5206\u7ec4 \u5206\u7ec4\u4e3b\u952e \u5206\u7ec4\u540d\u79f0 basic \u57fa\u672c\u5c5e\u6027 interests \u5174\u8da3\u504f\u597d consumptive_habit \u6d88\u8d39\u503e\u5411","title":"\u83b7\u53d6\u6807\u7b7e\u5206\u7ec4\u7684\u5217\u8868\u7684API"},{"location":"api/tag/#api_2","text":"\u8c03\u7528\u8bf7\u6c42 HTTP\u8bf7\u6c42\u65b9\u5f0f\uff1aPOST https://api.convertlab.com/v1/tags?access_token={access_token} POST\u8bf7\u6c42\u793a\u4f8b\uff1a { name : \u6cd5\u62c9\u5229 , dimension : purchase_car_group } \u53c2\u6570\u8bf4\u660e - access_token \u8bf7\u6c42\u63a5\u53e3\u7684\u4ee4\u724c \u8fd4\u56de\u7ed3\u679c { id : 3, name : \u6cd5\u62c9\u5229 , dimension : purchase_car_group , dateCreated : 2017-06-08T02:15:31Z , lastUpdated : 2017-06-08T02:15:31Z }","title":"\u521b\u5efa\u6807\u7b7e\u7684API"},{"location":"api/tag/#api_3","text":"\u8c03\u7528\u8bf7\u6c42 HTTP\u8bf7\u6c42\u65b9\u5f0f\uff1aPUT https://api.convertlab.com/v1/tags/{id}?access_token={access_token} POST\u8bf7\u6c42\u793a\u4f8b\uff1a { name : \u4fdd\u65f6\u6377 , dimension : purchase_car_group } \u53c2\u6570\u8bf4\u660e \u53c2\u6570 \u662f\u5426\u5fc5\u586b \u8bf4\u660e access_token \u662f \u8bbf\u95eeAPI\u7684\u4ee4\u724c id \u662f \u8981\u66f4\u65b0\u7684\u6807\u7b7e\u7684id name \u5426 \u5c06\u6807\u7b7e\u66f4\u65b0\u4e3a\u65b0\u540d\u5b57 dimension \u5426 \u5c06\u6807\u7b7e\u52a0\u5165\u65b0\u7684\u6807\u7b7e\u7ec4 \u8fd4\u56de\u7ed3\u679c { id : 3, name : \u4fdd\u65f6\u6377 , dimension : purchase_car_group , dateCreated : 2017-06-08T02:15:31Z , lastUpdated : 2017-06-08T02:15:31Z }","title":"\u66f4\u65b0\u6807\u7b7e\u7684API"},{"location":"api/tag/#api_4","text":"\u8c03\u7528\u8bf7\u6c42 http\u8bf7\u6c42\u65b9\u5f0f\uff1aDELETE https://api.convertlab.com/v1/tags/{id}?access_token={access_token} \u53c2\u6570\u8bf4\u660e \u53c2\u6570 \u662f\u5426\u5fc5\u586b \u8bf4\u660e access_token \u662f \u8bbf\u95eeAPI\u7684\u4ee4\u724c id \u662f \u8981\u66f4\u65b0\u7684\u6807\u7b7e\u7684id","title":"\u5220\u9664\u6807\u7b7e\u7684API"},{"location":"api/tag/#api_5","text":"\u8c03\u7528\u8bf7\u6c42 http\u8bf7\u6c42\u65b9\u5f0f\uff1aGET https://api.convertlab.com/v1/tags?access_token={access_token} rows={rows} page={page} sidx={sidx} sord={sord} \u53c2\u6570\u8bf4\u660e \u53c2\u6570 \u662f\u5426\u5fc5\u586b \u8bf4\u660e access_token \u662f \u8bbf\u95eeAPI\u7684\u4ee4\u724c rows \u5426 \u6bcf\u9875\u7684\u8bb0\u5f55\u6570 page \u5426 \u8d77\u59cb\u9875\u6570\uff0c\u4ee51\u5f00\u59cb sidx \u5426 \u6392\u5e8f\u7684\u5b57\u6bb5\uff0c\u9ed8\u8ba4\u6309id\u6392\u5e8f sord \u5426 asc\u8868\u793a\u5347\u5e8f\uff0cdesc\u8868\u793a\u964d\u5e8f\uff0c\u9ed8\u8ba4\u4e3a\u5347\u5e8f \u8fd4\u56de\u7ed3\u679c { page : 1, records : 1, total : 1, rows : [ { id : 3, dateCreated : 2017-06-08T02:15:32Z , dimension : purchase_car_group , lastUpdated : 2017-06-08T02:15:32Z , name : \u6cd5\u62c9\u5229 } ] } \u8fd4\u56de\u7ed3\u679c\u8bf4\u660e - page \u7ed3\u679c\u4e3a\u7b2c\u51e0\u9875 - records \u8fd4\u56de\u7684\u8bb0\u5f55\u6761\u6570 - total \u7cfb\u7edf\u62e5\u6709\u6807\u7b7e\u7684\u603b\u9875\u6570 - rows \u8fd4\u56de\u7684\u8bb0\u5f55\u6570\u7ec4","title":"\u67e5\u8be2\u6807\u7b7e\u7684API"},{"location":"api/tag/#api_6","text":"http\u8bf7\u6c42\u65b9\u5f0f\uff1aPOST https://api.convertlab.com/v1/tagservice/addCustomerTag?access_token={access_token} POST\u8bf7\u6c42\u793a\u4f8b\uff1a { customerId : 12345, tags : [ { name : \u571f\u8c6a } ] } \u53c2\u6570\u8bf4\u660e \u53c2\u6570 \u662f\u5426\u5fc5\u586b \u8bf4\u660e access_token \u662f \u8bbf\u95eeAPI\u7684\u4ee4\u724c customerId \u662f \u8981\u6dfb\u52a0\u6807\u7b7e\u7684\u5ba2\u6237id tags \u662f \u8981\u6dfb\u52a0\u7684\u6807\u7b7e\u7684\u6570\u7ec4 \u8fd4\u56de\u7ed3\u679c [ name : \u571f\u8c6a ]","title":"\u4e3a\u5ba2\u6237\u6dfb\u52a0\u6807\u7b7e\u7684API"},{"location":"api/tag/#api_7","text":"http\u8bf7\u6c42\u65b9\u5f0f:POST https://api.convertlab.com/v1/tagservice/removeCustomerTag?access_token= access_token POST\u8bf7\u6c42\u793a\u4f8b\uff1a { customerId : 12345, tags : [ \u571f\u8c6a , \u9752\u5e74 ] } \u53c2\u6570\u8bf4\u660e \u53c2\u6570 \u662f\u5426\u5fc5\u586b \u8bf4\u660e access_token \u662f \u8bbf\u95eeAPI\u7684\u4ee4\u724c customerId \u662f \u8981\u5220\u9664\u6807\u7b7e\u7684\u5ba2\u6237id tags \u662f \u8981\u5220\u9664\u7684\u6807\u7b7e\u7684\u6570\u7ec4 \u8fd4\u56de\u7ed3\u679c [ \u571f\u8c6a , \u9752\u5e74 ]","title":"\u5c06\u6807\u7b7e\u4ece\u5ba2\u6237\u5220\u9664\u7684API"},{"location":"api/tag/#api_8","text":"http\u8bf7\u6c42\u65b9\u5f0f\uff1aGET https://api.convertlab.com/v1/tagservice/getCustomerTags?access_token={access_token} customerId={customerId} \u53c2\u6570\u8bf4\u660e \u53c2\u6570 \u662f\u5426\u5fc5\u586b \u8bf4\u660e access_token \u662f \u8bbf\u95eeAPI\u7684\u4ee4\u724c customerId \u662f \u8981\u67e5\u8be2\u6807\u7b7e\u7684\u5ba2\u6237\u7684id\u5217\u8868\uff0c\u591a\u4e2a\u5ba2\u6237id\u7528\u9017\u53f7\u9694\u5f00 \u8fd4\u56de\u7ed3\u679c { 12345 : \u571f\u8c6a,\u7cbe\u82f1 }","title":"\u67e5\u8be2\u5ba2\u6237\u6807\u7b7eAPI"},{"location":"api/tag/#api_9","text":"http\u8bf7\u6c42\u65b9\u5f0f\uff1aPOST https://api.convertlab.com/v1/tags/{fromId}/mergeto/{toid}?access_token={access_token} \u53c2\u6570\u8bf4\u660e \u53c2\u6570 \u662f\u5426\u5fc5\u586b \u8bf4\u660e access_token \u662f \u8bbf\u95eeAPI\u7684\u4ee4\u724c fromId \u662f \u8981\u5408\u5e76\u7684\u6e90\u6807\u7b7eid\u3002\u6253\u4e0a\u8be5\u6807\u7b7e\u7684\u5ba2\u6237\u90fd\u4f1a\u6253\u4e0a\u76ee\u6807\u6807\u7b7e\uff0c\u540c\u65f6\u8be5\u6807\u7b7e\u8981\u7ed9\u5220\u9664 toId \u662f \u8981\u5408\u5e76\u6807\u7b7e\u7684\u76ee\u6807\u6807\u7b7e \u8fd4\u56de\u7ed3\u679c { success : true}","title":"\u5408\u5e76\u6807\u7b7e\u7684API"},{"location":"api/third_party_data/","text":"\u5bfc\u5165\u5a92\u4f53\u6570\u636e \u5c06\u5df2\u7ecf\u5b58\u5728oss\u4e0a\u7684\u6587\u4ef6\u8fdb\u884c\u5bfc\u5165 \u8c03\u7528\u8bf7\u6c42 HTTP\u8bf7\u6c42\u65b9\u5f0f: POST https://api.convertlab.com/v1/third_party_data/importData?access_token={access_token} POST\u8bf7\u6c42\u793a\u4f8b\uff1a { fileList : [{ file: $file , eventType: $eventType }] } \u53c2\u6570\u8bf4\u660e \u53c2\u6570 \u662f\u5426\u5fc5\u586b \u8bf4\u660e fileList \u662f \u8981\u5bfc\u5165\u7684\u6587\u4ef6\u5217\u8868 \u5b57\u6bb5 \u578b \u8bf4\u660e file \u5b57\u7b26\u4e32(String) \u6587\u4ef6\u5728oss\u4e0a\u7684\u8def\u5f84\uff0c\u4f8b\u5982\uff1a oss://cl-data/test1 eventType \u5b57\u7b26\u4e32(String) \u4e8b\u4ef6\u7c7b\u578b\uff0c\u53ef\u4ee5\u4e3a\uff1a\"event.mediaView\"\uff08\u66dd\u5149\u4e8b\u4ef6\uff09\u6216\u8005 \"event.mediaClick\"\uff08\u70b9\u51fb\u4e8b\u4ef6\uff09 \u8fd4\u56de\u8bf4\u660e { error : { code\uff1a ''\uff0c message: 'xxx', }, taskList : [$taskid] } \u8fd4\u56de\u5b57\u6bb5\u8bf4\u660e \u5b57\u6bb5 \u8bf4\u660e error \u5bfc\u5165\u4efb\u52a1\u672a\u521b\u5efa\u6210\u529f taskList \u5bfc\u5165\u4efb\u52a1id\u5217\u8868","title":"\u5a92\u4f53\u6570\u636e"},{"location":"api/third_party_data/#_1","text":"\u5c06\u5df2\u7ecf\u5b58\u5728oss\u4e0a\u7684\u6587\u4ef6\u8fdb\u884c\u5bfc\u5165 \u8c03\u7528\u8bf7\u6c42 HTTP\u8bf7\u6c42\u65b9\u5f0f: POST https://api.convertlab.com/v1/third_party_data/importData?access_token={access_token} POST\u8bf7\u6c42\u793a\u4f8b\uff1a { fileList : [{ file: $file , eventType: $eventType }] } \u53c2\u6570\u8bf4\u660e \u53c2\u6570 \u662f\u5426\u5fc5\u586b \u8bf4\u660e fileList \u662f \u8981\u5bfc\u5165\u7684\u6587\u4ef6\u5217\u8868 \u5b57\u6bb5 \u578b \u8bf4\u660e file \u5b57\u7b26\u4e32(String) \u6587\u4ef6\u5728oss\u4e0a\u7684\u8def\u5f84\uff0c\u4f8b\u5982\uff1a oss://cl-data/test1 eventType \u5b57\u7b26\u4e32(String) \u4e8b\u4ef6\u7c7b\u578b\uff0c\u53ef\u4ee5\u4e3a\uff1a\"event.mediaView\"\uff08\u66dd\u5149\u4e8b\u4ef6\uff09\u6216\u8005 \"event.mediaClick\"\uff08\u70b9\u51fb\u4e8b\u4ef6\uff09 \u8fd4\u56de\u8bf4\u660e { error : { code\uff1a ''\uff0c message: 'xxx', }, taskList : [$taskid] } \u8fd4\u56de\u5b57\u6bb5\u8bf4\u660e \u5b57\u6bb5 \u8bf4\u660e error \u5bfc\u5165\u4efb\u52a1\u672a\u521b\u5efa\u6210\u529f taskList \u5bfc\u5165\u4efb\u52a1id\u5217\u8868","title":"\u5bfc\u5165\u5a92\u4f53\u6570\u636e"},{"location":"member/","text":"\u4f1a\u5458\u6a21\u578b DM Hub\u4e3a \u4f1a\u5458 \u5185\u7f6e\u4e00\u4e9b\u6bd4\u8f83\u901a\u7528\u7684\u4f1a\u5458\u5c5e\u6027\uff0c\u8fd9\u4e9b\u5c5e\u6027\u7684\u540d\u79f0\u548c\u7c7b\u578b\u5982\u4e0b\u8868\u6240\u793a\uff1a \u5c5e\u6027 \u754c\u9762\u663e\u793a\u540d\u79f0 \u7c7b\u578b \u8bf4\u660e id \u4f1a\u5458ID \u6570\u5b57 name \u59d3\u540d \u6587\u672c familyName \u59d3 \u6587\u672c givenName \u540d \u6587\u672c customerId \u5ba2\u6237id \u6587\u672c membershipCode \u4f1a\u5458\u53f7 \u6587\u672c idCard \u200b\u4f1a\u5458\u8eab\u4efd\u8bc1 \u6587\u672c address \u200b\u8be6\u7ec6\u5730\u5740 \u6587\u672c educationBackgro \u6559\u80b2\u80cc\u666f \u6587\u672c img \u7528\u6237\u5934\u50cf \u6587\u672c gender \u6027\u522b \u6570\u5b57 mobile \u624b\u673a\u53f7\u7801 \u6587\u672c email \u90ae\u7bb1 \u6587\u672c birthday \u751f\u65e5 \u6587\u672c dateJoin \u6ce8\u518c\u65f6\u95f4 \u65e5\u671f\u65f6\u95f4 \u65f6\u95f4\u683c\u5f0f\u4e3a \u201c2016-11-11T11:11:11\u201d \u4e3aUTC\u65f6\u95f4 createMethod \u521b\u5efa\u65b9\u5f0f \u6587\u672c createChannel \u521b\u5efa\u6e20\u9053 \u6587\u672c industry \u516c\u53f8\u884c\u4e1a \u6587\u672c income \u6536\u5165 \u6587\u672c balance \u50a8\u503c\u4f59\u989d \u6570\u5b57 referrer \u63a8\u5e7f\u4eba \u6587\u672c lastUpdated \u6700\u540e\u66f4\u65b0\u65f6\u95f4 \u65e5\u671f\u65f6\u95f4 \u65f6\u95f4\u683c\u5f0f\u4e3a \u201c2016-11-11T11:11:11\u201d \u4e3aUTC\u65f6\u95f4 level \u4f1a\u5458\u7b49\u7ea7 Json\u5bf9\u8c61 point \u4f1a\u5458\u79ef\u5206 \u6570\u5b57 source \u6765\u6e90 \u6587\u672c contentName \u6765\u6e90\u5185\u5bb9 \u6587\u672c country \u56fd\u5bb6 \u6587\u672c province \u7701 \u6587\u672c city \u5e02 \u6587\u672c county \u533a\u53bf \u6587\u672c dateCreated \u7cfb\u7edf\u521b\u5efa\u65f6\u95f4 \u65e5\u671f\u65f6\u95f4 \u65f6\u95f4\u683c\u5f0f\u4e3a \u201c2016-11-11T11:11:11\u201d \u4e3aUTC\u65f6\u95f4 \u9664\u4e86\u7cfb\u7edf\u5185\u7f6e\u7684\u4f1a\u5458\u5c5e\u6027\u5916\uff0c\u60a8\u8fd8\u53ef\u4ee5\u589e\u52a0\u81ea\u5b9a\u4e49\u5c5e\u6027\u3002 \u767b\u5f55DM Hub\uff0c\u5728\u4f1a\u5458\u5c5e\u6027\u8bbe\u7f6e\u9875\u9762\u4e2d\uff0c\u53ef\u589e\u52a0\u81ea\u5b9a\u4e49\u4f1a\u5458\u5c5e\u6027\u3002\u5305\u62ec\u5c5e\u6027\u540d\u3001\u5c5e\u6027\u4ee3\u7801\u3001\u5c5e\u6027\u7c7b\u578b\u7b49\u3002 \u81ea\u5b9a\u4e49\u5c5e\u6027\u7684\u4ee3\u7801\u4ee5\"c_\"\u4f5c\u4e3a\u524d\u7f00\u3002 \u4f1a\u5458\u8eab\u4efd\u6a21\u578b DM Hub\u5185\u7f6e\u4e86\u51e0\u4e2a\u8eab\u4efd\u7c7b\u578b \u5185\u7f6e\u8eab\u4efd\u7c7b\u578b \u542b\u4e49 \u662f\u5426\u552f\u4e00 mobile \u624b\u673a\u53f7 \u662f wechat \u5fae\u4fe1\u7684openid \u5426 wechat-unionid \u5fae\u4fe1\u7684unionid \u5426 taobao-account \u6dd8\u5b9d\u8d26\u53f7 \u5426 \u53e6\u5916\u7528\u6237\u53ef\u4ee5\u5728DM Hub\u4f1a\u5458\u8eab\u4efd\u8bbe\u7f6e\u4e2d\u81ea\u5b9a\u4e49\u4f1a\u5458\u8eab\u4efd\u7c7b\u578b\uff0c\u7528\u6237\u5b9a\u4e49\u7684\u8eab\u4efd\u7c7b\u578b\u4ee5\"c_\"\u4f5c\u4e3a\u524d\u7f00\u3002 1. \u67e5\u770b\u5168\u90e8\u4f1a\u5458 HTTP\u8bf7\u6c42\u65b9\u5f0f: GET /loyalty/v1/membership?access_token={access_token} Response { rows : [ { address : null, balance : null, birthday : 1988-01-01 , createChannel : null, createMethod : \u5916\u90e8\u7cfb\u7edf\u5bfc\u5165 , customerId : null, dateCreated : 2017-10-31T03:07:47Z , dateJoin : 2017-10-31T03:07:47Z , educationBackgro : null, email : null, familyName : null, gender : 1, id : 1, idCard : null, img : null, income : null, industry : null, givenName : null, lastUpdated : 2017-10-31T03:07:47Z , level : { priority : 0, //\u7b49\u7ea7\u6240\u4ee3\u8868\u7684\u5c42\u7ea7\uff0c0\u4e3a\u6700\u4f4e\uff0c\u5411\u4e0a\u9012\u589e name : \u9752\u94dc\u4f1a\u5458 , id : 422 }, membershipCode : null, mobile : null, name : test , point : 0, source : null, //\u65b0\u589e\u5b57\u6bb5 contentName : null, //\u65b0\u589e\u5b57\u6bb5 campaignId : null, //\u65b0\u589e\u5b57\u6bb5 country : null, //\u65b0\u589e\u5b57\u6bb5 province : null, //\u65b0\u589e\u5b57\u6bb5 city : null, //\u65b0\u589e\u5b57\u6bb5 county : null //\u65b0\u589e\u5b57\u6bb5 } ] } 2. \u521b\u5efa\u4f1a\u5458\u548c\u4f1a\u5458\u8eab\u4efd \u521b\u5efa\u4f1a\u5458\u65f6\u9700\u8981\u540c\u65f6\u5305\u542b\u4f1a\u5458\u8eab\u4efd\u7684\u4fe1\u606f\uff0c\u5373membership\u548cidentities\u4e24\u9879\u90fd\u4e0d\u80fd\u4e3a\u7a7a\u503c\u3002 HTTP\u8bf7\u6c42\u65b9\u5f0f: POST /loyalty/v1/membershipAndIdentities?access_token={access_token} Request Payload { membership : { name : test , cm_test2 : true, gender : 1, birthday : 1988-01-01 , cm_test3 : true }, identities : [ { type : wechat , value : 123456 , name : cm_test } ] } Response { address : null, balance : null, birthday : 1988-01-01 , createChannel : null, createMethod : \u5916\u90e8\u7cfb\u7edf\u5bfc\u5165 , customerId : null, dateCreated : 2017-10-31T03:21:09Z , dateJoin : 2017-10-31T03:21:09Z , educationBackgro : null, email : null, familyName : null, gender : 1, id : 3, idCard : null, img : null, income : null, industry : null, givenName : null, lastUpdated : 2017-10-31T03:21:09Z , level : { priority : 0, name : \u9752\u94dc\u4f1a\u5458 , id : 422 }, membershipCode : null, mobile : null, name : test , point : 0, source : null, contentName : null, campaignId : null, country : null, province : null, city : null, county : null } 3. \u67e5\u770b\u4e00\u4e2a\u4f1a\u5458 HTTP\u8bf7\u6c42\u65b9\u5f0f: GET /loyalty/v1/membership/${membershipId}?access_token={access_token} Response { address : null, balance : null, birthday : 1988-01-01 , createChannel : null, createMethod : \u5916\u90e8\u7cfb\u7edf\u5bfc\u5165 , customerId : null, dateCreated : 2017-10-31T03:07:47Z , dateJoin : 2017-10-31T03:07:47Z , educationBackgro : null, email : null, familyName : null, gender : 1, id : 1, idCard : null, img : null, income : null, industry : null, givenName : null, lastUpdated : 2017-10-31T03:07:47Z , level : { priority : 0, name : \u9752\u94dc\u4f1a\u5458 , id : 422 }, membershipCode : null, mobile : null, name : test , point : 0, source : null, contentName : null, campaignId : null, country : null, province : null, city : null, county : null } 4. \u4fee\u6539\u4e00\u4e2a\u4f1a\u5458 HTTP\u8bf7\u6c42\u65b9\u5f0f: PUT /loyalty/v1/membership/${membershipId}?access_token={access_token} Request Payload { name : test1 , gender : 0, email : 111@test.com } Response { address : null, balance : null, birthday : 1988-01-01 , createChannel : null, createMethod : \u5916\u90e8\u7cfb\u7edf\u5bfc\u5165 , customerId : null, dateCreated : 2017-10-31T03:07:47Z , dateJoin : 2017-10-31T03:07:47Z , educationBackgro : null, email : 111@test.com , familyName : null, gender : 0, id : 1, idCard : null, img : null, income : null, industry : null, givenName : null, lastUpdated : 2017-10-31T05:56:57Z , level : { priority : 0, name : \u9752\u94dc\u4f1a\u5458 , id : 422 }, membershipCode : null, mobile : null, name : test1 , point : 0, source : null, contentName : null, campaignId : null, country : null, province : null, city : null, county : null } 5.1. \u4fee\u6539\u4f1a\u5458\u7b49\u7ea7 HTTP\u8bf7\u6c42\u65b9\u5f0f: PUT /loyalty/v1/membership/${membershipId}/level?access_token={access_token} Request Payload { level : 8 } Response { dateCreated : 2017-10-31T06:54:01Z , id : 3, lastUpdated : 2017-10-31T06:54:01Z , levelType : 0, levelUpdateStatus : 1, membershipId : 1, newLevel : 8, oldLevel : 0, remark : null, rule : null, tenantId : 11 } 5.2. \u589e\u51cf\u4f1a\u5458\u79ef\u5206 POST /loyalty/v1/membership/$membershipId/point/incr?access_token={access_token} /loyalty/v1/membership/$membershipId/point/decr?access_token={access_token} Request Payload { point :8, pattern :0 //\u79ef\u5206\u83b7\u53d6/\u51cf\u5c11\u65b9\u5f0f\uff08\u5fc5\u586b\uff09 } Response { point : 8 } \u79ef\u5206\u65b9\u5f0f\uff1a { \u79ef\u5206\u589e\u52a0 : { 0 : \u5176\u4ed6 , 1 : \u521d\u59cb\u79ef\u5206 , 2 : \u4ea4\u6613\u9001\u79ef\u5206 , 3 : \u53c2\u4e0e\u4e92\u52a8\u5f97\u79ef\u5206 , 4 : \u79ef\u5206\u5956\u52b1 , 5 : \u79ef\u5206\u8c03\u6574 }, \u79ef\u5206\u51cf\u5c11 : { 0 : \u5176\u4ed6 , 1 : \u79ef\u5206\u5151\u6362 , 2 : \u4ea4\u6613\u9000\u79ef\u5206 , 3 : \u53c2\u4e0e\u4e92\u52a8\u6d88\u8017\u79ef\u5206 , 4 : \u60e9\u7f5a\u6263\u79ef\u5206 , 5 : \u79ef\u5206\u8c03\u6574 , 6 : \u79ef\u5206\u5931\u6548 } } 6. \u7ed1\u5b9a\u4f1a\u5458\u8eab\u4efd HTTP\u8bf7\u6c42\u65b9\u5f0f: POST /loyalty/v1/membership/${membershipId}/bindIdentity?access_token={access_token} Request Payload [ { type : wechat , value : 666 , name : cm_test1 } ] Response [ { name : cm_test1 , type : wechat , value : 666 } ] 7. \u6839\u636e\u4f1a\u5458\u8eab\u4efd\u67e5\u627e\u4f1a\u5458 HTTP\u8bf7\u6c42\u65b9\u5f0f: GET /loyalty/v1/membershipService/getMembershipByIdentity?access_token={access_token} type={identityType} value={identityValue} Response { identities : [ { name : cm_test2 , type : wechat , value : 1111111111 } ], membership : { address : null, balance : null, birthday : 1988-01-01 , createChannel : null, createMethod : \u5916\u90e8\u7cfb\u7edf\u5bfc\u5165 , customerId : null, dateCreated : 2017-10-31T03:07:47Z , dateJoin : 2017-10-31T03:07:47Z , educationBackgro : null, email : 111@test.com , familyName : null, gender : 0, id : 1, idCard : null, img : null, income : null, industry : null, givenName : null, lastUpdated : 2017-10-31T05:56:57Z , level : { priority : 0, name : \u9752\u94dc\u4f1a\u5458 , id : 422 }, membershipCode : null, mobile : null, name : test1 , point : 0, source : null, contentName : null, campaignId : null, country : null, province : null, city : null, county : null } } 8. \u6839\u636e\u4f1a\u5458\u8eab\u4efd\u5217\u8868\u67e5\u627e\u4f1a\u5458 HTTP\u8bf7\u6c42\u65b9\u5f0f: POST /loyalty/v1/membershipService/listMembershipByIdentities?access_token={access_token} Request Payload [ { type : wechat , value : 666 }, { type : wechat , value : 333 } ] Response { rows : [ { identities : [ { name : cm_test2 , type : wechat , value : 1111111111 } ], membership : { address : null, balance : null, birthday : 1988-01-01 , createChannel : null, createMethod : \u5916\u90e8\u7cfb\u7edf\u5bfc\u5165 , customerId : null, dateCreated : 2017-10-31T03:07:47Z , dateJoin : 2017-10-31T03:07:47Z , educationBackgro : null, email : 111@test.com , familyName : null, gender : 0, id : 1, idCard : null, img : null, income : null, industry : null, givenName : null, lastUpdated : 2017-10-31T05:56:57Z , level : { priority : 0, name : \u9752\u94dc\u4f1a\u5458 , id : 422 }, membershipCode : null, mobile : null, name : test1 , point : 0, source : null, contentName : null, campaignId : null, country : null, province : null, city : null, county : null } }, { identities : [ { name : cm_test2 , type : wechat , value : 333 } ], membership : { address : null, balance : null, birthday : 1988-01-01 , createChannel : null, createMethod : \u5916\u90e8\u7cfb\u7edf\u5bfc\u5165 , customerId : null, dateCreated : 2017-10-31T03:21:09Z , dateJoin : 2017-10-31T03:21:09Z , educationBackgro : null, email : null, familyName : null, gender : 1, id : 3, idCard : null, img : null, income : null, industry : null, givenName : null, lastUpdated : 2017-10-31T03:21:09Z , level : { priority : 0, name : \u9752\u94dc\u4f1a\u5458 , id : 422 }, membershipCode : null, mobile : null, name : test , point : 0, source : null, contentName : null, campaignId : null, country : null, province : null, city : null, county : null } } ] } 9. \u4fee\u6539\u4f1a\u5458\u624b\u673a\u53f7 HTTP\u8bf7\u6c42\u65b9\u5f0f: PUT /loyalty/v1/membershipService/updateMobile?access_token={access_token} Request Payload { oldMobile : 123 , newMobile : 456 , membershipId :8 } Response { address : null, balance : null, birthday : 1999-01-01 , c_111 : null, c_1111 : null, c_12 : null, c_123 : null, c_123123 : null, c_Member : null, c_qqq : null, c_qwa123 : null, c_qwqqw : null, c_sd : null, c_sdsf : null, c_wewe : null, c_wewe1 : null, c_\u9a71\u868a\u5668 : null, createChannel : null, createMethod : \u5916\u90e8\u7cfb\u7edf\u5bfc\u5165 , customerId : 20526992, dateCreated : 2017-11-13T08:43:05Z , dateJoin : 2017-11-13T08:43:05Z , educationBackgro : null, email : null, familyName : null, gender : 1, givenName : null, id : 85, idCard : null, img : null, income : null, industry : null, lastUpdated : 2017-11-13T08:46:24Z , level : { priority : 0, name : \u9752\u94dc\u4f1a\u5458 , id : 422 }, membershipCode : null, mobile : 456 , name : test , point : 0, contentName : null, campaignId : null, country : null, province : null, city : null, county : null } 10. \u67e5\u770b\u4f1a\u5458\u7b49\u7ea7\u8bbe\u7f6e HTTP\u8bf7\u6c42\u65b9\u5f0f: GET /loyalty/v1/settings/level/rules?access_token={access_token} Response { rows : [ { desp : null, id : 61, isForever : true, name : 1 , operator : or , priority : 0, rules : { consumption : { enabled : false, month : 12, number : 5000 }, consumptionTotal : { enabled : false, month : 12, number : 5000 }, desp : \u9ed8\u8ba4\u6700\u4f4e\u7b49\u7ea7 , frequency : { enabled : false, month : 12, number : 5000 }, frequencyTotal : { enabled : false, month : 12, number : 5000 }, points : { enabled : false, month : 12, number : 5000 }, pointsTotal : { enabled : false, month : 12, number : 5000 } }, status : 0 }, { desp : null, id : 62, isForever : false, name : 2 , operator : or , priority : 1, rules : {}, status : 0 }, { desp : null, id : 63, isForever : true, name : 3 , operator : or , priority : 2, rules : {}, status : 0 }, { desp : null, id : 64, isForever : false, name : 5 , operator : or , priority : 3, rules : {}, status : 0 } ] } 11. \u8ba2\u5355Api 11.1. \u521b\u5efa\u8ba2\u5355 HTTP\u8bf7\u6c42\u65b9\u5f0f: POST /loyalty/v1/deal?access_token={token} Payload { membershipId : 1, orderNo : 123456 , dealLines : [ { lineId : 11111 }, { lineId : 22222 } ] } \u8ba2\u5355\u5934 \u82f1\u6587\u540d\u79f0 \u5b57\u6bb5\u540d\u79f0 \u5b57\u6bb5\u7c7b\u578b \u5fc5\u987b\u5b57\u6bb5 \u8bf4\u660e salesChannel \u9500\u552e\u6e20\u9053 String \u662f store \u5e97\u94fa String \u662f orderNo \u8ba2\u5355\u53f7 String \u662f type \u8ba2\u5355\u7c7b\u578b String dateOrder \u8ba2\u5355\u65f6\u95f4 DateTime \u662f \u65f6\u95f4\u683c\u5f0f\u4e3a \u201c2016-11-11T11:11:11\u201d, UTC\u65f6\u95f4 membershipId \u4f1a\u5458ID Number \u662f amountDiscount \u8ba2\u5355\u6298\u6263 Number \u662f couponCode \u4f18\u60e0\u5238Code String groupId \u56e2\u8d2dID String amountTotal \u8ba2\u5355\u603b\u989d Number amountPaid \u5b9e\u9645\u652f\u4ed8\u91d1\u989d Number \u662f paymentTerm \u652f\u4ed8\u65b9\u5f0f String paymentNo \u652f\u4ed8\u53f7 String shippingMethod \u8fd0\u9001\u65b9\u5f0f String contactName \u6536\u8d27\u4eba\u59d3\u540d String contactTel \u6536\u8d27\u4eba\u624b\u673a String shippingProvince \u6536\u8d27\u4eba\u7701\u4efd String shippingCity \u6536\u8d27\u4eba\u57ce\u5e02 String shippingCounty \u6536\u8d27\u4eba\u533a\u53bf String shippingStreet \u6536\u8d27\u4eba\u8857\u9053 String shippingAddress \u6536\u8d27\u4eba\u5177\u4f53\u5730\u5740 String dealLines \u8ba2\u5355\u884c JsonArray \u662f \u7ed3\u6784\u89c1\u8ba2\u5355\u884c \u8ba2\u5355\u884c \u82f1\u6587\u540d\u79f0 \u5b57\u6bb5\u540d\u79f0 \u5b57\u6bb5\u7c7b\u578b \u5fc5\u987b\u5b57\u6bb5 \u8bf4\u660e lineId \u8ba2\u5355\u884cid String \u662f \u53ef\u4f7f\u7528skuid\uff0c\u5728\u4e00\u4e2a\u8ba2\u5355\u4e2d\u4fdd\u8bc1\u552f\u4e00 productName \u4ea7\u54c1\u540d\u79f0 String \u662f productId \u4ea7\u54c1ID String skuId SKU ID String category \u54c1\u7c7b String qty \u6570\u91cf Number \u662f priceUnit \u5355\u4ef7 Number priceSubTotal \u603b\u4ef7 Number Response \u6210\u529f { membershipId : 1, orderNo : 123456 , id : 1 , dealLines : [ { lineId : 11111 }, { lineId : 22222 } ], state : \u5df2\u4ed8\u6b3e } \u5931\u8d25 { error : { code : 409000 , message : error info } } 11.2. \u4fee\u6539\u8ba2\u5355 HTTP\u8bf7\u6c42\u65b9\u5f0f: POST /loyalty/v1/dealService/update/?access_token={token} Payload { membershipId : 1, orderNo : 123456 , dealLines : [ { lineId : 11111 }, { lineId : 22222 } ] } Response \u6210\u529f { membershipId : 1, orderNo : 123456 , id : 1 , dealLines : [ { lineId : 11111 }, { lineId : 22222 } ], state : \u5df2\u4ed8\u6b3e } \u5931\u8d25 { error : { code : 409000 , message : error info } } 11.3. \u53d6\u6d88\u8ba2\u5355 HTTP\u8bf7\u6c42\u65b9\u5f0f: POST /loyalty/v1/dealService/cancel?access_token={token} Payload { membershipId : 1, orderNo : 123456 } Response { membershipId : 1, orderNo : 123456 , id : 1 , dealLines : [ { lineId : 11111 }, { lineId : 22222 } ], state : \u5df2\u53d6\u6d88 } 11.4. \u9000\u5355 HTTP\u8bf7\u6c42\u65b9\u5f0f: POST /loyalty/v1/dealService/refund?access_token={token} Payload { refundLines : [ { lineId : 11111 } ], refundTotal : 1111, orderNo : 123456 , membershipId : 1 } \u9000\u5355\u5934 \u82f1\u6587\u540d\u79f0 \u5b57\u6bb5\u540d\u79f0 \u5b57\u6bb5\u7c7b\u578b \u5fc5\u987b\u5b57\u6bb5 \u8bf4\u660e membershipId \u4f1a\u5458ID Number \u662f orderNo \u8ba2\u5355\u53f7 String \u662f dateRefund \u9000\u5355\u65f6\u95f4 DateTime \u662f \u65f6\u95f4\u683c\u5f0f\u4e3a \u201c2016-11-11T11:11:11\u201d, UTC\u65f6\u95f4 refundTotal \u9000\u5355\u91d1\u989d Number \u662f reason \u9000\u5355\u539f\u56e0 String refundLines \u9000\u5355\u884c JsonArray \u662f \u7ed3\u6784\u89c1\u9000\u5355\u884c \u9000\u5355\u884c \u82f1\u6587\u540d\u79f0 \u5b57\u6bb5\u540d\u79f0 \u5b57\u6bb5\u7c7b\u578b \u5fc5\u987b\u5b57\u6bb5 \u8bf4\u660e lineId \u8ba2\u5355\u884cid String \u662f \u53ef\u4f7f\u7528skuid\uff0c\u5728\u4e00\u4e2a\u8ba2\u5355\u4e2d\u4fdd\u8bc1\u552f\u4e00 Response { membershipId : 1, orderNo : 123456 , refundTotal : 1 , refundLines : [ { lineId : 11111 } ] } 11.4. \u5220\u9664\u9000\u5355 HTTP\u8bf7\u6c42\u65b9\u5f0f: POST /loyalty/v1/dealService/deleteRefund?access_token={token} Payload { membershipId : 1, orderNo : 123456 } Response { refundTotal : 3333, orderNo : 123456 , membershipId : 1, dateRefund : 2017-04-22T12:56:47Z , refundLines : [ { lineId : 123456-2 } ] } 11.5. \u5220\u9664\u8ba2\u5355 HTTP\u8bf7\u6c42\u65b9\u5f0f: POST /loyalty/v1/dealService/delete?access_token={token} Payload { membershipId : 1, orderNo : 123456 } Response { membershipId : 1, orderNo : 123456 , id : 1 , dealLines : [ { lineId : 11111 }, { lineId : 22222 } ] } 12. \u4f1a\u5458\u6ce8\u518c\u63a8\u9001\u8bbe\u5907\u4fe1\u606f \u8bf7\u6c42\u65b9\u5f0f\uff1a POST \u8bf7\u6c42\u8def\u5f84\uff1a https://api.convertlab.com/loyalty/v1/appPush/register?access_token={access_token} \u53c2\u6570\u8bf4\u660e\uff1a access_token \uff1a\u8bbf\u95ee\u8be5 API \u7684\u4ee4\u724c POST \u6570\u636e\u8bf4\u660e\uff1a { provider : \u5fc5\u4f20 \u63a8\u9001\u670d\u52a1\u63d0\u4f9b\u5546\uff0c'jpush' \u6216 'getui' , appKey : \u5fc5\u4f20 \u5728\u63a8\u9001\u670d\u52a1\u63d0\u4f9b\u5546\u5e73\u53f0\u521b\u5efa\u5e94\u7528\u65f6\u5f97\u5230\u7684 AppKey , pushId : \u5fc5\u4f20 \u63a8\u9001\u670d\u52a1\u63d0\u4f9b\u5546\u5206\u914d\u7ed9\u8bbe\u5907\u7684 PushID\uff08\u6781\u5149\u79f0\u4f5c Registration ID\uff0c\u4e2a\u63a8\u79f0\u4f5c ClientID\uff0c\u672c\u6587\u6863\u7edf\u4e00\u79f0\u4f5c PushID\uff09 , os : \u5fc5\u4f20 \u79fb\u52a8\u7aef\u5e73\u53f0\u7c7b\u578b\uff0c'android' \u6216 'ios' , membershipId : \u975e\u5fc5\u4f20 \u4f1a\u5458 ID\u3002 , mobile : \u975e\u5fc5\u4f20 \u4f1a\u5458\u624b\u673a\u53f7\u3002 } \u6ce8\uff1a membershipId \u53c2\u6570\u548c mobile \u53c2\u6570\u7528\u4e8e\u5c06\u63a8\u9001\u8bbe\u5907\u4fe1\u606f\u4e0e\u4f1a\u5458\u5efa\u7acb\u5173\u8054\uff0c\u5efa\u7acb\u5173\u8054\u8fc7\u7a0b\u4e2d\uff0c\u4f18\u5148\u6839\u636e membershipId \u67e5\u627e\u4f1a\u5458\uff0c\u5982\u679c\u6ca1\u6709\u627e\u5230\u4f1a\u5458\uff0c\u518d\u6839\u636e mobile \u67e5\u627e\u4f1a\u5458\uff0c\u5982\u679c\u627e\u5230\u4f1a\u5458\uff0c\u5219\u5c06\u63a8\u9001\u8bbe\u5907\u4fe1\u606f\u4e0e\u8be5\u4f1a\u5458\u5efa\u7acb\u5173\u8054\uff1b\u5426\u5219\uff0c\u63a8\u9001\u8bbe\u5907\u4fe1\u606f\u4f1a\u88ab\u6ce8\u518c\u4e3a\u533f\u540d\u7684\u4fe1\u606f\u3002 \u8fd4\u56de\u7ed3\u679c\u8bf4\u660e\uff1a \u6ce8\u518c\u6210\u529f { appKey : AppKey , membershipId : \u4f1a\u5458 ID , os : os , provider : provider , pushId : PushID } \u6ce8\uff1a\u5982\u679c\u8fd4\u56de\u7ed3\u679c\u4e2d\u7684 membershiprId \u4e3a null \uff0c\u5219\u8868\u660e\u63a8\u9001\u8bbe\u5907\u4fe1\u606f\u88ab\u6ce8\u518c\u4e3a\u533f\u540d\u7684\u4fe1\u606f\u3002 \u5fc5\u4f20\u5b57\u6bb5\u7f3a\u5931 { error : { code : 400005 , message : Missing field provider! } } \u5fc5\u4f20\u5b57\u6bb5\u65e0\u6548 { error : { code : 400001 , message : Invalid os(winphone)! } } 13. \u4f18\u60e0\u5238Api \u6a21\u578b \u4f18\u60e0\u5238\u5305\u62ec\u4f18\u60e0\u5238\uff08coupon\uff09\u548c\u4f18\u60e0\u5238\u8ba4\u9886\uff08membershipCoupon\uff09 \u4e24\u4e2a\u6a21\u578b\u3002\u64cd\u4f5c\u5458\u5728\u4f1a\u5458\u7cfb\u7edf\u7684\u524d\u7aef\u8bbe\u7f6e\u4e86\u4e00\u4e2a\u4f18\u60e0\u5238\u540e\uff0c\u4f1a\u751f\u6210\u4e00\u4e2acoupon\u5b9e\u4f53\uff1b\u5728\u4f1a\u5458\u9886\u53d6/\u7cfb\u7edf\u53d1\u653e\u4e4b\u540e\uff0c\u7cfb\u7edf\u4f1a\u751f\u6210\u67d0\u4f1a\u5458\u4e13\u5c5e\u7684\u4e00\u4e2amembershipCoupon\u5b9e\u4f53\u3002 \u6bcf\u4e00\u4e2acoupon\u90fd\u6709\u552f\u4e00\u6807\u8bc6couponId\uff0c\u6bcf\u4e00\u4e2amembershipCoupon\u90fd\u6709\u552f\u4e00\u6807\u8bc6couponCode\u3002\u5177\u4f53\u7684\u6a21\u578b\u5982\u4e0b\u3002 coupon \u82f1\u6587\u540d\u79f0 \u5b57\u6bb5\u540d\u79f0 \u5b57\u6bb5\u7c7b\u578b \u8bf4\u660e couponId \u4f18\u60e0\u5238id String couponName \u4f18\u60e0\u5238\u540d\u79f0 String couponLabel \u4f18\u60e0\u5238\u6807\u9898 String couponSubLabel \u4f18\u60e0\u5238\u526f\u6807\u9898 String couponType \u4f18\u60e0\u5238\u7c7b\u578b Number 1\u4e3a\u4ee3\u91d1\u5238\uff0c2\u4e3a\u6298\u6263\u5238\uff0c3\u4e3a\u5546\u54c1\u5238 channels \u4f18\u60e0\u5238\u6e20\u9053 JsonArray \u76ee\u524d\u754c\u9762\u6700\u591a\u53ef\u8bbe\u7f6e\u7ebf\u4e0a\u548c\u7ebf\u4e0b\u4e24\u4e2a\u6e20\u9053 drawLimit \u6bcf\u4eba\u9650\u4ee4\u5f20\u6570 Number total \u603b\u5f20\u6570 Number store \u5e93\u5b58 Number note \u4f7f\u7528\u987b\u77e5 String validType \u6709\u6548\u7c7b\u578b Number 1\u4e3a\u7edd\u5bf9\u65e5\u671f\u8303\u56f4\uff0c2\u4e3a\u76f8\u5bf9\u9886\u53d6\u65f6\u95f4 validDate \u6709\u6548\u65e5\u671f JsonObject \u6839\u636evalidType\u533a\u5206 rule \u4f7f\u7528\u89c4\u5219 JsonObject coupon.channels \u82f1\u6587\u540d\u79f0 \u5b57\u6bb5\u540d\u79f0 \u5b57\u6bb5\u7c7b\u578b \u8bf4\u660e couponId \u4f18\u60e0\u5238\u6e20\u9053\u7801 String couponChannel \u4f18\u60e0\u5238\u6e20\u9053 String \u76ee\u524d\u6709\u4e24\u4e2a\u6e20\u9053\uff0c\u7ebf\u4e0aonline\uff0c\u7ebf\u4e0boffline url \u6e20\u9053\u5bf9\u5e94\u7684url String coupon.validDate \u82f1\u6587\u540d\u79f0 \u5b57\u6bb5\u540d\u79f0 \u5b57\u6bb5\u7c7b\u578b \u8bf4\u660e startDays \u9886\u53d6\u540e\u6709\u6548\u8d77\u59cb\u5929\u6570 Number \u76f8\u5bf9\u6709\u6548\u65e5\u671f\u4f7f\u7528 validDays \u6709\u6548\u540e\u7ec8\u6b62\u5929\u6570 Number \u76f8\u5bf9\u6709\u6548\u65e5\u671f\u4f7f\u7528 startDate \u8d77\u59cb\u6709\u6548\u671f Date \u7edd\u5bf9\u6709\u6548\u65e5\u671f\u4f7f\u7528 endDate \u7ec8\u6b62\u6709\u6548\u671f Date \u7edd\u5bf9\u6709\u6548\u65e5\u671f\u4f7f\u7528 coupon.rule \u82f1\u6587\u540d\u79f0 \u5b57\u6bb5\u540d\u79f0 \u5b57\u6bb5\u7c7b\u578b \u8bf4\u660e amountLimit \u6700\u4f4e\u6d88\u8d39 Number discount \u6298\u6263\u989d\u5ea6 Number \u6298\u6263\u5238\u4f7f\u7528 freeFee \u51cf\u514d\u91d1\u989d Number \u4ee3\u91d1\u5238\u4f7f\u7528 goodsLimit \u6307\u5b9a\u5546\u54c1 String ... \u81ea\u5b9a\u4e49\u89c4\u5219 ... membershipCoupon \u82f1\u6587\u540d\u79f0 \u5b57\u6bb5\u540d\u79f0 \u5b57\u6bb5\u7c7b\u578b \u8bf4\u660e membershipId \u4f1a\u5458id Number couponId \u4f18\u60e0\u5238id String \u6298\u6263\u5238\u4f7f\u7528 dateDraw \u9886\u53d6\u65e5\u671f DateTime \u4ee3\u91d1\u5238\u4f7f\u7528\uff0c\u683c\u5f0f\u4e3a:\u201c2017-06-01T12:12:12Z\u201d \u4e3aUTC\u65f6\u95f4 dateRedeem \u6838\u9500\u65e5\u671f DateTime \u683c\u5f0f\u4e3a:\u201c2017-06-01T12:12:12Z\u201d \u4e3aUTC\u65f6\u95f4 startDate \u8d77\u59cb\u6709\u6548\u671f Date endDate \u7ec8\u6b62\u6709\u6548\u671f Date status \u72b6\u6001 Number \u6298\u6263\u5238\u4f7f\u7528 couponCode \u5238\u7801 String \u4ee3\u91d1\u5238\u4f7f\u7528 uuid \u5238\u7801\u52a0\u5bc6 String barcodeUrl \u6761\u5f62\u7801\u5730\u5740 String qrcodeUrl \u4e8c\u7ef4\u7801\u5730\u5740 String membershipCoupon.status \u8fd4\u56de\u503c normal used \u542b\u4e49 \u53ef\u4f7f\u7528 \u5df2\u4f7f\u7528 13.1.\u83b7\u53d6\u6240\u6709coupon GET /loyalty/v1/coupon Request access_token \u6839\u636eappid\u8bf7\u6c42\u7684token needTotal \u662f\u5426\u9700\u8981\u603b\u9875\u6570 rows \u6bcf\u9875\u884c\u6570 page \u6240\u9009\u9875\u6570 sidx \u6392\u5e8f\u5b57\u6bb5 sord \u5347\u5e8fasc\u6216\u964d\u5e8fdesc Response { rows : [ { channels : [ { couponId : test , couponChannel : offline , url : null } ], couponId : STxgWromTbt727eBcPOo , couponLabel : test , couponName : test , couponSubLabel : test , couponType : 1, drawLimit : 100, note : test , rule : { amountLimit : null, discount : null, freeFee : null, goodsLimit : null }, total : 100000, validDate : { startDays : 5, validDays : 5 }, validType : 2 } ], total : 12, //\u603b\u9875\u6570 records : 10 //\u603b\u6761\u6570 } \u53ea\u6709\u5728\u4f7f\u7528needTotal\u540e\u4f1a\u6709total\u548crecords\u503c\u3002 13.2.\u6839\u636ecouponId\u83b7\u53d6coupon GET /loyalty/v1/coupon/$couponId Request access_token \u6839\u636eappid\u8bf7\u6c42\u7684token Response \u6210\u529f { channels : [ { couponId : test , couponChannel : offline , url : null } ], couponId : STxgWromTbt727eBcPOo , couponLabel : test , couponName : test , couponSubLabel : test , couponType : 1, drawLimit : 100, note : test , rule : { amountLimit : null, discount : null, freeFee : null, goodsLimit : null }, total : 100000, validDate : { startDays : 5, validDays : 5 }, validType : 2 } \u5931\u8d25 { error : { code : 409000 , message : error info } } 13.3.\u6839\u636ecouponChannel\u83b7\u53d6coupon GET /loyalty/v1/couponService/getCouponByChannel Request access_token \u6839\u636eappid\u8bf7\u6c42\u7684token channel online\u6216\u8005offline couponId \u5bf9\u5e94\u6e20\u9053\u7684couponId Response \u6210\u529f { rows : [ { channels : [ { couponId : test , couponChannel : offline , url : null } ], couponId : STxgWromTbt727eBcPOo , couponLabel : test , couponName : test , couponSubLabel : test , couponType : 1, drawLimit : 100, note : test , rule : { amountLimit : null, discount : null, freeFee : null, goodsLimit : null }, total : 100000, validDate : { startDays : 5, validDays : 5 }, validType : 2 } ] } \u5931\u8d25 { error : { code : 409000 , message : error info } } 13.4.\u9886\u5238 POST /loyalty/v1/membership/$membershipId/coupon/draw Request access_token \u6839\u636eappid\u8bf7\u6c42\u7684token Payload { couponId : 11111 } Response \u6210\u529f { dateDraw : 2017-12-05T05:54:10Z , endDate : 2017-12-15 , couponId : STxgWromTbt727eBcPOo , qrcodeUrl : http://127.0.0.1:8004/loyalty/qrimg/cnik8caw3EqPVCLAFP4IsmVeXwqb-EtxJSw3gugIq-0 , membershipId : 1, barcodeUrl : http://127.0.0.1:8004/loyalty/barimg/cnik8caw3EqPVCLAFP4IsmVeXwqb-EtxJSw3gugIq-0 , dateRedeem : null, uuid : cnik8caw3EqPVCLAFP4IsmVeXwqb-EtxJSw3gugIq-0\\r\\n , startDate : 2017-12-10 , couponCode : 34636772868722688 , status : notStarted , couponType : 1, couponName : test , couponLabel : test , couponSubLabel : test , note : test , channels : [ { couponId : test , couponChannel : offline , url : null } ], rule : { goodsLimit : null , freeFee : null, discount : null, amountLimit : null } } \u4ececouponType\u5f00\u59cb\uff0c\u4e4b\u540e\u7684\u5b57\u6bb5\u662f\u8fd9\u5f20\u5238\u6240\u5c5ecoupon\u7684\u4fe1\u606f\u3002 \u5931\u8d25 { error : { code : 409000 , message : error info } } 13.5.\u6839\u636ecouponCode\u83b7\u53d6membershipCoupon GET /loyalty/v1/membershipCoupon/$couponCode Request access_token \u6839\u636eappid\u8bf7\u6c42\u7684token Response \u6210\u529f { dateDraw : 2017-12-05T05:54:10Z , endDate : 2017-12-15 , couponId : STxgWromTbt727eBcPOo , qrcodeUrl : http://127.0.0.1:8004/loyalty/qrimg/cnik8caw3EqPVCLAFP4IsmVeXwqb-EtxJSw3gugIq-0 , membershipId : 1, barcodeUrl : http://127.0.0.1:8004/loyalty/barimg/cnik8caw3EqPVCLAFP4IsmVeXwqb-EtxJSw3gugIq-0 , dateRedeem : null, uuid : cnik8caw3EqPVCLAFP4IsmVeXwqb-EtxJSw3gugIq-0\\r\\n , startDate : 2017-12-10 , couponCode : 34636772868722688 , status : notStarted , couponType : 1, couponName : test , couponLabel : test , couponSubLabel : test , note : test , channels : [ { couponId : test , couponChannel : offline , url : null } ], rule : { goodsLimit : null , freeFee : null, discount : null, amountLimit : null } } 13.6.\u6839\u636emembershipId\u83b7\u53d6membershipCoupon\u5217\u8868 GET /loyalty/v1/membership/$membershipId/coupon Request access_token \u6839\u636eappid\u8bf7\u6c42\u7684token status \u7b5b\u9009membershipCoupon\u72b6\u6001\uff0cnormal\u4e3a\u53ef\u4f7f\u7528\uff0cused\u4e3a\u5df2\u4f7f\u7528 Response \u6210\u529f { rows : [ { dateDraw : 2017-12-05T05:54:10Z , endDate : 2017-12-15 , couponId : STxgWromTbt727eBcPOo , qrcodeUrl : http://127.0.0.1:8004/loyalty/qrimg/cnik8caw3EqPVCLAFP4IsmVeXwqb-EtxJSw3gugIq-0 , membershipId : 1, barcodeUrl : http://127.0.0.1:8004/loyalty/barimg/cnik8caw3EqPVCLAFP4IsmVeXwqb-EtxJSw3gugIq-0 , dateRedeem : null, uuid : cnik8caw3EqPVCLAFP4IsmVeXwqb-EtxJSw3gugIq-0\\r\\n , startDate : 2017-12-10 , couponCode : 34636772868722688 , status : notStarted , couponType : 1, couponName : test , couponLabel : test , couponSubLabel : test , note : test , channels : [ { couponId : test , couponChannel : offline , url : null } ], rule : { goodsLimit : null , freeFee : null, discount : null, amountLimit : null } } ], total : 12, records : 10 } 13.7.\u6838\u9500 POST /loyalty/v1/membershipCoupon/$couponCode/redeem Request access_token \u6839\u636eappid\u8bf7\u6c42\u7684token Payload { membershipId : 1 } Response \u6210\u529f { dateDraw : 2017-12-05T05:54:10Z , endDate : 2017-12-15 , couponId : STxgWromTbt727eBcPOo , qrcodeUrl : http://127.0.0.1:8004/loyalty/qrimg/cnik8caw3EqPVCLAFP4IsmVeXwqb-EtxJSw3gugIq-0 , membershipId : 1, barcodeUrl : http://127.0.0.1:8004/loyalty/barimg/cnik8caw3EqPVCLAFP4IsmVeXwqb-EtxJSw3gugIq-0 , dateRedeem : null, uuid : cnik8caw3EqPVCLAFP4IsmVeXwqb-EtxJSw3gugIq-0\\r\\n , startDate : 2017-12-10 , couponCode : 34636772868722688 , status : used , couponType : 1, couponName : test , couponLabel : test , couponSubLabel : test , note : test , channels : [ { couponId : test , couponChannel : offline , url : null } ], rule : { goodsLimit : null , freeFee : null, discount : null, amountLimit : null } } 14.\u5220\u9664\u4f1a\u5458\u8eab\u4efd \u5982\u679c\u88ab\u5220\u9664\u7684\u8eab\u4efd\u4e3a\u6b64\u4f1a\u5458\u552f\u4e00\u8eab\u4efd\u5219\u4e0d\u5141\u8bb8\u5220\u9664\uff0c\u5982\u679c\u5220\u9664\u7684\u8eab\u4efd\u7c7b\u578b\u4e3amobile\u5219\u4f1a\u6e05\u7a7a\u5bf9\u5e94\u4f1a\u5458\u7684\u53f7\u7801\uff0c\u8eab\u4efd\u7684\u5220\u9664\u4f1a\u540c\u6b65\u5230\u5bf9\u5e94\u7684\u5ba2\u6237\u8eab\u4efd HTTP\u8bf7\u6c42\u65b9\u5f0f: DELETE /loyalty/v1/membership/identity/$identityId Request access_token \u6839\u636eappid\u8bf7\u6c42\u7684token Response \u6210\u529f { result : success } \u5931\u8d25\uff1a\u552f\u4e00\u8eab\u4efd { error :{ code :409224, message : Identity is last one }} \u5931\u8d25\uff1a\u672a\u627e\u5230\u5bf9\u5e94\u8eab\u4efd { error :{ code :409225, message : Identity not found }}","title":"Api\u63a5\u53e3"},{"location":"member/#_1","text":"DM Hub\u4e3a \u4f1a\u5458 \u5185\u7f6e\u4e00\u4e9b\u6bd4\u8f83\u901a\u7528\u7684\u4f1a\u5458\u5c5e\u6027\uff0c\u8fd9\u4e9b\u5c5e\u6027\u7684\u540d\u79f0\u548c\u7c7b\u578b\u5982\u4e0b\u8868\u6240\u793a\uff1a \u5c5e\u6027 \u754c\u9762\u663e\u793a\u540d\u79f0 \u7c7b\u578b \u8bf4\u660e id \u4f1a\u5458ID \u6570\u5b57 name \u59d3\u540d \u6587\u672c familyName \u59d3 \u6587\u672c givenName \u540d \u6587\u672c customerId \u5ba2\u6237id \u6587\u672c membershipCode \u4f1a\u5458\u53f7 \u6587\u672c idCard \u200b\u4f1a\u5458\u8eab\u4efd\u8bc1 \u6587\u672c address \u200b\u8be6\u7ec6\u5730\u5740 \u6587\u672c educationBackgro \u6559\u80b2\u80cc\u666f \u6587\u672c img \u7528\u6237\u5934\u50cf \u6587\u672c gender \u6027\u522b \u6570\u5b57 mobile \u624b\u673a\u53f7\u7801 \u6587\u672c email \u90ae\u7bb1 \u6587\u672c birthday \u751f\u65e5 \u6587\u672c dateJoin \u6ce8\u518c\u65f6\u95f4 \u65e5\u671f\u65f6\u95f4 \u65f6\u95f4\u683c\u5f0f\u4e3a \u201c2016-11-11T11:11:11\u201d \u4e3aUTC\u65f6\u95f4 createMethod \u521b\u5efa\u65b9\u5f0f \u6587\u672c createChannel \u521b\u5efa\u6e20\u9053 \u6587\u672c industry \u516c\u53f8\u884c\u4e1a \u6587\u672c income \u6536\u5165 \u6587\u672c balance \u50a8\u503c\u4f59\u989d \u6570\u5b57 referrer \u63a8\u5e7f\u4eba \u6587\u672c lastUpdated \u6700\u540e\u66f4\u65b0\u65f6\u95f4 \u65e5\u671f\u65f6\u95f4 \u65f6\u95f4\u683c\u5f0f\u4e3a \u201c2016-11-11T11:11:11\u201d \u4e3aUTC\u65f6\u95f4 level \u4f1a\u5458\u7b49\u7ea7 Json\u5bf9\u8c61 point \u4f1a\u5458\u79ef\u5206 \u6570\u5b57 source \u6765\u6e90 \u6587\u672c contentName \u6765\u6e90\u5185\u5bb9 \u6587\u672c country \u56fd\u5bb6 \u6587\u672c province \u7701 \u6587\u672c city \u5e02 \u6587\u672c county \u533a\u53bf \u6587\u672c dateCreated \u7cfb\u7edf\u521b\u5efa\u65f6\u95f4 \u65e5\u671f\u65f6\u95f4 \u65f6\u95f4\u683c\u5f0f\u4e3a \u201c2016-11-11T11:11:11\u201d \u4e3aUTC\u65f6\u95f4 \u9664\u4e86\u7cfb\u7edf\u5185\u7f6e\u7684\u4f1a\u5458\u5c5e\u6027\u5916\uff0c\u60a8\u8fd8\u53ef\u4ee5\u589e\u52a0\u81ea\u5b9a\u4e49\u5c5e\u6027\u3002 \u767b\u5f55DM Hub\uff0c\u5728\u4f1a\u5458\u5c5e\u6027\u8bbe\u7f6e\u9875\u9762\u4e2d\uff0c\u53ef\u589e\u52a0\u81ea\u5b9a\u4e49\u4f1a\u5458\u5c5e\u6027\u3002\u5305\u62ec\u5c5e\u6027\u540d\u3001\u5c5e\u6027\u4ee3\u7801\u3001\u5c5e\u6027\u7c7b\u578b\u7b49\u3002 \u81ea\u5b9a\u4e49\u5c5e\u6027\u7684\u4ee3\u7801\u4ee5\"c_\"\u4f5c\u4e3a\u524d\u7f00\u3002","title":"\u4f1a\u5458\u6a21\u578b"},{"location":"member/#_2","text":"DM Hub\u5185\u7f6e\u4e86\u51e0\u4e2a\u8eab\u4efd\u7c7b\u578b \u5185\u7f6e\u8eab\u4efd\u7c7b\u578b \u542b\u4e49 \u662f\u5426\u552f\u4e00 mobile \u624b\u673a\u53f7 \u662f wechat \u5fae\u4fe1\u7684openid \u5426 wechat-unionid \u5fae\u4fe1\u7684unionid \u5426 taobao-account \u6dd8\u5b9d\u8d26\u53f7 \u5426 \u53e6\u5916\u7528\u6237\u53ef\u4ee5\u5728DM Hub\u4f1a\u5458\u8eab\u4efd\u8bbe\u7f6e\u4e2d\u81ea\u5b9a\u4e49\u4f1a\u5458\u8eab\u4efd\u7c7b\u578b\uff0c\u7528\u6237\u5b9a\u4e49\u7684\u8eab\u4efd\u7c7b\u578b\u4ee5\"c_\"\u4f5c\u4e3a\u524d\u7f00\u3002","title":"\u4f1a\u5458\u8eab\u4efd\u6a21\u578b"},{"location":"member/#1","text":"HTTP\u8bf7\u6c42\u65b9\u5f0f: GET /loyalty/v1/membership?access_token={access_token} Response { rows : [ { address : null, balance : null, birthday : 1988-01-01 , createChannel : null, createMethod : \u5916\u90e8\u7cfb\u7edf\u5bfc\u5165 , customerId : null, dateCreated : 2017-10-31T03:07:47Z , dateJoin : 2017-10-31T03:07:47Z , educationBackgro : null, email : null, familyName : null, gender : 1, id : 1, idCard : null, img : null, income : null, industry : null, givenName : null, lastUpdated : 2017-10-31T03:07:47Z , level : { priority : 0, //\u7b49\u7ea7\u6240\u4ee3\u8868\u7684\u5c42\u7ea7\uff0c0\u4e3a\u6700\u4f4e\uff0c\u5411\u4e0a\u9012\u589e name : \u9752\u94dc\u4f1a\u5458 , id : 422 }, membershipCode : null, mobile : null, name : test , point : 0, source : null, //\u65b0\u589e\u5b57\u6bb5 contentName : null, //\u65b0\u589e\u5b57\u6bb5 campaignId : null, //\u65b0\u589e\u5b57\u6bb5 country : null, //\u65b0\u589e\u5b57\u6bb5 province : null, //\u65b0\u589e\u5b57\u6bb5 city : null, //\u65b0\u589e\u5b57\u6bb5 county : null //\u65b0\u589e\u5b57\u6bb5 } ] }","title":"1. \u67e5\u770b\u5168\u90e8\u4f1a\u5458"},{"location":"member/#2","text":"\u521b\u5efa\u4f1a\u5458\u65f6\u9700\u8981\u540c\u65f6\u5305\u542b\u4f1a\u5458\u8eab\u4efd\u7684\u4fe1\u606f\uff0c\u5373membership\u548cidentities\u4e24\u9879\u90fd\u4e0d\u80fd\u4e3a\u7a7a\u503c\u3002 HTTP\u8bf7\u6c42\u65b9\u5f0f: POST /loyalty/v1/membershipAndIdentities?access_token={access_token} Request Payload { membership : { name : test , cm_test2 : true, gender : 1, birthday : 1988-01-01 , cm_test3 : true }, identities : [ { type : wechat , value : 123456 , name : cm_test } ] } Response { address : null, balance : null, birthday : 1988-01-01 , createChannel : null, createMethod : \u5916\u90e8\u7cfb\u7edf\u5bfc\u5165 , customerId : null, dateCreated : 2017-10-31T03:21:09Z , dateJoin : 2017-10-31T03:21:09Z , educationBackgro : null, email : null, familyName : null, gender : 1, id : 3, idCard : null, img : null, income : null, industry : null, givenName : null, lastUpdated : 2017-10-31T03:21:09Z , level : { priority : 0, name : \u9752\u94dc\u4f1a\u5458 , id : 422 }, membershipCode : null, mobile : null, name : test , point : 0, source : null, contentName : null, campaignId : null, country : null, province : null, city : null, county : null }","title":"2. \u521b\u5efa\u4f1a\u5458\u548c\u4f1a\u5458\u8eab\u4efd"},{"location":"member/#3","text":"HTTP\u8bf7\u6c42\u65b9\u5f0f: GET /loyalty/v1/membership/${membershipId}?access_token={access_token} Response { address : null, balance : null, birthday : 1988-01-01 , createChannel : null, createMethod : \u5916\u90e8\u7cfb\u7edf\u5bfc\u5165 , customerId : null, dateCreated : 2017-10-31T03:07:47Z , dateJoin : 2017-10-31T03:07:47Z , educationBackgro : null, email : null, familyName : null, gender : 1, id : 1, idCard : null, img : null, income : null, industry : null, givenName : null, lastUpdated : 2017-10-31T03:07:47Z , level : { priority : 0, name : \u9752\u94dc\u4f1a\u5458 , id : 422 }, membershipCode : null, mobile : null, name : test , point : 0, source : null, contentName : null, campaignId : null, country : null, province : null, city : null, county : null }","title":"3. \u67e5\u770b\u4e00\u4e2a\u4f1a\u5458"},{"location":"member/#4","text":"HTTP\u8bf7\u6c42\u65b9\u5f0f: PUT /loyalty/v1/membership/${membershipId}?access_token={access_token} Request Payload { name : test1 , gender : 0, email : 111@test.com } Response { address : null, balance : null, birthday : 1988-01-01 , createChannel : null, createMethod : \u5916\u90e8\u7cfb\u7edf\u5bfc\u5165 , customerId : null, dateCreated : 2017-10-31T03:07:47Z , dateJoin : 2017-10-31T03:07:47Z , educationBackgro : null, email : 111@test.com , familyName : null, gender : 0, id : 1, idCard : null, img : null, income : null, industry : null, givenName : null, lastUpdated : 2017-10-31T05:56:57Z , level : { priority : 0, name : \u9752\u94dc\u4f1a\u5458 , id : 422 }, membershipCode : null, mobile : null, name : test1 , point : 0, source : null, contentName : null, campaignId : null, country : null, province : null, city : null, county : null }","title":"4. \u4fee\u6539\u4e00\u4e2a\u4f1a\u5458"},{"location":"member/#51","text":"HTTP\u8bf7\u6c42\u65b9\u5f0f: PUT /loyalty/v1/membership/${membershipId}/level?access_token={access_token} Request Payload { level : 8 } Response { dateCreated : 2017-10-31T06:54:01Z , id : 3, lastUpdated : 2017-10-31T06:54:01Z , levelType : 0, levelUpdateStatus : 1, membershipId : 1, newLevel : 8, oldLevel : 0, remark : null, rule : null, tenantId : 11 }","title":"5.1. \u4fee\u6539\u4f1a\u5458\u7b49\u7ea7"},{"location":"member/#52","text":"POST /loyalty/v1/membership/$membershipId/point/incr?access_token={access_token} /loyalty/v1/membership/$membershipId/point/decr?access_token={access_token} Request Payload { point :8, pattern :0 //\u79ef\u5206\u83b7\u53d6/\u51cf\u5c11\u65b9\u5f0f\uff08\u5fc5\u586b\uff09 } Response { point : 8 } \u79ef\u5206\u65b9\u5f0f\uff1a { \u79ef\u5206\u589e\u52a0 : { 0 : \u5176\u4ed6 , 1 : \u521d\u59cb\u79ef\u5206 , 2 : \u4ea4\u6613\u9001\u79ef\u5206 , 3 : \u53c2\u4e0e\u4e92\u52a8\u5f97\u79ef\u5206 , 4 : \u79ef\u5206\u5956\u52b1 , 5 : \u79ef\u5206\u8c03\u6574 }, \u79ef\u5206\u51cf\u5c11 : { 0 : \u5176\u4ed6 , 1 : \u79ef\u5206\u5151\u6362 , 2 : \u4ea4\u6613\u9000\u79ef\u5206 , 3 : \u53c2\u4e0e\u4e92\u52a8\u6d88\u8017\u79ef\u5206 , 4 : \u60e9\u7f5a\u6263\u79ef\u5206 , 5 : \u79ef\u5206\u8c03\u6574 , 6 : \u79ef\u5206\u5931\u6548 } }","title":"5.2. \u589e\u51cf\u4f1a\u5458\u79ef\u5206"},{"location":"member/#6","text":"HTTP\u8bf7\u6c42\u65b9\u5f0f: POST /loyalty/v1/membership/${membershipId}/bindIdentity?access_token={access_token} Request Payload [ { type : wechat , value : 666 , name : cm_test1 } ] Response [ { name : cm_test1 , type : wechat , value : 666 } ]","title":"6. \u7ed1\u5b9a\u4f1a\u5458\u8eab\u4efd"},{"location":"member/#7","text":"HTTP\u8bf7\u6c42\u65b9\u5f0f: GET /loyalty/v1/membershipService/getMembershipByIdentity?access_token={access_token} type={identityType} value={identityValue} Response { identities : [ { name : cm_test2 , type : wechat , value : 1111111111 } ], membership : { address : null, balance : null, birthday : 1988-01-01 , createChannel : null, createMethod : \u5916\u90e8\u7cfb\u7edf\u5bfc\u5165 , customerId : null, dateCreated : 2017-10-31T03:07:47Z , dateJoin : 2017-10-31T03:07:47Z , educationBackgro : null, email : 111@test.com , familyName : null, gender : 0, id : 1, idCard : null, img : null, income : null, industry : null, givenName : null, lastUpdated : 2017-10-31T05:56:57Z , level : { priority : 0, name : \u9752\u94dc\u4f1a\u5458 , id : 422 }, membershipCode : null, mobile : null, name : test1 , point : 0, source : null, contentName : null, campaignId : null, country : null, province : null, city : null, county : null } }","title":"7. \u6839\u636e\u4f1a\u5458\u8eab\u4efd\u67e5\u627e\u4f1a\u5458"},{"location":"member/#8","text":"HTTP\u8bf7\u6c42\u65b9\u5f0f: POST /loyalty/v1/membershipService/listMembershipByIdentities?access_token={access_token} Request Payload [ { type : wechat , value : 666 }, { type : wechat , value : 333 } ] Response { rows : [ { identities : [ { name : cm_test2 , type : wechat , value : 1111111111 } ], membership : { address : null, balance : null, birthday : 1988-01-01 , createChannel : null, createMethod : \u5916\u90e8\u7cfb\u7edf\u5bfc\u5165 , customerId : null, dateCreated : 2017-10-31T03:07:47Z , dateJoin : 2017-10-31T03:07:47Z , educationBackgro : null, email : 111@test.com , familyName : null, gender : 0, id : 1, idCard : null, img : null, income : null, industry : null, givenName : null, lastUpdated : 2017-10-31T05:56:57Z , level : { priority : 0, name : \u9752\u94dc\u4f1a\u5458 , id : 422 }, membershipCode : null, mobile : null, name : test1 , point : 0, source : null, contentName : null, campaignId : null, country : null, province : null, city : null, county : null } }, { identities : [ { name : cm_test2 , type : wechat , value : 333 } ], membership : { address : null, balance : null, birthday : 1988-01-01 , createChannel : null, createMethod : \u5916\u90e8\u7cfb\u7edf\u5bfc\u5165 , customerId : null, dateCreated : 2017-10-31T03:21:09Z , dateJoin : 2017-10-31T03:21:09Z , educationBackgro : null, email : null, familyName : null, gender : 1, id : 3, idCard : null, img : null, income : null, industry : null, givenName : null, lastUpdated : 2017-10-31T03:21:09Z , level : { priority : 0, name : \u9752\u94dc\u4f1a\u5458 , id : 422 }, membershipCode : null, mobile : null, name : test , point : 0, source : null, contentName : null, campaignId : null, country : null, province : null, city : null, county : null } } ] }","title":"8. \u6839\u636e\u4f1a\u5458\u8eab\u4efd\u5217\u8868\u67e5\u627e\u4f1a\u5458"},{"location":"member/#9","text":"HTTP\u8bf7\u6c42\u65b9\u5f0f: PUT /loyalty/v1/membershipService/updateMobile?access_token={access_token} Request Payload { oldMobile : 123 , newMobile : 456 , membershipId :8 } Response { address : null, balance : null, birthday : 1999-01-01 , c_111 : null, c_1111 : null, c_12 : null, c_123 : null, c_123123 : null, c_Member : null, c_qqq : null, c_qwa123 : null, c_qwqqw : null, c_sd : null, c_sdsf : null, c_wewe : null, c_wewe1 : null, c_\u9a71\u868a\u5668 : null, createChannel : null, createMethod : \u5916\u90e8\u7cfb\u7edf\u5bfc\u5165 , customerId : 20526992, dateCreated : 2017-11-13T08:43:05Z , dateJoin : 2017-11-13T08:43:05Z , educationBackgro : null, email : null, familyName : null, gender : 1, givenName : null, id : 85, idCard : null, img : null, income : null, industry : null, lastUpdated : 2017-11-13T08:46:24Z , level : { priority : 0, name : \u9752\u94dc\u4f1a\u5458 , id : 422 }, membershipCode : null, mobile : 456 , name : test , point : 0, contentName : null, campaignId : null, country : null, province : null, city : null, county : null }","title":"9. \u4fee\u6539\u4f1a\u5458\u624b\u673a\u53f7"},{"location":"member/#10","text":"HTTP\u8bf7\u6c42\u65b9\u5f0f: GET /loyalty/v1/settings/level/rules?access_token={access_token} Response { rows : [ { desp : null, id : 61, isForever : true, name : 1 , operator : or , priority : 0, rules : { consumption : { enabled : false, month : 12, number : 5000 }, consumptionTotal : { enabled : false, month : 12, number : 5000 }, desp : \u9ed8\u8ba4\u6700\u4f4e\u7b49\u7ea7 , frequency : { enabled : false, month : 12, number : 5000 }, frequencyTotal : { enabled : false, month : 12, number : 5000 }, points : { enabled : false, month : 12, number : 5000 }, pointsTotal : { enabled : false, month : 12, number : 5000 } }, status : 0 }, { desp : null, id : 62, isForever : false, name : 2 , operator : or , priority : 1, rules : {}, status : 0 }, { desp : null, id : 63, isForever : true, name : 3 , operator : or , priority : 2, rules : {}, status : 0 }, { desp : null, id : 64, isForever : false, name : 5 , operator : or , priority : 3, rules : {}, status : 0 } ] }","title":"10. \u67e5\u770b\u4f1a\u5458\u7b49\u7ea7\u8bbe\u7f6e"},{"location":"member/#11-api","text":"","title":"11. \u8ba2\u5355Api"},{"location":"member/#111","text":"HTTP\u8bf7\u6c42\u65b9\u5f0f: POST /loyalty/v1/deal?access_token={token} Payload { membershipId : 1, orderNo : 123456 , dealLines : [ { lineId : 11111 }, { lineId : 22222 } ] } \u8ba2\u5355\u5934 \u82f1\u6587\u540d\u79f0 \u5b57\u6bb5\u540d\u79f0 \u5b57\u6bb5\u7c7b\u578b \u5fc5\u987b\u5b57\u6bb5 \u8bf4\u660e salesChannel \u9500\u552e\u6e20\u9053 String \u662f store \u5e97\u94fa String \u662f orderNo \u8ba2\u5355\u53f7 String \u662f type \u8ba2\u5355\u7c7b\u578b String dateOrder \u8ba2\u5355\u65f6\u95f4 DateTime \u662f \u65f6\u95f4\u683c\u5f0f\u4e3a \u201c2016-11-11T11:11:11\u201d, UTC\u65f6\u95f4 membershipId \u4f1a\u5458ID Number \u662f amountDiscount \u8ba2\u5355\u6298\u6263 Number \u662f couponCode \u4f18\u60e0\u5238Code String groupId \u56e2\u8d2dID String amountTotal \u8ba2\u5355\u603b\u989d Number amountPaid \u5b9e\u9645\u652f\u4ed8\u91d1\u989d Number \u662f paymentTerm \u652f\u4ed8\u65b9\u5f0f String paymentNo \u652f\u4ed8\u53f7 String shippingMethod \u8fd0\u9001\u65b9\u5f0f String contactName \u6536\u8d27\u4eba\u59d3\u540d String contactTel \u6536\u8d27\u4eba\u624b\u673a String shippingProvince \u6536\u8d27\u4eba\u7701\u4efd String shippingCity \u6536\u8d27\u4eba\u57ce\u5e02 String shippingCounty \u6536\u8d27\u4eba\u533a\u53bf String shippingStreet \u6536\u8d27\u4eba\u8857\u9053 String shippingAddress \u6536\u8d27\u4eba\u5177\u4f53\u5730\u5740 String dealLines \u8ba2\u5355\u884c JsonArray \u662f \u7ed3\u6784\u89c1\u8ba2\u5355\u884c \u8ba2\u5355\u884c \u82f1\u6587\u540d\u79f0 \u5b57\u6bb5\u540d\u79f0 \u5b57\u6bb5\u7c7b\u578b \u5fc5\u987b\u5b57\u6bb5 \u8bf4\u660e lineId \u8ba2\u5355\u884cid String \u662f \u53ef\u4f7f\u7528skuid\uff0c\u5728\u4e00\u4e2a\u8ba2\u5355\u4e2d\u4fdd\u8bc1\u552f\u4e00 productName \u4ea7\u54c1\u540d\u79f0 String \u662f productId \u4ea7\u54c1ID String skuId SKU ID String category \u54c1\u7c7b String qty \u6570\u91cf Number \u662f priceUnit \u5355\u4ef7 Number priceSubTotal \u603b\u4ef7 Number Response \u6210\u529f { membershipId : 1, orderNo : 123456 , id : 1 , dealLines : [ { lineId : 11111 }, { lineId : 22222 } ], state : \u5df2\u4ed8\u6b3e } \u5931\u8d25 { error : { code : 409000 , message : error info } }","title":"11.1. \u521b\u5efa\u8ba2\u5355"},{"location":"member/#112","text":"HTTP\u8bf7\u6c42\u65b9\u5f0f: POST /loyalty/v1/dealService/update/?access_token={token} Payload { membershipId : 1, orderNo : 123456 , dealLines : [ { lineId : 11111 }, { lineId : 22222 } ] } Response \u6210\u529f { membershipId : 1, orderNo : 123456 , id : 1 , dealLines : [ { lineId : 11111 }, { lineId : 22222 } ], state : \u5df2\u4ed8\u6b3e } \u5931\u8d25 { error : { code : 409000 , message : error info } }","title":"11.2. \u4fee\u6539\u8ba2\u5355"},{"location":"member/#113","text":"HTTP\u8bf7\u6c42\u65b9\u5f0f: POST /loyalty/v1/dealService/cancel?access_token={token} Payload { membershipId : 1, orderNo : 123456 } Response { membershipId : 1, orderNo : 123456 , id : 1 , dealLines : [ { lineId : 11111 }, { lineId : 22222 } ], state : \u5df2\u53d6\u6d88 }","title":"11.3. \u53d6\u6d88\u8ba2\u5355"},{"location":"member/#114","text":"HTTP\u8bf7\u6c42\u65b9\u5f0f: POST /loyalty/v1/dealService/refund?access_token={token} Payload { refundLines : [ { lineId : 11111 } ], refundTotal : 1111, orderNo : 123456 , membershipId : 1 } \u9000\u5355\u5934 \u82f1\u6587\u540d\u79f0 \u5b57\u6bb5\u540d\u79f0 \u5b57\u6bb5\u7c7b\u578b \u5fc5\u987b\u5b57\u6bb5 \u8bf4\u660e membershipId \u4f1a\u5458ID Number \u662f orderNo \u8ba2\u5355\u53f7 String \u662f dateRefund \u9000\u5355\u65f6\u95f4 DateTime \u662f \u65f6\u95f4\u683c\u5f0f\u4e3a \u201c2016-11-11T11:11:11\u201d, UTC\u65f6\u95f4 refundTotal \u9000\u5355\u91d1\u989d Number \u662f reason \u9000\u5355\u539f\u56e0 String refundLines \u9000\u5355\u884c JsonArray \u662f \u7ed3\u6784\u89c1\u9000\u5355\u884c \u9000\u5355\u884c \u82f1\u6587\u540d\u79f0 \u5b57\u6bb5\u540d\u79f0 \u5b57\u6bb5\u7c7b\u578b \u5fc5\u987b\u5b57\u6bb5 \u8bf4\u660e lineId \u8ba2\u5355\u884cid String \u662f \u53ef\u4f7f\u7528skuid\uff0c\u5728\u4e00\u4e2a\u8ba2\u5355\u4e2d\u4fdd\u8bc1\u552f\u4e00 Response { membershipId : 1, orderNo : 123456 , refundTotal : 1 , refundLines : [ { lineId : 11111 } ] }","title":"11.4. \u9000\u5355"},{"location":"member/#114_1","text":"HTTP\u8bf7\u6c42\u65b9\u5f0f: POST /loyalty/v1/dealService/deleteRefund?access_token={token} Payload { membershipId : 1, orderNo : 123456 } Response { refundTotal : 3333, orderNo : 123456 , membershipId : 1, dateRefund : 2017-04-22T12:56:47Z , refundLines : [ { lineId : 123456-2 } ] }","title":"11.4. \u5220\u9664\u9000\u5355"},{"location":"member/#115","text":"HTTP\u8bf7\u6c42\u65b9\u5f0f: POST /loyalty/v1/dealService/delete?access_token={token} Payload { membershipId : 1, orderNo : 123456 } Response { membershipId : 1, orderNo : 123456 , id : 1 , dealLines : [ { lineId : 11111 }, { lineId : 22222 } ] }","title":"11.5. \u5220\u9664\u8ba2\u5355"},{"location":"member/#12","text":"\u8bf7\u6c42\u65b9\u5f0f\uff1a POST \u8bf7\u6c42\u8def\u5f84\uff1a https://api.convertlab.com/loyalty/v1/appPush/register?access_token={access_token} \u53c2\u6570\u8bf4\u660e\uff1a access_token \uff1a\u8bbf\u95ee\u8be5 API \u7684\u4ee4\u724c POST \u6570\u636e\u8bf4\u660e\uff1a { provider : \u5fc5\u4f20 \u63a8\u9001\u670d\u52a1\u63d0\u4f9b\u5546\uff0c'jpush' \u6216 'getui' , appKey : \u5fc5\u4f20 \u5728\u63a8\u9001\u670d\u52a1\u63d0\u4f9b\u5546\u5e73\u53f0\u521b\u5efa\u5e94\u7528\u65f6\u5f97\u5230\u7684 AppKey , pushId : \u5fc5\u4f20 \u63a8\u9001\u670d\u52a1\u63d0\u4f9b\u5546\u5206\u914d\u7ed9\u8bbe\u5907\u7684 PushID\uff08\u6781\u5149\u79f0\u4f5c Registration ID\uff0c\u4e2a\u63a8\u79f0\u4f5c ClientID\uff0c\u672c\u6587\u6863\u7edf\u4e00\u79f0\u4f5c PushID\uff09 , os : \u5fc5\u4f20 \u79fb\u52a8\u7aef\u5e73\u53f0\u7c7b\u578b\uff0c'android' \u6216 'ios' , membershipId : \u975e\u5fc5\u4f20 \u4f1a\u5458 ID\u3002 , mobile : \u975e\u5fc5\u4f20 \u4f1a\u5458\u624b\u673a\u53f7\u3002 } \u6ce8\uff1a membershipId \u53c2\u6570\u548c mobile \u53c2\u6570\u7528\u4e8e\u5c06\u63a8\u9001\u8bbe\u5907\u4fe1\u606f\u4e0e\u4f1a\u5458\u5efa\u7acb\u5173\u8054\uff0c\u5efa\u7acb\u5173\u8054\u8fc7\u7a0b\u4e2d\uff0c\u4f18\u5148\u6839\u636e membershipId \u67e5\u627e\u4f1a\u5458\uff0c\u5982\u679c\u6ca1\u6709\u627e\u5230\u4f1a\u5458\uff0c\u518d\u6839\u636e mobile \u67e5\u627e\u4f1a\u5458\uff0c\u5982\u679c\u627e\u5230\u4f1a\u5458\uff0c\u5219\u5c06\u63a8\u9001\u8bbe\u5907\u4fe1\u606f\u4e0e\u8be5\u4f1a\u5458\u5efa\u7acb\u5173\u8054\uff1b\u5426\u5219\uff0c\u63a8\u9001\u8bbe\u5907\u4fe1\u606f\u4f1a\u88ab\u6ce8\u518c\u4e3a\u533f\u540d\u7684\u4fe1\u606f\u3002 \u8fd4\u56de\u7ed3\u679c\u8bf4\u660e\uff1a \u6ce8\u518c\u6210\u529f { appKey : AppKey , membershipId : \u4f1a\u5458 ID , os : os , provider : provider , pushId : PushID } \u6ce8\uff1a\u5982\u679c\u8fd4\u56de\u7ed3\u679c\u4e2d\u7684 membershiprId \u4e3a null \uff0c\u5219\u8868\u660e\u63a8\u9001\u8bbe\u5907\u4fe1\u606f\u88ab\u6ce8\u518c\u4e3a\u533f\u540d\u7684\u4fe1\u606f\u3002 \u5fc5\u4f20\u5b57\u6bb5\u7f3a\u5931 { error : { code : 400005 , message : Missing field provider! } } \u5fc5\u4f20\u5b57\u6bb5\u65e0\u6548 { error : { code : 400001 , message : Invalid os(winphone)! } }","title":"12. \u4f1a\u5458\u6ce8\u518c\u63a8\u9001\u8bbe\u5907\u4fe1\u606f"},{"location":"member/#13-api","text":"","title":"13. \u4f18\u60e0\u5238Api"},{"location":"member/#_3","text":"\u4f18\u60e0\u5238\u5305\u62ec\u4f18\u60e0\u5238\uff08coupon\uff09\u548c\u4f18\u60e0\u5238\u8ba4\u9886\uff08membershipCoupon\uff09 \u4e24\u4e2a\u6a21\u578b\u3002\u64cd\u4f5c\u5458\u5728\u4f1a\u5458\u7cfb\u7edf\u7684\u524d\u7aef\u8bbe\u7f6e\u4e86\u4e00\u4e2a\u4f18\u60e0\u5238\u540e\uff0c\u4f1a\u751f\u6210\u4e00\u4e2acoupon\u5b9e\u4f53\uff1b\u5728\u4f1a\u5458\u9886\u53d6/\u7cfb\u7edf\u53d1\u653e\u4e4b\u540e\uff0c\u7cfb\u7edf\u4f1a\u751f\u6210\u67d0\u4f1a\u5458\u4e13\u5c5e\u7684\u4e00\u4e2amembershipCoupon\u5b9e\u4f53\u3002 \u6bcf\u4e00\u4e2acoupon\u90fd\u6709\u552f\u4e00\u6807\u8bc6couponId\uff0c\u6bcf\u4e00\u4e2amembershipCoupon\u90fd\u6709\u552f\u4e00\u6807\u8bc6couponCode\u3002\u5177\u4f53\u7684\u6a21\u578b\u5982\u4e0b\u3002 coupon \u82f1\u6587\u540d\u79f0 \u5b57\u6bb5\u540d\u79f0 \u5b57\u6bb5\u7c7b\u578b \u8bf4\u660e couponId \u4f18\u60e0\u5238id String couponName \u4f18\u60e0\u5238\u540d\u79f0 String couponLabel \u4f18\u60e0\u5238\u6807\u9898 String couponSubLabel \u4f18\u60e0\u5238\u526f\u6807\u9898 String couponType \u4f18\u60e0\u5238\u7c7b\u578b Number 1\u4e3a\u4ee3\u91d1\u5238\uff0c2\u4e3a\u6298\u6263\u5238\uff0c3\u4e3a\u5546\u54c1\u5238 channels \u4f18\u60e0\u5238\u6e20\u9053 JsonArray \u76ee\u524d\u754c\u9762\u6700\u591a\u53ef\u8bbe\u7f6e\u7ebf\u4e0a\u548c\u7ebf\u4e0b\u4e24\u4e2a\u6e20\u9053 drawLimit \u6bcf\u4eba\u9650\u4ee4\u5f20\u6570 Number total \u603b\u5f20\u6570 Number store \u5e93\u5b58 Number note \u4f7f\u7528\u987b\u77e5 String validType \u6709\u6548\u7c7b\u578b Number 1\u4e3a\u7edd\u5bf9\u65e5\u671f\u8303\u56f4\uff0c2\u4e3a\u76f8\u5bf9\u9886\u53d6\u65f6\u95f4 validDate \u6709\u6548\u65e5\u671f JsonObject \u6839\u636evalidType\u533a\u5206 rule \u4f7f\u7528\u89c4\u5219 JsonObject coupon.channels \u82f1\u6587\u540d\u79f0 \u5b57\u6bb5\u540d\u79f0 \u5b57\u6bb5\u7c7b\u578b \u8bf4\u660e couponId \u4f18\u60e0\u5238\u6e20\u9053\u7801 String couponChannel \u4f18\u60e0\u5238\u6e20\u9053 String \u76ee\u524d\u6709\u4e24\u4e2a\u6e20\u9053\uff0c\u7ebf\u4e0aonline\uff0c\u7ebf\u4e0boffline url \u6e20\u9053\u5bf9\u5e94\u7684url String coupon.validDate \u82f1\u6587\u540d\u79f0 \u5b57\u6bb5\u540d\u79f0 \u5b57\u6bb5\u7c7b\u578b \u8bf4\u660e startDays \u9886\u53d6\u540e\u6709\u6548\u8d77\u59cb\u5929\u6570 Number \u76f8\u5bf9\u6709\u6548\u65e5\u671f\u4f7f\u7528 validDays \u6709\u6548\u540e\u7ec8\u6b62\u5929\u6570 Number \u76f8\u5bf9\u6709\u6548\u65e5\u671f\u4f7f\u7528 startDate \u8d77\u59cb\u6709\u6548\u671f Date \u7edd\u5bf9\u6709\u6548\u65e5\u671f\u4f7f\u7528 endDate \u7ec8\u6b62\u6709\u6548\u671f Date \u7edd\u5bf9\u6709\u6548\u65e5\u671f\u4f7f\u7528 coupon.rule \u82f1\u6587\u540d\u79f0 \u5b57\u6bb5\u540d\u79f0 \u5b57\u6bb5\u7c7b\u578b \u8bf4\u660e amountLimit \u6700\u4f4e\u6d88\u8d39 Number discount \u6298\u6263\u989d\u5ea6 Number \u6298\u6263\u5238\u4f7f\u7528 freeFee \u51cf\u514d\u91d1\u989d Number \u4ee3\u91d1\u5238\u4f7f\u7528 goodsLimit \u6307\u5b9a\u5546\u54c1 String ... \u81ea\u5b9a\u4e49\u89c4\u5219 ... membershipCoupon \u82f1\u6587\u540d\u79f0 \u5b57\u6bb5\u540d\u79f0 \u5b57\u6bb5\u7c7b\u578b \u8bf4\u660e membershipId \u4f1a\u5458id Number couponId \u4f18\u60e0\u5238id String \u6298\u6263\u5238\u4f7f\u7528 dateDraw \u9886\u53d6\u65e5\u671f DateTime \u4ee3\u91d1\u5238\u4f7f\u7528\uff0c\u683c\u5f0f\u4e3a:\u201c2017-06-01T12:12:12Z\u201d \u4e3aUTC\u65f6\u95f4 dateRedeem \u6838\u9500\u65e5\u671f DateTime \u683c\u5f0f\u4e3a:\u201c2017-06-01T12:12:12Z\u201d \u4e3aUTC\u65f6\u95f4 startDate \u8d77\u59cb\u6709\u6548\u671f Date endDate \u7ec8\u6b62\u6709\u6548\u671f Date status \u72b6\u6001 Number \u6298\u6263\u5238\u4f7f\u7528 couponCode \u5238\u7801 String \u4ee3\u91d1\u5238\u4f7f\u7528 uuid \u5238\u7801\u52a0\u5bc6 String barcodeUrl \u6761\u5f62\u7801\u5730\u5740 String qrcodeUrl \u4e8c\u7ef4\u7801\u5730\u5740 String membershipCoupon.status \u8fd4\u56de\u503c normal used \u542b\u4e49 \u53ef\u4f7f\u7528 \u5df2\u4f7f\u7528","title":"\u6a21\u578b"},{"location":"member/#131coupon","text":"GET /loyalty/v1/coupon Request access_token \u6839\u636eappid\u8bf7\u6c42\u7684token needTotal \u662f\u5426\u9700\u8981\u603b\u9875\u6570 rows \u6bcf\u9875\u884c\u6570 page \u6240\u9009\u9875\u6570 sidx \u6392\u5e8f\u5b57\u6bb5 sord \u5347\u5e8fasc\u6216\u964d\u5e8fdesc Response { rows : [ { channels : [ { couponId : test , couponChannel : offline , url : null } ], couponId : STxgWromTbt727eBcPOo , couponLabel : test , couponName : test , couponSubLabel : test , couponType : 1, drawLimit : 100, note : test , rule : { amountLimit : null, discount : null, freeFee : null, goodsLimit : null }, total : 100000, validDate : { startDays : 5, validDays : 5 }, validType : 2 } ], total : 12, //\u603b\u9875\u6570 records : 10 //\u603b\u6761\u6570 } \u53ea\u6709\u5728\u4f7f\u7528needTotal\u540e\u4f1a\u6709total\u548crecords\u503c\u3002","title":"13.1.\u83b7\u53d6\u6240\u6709coupon"},{"location":"member/#132couponidcoupon","text":"GET /loyalty/v1/coupon/$couponId Request access_token \u6839\u636eappid\u8bf7\u6c42\u7684token Response \u6210\u529f { channels : [ { couponId : test , couponChannel : offline , url : null } ], couponId : STxgWromTbt727eBcPOo , couponLabel : test , couponName : test , couponSubLabel : test , couponType : 1, drawLimit : 100, note : test , rule : { amountLimit : null, discount : null, freeFee : null, goodsLimit : null }, total : 100000, validDate : { startDays : 5, validDays : 5 }, validType : 2 } \u5931\u8d25 { error : { code : 409000 , message : error info } }","title":"13.2.\u6839\u636ecouponId\u83b7\u53d6coupon"},{"location":"member/#133couponchannelcoupon","text":"GET /loyalty/v1/couponService/getCouponByChannel Request access_token \u6839\u636eappid\u8bf7\u6c42\u7684token channel online\u6216\u8005offline couponId \u5bf9\u5e94\u6e20\u9053\u7684couponId Response \u6210\u529f { rows : [ { channels : [ { couponId : test , couponChannel : offline , url : null } ], couponId : STxgWromTbt727eBcPOo , couponLabel : test , couponName : test , couponSubLabel : test , couponType : 1, drawLimit : 100, note : test , rule : { amountLimit : null, discount : null, freeFee : null, goodsLimit : null }, total : 100000, validDate : { startDays : 5, validDays : 5 }, validType : 2 } ] } \u5931\u8d25 { error : { code : 409000 , message : error info } }","title":"13.3.\u6839\u636ecouponChannel\u83b7\u53d6coupon"},{"location":"member/#134","text":"POST /loyalty/v1/membership/$membershipId/coupon/draw Request access_token \u6839\u636eappid\u8bf7\u6c42\u7684token Payload { couponId : 11111 } Response \u6210\u529f { dateDraw : 2017-12-05T05:54:10Z , endDate : 2017-12-15 , couponId : STxgWromTbt727eBcPOo , qrcodeUrl : http://127.0.0.1:8004/loyalty/qrimg/cnik8caw3EqPVCLAFP4IsmVeXwqb-EtxJSw3gugIq-0 , membershipId : 1, barcodeUrl : http://127.0.0.1:8004/loyalty/barimg/cnik8caw3EqPVCLAFP4IsmVeXwqb-EtxJSw3gugIq-0 , dateRedeem : null, uuid : cnik8caw3EqPVCLAFP4IsmVeXwqb-EtxJSw3gugIq-0\\r\\n , startDate : 2017-12-10 , couponCode : 34636772868722688 , status : notStarted , couponType : 1, couponName : test , couponLabel : test , couponSubLabel : test , note : test , channels : [ { couponId : test , couponChannel : offline , url : null } ], rule : { goodsLimit : null , freeFee : null, discount : null, amountLimit : null } } \u4ececouponType\u5f00\u59cb\uff0c\u4e4b\u540e\u7684\u5b57\u6bb5\u662f\u8fd9\u5f20\u5238\u6240\u5c5ecoupon\u7684\u4fe1\u606f\u3002 \u5931\u8d25 { error : { code : 409000 , message : error info } }","title":"13.4.\u9886\u5238"},{"location":"member/#135couponcodemembershipcoupon","text":"GET /loyalty/v1/membershipCoupon/$couponCode Request access_token \u6839\u636eappid\u8bf7\u6c42\u7684token Response \u6210\u529f { dateDraw : 2017-12-05T05:54:10Z , endDate : 2017-12-15 , couponId : STxgWromTbt727eBcPOo , qrcodeUrl : http://127.0.0.1:8004/loyalty/qrimg/cnik8caw3EqPVCLAFP4IsmVeXwqb-EtxJSw3gugIq-0 , membershipId : 1, barcodeUrl : http://127.0.0.1:8004/loyalty/barimg/cnik8caw3EqPVCLAFP4IsmVeXwqb-EtxJSw3gugIq-0 , dateRedeem : null, uuid : cnik8caw3EqPVCLAFP4IsmVeXwqb-EtxJSw3gugIq-0\\r\\n , startDate : 2017-12-10 , couponCode : 34636772868722688 , status : notStarted , couponType : 1, couponName : test , couponLabel : test , couponSubLabel : test , note : test , channels : [ { couponId : test , couponChannel : offline , url : null } ], rule : { goodsLimit : null , freeFee : null, discount : null, amountLimit : null } }","title":"13.5.\u6839\u636ecouponCode\u83b7\u53d6membershipCoupon"},{"location":"member/#136membershipidmembershipcoupon","text":"GET /loyalty/v1/membership/$membershipId/coupon Request access_token \u6839\u636eappid\u8bf7\u6c42\u7684token status \u7b5b\u9009membershipCoupon\u72b6\u6001\uff0cnormal\u4e3a\u53ef\u4f7f\u7528\uff0cused\u4e3a\u5df2\u4f7f\u7528 Response \u6210\u529f { rows : [ { dateDraw : 2017-12-05T05:54:10Z , endDate : 2017-12-15 , couponId : STxgWromTbt727eBcPOo , qrcodeUrl : http://127.0.0.1:8004/loyalty/qrimg/cnik8caw3EqPVCLAFP4IsmVeXwqb-EtxJSw3gugIq-0 , membershipId : 1, barcodeUrl : http://127.0.0.1:8004/loyalty/barimg/cnik8caw3EqPVCLAFP4IsmVeXwqb-EtxJSw3gugIq-0 , dateRedeem : null, uuid : cnik8caw3EqPVCLAFP4IsmVeXwqb-EtxJSw3gugIq-0\\r\\n , startDate : 2017-12-10 , couponCode : 34636772868722688 , status : notStarted , couponType : 1, couponName : test , couponLabel : test , couponSubLabel : test , note : test , channels : [ { couponId : test , couponChannel : offline , url : null } ], rule : { goodsLimit : null , freeFee : null, discount : null, amountLimit : null } } ], total : 12, records : 10 }","title":"13.6.\u6839\u636emembershipId\u83b7\u53d6membershipCoupon\u5217\u8868"},{"location":"member/#137","text":"POST /loyalty/v1/membershipCoupon/$couponCode/redeem Request access_token \u6839\u636eappid\u8bf7\u6c42\u7684token Payload { membershipId : 1 } Response \u6210\u529f { dateDraw : 2017-12-05T05:54:10Z , endDate : 2017-12-15 , couponId : STxgWromTbt727eBcPOo , qrcodeUrl : http://127.0.0.1:8004/loyalty/qrimg/cnik8caw3EqPVCLAFP4IsmVeXwqb-EtxJSw3gugIq-0 , membershipId : 1, barcodeUrl : http://127.0.0.1:8004/loyalty/barimg/cnik8caw3EqPVCLAFP4IsmVeXwqb-EtxJSw3gugIq-0 , dateRedeem : null, uuid : cnik8caw3EqPVCLAFP4IsmVeXwqb-EtxJSw3gugIq-0\\r\\n , startDate : 2017-12-10 , couponCode : 34636772868722688 , status : used , couponType : 1, couponName : test , couponLabel : test , couponSubLabel : test , note : test , channels : [ { couponId : test , couponChannel : offline , url : null } ], rule : { goodsLimit : null , freeFee : null, discount : null, amountLimit : null } }","title":"13.7.\u6838\u9500"},{"location":"member/#14","text":"\u5982\u679c\u88ab\u5220\u9664\u7684\u8eab\u4efd\u4e3a\u6b64\u4f1a\u5458\u552f\u4e00\u8eab\u4efd\u5219\u4e0d\u5141\u8bb8\u5220\u9664\uff0c\u5982\u679c\u5220\u9664\u7684\u8eab\u4efd\u7c7b\u578b\u4e3amobile\u5219\u4f1a\u6e05\u7a7a\u5bf9\u5e94\u4f1a\u5458\u7684\u53f7\u7801\uff0c\u8eab\u4efd\u7684\u5220\u9664\u4f1a\u540c\u6b65\u5230\u5bf9\u5e94\u7684\u5ba2\u6237\u8eab\u4efd HTTP\u8bf7\u6c42\u65b9\u5f0f: DELETE /loyalty/v1/membership/identity/$identityId Request access_token \u6839\u636eappid\u8bf7\u6c42\u7684token Response \u6210\u529f { result : success } \u5931\u8d25\uff1a\u552f\u4e00\u8eab\u4efd { error :{ code :409224, message : Identity is last one }} \u5931\u8d25\uff1a\u672a\u627e\u5230\u5bf9\u5e94\u8eab\u4efd { error :{ code :409225, message : Identity not found }}","title":"14.\u5220\u9664\u4f1a\u5458\u8eab\u4efd"},{"location":"track/","text":"\u767b\u5f55DM Hub\u7cfb\u7edf\uff0c\u70b9\u51fb\u83dc\u5355 \u5185\u5bb9 \u516c\u53f8\u7f51\u7ad9 \u96c6\u6210\u516c\u53f8\u7f51\u7ad9 \uff1a \u6309\u7167\u9875\u9762\u7684\u63cf\u8ff0\u6587\u5b57\uff0c\u5c06\u9875\u9762\u5185\u7684javascript\u4ee3\u7801\u653e\u5728\u5b98\u7f51\u4e3b\u9875\u7684 \u4e4b\u524d\u3002 \u5982\uff1a \u8bf4\u660e this.push({})\u4e2d\u7684\u53c2\u6570\u662f\u4e00\u4e2aJSON\u5bf9\u8c61\uff0c\u8be5JSON\u5bf9\u8c61\u4fbf\u662f\u6574\u4e2a\u9875\u9762\u8ffd\u8e2a\u8fc7\u7a0b\u7684\u4e0a\u4e0b\u6587(context)\u4fe1\u606f\uff0c\u6211\u4eec\u79f0\u4e4b\u4e3a \u9875\u9762\u53c2\u6570 (page parameters)\u3002\u8be5JSON\u53ef\u4ee5\u5305\u542b\u4ee5\u4e0b\u5b57\u6bb5\u5982\u4e0b\uff1a \u5b57\u6bb5\u540d \u5b57\u6bb5\u7c7b\u578b \u5b57\u6bb5\u63cf\u8ff0 channelType String \u8868\u793a\u96c6\u6210\u7684\u89e6\u70b9\u7c7b\u578b\uff0c\u9700\u8981\u5c0f\u5199\u82f1\u6587\u5b57\u6bcd\uff0c\u6bd4\u5982\u516c\u53f8\u7684\u82f1\u6587\u540d\uff0c\u6216\u8005\u7f51\u7ad9\u7684\u57df\u540d channelName String \u89e6\u70b9\u7684\u540d\u5b57\uff0c\u6bd4\u5982\u516c\u53f8\u7f51\u7ad9\u7684\u540d\u5b57 userId String \u7528\u6237\u6807\u8bc6\uff0c\u5982\u679c\u516c\u53f8\u7f51\u7ad9\u6709\u7528\u6237\u4f53\u7cfb\uff0c\u53ef\u4ee5\u662f\u7528\u6237\u7684id\u3002 source String \u8bbf\u95ee\u6765\u6e90 tag String \u5185\u5bb9\u6807\u7b7e\uff0c\u591a\u4e2a\u6807\u7b7e\u53ef\u4ee5\u7528\u9017\u53f7\u5206\u5f00 this.track()\u51fd\u6570\u7528\u6237\u8bb0\u5f55\u7528\u6237\u7684\u8bbf\u95ee\u884c\u4e3a\uff0c\u9664\u4e86open_page\u884c\u4e3a\uff0c\u6211\u4eec\u8fd8\u53ef\u4ee5\u901a\u8fc7\u81ea\u5b9a\u4e49\u4e00\u4e9b\u4e8b\u4ef6\uff0c\u6765\u8ddf\u8e2a\u7528\u6237\u7684\u9875\u9762\u70b9\u51fb\u884c\u4e3a\u3002track()\u5177\u6709\u4ee5\u4e0b\u53c2\u6570\uff1a function track(event, targetName, targetId, properties, callback) event \u81ea\u5b9a\u4e49\u4e8b\u4ef6\u7684id\uff0c\u540e\u6587\u4f1a\u6709\u63cf\u8ff0 targetName \u884c\u4e3a\u8ddf\u8e2a\u7684\u76ee\u6807\u540d\u5b57\uff0c\u4f8b\u5982\uff1a\u6536\u85cf\u5546\u54c1 targetId \u884c\u4e3a\u8ddf\u8e2a\u7684\u76ee\u6807id proprerties \u53ef\u7701\u7565\uff0c\u5982\u679c\u63d0\u4f9b\uff0c\u4f1a\u8986\u76d6push()\u6240\u8bbe\u7f6e\u7684\u9875\u9762\u53c2\u6570 callback \u53ef\u7701\u7565\uff0c\u5982\u679c\u63d0\u4f9b\uff0c\u5728\u5b8c\u6210track\u53d1\u9001\u52a8\u4f5c\u540e\uff0c\u8be5callback\u4f1a\u88ab\u8c03\u7528 \u6ce8 \uff1atargetName\u548ctargetId\u5fc5\u987b\u540c\u65f6\u51fa\u73b0\u6216\u540c\u65f6\u7701\u7565 \u4f8b\u5b50 \uff1athis.track(\u2018c_1481629160265\u2019, \u2018\u6536\u85cf\u5546\u54c1\u2019, \u2018p001\u2019)","title":"Home"},{"location":"track/EVENT_GUIDE/","text":"\u65b0\u5efa\u81ea\u5b9a\u4e49\u4e8b\u4ef6 1. \u8fdb\u5165\u8bbe\u7f6e\u4e2d\u5fc3\u9875\u9762 \u70b9\u51fb DM Hub \u5e73\u53f0\u9996\u9875\u53f3\u4e0a\u89d2\u7684\u9f7f\u8f6e\u56fe\u6807\uff0c\u9009\u62e9 \u8bbe\u7f6e\u4e2d\u5fc3 \u9009\u9879\uff0c\u8fdb\u5165\u8bbe\u7f6e\u4e2d\u5fc3\u9875\u9762\u3002 2. \u8fdb\u5165\u5ba2\u6237\u4e8b\u4ef6\u9875\u9762 \u5728\u8bbe\u7f6e\u4e2d\u5fc3\u9875\u9762\u9009\u62e9 \u5ba2\u6237\u4e8b\u4ef6 \u9009\u9879\u8fdb\u5165\u5ba2\u6237\u4e8b\u4ef6\u9875\u9762\u3002 3. \u65b0\u5efa\u81ea\u5b9a\u4e49\u4e8b\u4ef6 \u5728\u5ba2\u6237\u4e8b\u4ef6\u9875\u9762\u70b9\u51fb + \u65b0\u5efa\u81ea\u5b9a\u4e49\u4e8b\u4ef6 \u6309\u94ae\uff0c\u5728\u5f39\u51fa\u7684\u7a97\u53e3\u4e2d\u65b0\u5efa\u81ea\u5b9a\u4e49\u4e8b\u4ef6\u3002 \u5728\u65b0\u5efa\u81ea\u5b9a\u4e49\u4e8b\u4ef6\u65f6\u53ef\u4ee5\u6dfb\u52a0\u81ea\u5b9a\u4e49\u5c5e\u6027\u3002","title":"\u65b0\u5efa\u81ea\u5b9a\u4e49\u4e8b\u4ef6"},{"location":"track/EVENT_GUIDE/#_1","text":"","title":"\u65b0\u5efa\u81ea\u5b9a\u4e49\u4e8b\u4ef6"},{"location":"track/EVENT_GUIDE/#1","text":"\u70b9\u51fb DM Hub \u5e73\u53f0\u9996\u9875\u53f3\u4e0a\u89d2\u7684\u9f7f\u8f6e\u56fe\u6807\uff0c\u9009\u62e9 \u8bbe\u7f6e\u4e2d\u5fc3 \u9009\u9879\uff0c\u8fdb\u5165\u8bbe\u7f6e\u4e2d\u5fc3\u9875\u9762\u3002","title":"1. \u8fdb\u5165\u8bbe\u7f6e\u4e2d\u5fc3\u9875\u9762"},{"location":"track/EVENT_GUIDE/#2","text":"\u5728\u8bbe\u7f6e\u4e2d\u5fc3\u9875\u9762\u9009\u62e9 \u5ba2\u6237\u4e8b\u4ef6 \u9009\u9879\u8fdb\u5165\u5ba2\u6237\u4e8b\u4ef6\u9875\u9762\u3002","title":"2. \u8fdb\u5165\u5ba2\u6237\u4e8b\u4ef6\u9875\u9762"},{"location":"track/EVENT_GUIDE/#3","text":"\u5728\u5ba2\u6237\u4e8b\u4ef6\u9875\u9762\u70b9\u51fb + \u65b0\u5efa\u81ea\u5b9a\u4e49\u4e8b\u4ef6 \u6309\u94ae\uff0c\u5728\u5f39\u51fa\u7684\u7a97\u53e3\u4e2d\u65b0\u5efa\u81ea\u5b9a\u4e49\u4e8b\u4ef6\u3002 \u5728\u65b0\u5efa\u81ea\u5b9a\u4e49\u4e8b\u4ef6\u65f6\u53ef\u4ee5\u6dfb\u52a0\u81ea\u5b9a\u4e49\u5c5e\u6027\u3002","title":"3. \u65b0\u5efa\u81ea\u5b9a\u4e49\u4e8b\u4ef6"},{"location":"track/MiniProgram_SDK_User_Guide/","text":"\u4e0b\u8f7d sdk \u4eceDM Hub\u7684\u8bbe\u7f6e\u4e2d\u5fc3\u4e0b\u8f7d\uff0c\u8def\u5f84\u4e3a\uff1a\u8bbe\u7f6e\u4e2d\u5fc3- \u5fae\u4fe1\u8bbe\u7f6e- \u5c0f\u7a0b\u5e8f\u8bbe\u7f6e \u5728 app.js \u7b2c\u4e00\u884c\u52a0\u4e0a. require('./utils/cl_tracker.js'); \u73b0\u5728\u5728\u5176\u4ed6 Page \u91cc\u5c31\u53ef\u4ee5\u901a\u8fc7 getApp \u6765\u4f7f\u7528Convertlab\u7684\u8ffd\u8e2a\u4e86 \u5f53\u62ff\u5230\u5bf9\u5e94\u8eab\u4efd\u65f6,\u8bbe\u7f6e\u5bf9\u5e94\u7684\u8eab\u4efd\u7c7b\u578b(type)\u548cvalue, \u4f8b\u5982\uff1a var app = getApp(); app.cl_tracker.push({ identityType: 'wechat', //\u5982\u679cidentityValue\u4f7f\u7528unionid,identityType\u8bf7\u8bbe\u7f6e\u4e3a wechat-unionid identityValue: 'oI_M5xC_YlVhrGe5kcYhkzEQM6wM' // identityValue \u662f\u7528\u6237\u7684open_id\u6216unionid }); \u8eab\u4efd\u8bbe\u7f6e\u8bf7\u53c2\u8003\uff1ahttp://help.convertlab.com/hc/kb/article/1108635 \u5982\u679c\u6709\u591a\u4e2a\u8eab\u4efd: (\u6700\u591a\u540c\u65f6\u652f\u63013\u4e2a\u8eab\u4efd) var app = getApp(); app.cl_tracker.push({ identityType: 'wechat', identityValue: 'oI_M5xC_YlVhrGe5kcYhkzEQM6wM', // identityValue \u662f\u7528\u6237\u7684open_id identityType2: 'wechat-unionid', identityValue2: 'o7QvZ1TT5oo1F8rNJvchn1GGv5t8', identityType3: 'customer_identity1', identityValue3: 'the_customer_identity_value1', }); \u5982\u679c\u4e0d\u662f\u540c\u65f6\u62ff\u5230\u6240\u6709\u7684\u8eab\u4efd\uff0c \u53ef\u4ee5\u5206\u522bpush identityType app.cl_tracker.push({ identityType: 'wechat', identityValue: 'openId_openId_openId', }); app.cl_tracker.push({ identityType1: 'wechat-unionid', identityValue1: 'unionId_unionId_union_Id', }); \u6ce8\u610f\uff1a\u540c\u4e00\u4e2aidentityType\u5e94\u8be5\u6c38\u8fdc\u5bf9\u5e94\u4e00\u79cd\u8eab\u4efd\u7c7b\u578b\u3002 \u5982\u679c\u4f7f\u7528 app.cl_tracker.push({ identityType: 'wechat', identityValue: 'openId_openId_openId', }); \u53c8\u4f7f\u7528 app.cl_tracker.push({ identityType: 'wechat-unionid', identityValue: 'openId_openId_openId', }); \u7ed3\u679c\u662f\u7b2c\u4e00\u4e2aidentityType: 'wechat' \u662f\u65e0\u6548\u7684\u3002 \u6ce8\u610f: \u8bf7\u5728\u5fae\u4fe1\u5f00\u53d1\u8bbe\u7f6e\uff0c\u670d\u52a1\u5668\u57df\u540d\u7684 request \u5408\u6cd5\u57df\u540d\u5185\uff0c \u9700\u8981\u628a\u670d\u52a1\u5668\u5730\u5740\u52a0\u4e0a. \u8be6\u60c5\u53c2\u8003https://developers.weixin.qq.com/miniprogram/dev/api/api-network.html \u670d\u52a1\u5668\u5730\u5740\u901a\u5e38\u662fcbe.convertlab.com\uff0c \u5982\u679c\u662f\u79c1\u6709\u90e8\u7f72\uff0c\u8bf7\u8be2\u95ee\u5bf9\u63a5\u4eba\u5458 \u6807\u8bc6\u7528\u6237 \u5728\u6ca1\u6709identityValue\u4e4b\u524d\uff0c\u4e8b\u4ef6\u5c06\u4e00\u76f4\u662f\u533f\u540d\u7684\u3002 \u5f53\u83b7\u5f97\u7528\u6237\u7684openId\u540e\uff0c\u8bf7\u5c06\u5b83\u8bbe\u7f6e\u5728\u5168\u5c40\u53c2\u6570\u4e2d cl_tracker.push({ identityType:'wechat', identityValue:'oI_M5xC_YlVhrGe5kcYhkzEQM6wM' }); \u8bb0\u5f55\u4e8b\u4ef6 cl_tracker.track( 'mini_program_open', { targetName:'\u5c0f\u7a0b\u5e8f\u540d\u79f0', targetId:'xiao_cheng_xu_id', ... // \u5176\u4ed6\u53c2\u6570 }, callback // \u4e8b\u4ef6\u56de\u8c03\uff0c\u53ef\u4ee5\u4e0d\u4f20 ); \u6216\u8005\uff1a cl_tracker.track( 'mini_program_open', '\u5c0f\u7a0b\u5e8f\u540d\u79f0', 'xiao_cheng_xu_id', {}, // \u5176\u4ed6\u53c2\u6570\uff0c\u53ef\u4ee5\u4e0d\u4f20 callback // \u4e8b\u4ef6\u56de\u8c03\uff0c\u53ef\u4ee5\u4e0d\u4f20 ); \u57cb\u70b9\u4f7f\u7528\u8be6\u60c5\u8bf7\u53c2\u8003 http://help.convertlab.com/hc/kb/article/159033/ \u6ce8\u610f\uff1a\u5c0f\u7a0b\u5e8f\u53ea\u80fd\u4f7f\u7528javascript\u6765\u63d0\u4ea4\u4e8b\u4ef6","title":"\u901a\u8fc7\u5fae\u4fe1\u5c0f\u7a0b\u5e8f SDK \u8fdb\u884c\u6570\u636e\u91c7\u96c6"},{"location":"track/MiniProgram_SDK_User_Guide/#sdk","text":"\u4eceDM Hub\u7684\u8bbe\u7f6e\u4e2d\u5fc3\u4e0b\u8f7d\uff0c\u8def\u5f84\u4e3a\uff1a\u8bbe\u7f6e\u4e2d\u5fc3- \u5fae\u4fe1\u8bbe\u7f6e- \u5c0f\u7a0b\u5e8f\u8bbe\u7f6e \u5728 app.js \u7b2c\u4e00\u884c\u52a0\u4e0a. require('./utils/cl_tracker.js'); \u73b0\u5728\u5728\u5176\u4ed6 Page \u91cc\u5c31\u53ef\u4ee5\u901a\u8fc7 getApp \u6765\u4f7f\u7528Convertlab\u7684\u8ffd\u8e2a\u4e86 \u5f53\u62ff\u5230\u5bf9\u5e94\u8eab\u4efd\u65f6,\u8bbe\u7f6e\u5bf9\u5e94\u7684\u8eab\u4efd\u7c7b\u578b(type)\u548cvalue, \u4f8b\u5982\uff1a var app = getApp(); app.cl_tracker.push({ identityType: 'wechat', //\u5982\u679cidentityValue\u4f7f\u7528unionid,identityType\u8bf7\u8bbe\u7f6e\u4e3a wechat-unionid identityValue: 'oI_M5xC_YlVhrGe5kcYhkzEQM6wM' // identityValue \u662f\u7528\u6237\u7684open_id\u6216unionid }); \u8eab\u4efd\u8bbe\u7f6e\u8bf7\u53c2\u8003\uff1ahttp://help.convertlab.com/hc/kb/article/1108635 \u5982\u679c\u6709\u591a\u4e2a\u8eab\u4efd: (\u6700\u591a\u540c\u65f6\u652f\u63013\u4e2a\u8eab\u4efd) var app = getApp(); app.cl_tracker.push({ identityType: 'wechat', identityValue: 'oI_M5xC_YlVhrGe5kcYhkzEQM6wM', // identityValue \u662f\u7528\u6237\u7684open_id identityType2: 'wechat-unionid', identityValue2: 'o7QvZ1TT5oo1F8rNJvchn1GGv5t8', identityType3: 'customer_identity1', identityValue3: 'the_customer_identity_value1', }); \u5982\u679c\u4e0d\u662f\u540c\u65f6\u62ff\u5230\u6240\u6709\u7684\u8eab\u4efd\uff0c \u53ef\u4ee5\u5206\u522bpush identityType app.cl_tracker.push({ identityType: 'wechat', identityValue: 'openId_openId_openId', }); app.cl_tracker.push({ identityType1: 'wechat-unionid', identityValue1: 'unionId_unionId_union_Id', }); \u6ce8\u610f\uff1a\u540c\u4e00\u4e2aidentityType\u5e94\u8be5\u6c38\u8fdc\u5bf9\u5e94\u4e00\u79cd\u8eab\u4efd\u7c7b\u578b\u3002 \u5982\u679c\u4f7f\u7528 app.cl_tracker.push({ identityType: 'wechat', identityValue: 'openId_openId_openId', }); \u53c8\u4f7f\u7528 app.cl_tracker.push({ identityType: 'wechat-unionid', identityValue: 'openId_openId_openId', }); \u7ed3\u679c\u662f\u7b2c\u4e00\u4e2aidentityType: 'wechat' \u662f\u65e0\u6548\u7684\u3002 \u6ce8\u610f: \u8bf7\u5728\u5fae\u4fe1\u5f00\u53d1\u8bbe\u7f6e\uff0c\u670d\u52a1\u5668\u57df\u540d\u7684 request \u5408\u6cd5\u57df\u540d\u5185\uff0c \u9700\u8981\u628a\u670d\u52a1\u5668\u5730\u5740\u52a0\u4e0a. \u8be6\u60c5\u53c2\u8003https://developers.weixin.qq.com/miniprogram/dev/api/api-network.html \u670d\u52a1\u5668\u5730\u5740\u901a\u5e38\u662fcbe.convertlab.com\uff0c \u5982\u679c\u662f\u79c1\u6709\u90e8\u7f72\uff0c\u8bf7\u8be2\u95ee\u5bf9\u63a5\u4eba\u5458","title":"\u4e0b\u8f7d sdk"},{"location":"track/MiniProgram_SDK_User_Guide/#_1","text":"\u5728\u6ca1\u6709identityValue\u4e4b\u524d\uff0c\u4e8b\u4ef6\u5c06\u4e00\u76f4\u662f\u533f\u540d\u7684\u3002 \u5f53\u83b7\u5f97\u7528\u6237\u7684openId\u540e\uff0c\u8bf7\u5c06\u5b83\u8bbe\u7f6e\u5728\u5168\u5c40\u53c2\u6570\u4e2d cl_tracker.push({ identityType:'wechat', identityValue:'oI_M5xC_YlVhrGe5kcYhkzEQM6wM' });","title":"\u6807\u8bc6\u7528\u6237"},{"location":"track/MiniProgram_SDK_User_Guide/#_2","text":"cl_tracker.track( 'mini_program_open', { targetName:'\u5c0f\u7a0b\u5e8f\u540d\u79f0', targetId:'xiao_cheng_xu_id', ... // \u5176\u4ed6\u53c2\u6570 }, callback // \u4e8b\u4ef6\u56de\u8c03\uff0c\u53ef\u4ee5\u4e0d\u4f20 ); \u6216\u8005\uff1a cl_tracker.track( 'mini_program_open', '\u5c0f\u7a0b\u5e8f\u540d\u79f0', 'xiao_cheng_xu_id', {}, // \u5176\u4ed6\u53c2\u6570\uff0c\u53ef\u4ee5\u4e0d\u4f20 callback // \u4e8b\u4ef6\u56de\u8c03\uff0c\u53ef\u4ee5\u4e0d\u4f20 ); \u57cb\u70b9\u4f7f\u7528\u8be6\u60c5\u8bf7\u53c2\u8003 http://help.convertlab.com/hc/kb/article/159033/ \u6ce8\u610f\uff1a\u5c0f\u7a0b\u5e8f\u53ea\u80fd\u4f7f\u7528javascript\u6765\u63d0\u4ea4\u4e8b\u4ef6","title":"\u8bb0\u5f55\u4e8b\u4ef6"},{"location":"track/androidcollection/","text":"\u8bf7\u70b9\u51fb\u94fe\u63a5 Android SDK \u5f00\u53d1\u6307\u5357","title":"Androidcollection"},{"location":"track/customerevent/","text":"\u767b\u5f55DM Hub\u7cfb\u7edf\uff0c\u70b9\u51fb\u83dc\u5355\u4e2d\u7684 \u5ba2\u6237 \u5ba2\u6237\u8bbe\u7f6e \u5ba2\u6237\u5173\u952e\u4e8b\u4ef6 \u4e2d\u7684 \u65b0\u5efa\u5ba2\u6237\u4e8b\u4ef6 \u3002 \u70b9\u51fb \u786e\u5b9a \uff0c\u5728\u4e8b\u4ef6\u5217\u8868\u4e2d\u70b9\u51fb\u65b0\u5efa\u4e8b\u4ef6\u4e2d\u7684i\u56fe\u6807\uff0c\u83b7\u53d6\u81ea\u5b9a\u4e49\u4e8b\u4ef6ID\uff1a \u901a\u8fc7\u6807\u7b7e\u6dfb\u63d0\u4ea4\u81ea\u5b9a\u4e49\u4e8b\u4ef6 track()\u51fd\u6570\u7684\u53c2\u6570event, targetName, targetId\u53ef\u4ee5\u4f7f\u7528\u6807\u7b7e\u7684\u5f62\u5f0f\u5411\u670d\u52a1\u5668\u63d0\u4ea4\u3002\u5728\u6309\u94ae\u6216\u94fe\u63a5\u4e0a\uff0c\u5206\u522b\u6dfb\u52a0\u5982\u4e0b\u5c5e\u6027\uff1a - data-cl-event: \u76f8\u5f53\u4e8etrack\u7684event\u53c2\u6570 - data-cl-name: \u76f8\u5f53\u4e8etrack\u7684targetName\u53c2\u6570 - data-cl-id: \u76f8\u5f53\u4e8etrack\u7684targetId\u53c2\u6570 button data-cl-event=\u2018c_1483532925683\u2019 data-cl-name=\u2019\u6536\u85cf\u5546\u54c1\u2019 data-cl-id=\u2019p001\u2019 \u6536\u85cf /button \u901a\u8fc7meta\u6807\u7b7e\u63d0\u4ea4\u9605\u8bfb\u6807\u7b7e \u9664\u4e86\u5728\u9875\u9762\u53c2\u6570\u4e2d\u6307\u5b9a\u5185\u5bb9\u6807\u7b7e\u5916\uff0c\u8fd8\u53ef\u4ee5\u901a\u8fc7meta\u6807\u7b7e\uff0c\u7ed9\u9605\u8bfb\u8fc7\u8be5\u9875\u9762\u7684\u7528\u6237\u6253\u4e0a\u9605\u8bfb\u6807\u7b7e\uff0c\u65b9\u6cd5\u5982\u4e0b\uff1a meta name=\u201dcl_content_tag\u201d content=\u201d\u5496\u5561,\u63d0\u795e\u201d","title":"Customerevent"},{"location":"track/customerevent/#_1","text":"track()\u51fd\u6570\u7684\u53c2\u6570event, targetName, targetId\u53ef\u4ee5\u4f7f\u7528\u6807\u7b7e\u7684\u5f62\u5f0f\u5411\u670d\u52a1\u5668\u63d0\u4ea4\u3002\u5728\u6309\u94ae\u6216\u94fe\u63a5\u4e0a\uff0c\u5206\u522b\u6dfb\u52a0\u5982\u4e0b\u5c5e\u6027\uff1a - data-cl-event: \u76f8\u5f53\u4e8etrack\u7684event\u53c2\u6570 - data-cl-name: \u76f8\u5f53\u4e8etrack\u7684targetName\u53c2\u6570 - data-cl-id: \u76f8\u5f53\u4e8etrack\u7684targetId\u53c2\u6570 button data-cl-event=\u2018c_1483532925683\u2019 data-cl-name=\u2019\u6536\u85cf\u5546\u54c1\u2019 data-cl-id=\u2019p001\u2019 \u6536\u85cf /button","title":"\u901a\u8fc7\u6807\u7b7e\u6dfb\u63d0\u4ea4\u81ea\u5b9a\u4e49\u4e8b\u4ef6"},{"location":"track/customerevent/#meta","text":"\u9664\u4e86\u5728\u9875\u9762\u53c2\u6570\u4e2d\u6307\u5b9a\u5185\u5bb9\u6807\u7b7e\u5916\uff0c\u8fd8\u53ef\u4ee5\u901a\u8fc7meta\u6807\u7b7e\uff0c\u7ed9\u9605\u8bfb\u8fc7\u8be5\u9875\u9762\u7684\u7528\u6237\u6253\u4e0a\u9605\u8bfb\u6807\u7b7e\uff0c\u65b9\u6cd5\u5982\u4e0b\uff1a meta name=\u201dcl_content_tag\u201d content=\u201d\u5496\u5561,\u63d0\u795e\u201d","title":"\u901a\u8fc7meta\u6807\u7b7e\u63d0\u4ea4\u9605\u8bfb\u6807\u7b7e"},{"location":"track/dmhubsdk_android_guide/","text":"1. \u4f7f\u7528\u8bf4\u660e \u672c\u6587\u662f DMHub Android SDK \u6807\u51c6\u7684\u5f00\u53d1\u6307\u5357\u6587\u6863\uff0c\u7528\u4ee5\u6307\u5bfc SDK \u7684\u96c6\u6210\u548c\u4f7f\u7528\uff0c\u9ed8\u8ba4\u8bfb\u8005\u5df2\u7ecf\u5177\u5907\u4e00\u5b9a\u7684 Android \u5f00\u53d1\u80fd\u529b\u3002 \u672c\u7bc7\u6307\u5357\u5339\u914d\u7684 DMHub Android SDK \u7248\u672c\u4e3a\uff1a v2.0.0 \u3002 DMHub Android SDK 2.0.0 \u8981\u6c42 Java = 1.7 Android API = 14 \u3002 2. \u521b\u5efa\u5e94\u7528 \u96c6\u6210 DMHub SDK \u4e4b\u524d\uff0c\u60a8\u9996\u5148\u9700\u8981\u5230 DM Hub \u5e73\u53f0\u521b\u5efa\u5e94\u7528\u3002 2.1 \u8fdb\u5165\u5e94\u7528\u8bbe\u7f6e\u9875\u9762 \u70b9\u51fb DM Hub \u5e73\u53f0\u9996\u9875\u53f3\u4e0a\u89d2\u7684\u9f7f\u8f6e\u56fe\u6807\uff0c\u9009\u62e9 \u5f00\u653e\u4e0e\u96c6\u6210 \u9009\u9879\uff0c\u8fdb\u5165\u5e94\u7528\u8bbe\u7f6e\u9875\u9762\u3002 2.2 \u65b0\u5efa\u5e94\u7528 \u5728\u5e94\u7528\u8bbe\u7f6e\u9875\u9762\u70b9\u51fb\u53f3\u4e0a\u89d2\u7684 + \u65b0\u5efa \u6309\u94ae\uff0c\u5728\u5f39\u51fa\u7684\u521b\u5efa\u5e94\u7528\u5f39\u51fa\u6846\u4e2d\u586b\u5199\u5e94\u7528\u4fe1\u606f\u540e\u4fdd\u5b58\u3002\u5e94\u7528\u521b\u5efa\u6210\u529f\u4e4b\u540e\uff0c\u5373\u53ef\u83b7\u5f97\u96c6\u6210 SDK \u6240\u9700\u7684 appid\u3002 3. \u5bfc\u5165 SDK 3.1 \u4e0b\u8f7d SDK \u70b9\u51fb\u4e0b\u8f7d 3.2 \u6dfb\u52a0 jar \u5305 \u4e0b\u8f7d\u89e3\u538b\u540e\u590d\u5236 dmhubsdk-android-2.0.0.jar \u6587\u4ef6\u5230\u5de5\u7a0b\u4e3b module \u7684 libs \u76ee\u5f55\u4e0b\uff0c\u53f3\u952e jar \u5305\uff0c\u9009\u62e9 Add As Library... \uff0c\u5c06 jar \u5305\u4f5c\u4e3a Library \u6dfb\u52a0\u5230\u4e3b module \u4e2d\u3002 3.3 \u914d\u7f6e AndroidManifest.xml \u914d\u7f6e SDK \u6240\u9700\u6743\u9650 uses-permission android:name= android.permission.INTERNET / uses-permission android:name= android.permission.READ_PHONE_STATE / uses-permission android:name= android.permission.ACCESS_NETWORK_STATE / uses-permission android:name= android.permission.ACCESS_WIFI_STATE / uses-permission android:name= android.permission.BLUETOOTH / \u914d\u7f6e SDK \u6240\u9700\u53c2\u6570 \u5728 AndroidManifest.xml \u4e2d\u7684 application /application \u6807\u7b7e\u5185\u914d\u7f6e SDK \u76f8\u5173\u53c2\u6570\uff1a !-- DMHubSDK \u76f8\u5173\u53c2\u6570 -- meta-data android:name= com.convertlab.dmhubsdk.config.DMHubSDKAppId android:value= [Must Configure] The appid get from DM Hub. / meta-data android:name= com.convertlab.dmhubsdk.config.Endpoint android:value= A string URL endpoint. If you are not running DMHubSDK in the standard production environment, you need to configure this value. Defaults to 'https://api.convertlab.com' / meta-data android:name= com.convertlab.dmhubsdk.config.EnableDebugLogging android:value= A boolean value. If true, emit more detailed log messages. Defaults to false. / meta-data android:name= com.convertlab.dmhubsdk.config.FlushInterval android:value= An integer number of milliseconds, the maximum time to wait before upload if the bulk upload limit isn't reached. Defaults to 30000 millis / meta-data android:name= com.convertlab.dmhubsdk.config.BulkUploadLimit android:value= An integer count of events, the maximum number of events to queue before an upload attempt. This value should less than 50. Defaults to 40. / meta-data android:name= com.convertlab.dmhubsdk.config.UploadOnlyWifi android:value= A boolean value. If true, upload data only in wifi environment. Defaults to false. / meta-data android:name= com.convertlab.dmhubsdk.config.MaximumBackgroundDuration android:value= An integer number of milliseconds, if App enters the background more than this duration and open again from background, we will count as a new open. Defaults to 30000 millis. / 4. \u521d\u59cb\u5316 \u4f7f\u7528 SDK \u8bb0\u5f55\u4e8b\u4ef6\u4e4b\u524d\u9700\u8981\u5148\u8fdb\u884c\u521d\u59cb\u5316\uff0c\u5728\u6574\u4e2a\u5e94\u7528\u7a0b\u5e8f\u5168\u5c40\uff0c\u53ea\u9700\u8981\u8fdb\u884c\u4e00\u6b21\u521d\u59cb\u5316\u3002 - \u63a5\u53e3\u5b9a\u4e49 /** * \u5728\u81ea\u5b9a\u4e49\u7684 Application \u4e2d\u521d\u59cb\u5316 DMHubSDK * \u5728\u6574\u4e2a\u5e94\u7528\u7a0b\u5e8f\u5168\u5c40\uff0c\u53ea\u9700\u8981\u8fdb\u884c\u4e00\u6b21\u521d\u59cb\u5316 */ public static void init(@NonNull final Context context); \u4ee3\u7801\u793a\u4f8b \u5728\u81ea\u5b9a\u4e49\u7684 Application \u4e2d\u7684 onCreate \u65b9\u6cd5\u4e2d\u5f00\u542f\u8c03\u8bd5\u6a21\u5f0f\u5e76\u8fdb\u884c\u521d\u59cb\u5316\uff1a public class YourApp extends Application { @Override public void onCreate() { super.onCreate(); // \u521d\u59cb\u5316 DMHubSDK DMHubSDK.init(this); } } 5. \u5ba2\u6237\u8eab\u4efd \u5ba2\u6237\u8eab\u4efd\u662f DM Hub \u4e2d\u5ba2\u6237\u7684\u6807\u8bc6\uff0cApp \u7aef SDK \u91c7\u96c6\u5230\u7684\u5ba2\u6237\u4e8b\u4ef6\u4ee5\u53ca\u5ba2\u6237\u76f8\u5173\u4fe1\u606f\u9700\u8981\u901a\u8fc7\u5ba2\u6237\u8eab\u4efd\u4e0e\u5ba2\u6237\u8fdb\u884c\u7ed1\u5b9a\u3002 5.1 \u8bbe\u7f6e\u5ba2\u6237\u8eab\u4efd \u4e3a\u4e86\u5c06\u5ba2\u6237\u4e8b\u4ef6\u4ee5\u53ca\u5ba2\u6237\u76f8\u5173\u4fe1\u606f\u4e0e\u5ba2\u6237\u7ed1\u5b9a\uff0c\u9700\u8981\u5728 App \u83b7\u53d6\u5230\u5ba2\u6237\u8eab\u4efd\u4fe1\u606f\u65f6\uff08\u5982\u5ba2\u6237\u6ce8\u518c\u6216\u767b\u5f55\uff09\uff0c\u8bbe\u7f6e\u5ba2\u6237\u8eab\u4efd\u3002 \u591a\u6b21\u8c03\u7528\u8bbe\u7f6e\u8eab\u4efd\u63a5\u53e3\uff0c\u65b0\u7684\u8eab\u4efd\u5c06\u4f1a\u8986\u76d6\u65e7\u7684\u8eab\u4efd\uff0c\u6b64\u540e\u4ea7\u751f\u7684\u5ba2\u6237\u4e8b\u4ef6\u5c06\u4e0e\u65b0\u8eab\u4efd\u5bf9\u5e94\u7684\u5ba2\u6237\u7ed1\u5b9a\u3002 \u5ba2\u6237\u5728\u672a\u8bbe\u7f6e\u5ba2\u6237\u8eab\u4efd\u671f\u95f4\u4ea7\u751f\u7684\u4e8b\u4ef6\u5c06\u4f1a\u4f5c\u4e3a\u533f\u540d\u4e8b\u4ef6\u8fdb\u884c\u8bb0\u5f55\uff0c\u533f\u540d\u4e8b\u4ef6\u4f1a\u4fdd\u5b58 30 \u5929\u3002 \u63a5\u53e3\u5b9a\u4e49 /** * \u8bbe\u7f6e\u5ba2\u6237\u8eab\u4efd\uff0c\u7528\u4e8e\u7ed1\u5b9a\u4e8b\u4ef6 * \u5982\u679c\u91cd\u590d\u8bbe\u7f6e\uff0c\u5c06\u4f1a\u4f7f\u7528\u65b0\u7684\u5ba2\u6237\u8eab\u4efd\u8fdb\u884c\u4e8b\u4ef6\u7ed1\u5b9a */ public static void setIdentity(final String identityType, final String identityValue); 5.2 \u5f53\u524d\u5ba2\u6237\u8eab\u4efd \u83b7\u53d6\u5f53\u524d\u8bbe\u7f6e\u7684\u5ba2\u6237\u8eab\u4efd\u3002 \u63a5\u53e3\u5b9a\u4e49 /** * \u83b7\u53d6\u5f53\u524d\u8bbe\u7f6e\u7684\u5ba2\u6237\u8eab\u4efd * @return \u5982\u679c\u5f53\u524d\u8fd8\u672a\u8bbe\u7f6e\u8fc7\u6709\u6548\u7684\u5ba2\u6237\u8eab\u4efd\uff0c\u8fd4\u56de null */ public static DMHubIdentity currentIdentity(); 5.3 \u6e05\u9664\u5ba2\u6237\u8eab\u4efd \u6e05\u9664\u5ba2\u6237\u8eab\u4efd\u4e4b\u540e\u4ea7\u751f\u7684\u5ba2\u6237\u4e8b\u4ef6\u5c06\u4f1a\u4f5c\u4e3a\u533f\u540d\u4e8b\u4ef6\u8fdb\u884c\u8bb0\u5f55\u3002 \u63a5\u53e3\u5b9a\u4e49 /** * \u6e05\u9664\u5f53\u524d\u8bbe\u7f6e\u7684\u5ba2\u6237\u8eab\u4efd * @return \u5f53\u524d\u8bbe\u7f6e\u7684\u5ba2\u6237\u8eab\u4efd\uff0c\u5982\u679c\u5f53\u524d\u8fd8\u672a\u8bbe\u7f6e\u8fc7\u6709\u6548\u7684\u5ba2\u6237\u8eab\u4efd\uff0c\u8fd4\u56de null */ public static DMHubIdentity clearIdentity(); 6. \u8ddf\u8e2a\u5ba2\u6237\u4e8b\u4ef6 6.1 \u8ddf\u8e2a\u81ea\u5b9a\u4e49\u5ba2\u6237\u4e8b\u4ef6 \u6839\u636e\u4e1a\u52a1\u9700\u6c42\u5728 DM Hub \u540e\u53f0 \u65b0\u5efa\u81ea\u5b9a\u4e49\u4e8b\u4ef6 \u540e\uff0c\u53ef\u4ee5\u8c03\u7528\u8be5 API \u5bf9\u81ea\u5b9a\u4e49\u5ba2\u6237\u4e8b\u4ef6\u8fdb\u884c\u8ddf\u8e2a\u3002\u5728\u65b0\u5efa\u81ea\u5b9a\u4e49\u4e8b\u4ef6\u65f6\uff0c\u8fd8\u53ef\u4ee5\u6839\u636e\u9700\u8981\u6dfb\u52a0\u81ea\u5b9a\u4e49\u5c5e\u6027\uff0c\u5e76\u5728\u8c03\u7528 API \u65f6\u4f5c\u4e3a\u53c2\u6570\u4f20\u5165\u3002 \u63a5\u53e3\u5b9a\u4e49 /** * \u8ddf\u8e2a\u81ea\u5b9a\u4e49\u5ba2\u6237\u4e8b\u4ef6 * * @param eventId \u5728 DM Hub \u4e2d\u65b0\u5efa\u7684\u81ea\u5b9a\u4e49\u4e8b\u4ef6\u7684\u4e8b\u4ef6 Id * @param properties \u4e8b\u4ef6\u7684\u81ea\u5b9a\u4e49\u5c5e\u6027\uff0c\u5fc5\u987b\u4ee5\u5728 DM Hub \u4e2d\u65b0\u5efa\u81ea\u5b9a\u4e49\u4e8b\u4ef6\u65f6\u6dfb\u52a0\u7684\u81ea\u5b9a\u4e49\u5c5e\u6027\u4f5c\u4e3a key */ public static void trackMap(final String eventId, final Map String, Object properties); /** * \u8ddf\u8e2a\u81ea\u5b9a\u4e49\u5ba2\u6237\u4e8b\u4ef6 * * @param eventId \u5728 DM Hub \u4e2d\u65b0\u5efa\u7684\u81ea\u5b9a\u4e49\u4e8b\u4ef6\u7684\u4e8b\u4ef6 Id * @param properties \u4e8b\u4ef6\u7684\u81ea\u5b9a\u4e49\u5c5e\u6027\uff0c\u5fc5\u987b\u4ee5\u5728 DM Hub \u4e2d\u65b0\u5efa\u81ea\u5b9a\u4e49\u4e8b\u4ef6\u65f6\u6dfb\u52a0\u7684\u81ea\u5b9a\u4e49\u5c5e\u6027\u4f5c\u4e3a key */ public static void track(final String eventId, JSONObject properties); /** * \u8ddf\u8e2a\u81ea\u5b9a\u4e49\u5ba2\u6237\u4e8b\u4ef6 * * @param eventId \u5728 DM Hub \u4e2d\u65b0\u5efa\u7684\u81ea\u5b9a\u4e49\u4e8b\u4ef6\u7684\u4e8b\u4ef6 Id */ public static void track(final String eventId); 6.2 \u8ddf\u8e2a\u8fdb\u5165\u3001\u79bb\u5f00\u89c6\u56fe\u4e8b\u4ef6 \u63a5\u53e3\u5b9a\u4e49 /** * \u8ddf\u8e2a\u8fdb\u5165\u89c6\u56fe\u4e8b\u4ef6 * * @param viewName \u89c6\u56fe\u7684\u540d\u79f0\uff0c\u5ba2\u6237\u65f6\u95f4\u8f74\u4e0a\u7684\u663e\u793a\u4e3a\uff1a'\u8fdb\u5165\u624b\u673a\u89c6\u56fe ${viewName}' */ public static void trackOpenView(final String viewName); /** * \u8ddf\u8e2a\u79bb\u5f00\u89c6\u56fe\u4e8b\u4ef6 * * @param viewName \u89c6\u56fe\u7684\u540d\u79f0\uff0c\u5ba2\u6237\u65f6\u95f4\u8f74\u4e0a\u7684\u663e\u793a\u4e3a\uff1a'\u79bb\u5f00\u624b\u673a\u89c6\u56fe ${viewName}' */ public static void trackExitView(final String viewName); \u4ee3\u7801\u793a\u4f8b public class YourActivity extends Activity { @Override protected void onResume() { super.onResume(); DMHubSDK.trackOpenView( viewName ); } @Override protected void onPause() { super.onPause(); DMHubSDK.trackExitView( viewName ); } } 6.3 \u8ddf\u8e2a\u901a\u77e5\u63a8\u9001\u76f8\u5173\u4e8b\u4ef6 \u5982\u679c\u60a8\u4f7f\u7528\u4e86 DM Hub \u5e73\u53f0\u63d0\u4f9b\u7684\u901a\u77e5\u63a8\u9001\u529f\u80fd\uff0c\u5219\u53ef\u4ee5\u8c03\u7528 SDK \u63d0\u4f9b\u7684\u76f8\u5173 API \u5bf9\u6765\u81ea DM Hub \u5e73\u53f0\u7684\u901a\u77e5\u63a8\u9001\u76f8\u5173\u4e8b\u4ef6\u8fdb\u884c\u8ddf\u8e2a\u3002 6.3.1 \u8ddf\u8e2a JPush \u63a8\u9001\u76f8\u5173\u4e8b\u4ef6 \u63a5\u53e3\u5b9a\u4e49 /** * \u5f53\u81ea\u5b9a\u4e49\u7684 JPush \u5e7f\u64ad\u63a5\u6536\u5668\u6536\u5230\u6765\u81ea JPush \u7684\u5e7f\u64ad\u65f6\u8c03\u7528 * * @param intent \u6536\u5230\u7684\u5e7f\u64ad\u7684 intent */ public static void onJPushReceiveBroadcast(final Intent intent); \u4ee3\u7801\u793a\u4f8b public class YourJPushReceiver extends BroadcastReceiver { @Override public void onReceive(Context context, Intent intent) { DMHubSDK.onJPushReceiveBroadcast(intent); } } 6.3.2 \u8ddf\u8e2a GeTui \u63a8\u9001\u76f8\u5173\u4e8b\u4ef6 \u63a5\u53e3\u5b9a\u4e49 /** * \u5728\u81ea\u5b9a\u4e49\u7684 GTIntentService \u7684 onReceiveClientId \u65b9\u6cd5\u4e2d\u8c03\u7528 * * @param clientId \u6536\u5230\u7684 clientId */ public static void onGeTuiReceiveClientId(final String clientId); /** * \u5728\u81ea\u5b9a\u4e49\u7684 GTIntentService \u7684 onReceiveMessageData \u65b9\u6cd5\u4e2d\u8c03\u7528 * * @param taskId GTTransmitMessage \u4e2d\u643a\u5e26\u7684 taskId * @param messageId GTTransmitMessage \u4e2d\u643a\u5e26\u7684 messageId * @param payload GTTransmitMessage \u4e2d\u643a\u5e26\u7684 payload */ public static void onGeTuiReceiveMessageData(final String taskId, final String messageId, final byte[] payload); /** * \u5728\u81ea\u5b9a\u4e49\u7684 GTIntentService \u7684 onNotificationMessageArrived \u65b9\u6cd5\u4e2d\u8c03\u7528 * * @param taskId GTNotificationMessage \u4e2d\u643a\u5e26\u7684 taskId * @param messageId GTNotificationMessage \u4e2d\u643a\u5e26\u7684 messageId */ public static void onGeTuiNotificationMessageArrived(final String taskId, final String messageId); \u4ee3\u7801\u793a\u4f8b public class YourIntentService extends GTIntentService { @Override public void onReceiveClientId(Context context, String clientid) { DMHubSDK.onGeTuiReceiveClientId(clientid); } @Override public void onReceiveMessageData(Context context, GTTransmitMessage msg) { String taskId = msg.getTaskId(); String messageId = msg.getMessageId(); byte[] payload = msg.getPayload(); DMHubSDK.onGeTuiReceiveMessageData(taskId, messageId, payload); } @Override public void onNotificationMessageArrived(Context context, GTNotificationMessage gtNotificationMessage) { String taskId = gtNotificationMessage.getTaskId(); String messageId = gtNotificationMessage.getMessageId(); DMHubSDK.onGeTuiNotificationMessageArrived(taskId, messageId); } } 7. \u6df7\u6dc6\u89c4\u5219 \u5728\u5de5\u7a0b\u7684\u6df7\u6dc6\u89c4\u5219\u6587\u4ef6\u4e2d\u6dfb\u52a0\u5982\u4e0b\u89c4\u5219\uff1a # DMHubSDK -dontwarn com.convertlab.** -keep class com.convertlab.** { *; }","title":"\u901a\u8fc7 Android SDK \u8fdb\u884c\u6570\u636e\u91c7\u96c6"},{"location":"track/dmhubsdk_android_guide/#1","text":"\u672c\u6587\u662f DMHub Android SDK \u6807\u51c6\u7684\u5f00\u53d1\u6307\u5357\u6587\u6863\uff0c\u7528\u4ee5\u6307\u5bfc SDK \u7684\u96c6\u6210\u548c\u4f7f\u7528\uff0c\u9ed8\u8ba4\u8bfb\u8005\u5df2\u7ecf\u5177\u5907\u4e00\u5b9a\u7684 Android \u5f00\u53d1\u80fd\u529b\u3002 \u672c\u7bc7\u6307\u5357\u5339\u914d\u7684 DMHub Android SDK \u7248\u672c\u4e3a\uff1a v2.0.0 \u3002 DMHub Android SDK 2.0.0 \u8981\u6c42 Java = 1.7 Android API = 14 \u3002","title":"1. \u4f7f\u7528\u8bf4\u660e"},{"location":"track/dmhubsdk_android_guide/#2","text":"\u96c6\u6210 DMHub SDK \u4e4b\u524d\uff0c\u60a8\u9996\u5148\u9700\u8981\u5230 DM Hub \u5e73\u53f0\u521b\u5efa\u5e94\u7528\u3002","title":"2. \u521b\u5efa\u5e94\u7528"},{"location":"track/dmhubsdk_android_guide/#21","text":"\u70b9\u51fb DM Hub \u5e73\u53f0\u9996\u9875\u53f3\u4e0a\u89d2\u7684\u9f7f\u8f6e\u56fe\u6807\uff0c\u9009\u62e9 \u5f00\u653e\u4e0e\u96c6\u6210 \u9009\u9879\uff0c\u8fdb\u5165\u5e94\u7528\u8bbe\u7f6e\u9875\u9762\u3002","title":"2.1 \u8fdb\u5165\u5e94\u7528\u8bbe\u7f6e\u9875\u9762"},{"location":"track/dmhubsdk_android_guide/#22","text":"\u5728\u5e94\u7528\u8bbe\u7f6e\u9875\u9762\u70b9\u51fb\u53f3\u4e0a\u89d2\u7684 + \u65b0\u5efa \u6309\u94ae\uff0c\u5728\u5f39\u51fa\u7684\u521b\u5efa\u5e94\u7528\u5f39\u51fa\u6846\u4e2d\u586b\u5199\u5e94\u7528\u4fe1\u606f\u540e\u4fdd\u5b58\u3002\u5e94\u7528\u521b\u5efa\u6210\u529f\u4e4b\u540e\uff0c\u5373\u53ef\u83b7\u5f97\u96c6\u6210 SDK \u6240\u9700\u7684 appid\u3002","title":"2.2 \u65b0\u5efa\u5e94\u7528"},{"location":"track/dmhubsdk_android_guide/#3-sdk","text":"","title":"3. \u5bfc\u5165 SDK"},{"location":"track/dmhubsdk_android_guide/#31-sdk","text":"\u70b9\u51fb\u4e0b\u8f7d","title":"3.1 \u4e0b\u8f7d SDK"},{"location":"track/dmhubsdk_android_guide/#32-jar","text":"\u4e0b\u8f7d\u89e3\u538b\u540e\u590d\u5236 dmhubsdk-android-2.0.0.jar \u6587\u4ef6\u5230\u5de5\u7a0b\u4e3b module \u7684 libs \u76ee\u5f55\u4e0b\uff0c\u53f3\u952e jar \u5305\uff0c\u9009\u62e9 Add As Library... \uff0c\u5c06 jar \u5305\u4f5c\u4e3a Library \u6dfb\u52a0\u5230\u4e3b module \u4e2d\u3002","title":"3.2 \u6dfb\u52a0 jar \u5305"},{"location":"track/dmhubsdk_android_guide/#33-androidmanifestxml","text":"\u914d\u7f6e SDK \u6240\u9700\u6743\u9650 uses-permission android:name= android.permission.INTERNET / uses-permission android:name= android.permission.READ_PHONE_STATE / uses-permission android:name= android.permission.ACCESS_NETWORK_STATE / uses-permission android:name= android.permission.ACCESS_WIFI_STATE / uses-permission android:name= android.permission.BLUETOOTH / \u914d\u7f6e SDK \u6240\u9700\u53c2\u6570 \u5728 AndroidManifest.xml \u4e2d\u7684 application /application \u6807\u7b7e\u5185\u914d\u7f6e SDK \u76f8\u5173\u53c2\u6570\uff1a !-- DMHubSDK \u76f8\u5173\u53c2\u6570 -- meta-data android:name= com.convertlab.dmhubsdk.config.DMHubSDKAppId android:value= [Must Configure] The appid get from DM Hub. / meta-data android:name= com.convertlab.dmhubsdk.config.Endpoint android:value= A string URL endpoint. If you are not running DMHubSDK in the standard production environment, you need to configure this value. Defaults to 'https://api.convertlab.com' / meta-data android:name= com.convertlab.dmhubsdk.config.EnableDebugLogging android:value= A boolean value. If true, emit more detailed log messages. Defaults to false. / meta-data android:name= com.convertlab.dmhubsdk.config.FlushInterval android:value= An integer number of milliseconds, the maximum time to wait before upload if the bulk upload limit isn't reached. Defaults to 30000 millis / meta-data android:name= com.convertlab.dmhubsdk.config.BulkUploadLimit android:value= An integer count of events, the maximum number of events to queue before an upload attempt. This value should less than 50. Defaults to 40. / meta-data android:name= com.convertlab.dmhubsdk.config.UploadOnlyWifi android:value= A boolean value. If true, upload data only in wifi environment. Defaults to false. / meta-data android:name= com.convertlab.dmhubsdk.config.MaximumBackgroundDuration android:value= An integer number of milliseconds, if App enters the background more than this duration and open again from background, we will count as a new open. Defaults to 30000 millis. /","title":"3.3 \u914d\u7f6e AndroidManifest.xml"},{"location":"track/dmhubsdk_android_guide/#4","text":"\u4f7f\u7528 SDK \u8bb0\u5f55\u4e8b\u4ef6\u4e4b\u524d\u9700\u8981\u5148\u8fdb\u884c\u521d\u59cb\u5316\uff0c\u5728\u6574\u4e2a\u5e94\u7528\u7a0b\u5e8f\u5168\u5c40\uff0c\u53ea\u9700\u8981\u8fdb\u884c\u4e00\u6b21\u521d\u59cb\u5316\u3002 - \u63a5\u53e3\u5b9a\u4e49 /** * \u5728\u81ea\u5b9a\u4e49\u7684 Application \u4e2d\u521d\u59cb\u5316 DMHubSDK * \u5728\u6574\u4e2a\u5e94\u7528\u7a0b\u5e8f\u5168\u5c40\uff0c\u53ea\u9700\u8981\u8fdb\u884c\u4e00\u6b21\u521d\u59cb\u5316 */ public static void init(@NonNull final Context context); \u4ee3\u7801\u793a\u4f8b \u5728\u81ea\u5b9a\u4e49\u7684 Application \u4e2d\u7684 onCreate \u65b9\u6cd5\u4e2d\u5f00\u542f\u8c03\u8bd5\u6a21\u5f0f\u5e76\u8fdb\u884c\u521d\u59cb\u5316\uff1a public class YourApp extends Application { @Override public void onCreate() { super.onCreate(); // \u521d\u59cb\u5316 DMHubSDK DMHubSDK.init(this); } }","title":"4. \u521d\u59cb\u5316"},{"location":"track/dmhubsdk_android_guide/#5","text":"\u5ba2\u6237\u8eab\u4efd\u662f DM Hub \u4e2d\u5ba2\u6237\u7684\u6807\u8bc6\uff0cApp \u7aef SDK \u91c7\u96c6\u5230\u7684\u5ba2\u6237\u4e8b\u4ef6\u4ee5\u53ca\u5ba2\u6237\u76f8\u5173\u4fe1\u606f\u9700\u8981\u901a\u8fc7\u5ba2\u6237\u8eab\u4efd\u4e0e\u5ba2\u6237\u8fdb\u884c\u7ed1\u5b9a\u3002","title":"5. \u5ba2\u6237\u8eab\u4efd"},{"location":"track/dmhubsdk_android_guide/#51","text":"\u4e3a\u4e86\u5c06\u5ba2\u6237\u4e8b\u4ef6\u4ee5\u53ca\u5ba2\u6237\u76f8\u5173\u4fe1\u606f\u4e0e\u5ba2\u6237\u7ed1\u5b9a\uff0c\u9700\u8981\u5728 App \u83b7\u53d6\u5230\u5ba2\u6237\u8eab\u4efd\u4fe1\u606f\u65f6\uff08\u5982\u5ba2\u6237\u6ce8\u518c\u6216\u767b\u5f55\uff09\uff0c\u8bbe\u7f6e\u5ba2\u6237\u8eab\u4efd\u3002 \u591a\u6b21\u8c03\u7528\u8bbe\u7f6e\u8eab\u4efd\u63a5\u53e3\uff0c\u65b0\u7684\u8eab\u4efd\u5c06\u4f1a\u8986\u76d6\u65e7\u7684\u8eab\u4efd\uff0c\u6b64\u540e\u4ea7\u751f\u7684\u5ba2\u6237\u4e8b\u4ef6\u5c06\u4e0e\u65b0\u8eab\u4efd\u5bf9\u5e94\u7684\u5ba2\u6237\u7ed1\u5b9a\u3002 \u5ba2\u6237\u5728\u672a\u8bbe\u7f6e\u5ba2\u6237\u8eab\u4efd\u671f\u95f4\u4ea7\u751f\u7684\u4e8b\u4ef6\u5c06\u4f1a\u4f5c\u4e3a\u533f\u540d\u4e8b\u4ef6\u8fdb\u884c\u8bb0\u5f55\uff0c\u533f\u540d\u4e8b\u4ef6\u4f1a\u4fdd\u5b58 30 \u5929\u3002 \u63a5\u53e3\u5b9a\u4e49 /** * \u8bbe\u7f6e\u5ba2\u6237\u8eab\u4efd\uff0c\u7528\u4e8e\u7ed1\u5b9a\u4e8b\u4ef6 * \u5982\u679c\u91cd\u590d\u8bbe\u7f6e\uff0c\u5c06\u4f1a\u4f7f\u7528\u65b0\u7684\u5ba2\u6237\u8eab\u4efd\u8fdb\u884c\u4e8b\u4ef6\u7ed1\u5b9a */ public static void setIdentity(final String identityType, final String identityValue);","title":"5.1 \u8bbe\u7f6e\u5ba2\u6237\u8eab\u4efd"},{"location":"track/dmhubsdk_android_guide/#52","text":"\u83b7\u53d6\u5f53\u524d\u8bbe\u7f6e\u7684\u5ba2\u6237\u8eab\u4efd\u3002 \u63a5\u53e3\u5b9a\u4e49 /** * \u83b7\u53d6\u5f53\u524d\u8bbe\u7f6e\u7684\u5ba2\u6237\u8eab\u4efd * @return \u5982\u679c\u5f53\u524d\u8fd8\u672a\u8bbe\u7f6e\u8fc7\u6709\u6548\u7684\u5ba2\u6237\u8eab\u4efd\uff0c\u8fd4\u56de null */ public static DMHubIdentity currentIdentity();","title":"5.2 \u5f53\u524d\u5ba2\u6237\u8eab\u4efd"},{"location":"track/dmhubsdk_android_guide/#53","text":"\u6e05\u9664\u5ba2\u6237\u8eab\u4efd\u4e4b\u540e\u4ea7\u751f\u7684\u5ba2\u6237\u4e8b\u4ef6\u5c06\u4f1a\u4f5c\u4e3a\u533f\u540d\u4e8b\u4ef6\u8fdb\u884c\u8bb0\u5f55\u3002 \u63a5\u53e3\u5b9a\u4e49 /** * \u6e05\u9664\u5f53\u524d\u8bbe\u7f6e\u7684\u5ba2\u6237\u8eab\u4efd * @return \u5f53\u524d\u8bbe\u7f6e\u7684\u5ba2\u6237\u8eab\u4efd\uff0c\u5982\u679c\u5f53\u524d\u8fd8\u672a\u8bbe\u7f6e\u8fc7\u6709\u6548\u7684\u5ba2\u6237\u8eab\u4efd\uff0c\u8fd4\u56de null */ public static DMHubIdentity clearIdentity();","title":"5.3 \u6e05\u9664\u5ba2\u6237\u8eab\u4efd"},{"location":"track/dmhubsdk_android_guide/#6","text":"","title":"6. \u8ddf\u8e2a\u5ba2\u6237\u4e8b\u4ef6"},{"location":"track/dmhubsdk_android_guide/#61","text":"\u6839\u636e\u4e1a\u52a1\u9700\u6c42\u5728 DM Hub \u540e\u53f0 \u65b0\u5efa\u81ea\u5b9a\u4e49\u4e8b\u4ef6 \u540e\uff0c\u53ef\u4ee5\u8c03\u7528\u8be5 API \u5bf9\u81ea\u5b9a\u4e49\u5ba2\u6237\u4e8b\u4ef6\u8fdb\u884c\u8ddf\u8e2a\u3002\u5728\u65b0\u5efa\u81ea\u5b9a\u4e49\u4e8b\u4ef6\u65f6\uff0c\u8fd8\u53ef\u4ee5\u6839\u636e\u9700\u8981\u6dfb\u52a0\u81ea\u5b9a\u4e49\u5c5e\u6027\uff0c\u5e76\u5728\u8c03\u7528 API \u65f6\u4f5c\u4e3a\u53c2\u6570\u4f20\u5165\u3002 \u63a5\u53e3\u5b9a\u4e49 /** * \u8ddf\u8e2a\u81ea\u5b9a\u4e49\u5ba2\u6237\u4e8b\u4ef6 * * @param eventId \u5728 DM Hub \u4e2d\u65b0\u5efa\u7684\u81ea\u5b9a\u4e49\u4e8b\u4ef6\u7684\u4e8b\u4ef6 Id * @param properties \u4e8b\u4ef6\u7684\u81ea\u5b9a\u4e49\u5c5e\u6027\uff0c\u5fc5\u987b\u4ee5\u5728 DM Hub \u4e2d\u65b0\u5efa\u81ea\u5b9a\u4e49\u4e8b\u4ef6\u65f6\u6dfb\u52a0\u7684\u81ea\u5b9a\u4e49\u5c5e\u6027\u4f5c\u4e3a key */ public static void trackMap(final String eventId, final Map String, Object properties); /** * \u8ddf\u8e2a\u81ea\u5b9a\u4e49\u5ba2\u6237\u4e8b\u4ef6 * * @param eventId \u5728 DM Hub \u4e2d\u65b0\u5efa\u7684\u81ea\u5b9a\u4e49\u4e8b\u4ef6\u7684\u4e8b\u4ef6 Id * @param properties \u4e8b\u4ef6\u7684\u81ea\u5b9a\u4e49\u5c5e\u6027\uff0c\u5fc5\u987b\u4ee5\u5728 DM Hub \u4e2d\u65b0\u5efa\u81ea\u5b9a\u4e49\u4e8b\u4ef6\u65f6\u6dfb\u52a0\u7684\u81ea\u5b9a\u4e49\u5c5e\u6027\u4f5c\u4e3a key */ public static void track(final String eventId, JSONObject properties); /** * \u8ddf\u8e2a\u81ea\u5b9a\u4e49\u5ba2\u6237\u4e8b\u4ef6 * * @param eventId \u5728 DM Hub \u4e2d\u65b0\u5efa\u7684\u81ea\u5b9a\u4e49\u4e8b\u4ef6\u7684\u4e8b\u4ef6 Id */ public static void track(final String eventId);","title":"6.1 \u8ddf\u8e2a\u81ea\u5b9a\u4e49\u5ba2\u6237\u4e8b\u4ef6"},{"location":"track/dmhubsdk_android_guide/#62","text":"\u63a5\u53e3\u5b9a\u4e49 /** * \u8ddf\u8e2a\u8fdb\u5165\u89c6\u56fe\u4e8b\u4ef6 * * @param viewName \u89c6\u56fe\u7684\u540d\u79f0\uff0c\u5ba2\u6237\u65f6\u95f4\u8f74\u4e0a\u7684\u663e\u793a\u4e3a\uff1a'\u8fdb\u5165\u624b\u673a\u89c6\u56fe ${viewName}' */ public static void trackOpenView(final String viewName); /** * \u8ddf\u8e2a\u79bb\u5f00\u89c6\u56fe\u4e8b\u4ef6 * * @param viewName \u89c6\u56fe\u7684\u540d\u79f0\uff0c\u5ba2\u6237\u65f6\u95f4\u8f74\u4e0a\u7684\u663e\u793a\u4e3a\uff1a'\u79bb\u5f00\u624b\u673a\u89c6\u56fe ${viewName}' */ public static void trackExitView(final String viewName); \u4ee3\u7801\u793a\u4f8b public class YourActivity extends Activity { @Override protected void onResume() { super.onResume(); DMHubSDK.trackOpenView( viewName ); } @Override protected void onPause() { super.onPause(); DMHubSDK.trackExitView( viewName ); } }","title":"6.2 \u8ddf\u8e2a\u8fdb\u5165\u3001\u79bb\u5f00\u89c6\u56fe\u4e8b\u4ef6"},{"location":"track/dmhubsdk_android_guide/#63","text":"\u5982\u679c\u60a8\u4f7f\u7528\u4e86 DM Hub \u5e73\u53f0\u63d0\u4f9b\u7684\u901a\u77e5\u63a8\u9001\u529f\u80fd\uff0c\u5219\u53ef\u4ee5\u8c03\u7528 SDK \u63d0\u4f9b\u7684\u76f8\u5173 API \u5bf9\u6765\u81ea DM Hub \u5e73\u53f0\u7684\u901a\u77e5\u63a8\u9001\u76f8\u5173\u4e8b\u4ef6\u8fdb\u884c\u8ddf\u8e2a\u3002","title":"6.3 \u8ddf\u8e2a\u901a\u77e5\u63a8\u9001\u76f8\u5173\u4e8b\u4ef6"},{"location":"track/dmhubsdk_android_guide/#631-jpush","text":"\u63a5\u53e3\u5b9a\u4e49 /** * \u5f53\u81ea\u5b9a\u4e49\u7684 JPush \u5e7f\u64ad\u63a5\u6536\u5668\u6536\u5230\u6765\u81ea JPush \u7684\u5e7f\u64ad\u65f6\u8c03\u7528 * * @param intent \u6536\u5230\u7684\u5e7f\u64ad\u7684 intent */ public static void onJPushReceiveBroadcast(final Intent intent); \u4ee3\u7801\u793a\u4f8b public class YourJPushReceiver extends BroadcastReceiver { @Override public void onReceive(Context context, Intent intent) { DMHubSDK.onJPushReceiveBroadcast(intent); } }","title":"6.3.1 \u8ddf\u8e2a JPush \u63a8\u9001\u76f8\u5173\u4e8b\u4ef6"},{"location":"track/dmhubsdk_android_guide/#632-getui","text":"\u63a5\u53e3\u5b9a\u4e49 /** * \u5728\u81ea\u5b9a\u4e49\u7684 GTIntentService \u7684 onReceiveClientId \u65b9\u6cd5\u4e2d\u8c03\u7528 * * @param clientId \u6536\u5230\u7684 clientId */ public static void onGeTuiReceiveClientId(final String clientId); /** * \u5728\u81ea\u5b9a\u4e49\u7684 GTIntentService \u7684 onReceiveMessageData \u65b9\u6cd5\u4e2d\u8c03\u7528 * * @param taskId GTTransmitMessage \u4e2d\u643a\u5e26\u7684 taskId * @param messageId GTTransmitMessage \u4e2d\u643a\u5e26\u7684 messageId * @param payload GTTransmitMessage \u4e2d\u643a\u5e26\u7684 payload */ public static void onGeTuiReceiveMessageData(final String taskId, final String messageId, final byte[] payload); /** * \u5728\u81ea\u5b9a\u4e49\u7684 GTIntentService \u7684 onNotificationMessageArrived \u65b9\u6cd5\u4e2d\u8c03\u7528 * * @param taskId GTNotificationMessage \u4e2d\u643a\u5e26\u7684 taskId * @param messageId GTNotificationMessage \u4e2d\u643a\u5e26\u7684 messageId */ public static void onGeTuiNotificationMessageArrived(final String taskId, final String messageId); \u4ee3\u7801\u793a\u4f8b public class YourIntentService extends GTIntentService { @Override public void onReceiveClientId(Context context, String clientid) { DMHubSDK.onGeTuiReceiveClientId(clientid); } @Override public void onReceiveMessageData(Context context, GTTransmitMessage msg) { String taskId = msg.getTaskId(); String messageId = msg.getMessageId(); byte[] payload = msg.getPayload(); DMHubSDK.onGeTuiReceiveMessageData(taskId, messageId, payload); } @Override public void onNotificationMessageArrived(Context context, GTNotificationMessage gtNotificationMessage) { String taskId = gtNotificationMessage.getTaskId(); String messageId = gtNotificationMessage.getMessageId(); DMHubSDK.onGeTuiNotificationMessageArrived(taskId, messageId); } }","title":"6.3.2 \u8ddf\u8e2a GeTui \u63a8\u9001\u76f8\u5173\u4e8b\u4ef6"},{"location":"track/dmhubsdk_android_guide/#7","text":"\u5728\u5de5\u7a0b\u7684\u6df7\u6dc6\u89c4\u5219\u6587\u4ef6\u4e2d\u6dfb\u52a0\u5982\u4e0b\u89c4\u5219\uff1a # DMHubSDK -dontwarn com.convertlab.** -keep class com.convertlab.** { *; }","title":"7. \u6df7\u6dc6\u89c4\u5219"},{"location":"track/dmhubsdk_ios_guide/","text":"1. \u4f7f\u7528\u8bf4\u660e \u672c\u6587\u662f DMHub iOS SDK \u6807\u51c6\u7684\u5f00\u53d1\u6307\u5357\u6587\u6863\uff0c\u7528\u4ee5\u6307\u5bfc SDK \u7684\u96c6\u6210\u548c\u4f7f\u7528\uff0c\u9ed8\u8ba4\u8bfb\u8005\u5df2\u7ecf\u5177\u5907\u4e00\u5b9a\u7684 iOS \u5f00\u53d1\u80fd\u529b\u3002 \u672c\u7bc7\u6307\u5357\u5339\u914d\u7684 DMHub iOS SDK \u7248\u672c\u4e3a\uff1a v2.0.0 \u3002 DMHub iOS SDK 2.0.0 \u8981\u6c42 iOS = 7.0 \u3002 2. \u521b\u5efa\u5e94\u7528 \u96c6\u6210 DMHub SDK \u4e4b\u524d\uff0c\u60a8\u9996\u5148\u9700\u8981\u5230 DM Hub \u5e73\u53f0\u521b\u5efa\u5e94\u7528\u3002 2.1 \u8fdb\u5165\u5e94\u7528\u8bbe\u7f6e\u9875\u9762 \u70b9\u51fb DM Hub \u5e73\u53f0\u9996\u9875\u53f3\u4e0a\u89d2\u7684\u9f7f\u8f6e\u56fe\u6807\uff0c\u9009\u62e9 \u5f00\u653e\u4e0e\u96c6\u6210 \u9009\u9879\uff0c\u8fdb\u5165\u5e94\u7528\u8bbe\u7f6e\u9875\u9762\u3002 2.2 \u65b0\u5efa\u5e94\u7528 \u5728\u5e94\u7528\u8bbe\u7f6e\u9875\u9762\u70b9\u51fb\u53f3\u4e0a\u89d2\u7684 + \u65b0\u5efa \u6309\u94ae\uff0c\u5728\u5f39\u51fa\u7684\u521b\u5efa\u5e94\u7528\u5f39\u51fa\u6846\u4e2d\u586b\u5199\u5e94\u7528\u4fe1\u606f\u540e\u4fdd\u5b58\u3002\u5e94\u7528\u521b\u5efa\u6210\u529f\u4e4b\u540e\uff0c\u5373\u53ef\u83b7\u5f97\u96c6\u6210 SDK \u6240\u9700\u7684 appid\u3002 3. \u5bfc\u5165 SDK 3.1 \u4e0b\u8f7d SDK \u70b9\u51fb\u4e0b\u8f7d 3.2 \u6dfb\u52a0 SDK \u6587\u4ef6 \u4e0b\u8f7d\u89e3\u538b\u540e\u5c06 DMHubSDK.framework \u5e93\u62f7\u8d1d\u5230\u5de5\u7a0b\u76ee\u5f55\u4e0b\uff0c\u7136\u540e\u5728 Xcode \u4e2d\u7684 TARGETS --- General --- Linked Frameworks and Libraries \u4e2d\u70b9\u51fb + \u8fdb\u884c\u6dfb\u52a0\uff0c\u6216\u8005\u76f4\u63a5\u5c06\u5e93\u6587\u4ef6\u62d6\u5165\u3002 3.3 \u5f15\u5165\u5934\u6587\u4ef6 \u5728\u9700\u8981\u4f7f\u7528 DMHubSDK \u529f\u80fd\u7684\u6587\u4ef6\u4e2d\u5f15\u5165\u5934\u6587\u4ef6\uff1a #import DMHubSDK/DMHubSDK.h 4. \u521d\u59cb\u5316 \u4f7f\u7528 SDK \u8bb0\u5f55\u4e8b\u4ef6\u4e4b\u524d\u9700\u8981\u5148\u8fdb\u884c\u542f\u52a8\uff0c\u5728\u6574\u4e2a\u5e94\u7528\u7a0b\u5e8f\u5168\u5c40\uff0c\u53ea\u9700\u8981\u542f\u52a8\u4e00\u6b21\uff0cSDK \u63d0\u4f9b\u4e86\u591a\u4e2a\u542f\u52a8\u65b9\u6cd5\uff0c\u8bf7\u5f00\u53d1\u8005\u6839\u636e\u5b9e\u9645\u9700\u6c42\u9009\u62e9\u3002 \u63a5\u53e3\u5b9a\u4e49 /** \u542f\u52a8 DMHubSDK @param appId \u5728 DM Hub \u5e73\u53f0\u521b\u5efa\u5e94\u7528\u65f6\u83b7\u5f97\u7684 appid @param launchOptions Application \u7684\u542f\u52a8\u53c2\u6570 */ + (void)startWithAppId:(NSString *)appId launchOptions:(NSDictionary *)launchOptions; /** \u542f\u52a8 DMHubSDK @param appId \u5728 DM Hub \u5e73\u53f0\u521b\u5efa\u5e94\u7528\u65f6\u83b7\u5f97\u7684 appid @param endpoint \u5982\u679c\u4e0d\u662f\u5728\u6807\u51c6\u751f\u4ea7\u73af\u5883\u8fd0\u884c DMHubSDK\uff0c\u9700\u8981\u914d\u7f6e\u8be5\u53c2\u6570\uff0c\u9ed8\u8ba4\u503c\uff1a@ https://api.convertlab.com @param launchOptions Application \u7684\u542f\u52a8\u53c2\u6570 */ + (void)startWithAppId:(NSString *)appId endpoint:(NSString *)endpoint launchOptions:(NSDictionary *)launchOptions; /** \u542f\u52a8 DMHubSDK @param appId \u5728 DM Hub \u5e73\u53f0\u521b\u5efa\u5e94\u7528\u65f6\u83b7\u5f97\u7684 appid @param endpoint \u5982\u679c\u4e0d\u662f\u5728\u6807\u51c6\u751f\u4ea7\u73af\u5883\u8fd0\u884c DMHubSDK\uff0c\u9700\u8981\u914d\u7f6e\u8be5\u53c2\u6570\uff0c\u9ed8\u8ba4\u503c\uff1a@ https://api.convertlab.com @param autoTrackViewEvent \u662f\u5426\u81ea\u52a8\u8bb0\u5f55\u8fdb\u5165\u3001\u79bb\u5f00\u89c6\u56fe\u4e8b\u4ef6\uff0c\u9ed8\u8ba4\u503c\uff1aNO @param flushInterval \u4e0a\u4f20\u6570\u636e\u7684\u65f6\u95f4\u95f4\u9694\uff08\u5355\u4f4d\uff1a\u79d2\uff09\uff0c\u9ed8\u8ba4\u503c\uff1a30 @param launchOptions Application \u7684\u542f\u52a8\u53c2\u6570 */ + (void)startWithAppId:(NSString *)appId endpoint:(NSString *)endpoint autoTrackViewEvent:(BOOL)autoTrackViewEvent flushInterval:(NSUInteger)flushInterval launchOptions:(NSDictionary *)launchOptions; \u4ee3\u7801\u793a\u4f8b \u5728 AppDelegate.m \u6587\u4ef6\u4e2d\u7684 - (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions \u65b9\u6cd5\u4e2d\u542f\u52a8 DMHubSDK\uff1a - (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions { // \u542f\u52a8 DMHubSDK [DMHubSDK startWithAppId:@ \u5728 DM Hub \u5e73\u53f0\u83b7\u5f97\u7684 appid launchOptions:launchOptions]; return YES; } 5. \u5ba2\u6237\u8eab\u4efd \u5ba2\u6237\u8eab\u4efd\u662f DM Hub \u4e2d\u5ba2\u6237\u7684\u6807\u8bc6\uff0cApp \u7aef SDK \u91c7\u96c6\u5230\u7684\u5ba2\u6237\u4e8b\u4ef6\u4ee5\u53ca\u5ba2\u6237\u76f8\u5173\u4fe1\u606f\u9700\u8981\u901a\u8fc7\u5ba2\u6237\u8eab\u4efd\u4e0e\u5ba2\u6237\u8fdb\u884c\u7ed1\u5b9a\u3002 5.1 \u8bbe\u7f6e\u5ba2\u6237\u8eab\u4efd \u4e3a\u4e86\u5c06\u5ba2\u6237\u4e8b\u4ef6\u4ee5\u53ca\u5ba2\u6237\u76f8\u5173\u4fe1\u606f\u4e0e\u5ba2\u6237\u7ed1\u5b9a\uff0c\u9700\u8981\u5728 App \u83b7\u53d6\u5230\u5ba2\u6237\u8eab\u4efd\u4fe1\u606f\u65f6\uff08\u5982\u5ba2\u6237\u6ce8\u518c\u6216\u767b\u5f55\uff09\uff0c\u8bbe\u7f6e\u5ba2\u6237\u8eab\u4efd\u3002 \u591a\u6b21\u8c03\u7528\u8bbe\u7f6e\u8eab\u4efd\u63a5\u53e3\uff0c\u65b0\u7684\u8eab\u4efd\u5c06\u4f1a\u8986\u76d6\u65e7\u7684\u8eab\u4efd\uff0c\u6b64\u540e\u4ea7\u751f\u7684\u5ba2\u6237\u4e8b\u4ef6\u5c06\u4e0e\u65b0\u8eab\u4efd\u5bf9\u5e94\u7684\u5ba2\u6237\u7ed1\u5b9a\u3002 \u5ba2\u6237\u5728\u672a\u8bbe\u7f6e\u5ba2\u6237\u8eab\u4efd\u671f\u95f4\u4ea7\u751f\u7684\u4e8b\u4ef6\u5c06\u4f1a\u4f5c\u4e3a\u533f\u540d\u4e8b\u4ef6\u8fdb\u884c\u8bb0\u5f55\uff0c\u533f\u540d\u4e8b\u4ef6\u4f1a\u4fdd\u5b58 30 \u5929\u3002 \u63a5\u53e3\u5b9a\u4e49 /** \u8bbe\u7f6e\u5ba2\u6237\u8eab\u4efd\uff0c\u7528\u4e8e\u7ed1\u5b9a\u4e8b\u4ef6 \u5982\u679c\u91cd\u590d\u8bbe\u7f6e\uff0c\u5c06\u4f1a\u4f7f\u7528\u65b0\u7684\u5ba2\u6237\u8eab\u4efd\u8fdb\u884c\u4e8b\u4ef6\u7ed1\u5b9a */ + (void)setIdentityWithType:(NSString *)identityType value:(NSString *)identityValue; 5.2 \u5f53\u524d\u5ba2\u6237\u8eab\u4efd \u83b7\u53d6\u5f53\u524d\u8bbe\u7f6e\u7684\u5ba2\u6237\u8eab\u4efd\u3002 \u63a5\u53e3\u5b9a\u4e49 /** \u83b7\u53d6\u5f53\u524d\u8bbe\u7f6e\u7684\u5ba2\u6237\u8eab\u4efd @return \u5982\u679c\u5f53\u524d\u8fd8\u672a\u8bbe\u7f6e\u8fc7\u6709\u6548\u7684\u5ba2\u6237\u8eab\u4efd\uff0c\u8fd4\u56de nil */ + (DMHubIdentity *)currentIdentity; 5.3 \u6e05\u9664\u5ba2\u6237\u8eab\u4efd \u6e05\u9664\u5ba2\u6237\u8eab\u4efd\u4e4b\u540e\u4ea7\u751f\u7684\u5ba2\u6237\u4e8b\u4ef6\u5c06\u4f1a\u4f5c\u4e3a\u533f\u540d\u4e8b\u4ef6\u8fdb\u884c\u8bb0\u5f55\u3002 \u63a5\u53e3\u5b9a\u4e49 /** \u6e05\u9664\u5f53\u524d\u8bbe\u7f6e\u7684\u5ba2\u6237\u8eab\u4efd @return \u5f53\u524d\u8bbe\u7f6e\u7684\u5ba2\u6237\u8eab\u4efd\uff0c\u5982\u679c\u5f53\u524d\u8fd8\u672a\u8bbe\u7f6e\u8fc7\u6709\u6548\u7684\u5ba2\u6237\u8eab\u4efd\uff0c\u8fd4\u56de nil */ + (DMHubIdentity *)clearIdentity; 6. \u8ddf\u8e2a\u5ba2\u6237\u4e8b\u4ef6 6.1 \u8ddf\u8e2a\u5ba2\u6237\u81ea\u5b9a\u4e49\u4e8b\u4ef6 \u6839\u636e\u4e1a\u52a1\u9700\u6c42\u5728 DM Hub \u540e\u53f0 \u65b0\u5efa\u81ea\u5b9a\u4e49\u4e8b\u4ef6 \u540e\uff0c\u53ef\u4ee5\u8c03\u7528\u8be5 API \u5bf9\u81ea\u5b9a\u4e49\u5ba2\u6237\u4e8b\u4ef6\u8fdb\u884c\u8ddf\u8e2a\u3002\u5728\u65b0\u5efa\u81ea\u5b9a\u4e49\u4e8b\u4ef6\u65f6\uff0c\u8fd8\u53ef\u4ee5\u6839\u636e\u9700\u8981\u6dfb\u52a0\u81ea\u5b9a\u4e49\u5c5e\u6027\uff0c\u5e76\u5728\u8c03\u7528 API \u65f6\u4f5c\u4e3a\u53c2\u6570\u4f20\u5165\u3002 \u63a5\u53e3\u5b9a\u4e49 /** \u8ddf\u8e2a\u5ba2\u6237\u81ea\u5b9a\u4e49\u4e8b\u4ef6 @param eventId \u5728 DM Hub \u4e2d\u65b0\u5efa\u7684\u81ea\u5b9a\u4e49\u4e8b\u4ef6\u7684\u4e8b\u4ef6 Id @param properties \u4e8b\u4ef6\u7684\u81ea\u5b9a\u4e49\u5c5e\u6027\uff0c\u5fc5\u987b\u4ee5\u5728 DM Hub \u4e2d\u65b0\u5efa\u81ea\u5b9a\u4e49\u4e8b\u4ef6\u65f6\u6dfb\u52a0\u7684\u81ea\u5b9a\u4e49\u5c5e\u6027\u4f5c\u4e3a key */ + (void)trackWithEventId:(NSString *)eventId properties:(NSDictionary *)properties; 6.2 \u8ddf\u8e2a\u8fdb\u5165\u3001\u79bb\u5f00\u89c6\u56fe\u4e8b\u4ef6 \u5982\u679c\u8bbe\u7f6e\u4e86\u81ea\u52a8\u8ddf\u8e2a\u8fdb\u5165\u3001\u79bb\u5f00\u89c6\u56fe\u4e8b\u4ef6\uff0c\u5219\u4e0d\u9700\u8981\u5728\u8c03\u7528\u4ee5\u4e0b\u4e24\u4e2a API \u8fdb\u884c\u8ddf\u8e2a\u3002 \u63a5\u53e3\u5b9a\u4e49 /** \u8ddf\u8e2a\u8fdb\u5165\u89c6\u56fe\u4e8b\u4ef6 @param viewName \u89c6\u56fe\u7684\u540d\u79f0\uff0c\u5ba2\u6237\u65f6\u95f4\u8f74\u4e0a\u7684\u663e\u793a\u4e3a\uff1a'\u8fdb\u5165\u624b\u673a\u89c6\u56fe ${viewName}' */ + (void)trackOpenView:(NSString *)viewName; /** \u8ddf\u8e2a\u79bb\u5f00\u89c6\u56fe\u4e8b\u4ef6 @param viewName \u89c6\u56fe\u7684\u540d\u79f0\uff0c\u5ba2\u6237\u65f6\u95f4\u8f74\u4e0a\u7684\u663e\u793a\u4e3a\uff1a'\u8fdb\u5165\u624b\u673a\u89c6\u56fe ${viewName}' */ + (void)trackExitView:(NSString *)viewName; \u4ee3\u7801\u793a\u4f8b @implementation YourViewController - (void)viewDidAppear:(BOOL)animated { [super viewDidAppear:animated]; // \u8ddf\u8e2a\u8fdb\u5165\u89c6\u56fe\u4e8b\u4ef6 [DMHubSDK trackOpenView:@ viewName ]; } - (void)viewWillDisappear:(BOOL)animated { [super viewWillDisappear:animated]; // \u8ddf\u8e2a\u79bb\u5f00\u89c6\u56fe\u4e8b\u4ef6 [DMHubSDK trackExitView:@ viewName ]; } @end 6.3 \u8ddf\u8e2a\u901a\u77e5\u63a8\u9001\u76f8\u5173\u4e8b\u4ef6 \u5982\u679c\u60a8\u4f7f\u7528\u4e86 DM Hub \u5e73\u53f0\u63d0\u4f9b\u7684\u901a\u77e5\u63a8\u9001\u529f\u80fd\uff0c\u5219\u53ef\u4ee5\u8c03\u7528 SDK \u63d0\u4f9b\u7684\u76f8\u5173 API \u5bf9\u6765\u81ea DM Hub \u5e73\u53f0\u7684\u901a\u77e5\u63a8\u9001\u76f8\u5173\u4e8b\u4ef6\u8fdb\u884c\u8ddf\u8e2a\u3002 6.3.1 \u8bbe\u7f6e\u6d88\u606f\u63a8\u9001\u76f8\u5173\u4fe1\u606f \u4e3a\u4e86\u91c7\u96c6\u6d88\u606f\u63a8\u9001\u76f8\u5173\u4fe1\u606f\uff0c\u8ddf\u8e2a\u6765\u81ea DM Hub \u5e73\u53f0\u7684\u901a\u77e5\u63a8\u9001\u76f8\u5173\u4e8b\u4ef6\uff0cDMHubSDK \u9700\u8981\u83b7\u53d6\u60a8\u5728\u63a8\u9001\u670d\u52a1\u5546\u6ce8\u518c\u5e94\u7528\u65f6\u83b7\u5f97\u7684 AppKey\uff0c\u4ee5\u53ca\u63a8\u9001\u670d\u52a1\u5546\u5206\u914d\u7ed9\u8bbe\u5907\u7684\u6807\u8bc6\uff08\u6781\u5149\u7684 registrationID\u3001\u4e2a\u63a8\u7684 clientId\uff09\u3002 \u63a5\u53e3\u5b9a\u4e49 /** \u8bbe\u7f6e\u6d88\u606f\u63a8\u9001\u7684\u76f8\u5173\u4fe1\u606f\uff0c\u4ee5\u4fbf\u901a\u8fc7 DM Hub \u5bf9\u5ba2\u6237\u8fdb\u884c App \u6d88\u606f\u63a8\u9001 @param appKey \u5728\u63a8\u9001\u670d\u52a1\u5546\u6ce8\u518c\u5e94\u7528\u65f6\u83b7\u5f97\u7684 AppKey @param provider \u63a8\u9001\u670d\u52a1\u5546\uff0c\u76ee\u524d\u652f\u6301\u6781\u5149\uff08@ jpush \uff09\u548c\u4e2a\u63a8\uff08@ getui \uff09 */ + (void)setAppKey:(NSString *)appKey forProvider:(NSString *)provider; /** \u8bbe\u7f6e\u6d88\u606f\u63a8\u9001\u7684\u76f8\u5173\u4fe1\u606f\uff0c\u4ee5\u4fbf\u901a\u8fc7 DM Hub \u5bf9\u5ba2\u6237\u8fdb\u884c App \u6d88\u606f\u63a8\u9001 @param appKey \u5728\u63a8\u9001\u670d\u52a1\u5546\u6ce8\u518c\u5e94\u7528\u65f6\u83b7\u5f97\u7684 AppKey @param pushId \u63a8\u9001\u670d\u52a1\u5546\u5206\u914d\u7ed9\u8bbe\u5907\u7684\u6807\u8bc6\uff0c\u6781\u5149\u7684 registrationID \u6216\u4e2a\u63a8\u7684 clientId @param provider \u63a8\u9001\u670d\u52a1\u5546\uff0c\u76ee\u524d\u652f\u6301\u6781\u5149\uff08@ jpush \uff09\u548c\u4e2a\u63a8\uff08@ getui \uff09 */ + (void)setAppKey:(NSString *)appKey pushId:(NSString *)pushId forProvider:(NSString *)provider; 6.3.2 \u8ddf\u8e2a JPush \u63a8\u9001\u76f8\u5173\u4e8b\u4ef6 \u63a5\u53e3\u5b9a\u4e49 /** \u8ddf\u8e2a\u6536\u5230 JPush \u81ea\u5b9a\u4e49\u6d88\u606f\u4e8b\u4ef6 @param notification JPush \u6536\u5230\u81ea\u5b9a\u4e49\u6d88\u606f\u7684\u56de\u8c03\u65b9\u6cd5\u4e2d\u4f20\u5165\u7684 notification */ + (void)trackReceiveJPushMessage:(NSNotification *_Nonnull)notification; \u4ee3\u7801\u793a\u4f8b // \u6536\u5230 JPush \u81ea\u5b9a\u4e49\u6d88\u606f\u7684\u56de\u8c03 - (void)didReceiveJPushMessage:(NSNotification *)notification { [DMHubSDK trackReceiveJPushMessage:notification]; } 6.3.3 \u8ddf\u8e2a GeTui \u63a8\u9001\u76f8\u5173\u4e8b\u4ef6 \u63a5\u53e3\u5b9a\u4e49 /** \u8ddf\u8e2a\u6536\u5230 GeTui \u900f\u4f20\u6d88\u606f\u4e8b\u4ef6 @param payloadData GeTui \u6536\u5230\u900f\u4f20\u6d88\u606f\u7684\u56de\u8c03\u65b9\u6cd5\u4e2d\u4f20\u5165\u7684 payloadData @param offLine GeTui \u6536\u5230\u900f\u4f20\u6d88\u606f\u7684\u56de\u8c03\u65b9\u6cd5\u4e2d\u4f20\u5165\u7684 offLine */ + (void)trackReceiveGeTuiPayloadData:(NSData *_Nonnull)payloadData offLine:(BOOL)offLine; \u4ee3\u7801\u793a\u4f8b // \u6536\u5230 GeTui \u900f\u4f20\u6d88\u606f\u7684\u56de\u8c03 - (void)GeTuiSdkDidReceivePayloadData:(NSData *)payloadData andTaskId:(NSString *)taskId andMsgId:(NSString *)msgId andOffLine:(BOOL)offLine fromGtAppId:(NSString *)appId { [DMHubSDK trackReceiveGeTuiPayloadData:payloadData offLine:offLine]; }","title":"\u901a\u8fc7 iOS SDK \u8fdb\u884c\u6570\u636e\u91c7\u96c6"},{"location":"track/dmhubsdk_ios_guide/#1","text":"\u672c\u6587\u662f DMHub iOS SDK \u6807\u51c6\u7684\u5f00\u53d1\u6307\u5357\u6587\u6863\uff0c\u7528\u4ee5\u6307\u5bfc SDK \u7684\u96c6\u6210\u548c\u4f7f\u7528\uff0c\u9ed8\u8ba4\u8bfb\u8005\u5df2\u7ecf\u5177\u5907\u4e00\u5b9a\u7684 iOS \u5f00\u53d1\u80fd\u529b\u3002 \u672c\u7bc7\u6307\u5357\u5339\u914d\u7684 DMHub iOS SDK \u7248\u672c\u4e3a\uff1a v2.0.0 \u3002 DMHub iOS SDK 2.0.0 \u8981\u6c42 iOS = 7.0 \u3002","title":"1. \u4f7f\u7528\u8bf4\u660e"},{"location":"track/dmhubsdk_ios_guide/#2","text":"\u96c6\u6210 DMHub SDK \u4e4b\u524d\uff0c\u60a8\u9996\u5148\u9700\u8981\u5230 DM Hub \u5e73\u53f0\u521b\u5efa\u5e94\u7528\u3002","title":"2. \u521b\u5efa\u5e94\u7528"},{"location":"track/dmhubsdk_ios_guide/#21","text":"\u70b9\u51fb DM Hub \u5e73\u53f0\u9996\u9875\u53f3\u4e0a\u89d2\u7684\u9f7f\u8f6e\u56fe\u6807\uff0c\u9009\u62e9 \u5f00\u653e\u4e0e\u96c6\u6210 \u9009\u9879\uff0c\u8fdb\u5165\u5e94\u7528\u8bbe\u7f6e\u9875\u9762\u3002","title":"2.1 \u8fdb\u5165\u5e94\u7528\u8bbe\u7f6e\u9875\u9762"},{"location":"track/dmhubsdk_ios_guide/#22","text":"\u5728\u5e94\u7528\u8bbe\u7f6e\u9875\u9762\u70b9\u51fb\u53f3\u4e0a\u89d2\u7684 + \u65b0\u5efa \u6309\u94ae\uff0c\u5728\u5f39\u51fa\u7684\u521b\u5efa\u5e94\u7528\u5f39\u51fa\u6846\u4e2d\u586b\u5199\u5e94\u7528\u4fe1\u606f\u540e\u4fdd\u5b58\u3002\u5e94\u7528\u521b\u5efa\u6210\u529f\u4e4b\u540e\uff0c\u5373\u53ef\u83b7\u5f97\u96c6\u6210 SDK \u6240\u9700\u7684 appid\u3002","title":"2.2 \u65b0\u5efa\u5e94\u7528"},{"location":"track/dmhubsdk_ios_guide/#3-sdk","text":"","title":"3. \u5bfc\u5165 SDK"},{"location":"track/dmhubsdk_ios_guide/#31-sdk","text":"\u70b9\u51fb\u4e0b\u8f7d","title":"3.1 \u4e0b\u8f7d SDK"},{"location":"track/dmhubsdk_ios_guide/#32-sdk","text":"\u4e0b\u8f7d\u89e3\u538b\u540e\u5c06 DMHubSDK.framework \u5e93\u62f7\u8d1d\u5230\u5de5\u7a0b\u76ee\u5f55\u4e0b\uff0c\u7136\u540e\u5728 Xcode \u4e2d\u7684 TARGETS --- General --- Linked Frameworks and Libraries \u4e2d\u70b9\u51fb + \u8fdb\u884c\u6dfb\u52a0\uff0c\u6216\u8005\u76f4\u63a5\u5c06\u5e93\u6587\u4ef6\u62d6\u5165\u3002","title":"3.2 \u6dfb\u52a0 SDK \u6587\u4ef6"},{"location":"track/dmhubsdk_ios_guide/#33","text":"\u5728\u9700\u8981\u4f7f\u7528 DMHubSDK \u529f\u80fd\u7684\u6587\u4ef6\u4e2d\u5f15\u5165\u5934\u6587\u4ef6\uff1a #import DMHubSDK/DMHubSDK.h","title":"3.3 \u5f15\u5165\u5934\u6587\u4ef6"},{"location":"track/dmhubsdk_ios_guide/#4","text":"\u4f7f\u7528 SDK \u8bb0\u5f55\u4e8b\u4ef6\u4e4b\u524d\u9700\u8981\u5148\u8fdb\u884c\u542f\u52a8\uff0c\u5728\u6574\u4e2a\u5e94\u7528\u7a0b\u5e8f\u5168\u5c40\uff0c\u53ea\u9700\u8981\u542f\u52a8\u4e00\u6b21\uff0cSDK \u63d0\u4f9b\u4e86\u591a\u4e2a\u542f\u52a8\u65b9\u6cd5\uff0c\u8bf7\u5f00\u53d1\u8005\u6839\u636e\u5b9e\u9645\u9700\u6c42\u9009\u62e9\u3002 \u63a5\u53e3\u5b9a\u4e49 /** \u542f\u52a8 DMHubSDK @param appId \u5728 DM Hub \u5e73\u53f0\u521b\u5efa\u5e94\u7528\u65f6\u83b7\u5f97\u7684 appid @param launchOptions Application \u7684\u542f\u52a8\u53c2\u6570 */ + (void)startWithAppId:(NSString *)appId launchOptions:(NSDictionary *)launchOptions; /** \u542f\u52a8 DMHubSDK @param appId \u5728 DM Hub \u5e73\u53f0\u521b\u5efa\u5e94\u7528\u65f6\u83b7\u5f97\u7684 appid @param endpoint \u5982\u679c\u4e0d\u662f\u5728\u6807\u51c6\u751f\u4ea7\u73af\u5883\u8fd0\u884c DMHubSDK\uff0c\u9700\u8981\u914d\u7f6e\u8be5\u53c2\u6570\uff0c\u9ed8\u8ba4\u503c\uff1a@ https://api.convertlab.com @param launchOptions Application \u7684\u542f\u52a8\u53c2\u6570 */ + (void)startWithAppId:(NSString *)appId endpoint:(NSString *)endpoint launchOptions:(NSDictionary *)launchOptions; /** \u542f\u52a8 DMHubSDK @param appId \u5728 DM Hub \u5e73\u53f0\u521b\u5efa\u5e94\u7528\u65f6\u83b7\u5f97\u7684 appid @param endpoint \u5982\u679c\u4e0d\u662f\u5728\u6807\u51c6\u751f\u4ea7\u73af\u5883\u8fd0\u884c DMHubSDK\uff0c\u9700\u8981\u914d\u7f6e\u8be5\u53c2\u6570\uff0c\u9ed8\u8ba4\u503c\uff1a@ https://api.convertlab.com @param autoTrackViewEvent \u662f\u5426\u81ea\u52a8\u8bb0\u5f55\u8fdb\u5165\u3001\u79bb\u5f00\u89c6\u56fe\u4e8b\u4ef6\uff0c\u9ed8\u8ba4\u503c\uff1aNO @param flushInterval \u4e0a\u4f20\u6570\u636e\u7684\u65f6\u95f4\u95f4\u9694\uff08\u5355\u4f4d\uff1a\u79d2\uff09\uff0c\u9ed8\u8ba4\u503c\uff1a30 @param launchOptions Application \u7684\u542f\u52a8\u53c2\u6570 */ + (void)startWithAppId:(NSString *)appId endpoint:(NSString *)endpoint autoTrackViewEvent:(BOOL)autoTrackViewEvent flushInterval:(NSUInteger)flushInterval launchOptions:(NSDictionary *)launchOptions; \u4ee3\u7801\u793a\u4f8b \u5728 AppDelegate.m \u6587\u4ef6\u4e2d\u7684 - (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions \u65b9\u6cd5\u4e2d\u542f\u52a8 DMHubSDK\uff1a - (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions { // \u542f\u52a8 DMHubSDK [DMHubSDK startWithAppId:@ \u5728 DM Hub \u5e73\u53f0\u83b7\u5f97\u7684 appid launchOptions:launchOptions]; return YES; }","title":"4. \u521d\u59cb\u5316"},{"location":"track/dmhubsdk_ios_guide/#5","text":"\u5ba2\u6237\u8eab\u4efd\u662f DM Hub \u4e2d\u5ba2\u6237\u7684\u6807\u8bc6\uff0cApp \u7aef SDK \u91c7\u96c6\u5230\u7684\u5ba2\u6237\u4e8b\u4ef6\u4ee5\u53ca\u5ba2\u6237\u76f8\u5173\u4fe1\u606f\u9700\u8981\u901a\u8fc7\u5ba2\u6237\u8eab\u4efd\u4e0e\u5ba2\u6237\u8fdb\u884c\u7ed1\u5b9a\u3002","title":"5. \u5ba2\u6237\u8eab\u4efd"},{"location":"track/dmhubsdk_ios_guide/#51","text":"\u4e3a\u4e86\u5c06\u5ba2\u6237\u4e8b\u4ef6\u4ee5\u53ca\u5ba2\u6237\u76f8\u5173\u4fe1\u606f\u4e0e\u5ba2\u6237\u7ed1\u5b9a\uff0c\u9700\u8981\u5728 App \u83b7\u53d6\u5230\u5ba2\u6237\u8eab\u4efd\u4fe1\u606f\u65f6\uff08\u5982\u5ba2\u6237\u6ce8\u518c\u6216\u767b\u5f55\uff09\uff0c\u8bbe\u7f6e\u5ba2\u6237\u8eab\u4efd\u3002 \u591a\u6b21\u8c03\u7528\u8bbe\u7f6e\u8eab\u4efd\u63a5\u53e3\uff0c\u65b0\u7684\u8eab\u4efd\u5c06\u4f1a\u8986\u76d6\u65e7\u7684\u8eab\u4efd\uff0c\u6b64\u540e\u4ea7\u751f\u7684\u5ba2\u6237\u4e8b\u4ef6\u5c06\u4e0e\u65b0\u8eab\u4efd\u5bf9\u5e94\u7684\u5ba2\u6237\u7ed1\u5b9a\u3002 \u5ba2\u6237\u5728\u672a\u8bbe\u7f6e\u5ba2\u6237\u8eab\u4efd\u671f\u95f4\u4ea7\u751f\u7684\u4e8b\u4ef6\u5c06\u4f1a\u4f5c\u4e3a\u533f\u540d\u4e8b\u4ef6\u8fdb\u884c\u8bb0\u5f55\uff0c\u533f\u540d\u4e8b\u4ef6\u4f1a\u4fdd\u5b58 30 \u5929\u3002 \u63a5\u53e3\u5b9a\u4e49 /** \u8bbe\u7f6e\u5ba2\u6237\u8eab\u4efd\uff0c\u7528\u4e8e\u7ed1\u5b9a\u4e8b\u4ef6 \u5982\u679c\u91cd\u590d\u8bbe\u7f6e\uff0c\u5c06\u4f1a\u4f7f\u7528\u65b0\u7684\u5ba2\u6237\u8eab\u4efd\u8fdb\u884c\u4e8b\u4ef6\u7ed1\u5b9a */ + (void)setIdentityWithType:(NSString *)identityType value:(NSString *)identityValue;","title":"5.1 \u8bbe\u7f6e\u5ba2\u6237\u8eab\u4efd"},{"location":"track/dmhubsdk_ios_guide/#52","text":"\u83b7\u53d6\u5f53\u524d\u8bbe\u7f6e\u7684\u5ba2\u6237\u8eab\u4efd\u3002 \u63a5\u53e3\u5b9a\u4e49 /** \u83b7\u53d6\u5f53\u524d\u8bbe\u7f6e\u7684\u5ba2\u6237\u8eab\u4efd @return \u5982\u679c\u5f53\u524d\u8fd8\u672a\u8bbe\u7f6e\u8fc7\u6709\u6548\u7684\u5ba2\u6237\u8eab\u4efd\uff0c\u8fd4\u56de nil */ + (DMHubIdentity *)currentIdentity;","title":"5.2 \u5f53\u524d\u5ba2\u6237\u8eab\u4efd"},{"location":"track/dmhubsdk_ios_guide/#53","text":"\u6e05\u9664\u5ba2\u6237\u8eab\u4efd\u4e4b\u540e\u4ea7\u751f\u7684\u5ba2\u6237\u4e8b\u4ef6\u5c06\u4f1a\u4f5c\u4e3a\u533f\u540d\u4e8b\u4ef6\u8fdb\u884c\u8bb0\u5f55\u3002 \u63a5\u53e3\u5b9a\u4e49 /** \u6e05\u9664\u5f53\u524d\u8bbe\u7f6e\u7684\u5ba2\u6237\u8eab\u4efd @return \u5f53\u524d\u8bbe\u7f6e\u7684\u5ba2\u6237\u8eab\u4efd\uff0c\u5982\u679c\u5f53\u524d\u8fd8\u672a\u8bbe\u7f6e\u8fc7\u6709\u6548\u7684\u5ba2\u6237\u8eab\u4efd\uff0c\u8fd4\u56de nil */ + (DMHubIdentity *)clearIdentity;","title":"5.3 \u6e05\u9664\u5ba2\u6237\u8eab\u4efd"},{"location":"track/dmhubsdk_ios_guide/#6","text":"","title":"6. \u8ddf\u8e2a\u5ba2\u6237\u4e8b\u4ef6"},{"location":"track/dmhubsdk_ios_guide/#61","text":"\u6839\u636e\u4e1a\u52a1\u9700\u6c42\u5728 DM Hub \u540e\u53f0 \u65b0\u5efa\u81ea\u5b9a\u4e49\u4e8b\u4ef6 \u540e\uff0c\u53ef\u4ee5\u8c03\u7528\u8be5 API \u5bf9\u81ea\u5b9a\u4e49\u5ba2\u6237\u4e8b\u4ef6\u8fdb\u884c\u8ddf\u8e2a\u3002\u5728\u65b0\u5efa\u81ea\u5b9a\u4e49\u4e8b\u4ef6\u65f6\uff0c\u8fd8\u53ef\u4ee5\u6839\u636e\u9700\u8981\u6dfb\u52a0\u81ea\u5b9a\u4e49\u5c5e\u6027\uff0c\u5e76\u5728\u8c03\u7528 API \u65f6\u4f5c\u4e3a\u53c2\u6570\u4f20\u5165\u3002 \u63a5\u53e3\u5b9a\u4e49 /** \u8ddf\u8e2a\u5ba2\u6237\u81ea\u5b9a\u4e49\u4e8b\u4ef6 @param eventId \u5728 DM Hub \u4e2d\u65b0\u5efa\u7684\u81ea\u5b9a\u4e49\u4e8b\u4ef6\u7684\u4e8b\u4ef6 Id @param properties \u4e8b\u4ef6\u7684\u81ea\u5b9a\u4e49\u5c5e\u6027\uff0c\u5fc5\u987b\u4ee5\u5728 DM Hub \u4e2d\u65b0\u5efa\u81ea\u5b9a\u4e49\u4e8b\u4ef6\u65f6\u6dfb\u52a0\u7684\u81ea\u5b9a\u4e49\u5c5e\u6027\u4f5c\u4e3a key */ + (void)trackWithEventId:(NSString *)eventId properties:(NSDictionary *)properties;","title":"6.1 \u8ddf\u8e2a\u5ba2\u6237\u81ea\u5b9a\u4e49\u4e8b\u4ef6"},{"location":"track/dmhubsdk_ios_guide/#62","text":"\u5982\u679c\u8bbe\u7f6e\u4e86\u81ea\u52a8\u8ddf\u8e2a\u8fdb\u5165\u3001\u79bb\u5f00\u89c6\u56fe\u4e8b\u4ef6\uff0c\u5219\u4e0d\u9700\u8981\u5728\u8c03\u7528\u4ee5\u4e0b\u4e24\u4e2a API \u8fdb\u884c\u8ddf\u8e2a\u3002 \u63a5\u53e3\u5b9a\u4e49 /** \u8ddf\u8e2a\u8fdb\u5165\u89c6\u56fe\u4e8b\u4ef6 @param viewName \u89c6\u56fe\u7684\u540d\u79f0\uff0c\u5ba2\u6237\u65f6\u95f4\u8f74\u4e0a\u7684\u663e\u793a\u4e3a\uff1a'\u8fdb\u5165\u624b\u673a\u89c6\u56fe ${viewName}' */ + (void)trackOpenView:(NSString *)viewName; /** \u8ddf\u8e2a\u79bb\u5f00\u89c6\u56fe\u4e8b\u4ef6 @param viewName \u89c6\u56fe\u7684\u540d\u79f0\uff0c\u5ba2\u6237\u65f6\u95f4\u8f74\u4e0a\u7684\u663e\u793a\u4e3a\uff1a'\u8fdb\u5165\u624b\u673a\u89c6\u56fe ${viewName}' */ + (void)trackExitView:(NSString *)viewName; \u4ee3\u7801\u793a\u4f8b @implementation YourViewController - (void)viewDidAppear:(BOOL)animated { [super viewDidAppear:animated]; // \u8ddf\u8e2a\u8fdb\u5165\u89c6\u56fe\u4e8b\u4ef6 [DMHubSDK trackOpenView:@ viewName ]; } - (void)viewWillDisappear:(BOOL)animated { [super viewWillDisappear:animated]; // \u8ddf\u8e2a\u79bb\u5f00\u89c6\u56fe\u4e8b\u4ef6 [DMHubSDK trackExitView:@ viewName ]; } @end","title":"6.2 \u8ddf\u8e2a\u8fdb\u5165\u3001\u79bb\u5f00\u89c6\u56fe\u4e8b\u4ef6"},{"location":"track/dmhubsdk_ios_guide/#63","text":"\u5982\u679c\u60a8\u4f7f\u7528\u4e86 DM Hub \u5e73\u53f0\u63d0\u4f9b\u7684\u901a\u77e5\u63a8\u9001\u529f\u80fd\uff0c\u5219\u53ef\u4ee5\u8c03\u7528 SDK \u63d0\u4f9b\u7684\u76f8\u5173 API \u5bf9\u6765\u81ea DM Hub \u5e73\u53f0\u7684\u901a\u77e5\u63a8\u9001\u76f8\u5173\u4e8b\u4ef6\u8fdb\u884c\u8ddf\u8e2a\u3002","title":"6.3 \u8ddf\u8e2a\u901a\u77e5\u63a8\u9001\u76f8\u5173\u4e8b\u4ef6"},{"location":"track/dmhubsdk_ios_guide/#631","text":"\u4e3a\u4e86\u91c7\u96c6\u6d88\u606f\u63a8\u9001\u76f8\u5173\u4fe1\u606f\uff0c\u8ddf\u8e2a\u6765\u81ea DM Hub \u5e73\u53f0\u7684\u901a\u77e5\u63a8\u9001\u76f8\u5173\u4e8b\u4ef6\uff0cDMHubSDK \u9700\u8981\u83b7\u53d6\u60a8\u5728\u63a8\u9001\u670d\u52a1\u5546\u6ce8\u518c\u5e94\u7528\u65f6\u83b7\u5f97\u7684 AppKey\uff0c\u4ee5\u53ca\u63a8\u9001\u670d\u52a1\u5546\u5206\u914d\u7ed9\u8bbe\u5907\u7684\u6807\u8bc6\uff08\u6781\u5149\u7684 registrationID\u3001\u4e2a\u63a8\u7684 clientId\uff09\u3002 \u63a5\u53e3\u5b9a\u4e49 /** \u8bbe\u7f6e\u6d88\u606f\u63a8\u9001\u7684\u76f8\u5173\u4fe1\u606f\uff0c\u4ee5\u4fbf\u901a\u8fc7 DM Hub \u5bf9\u5ba2\u6237\u8fdb\u884c App \u6d88\u606f\u63a8\u9001 @param appKey \u5728\u63a8\u9001\u670d\u52a1\u5546\u6ce8\u518c\u5e94\u7528\u65f6\u83b7\u5f97\u7684 AppKey @param provider \u63a8\u9001\u670d\u52a1\u5546\uff0c\u76ee\u524d\u652f\u6301\u6781\u5149\uff08@ jpush \uff09\u548c\u4e2a\u63a8\uff08@ getui \uff09 */ + (void)setAppKey:(NSString *)appKey forProvider:(NSString *)provider; /** \u8bbe\u7f6e\u6d88\u606f\u63a8\u9001\u7684\u76f8\u5173\u4fe1\u606f\uff0c\u4ee5\u4fbf\u901a\u8fc7 DM Hub \u5bf9\u5ba2\u6237\u8fdb\u884c App \u6d88\u606f\u63a8\u9001 @param appKey \u5728\u63a8\u9001\u670d\u52a1\u5546\u6ce8\u518c\u5e94\u7528\u65f6\u83b7\u5f97\u7684 AppKey @param pushId \u63a8\u9001\u670d\u52a1\u5546\u5206\u914d\u7ed9\u8bbe\u5907\u7684\u6807\u8bc6\uff0c\u6781\u5149\u7684 registrationID \u6216\u4e2a\u63a8\u7684 clientId @param provider \u63a8\u9001\u670d\u52a1\u5546\uff0c\u76ee\u524d\u652f\u6301\u6781\u5149\uff08@ jpush \uff09\u548c\u4e2a\u63a8\uff08@ getui \uff09 */ + (void)setAppKey:(NSString *)appKey pushId:(NSString *)pushId forProvider:(NSString *)provider;","title":"6.3.1 \u8bbe\u7f6e\u6d88\u606f\u63a8\u9001\u76f8\u5173\u4fe1\u606f"},{"location":"track/dmhubsdk_ios_guide/#632-jpush","text":"\u63a5\u53e3\u5b9a\u4e49 /** \u8ddf\u8e2a\u6536\u5230 JPush \u81ea\u5b9a\u4e49\u6d88\u606f\u4e8b\u4ef6 @param notification JPush \u6536\u5230\u81ea\u5b9a\u4e49\u6d88\u606f\u7684\u56de\u8c03\u65b9\u6cd5\u4e2d\u4f20\u5165\u7684 notification */ + (void)trackReceiveJPushMessage:(NSNotification *_Nonnull)notification; \u4ee3\u7801\u793a\u4f8b // \u6536\u5230 JPush \u81ea\u5b9a\u4e49\u6d88\u606f\u7684\u56de\u8c03 - (void)didReceiveJPushMessage:(NSNotification *)notification { [DMHubSDK trackReceiveJPushMessage:notification]; }","title":"6.3.2 \u8ddf\u8e2a JPush \u63a8\u9001\u76f8\u5173\u4e8b\u4ef6"},{"location":"track/dmhubsdk_ios_guide/#633-getui","text":"\u63a5\u53e3\u5b9a\u4e49 /** \u8ddf\u8e2a\u6536\u5230 GeTui \u900f\u4f20\u6d88\u606f\u4e8b\u4ef6 @param payloadData GeTui \u6536\u5230\u900f\u4f20\u6d88\u606f\u7684\u56de\u8c03\u65b9\u6cd5\u4e2d\u4f20\u5165\u7684 payloadData @param offLine GeTui \u6536\u5230\u900f\u4f20\u6d88\u606f\u7684\u56de\u8c03\u65b9\u6cd5\u4e2d\u4f20\u5165\u7684 offLine */ + (void)trackReceiveGeTuiPayloadData:(NSData *_Nonnull)payloadData offLine:(BOOL)offLine; \u4ee3\u7801\u793a\u4f8b // \u6536\u5230 GeTui \u900f\u4f20\u6d88\u606f\u7684\u56de\u8c03 - (void)GeTuiSdkDidReceivePayloadData:(NSData *)payloadData andTaskId:(NSString *)taskId andMsgId:(NSString *)msgId andOffLine:(BOOL)offLine fromGtAppId:(NSString *)appId { [DMHubSDK trackReceiveGeTuiPayloadData:payloadData offLine:offLine]; }","title":"6.3.3 \u8ddf\u8e2a GeTui \u63a8\u9001\u76f8\u5173\u4e8b\u4ef6"},{"location":"track/ioscollection/","text":"\u8bf7\u70b9\u51fb\u94fe\u63a5 iOS SDK \u5f00\u53d1\u6307\u5357","title":"Ioscollection"},{"location":"track/jscollection/","text":"\u516c\u5171\u57cb\u70b9\u8bf4\u660e \u8981\u5148\u5bfc\u5165\u57cb\u70b9\u7684js\u6587\u4ef6\u624d\u80fd\u4f7f\u7528\u57cb\u70b9\u529f\u80fd, \u767b\u5f55DM Hub,\u70b9\u51fb\u4e92\u52a8,\u5728\u4e0b\u62c9\u5217\u8868\u4e2d\u9009\u62e9\u516c\u53f8\u7f51\u7ad9 \u8fdb\u5165\u5982\u4e0b\u9875\u9762: \u70b9\u51fb\u8fde\u63a5\u7f51\u7ad9,\u5728\u6253\u5f00\u7684\u9875\u9762\u4e2d\u590d\u5236\u5982\u4e0b\u4ee3\u7801 \u8fd9\u6bb5\u4ee3\u7801\u5c31\u662f\u57cb\u70b9\u7684js\u6587\u4ef6,\u5728\u6bcf\u4e2a\u9875\u9762\u4e2d\u90fd\u8981\u5bfc\u5165\u8be5js\u6587\u4ef6,\u8fd9\u6837\u5c31\u53ef\u4ee5\u4f7f\u7528\u57cb\u70b9\u529f\u80fd\u6765\u8fdb\u884c\u8ffd\u8e2a\u548c\u7edf\u8ba1\u4e86 \u4e8b\u4ef6\u63a8\u9001 js\u57cb\u70b9 \u5bf9\u4e8e\u6253\u5f00\u94fe\u63a5\u89e6\u53d1\u7684\u4e8b\u4ef6,\u53ea\u9700\u8981\u5728\u88ab\u6253\u5f00\u7684\u9875\u9762\u4e2d\u653e\u5165\u5982\u4e0b\u4ee3\u7801: script src= //cbe.convertlab.com/cbe/collect?tid=7680584538142272831 at=0 h=web /script script clab_tracker.ready(function(){ this.push({}); this.track(event,targetName,targetId); }); /script \u8fd8\u53ef\u4ee5\u76f4\u63a5\u5728\u94fe\u63a5\u4e0a \u6dfb\u52a0\u4e00\u4e2a\u5c5e\u6027 data-cl-event ,\u503c\u4e3a\u8981\u89e6\u53d1\u7684\u4e8b\u4ef6,\u5982: a data-cl-event = open_page /a \u5982\u679c\u4e8b\u4ef6\u7684\u89e6\u53d1\u4e0d\u662f\u6709\u94fe\u63a5\u7684\u70b9\u51fb\u89e6\u53d1\u7684\uff0c\u4e5f\u53ef\u4ee5\u4f7f\u7528track\u65b9\u6cd5\u6765\u63d0\u4ea4\u4e8b\u4ef6\uff0c track\u65b9\u6cd5\u7684\u5b9a\u4e49\uff1a track:function(event,targetName,targetId,properties,callback) properties\u53c2\u6570\u4e3a\u53ef\u9009\uff0c\u5982\u679c\u6709properties\u53c2\u6570\u4f1a\u66ff\u6362page\u7684properties callback \u53c2\u6570\u4e3a\u53ef\u9009\uff0c\u5982\u679c\u6709callback\u5728\u5b8c\u6210track\u53d1\u9001\u52a8\u4f5c\u540e\u8c03\u7528\u6b64\u65b9\u6cd5 \u5bf9\u4e8e\u70b9\u51fb\u6309\u94ae\u4e8b\u4ef6,\u9700\u8981\u5728\u8be5\u6309\u94ae\u89e6\u53d1\u7684onclick\u65b9\u6cd5\u4e2d\u6dfb\u52a0\u5982\u4e0b\u4ee3\u7801: if(_cl_tracker){ _cl_tracker.track(event,targetName,targetId); } Track\u65b9\u6cd5\u7684\u53c2\u6570\u610f\u4e49 Event \u4e8b\u4ef6\u7c7b\u578b targetName \u6bd4\u5982\u5982\u679c\u4e8b\u4ef6\u4e3a\u5173\u6ce8\u516c\u4f17\u53f7\uff0ctargetName\u4e3a\u516c\u4f17\u53f7\u7684\u540d\u5b57 targetId \u6bd4\u5982\u5982\u679c\u4e8b\u4ef6\u4e3a\u5173\u6ce8\u516c\u4f17\u53f7\uff0ctargetId\u4e3a\u516c\u4f17\u53f7\u5728DM Hub\u7cfb\u7edf\u4e2d\u7684id \u83b7\u53d6\u5d4c\u5165\u5f0fform\u8868\u5355 1. \u767b\u5f55 DM Hub 2. \u70b9\u51fb\u4e92\u52a8\u6309\u94ae,\u51fa\u73b0\u4e0b\u62c9\u6846\u9009\u9879,\u9009\u62e9\u516c\u53f8\u7f51\u7ad9 \u9009\u62e9\u516c\u53f8\u7f51\u7ad9\u540e,\u8fdb\u5165\u5982\u4e0b\u9875\u9762 \u70b9\u51fb\u8bbf\u5ba2\u4fe1\u606f\u6536\u96c6,\u70b9\u51fb\u540e\u8fdb\u5165form\u8868\u5355\u9875\u9762,\u70b9\u51fb\u53f3\u4fa7\u7684 \u65b0\u5efa\u8868\u5355 : \u8fd9\u6837\u6211\u4eec\u5c31\u8fdb\u5165\u4e86\u521b\u5efaform\u8868\u5355\u9875\u9762,\u8868\u5355\u540d\u53ef\u81ea\u5b9a\u4e49,\u9875\u9762\u5e03\u5c40\u5982\u4e0b: \u5de6\u4fa7\u914d\u7f6e\u8868\u5355\u4fe1\u606f,\u914d\u7f6eform\u8868\u5355\u7684\u5c5e\u6027,\u8bf7\u70b9\u51fb\u6309\u94ae \u6dfb\u52a0\u5b57\u6bb5 \u5982\u679c\u9700\u8981\u81ea\u5b9a\u4e49\u5c5e\u6027,\u8bf7\u70b9\u51fb\u6309\u94ae \u65b0\u5efa\u5ba2\u6237\u5c5e\u6027 \u70b9\u51fb\u540e,\u5728\u8f93\u5165\u6846\u4e2d\u8f93\u5165\u81ea\u5b9a\u4e49\u7684\u5c5e\u6027\u540d\u79f0,\u70b9\u51fb\u4fdd\u5b58\u540e,\u6dfb\u52a0\u81ea\u5b9a\u4e49\u5c5e\u6027\u6210\u529f 3. \u521b\u5efaform\u8868\u5355,\u70b9\u51fb\u9700\u8981\u7684\u5c5e\u6027,\u53f3\u8fb9\u4f1a\u751f\u6210\u5bf9\u5e94\u7684\u8868\u5355 \u70b9\u51fb\u53f3\u4e0a\u89d2\u7684 \u4fdd\u5b58 \u6309\u94ae,\u4fdd\u5b58form\u8868\u5355 4. \u4fdd\u5b58\u6210\u529f\u540e,\u8df3\u8f6c\u5230form\u5217\u8868,\u5217\u51fa\u4f60\u521b\u5efa\u7684\u6240\u6709\u7684form\u8868\u5355,\u53ef\u4ee5\u901a\u8fc7\u8868\u5355\u540d\u79f0\u67e5\u770b\u6307\u5b9a\u7684form\u8868\u5355 5. \u83b7\u53d6form\u8868\u5355\u4ee3\u7801,\u70b9\u51fb\u6309\u94ae \u8868\u5355\u4ee3\u7801 ,\u5f39\u51fa\u6846\u4e2d\u663e\u793a\u7684\u5c31\u662fform\u8868\u5355\u7684\u4ee3\u7801 \u628a\u8fd9\u6bb5\u4ee3\u7801\u653e\u5165\u9700\u8981\u5d4c\u5165\u8868\u5355\u7684\u5730\u65b9,\u5c31\u53ef\u4ee5\u751f\u6210\u5bf9\u5e94\u7684form\u8868\u5355 \u7528\u6237\u81ea\u7531\u8868\u5355\u63d0\u4ea4\u6570\u636e \u5982\u4f55\u4f7f\u7528\u81ea\u5df1\u7684form\u8868\u5355\u6837\u5f0f \u6211\u4eec\u5df2\u7ecf\u521b\u5efa\u597d\u4e86form\u8868\u5355,\u4f46\u662f\u539f\u751fform\u8868\u5355\u7684\u6837\u5f0f\u662f\u65e0\u6cd5\u4fee\u6539\u7684,\u5982\u679c\u7528\u6237\u60f3\u8981\u4f7f\u7528\u81ea\u5df1\u7684\u8868\u5355\u6837\u5f0f, \u64cd\u4f5c\u6d41\u7a0b\u5982\u4e0b: 1. \u67e5\u8be2\u5c5e\u6027\u7684id \u8fdb\u5165\u8bbe\u7f6e\u4e2d\u5fc3\u540e,\u70b9\u51fb\u6309\u94ae\u201d\u5ba2\u6237\u5c5e\u6027\u201d \u8fdb\u5165\u5ba2\u6237\u5c5e\u6027\u9875\u9762,\u91cc\u9762\u6709\u5ba2\u6237\u5c5e\u6027\u7684id,\u5305\u62ec\u81ea\u5b9a\u4e49\u7684\u5c5e\u6027 2. \u83b7\u53d6action \u5c06\u7528\u6237\u7684form\u8868\u5355\u4e2d\u7684 name \u548caction\u66ff\u6362\u4e3aDM hub\u63d0\u4f9b\u7684 name \u548caction,\u5c31\u80fd\u4f7f\u7528\u81ea\u5df1\u7684form\u8868\u5355\u6837\u5f0f,\u5c06\u6570\u636e\u63d0\u4ea4\u5230DM hub\u4e2d 3. \u600e\u4e48\u67e5\u770buuid \u8fd9\u662f\u6211\u4eec\u521b\u5efa\u7684\u8868\u5355,\u70b9\u51fb\u8868\u5355\u540d\u79f0,\u8df3\u8f6c\u5230\u8868\u5355\u6570\u636e\u9875\u9762,\u6ce8\u610f\u8868\u5355\u7684url \u6700\u540e\u4e00\u4e2a\u53c2\u6570\u5c31\u662fuuid \u5728\u6253\u5f00\u9875\u9762\u65f6\uff0c\u53d1GET\u8bf7\u6c42\u83b7\u53d6cltoken\uff0c\u8be5token\u5728\u63d0\u4ea4\u8868\u5355\u65f6\u4f7f\u7528\uff0c\u5e76\u4e14\u53ea\u80fd\u4f7f\u7528\u4e00\u6b21\uff0c\u5982\u679c\u8981\u518d\u6b21\u63d0\u4ea4\u9700\u91cd\u65b0\u83b7\u53d6cltoken, \u5982\u679c\u8981\u91cd\u590d\u4f7f\u7528token,\u8bf7\u53c2\u8003\u5982\u4e0bdemo: \u7ea2\u8272\u6846\u6ce8\u660e\u7684\u662f\u8981\u6dfb\u52a0\u5230\u5916\u90e8form\u8868\u5355\u4e2d\u7684 GET: http://host.convertlab.com/formdata/get/{uuid} \u8fd4\u56de\u7684\u7ed3\u679c\u683c\u5f0f\u5982\u4e0b: { uuid : d8625e52aa2b42d8882546b581a5046c , title : \u65b0\u8868\u5355 , content : {\\ fields\\ :[{\\ name\\ :\\ name\\ ,\\ type\\ :\\ Text\\ ,\\ label\\ :\\ \u59d3\u540d\\ ,\\ description\\ :\\ \\ ,\\ required\\ :false,\\ placeholder\\ :\\ \u59d3\u540d\\ },{\\ name\\ :\\ wechat\\ ,\\ type\\ :\\ Text\\ ,\\ label\\ :\\ \u5fae\u4fe1\u53f7\\ ,\\ description\\ :\\ \\ ,\\ required\\ :false,\\ placeholder\\ :\\ \u5fae\u4fe1\u53f7\\ }],\\ btnText\\ :\\ \u63d0\u4ea4\\ ,\\ style\\ :{\\ label\\ :{\\ fontFamily\\ :\\ Microsoft YaHei\\ ,\\ fontSize\\ :\\ medium\\ ,\\ bold\\ :false,\\ color\\ :\\ #444444\\ },\\ description\\ :{\\ fontFamily\\ :\\ Microsoft YaHei\\ ,\\ fontSize\\ :\\ medium\\ ,\\ bold\\ :false,\\ color\\ :\\ #9a9a9a\\ },\\ option\\ :{\\ fontFamily\\ :\\ Microsoft YaHei\\ ,\\ fontSize\\ :\\ medium\\ ,\\ bold\\ :false,\\ color\\ :\\ #777777\\ },\\ lingHeight\\ :\\ small\\ ,\\ field\\ :{\\ radius\\ :\\ on\\ ,\\ size\\ :\\ 1\\ ,\\ color\\ :\\ #e6e2e2\\ },\\ button\\ :{\\ shadow\\ :\\ off\\ ,\\ size\\ :\\ medium\\ ,\\ color\\ :\\ #2eb2ed\\ ,\\ borderRadius\\ :\\ on\\ ,\\ borderSize\\ :\\ 0\\ ,\\ borderColor\\ :\\ #2eb2ed\\ ,\\ textFont\\ :\\ Microsoft YaHei\\ ,\\ textSize\\ :\\ medium\\ ,\\ textColor\\ :\\ #ffffff\\ ,\\ textBold\\ :false,\\ layout\\ :\\ center\\ }}} , targetGroup : 0, submitScore : 0, styleId : 0, style : , stage : , showLimitSubmit : false, showTask : false, autoFill : false, taskTitle : , taskPriority : Medium , taskAssignee : 0 , redirectUuid : , redirectUrl : , redirectType : text , redirectText : , dateCreated : 2017-07-12T05:32:37Z , lastUpdated : 2017-07-12T05:32:37Z , server : http://host.convertlab.com , token : e3f1042e4c174f7f994b1ea4dd1c551b } \u83b7\u5f97\u7684\u6570\u636e\u4e2d\u5305\u542b\u540d\u79f0\u4e3a\u201ctoken\u201d\u7684\u6570\u636e\uff0c\u5373\u540e\u7eed\u63d0\u4ea4\u8868\u5355\u65f6\u8981\u4f7f\u7528\u7684cltoken \u600e\u6837\u83b7\u53d6\u6ce8\u518c\u7528\u6237\u7684\u4e8b\u4ef6 \u8981\u4f7f\u7528\u975e\u539f\u751f\u7684form\u8868\u5355,\u5e76\u8ffd\u8e2a\u6ce8\u518c\u7528\u6237\u6ce8\u518c\u4e4b\u524d\u4e5f\u4e4b\u540e\u7684\u6d4f\u89c8\u4e0e\u64cd\u4f5c\u8bb0\u5f55,\u8fd8\u9700\u8981\u5982\u4e0b\u914d\u7f6e: 1. \u5c06form\u8868\u5355\u7684data-cl-attached \u7684\u503c\u8bbe\u7f6e\u4e3a false 2. \u5728form\u8868\u5355\u4e2d\u6dfb\u52a0 input type= hidden id= utmb name= utmb value= / input type= hidden id= utma name= utma value= / Form\u8868\u5355\u793a\u4f8b\u4e0ejs\u65b9\u6cd5\u793a\u4f8b: form method= post data-cl-attached= false action= http://host.convertlab.com/form/bcd110f972d44083b2cdc569d6058af5 name= clForm id= clForm \u59d3\u540d: input type= text id= last_name_local name= name / br/ \u90ae\u7bb1: input id= email maxlength= 80 name= email size= 20 type= text / br/ input type= hidden id= cltoken name= cltoken value= / input type= hidden id= utmb name= utmb value= / input type= hidden id= utma name= utma value= / input type= button value= \u63d0\u4ea4 onclick= f1() class= buttons / /form script function f1(){ $.ajaxSettings.async = false; //\u8bbe\u7f6egetJson\u540c\u6b65 $.getJSON( http://host.convertlab.com/formdata/get/bcd110f972d44083b2cdc569d6058af5 , function(json) { $( #cltoken ).val(json.token); }); var cookievalue = $( input[name='cl_context'] ).val(); if(cookievalue == || cookievalue == null){ $( #utma ).val( ); $( #utmb ).val( ); }else{ var cookiearr = cookievalue.split( ); var str1 = cookiearr[0]; var utmas = str1.split( = ); var utmavalue =utmas[1]; var str2 = cookiearr[1]; var utmbs = str2.split( = ); var utmbvalue =utmbs[1]; $( #utma ).val(utmavalue); $( #utmb ).val(utmbvalue); } var fromurl = $( form ).attr( action ); $.ajax({ cache: true, type: POST , url:fromurl, data:$('#clForm').serialize(),// \u4f60\u7684formid async: false, error: function(request) { alert( Connection error ); }, success: function(data) { alert( success ); window.location= dengbaishi2.jsp ; } }); } /script script src= //cbe.convertlab.com/cbe/collect?tid=7680584538142272831 at=0 h=web /script script clab_tracker.ready(function(){ this.push({}); this.track( open_page , form\u8868\u5355 , 11 ); }); /script \u6765\u6e90\u8ddf\u8e2a \u5982\u679c\u8981\u5c06\u7f51\u7ad9\u9875\u9762\u6295\u653e\u5230\u5916\u90e8\u8425\u9500\u6e20\u9053\uff08\u4f8b\u5982\u767e\u5ea6\uff09\uff0c\u4f60\u53ef\u4ee5\u4e3aURL\u52a0\u4e0a\u6e20\u9053\u6765\u6e90\u53c2\u6570\uff0c\u8fdb\u884c\u6765\u6e90\u8ffd\u8e2a\u548c\u7edf\u8ba1 \u64cd\u4f5c\u6d41\u7a0b\u5982\u4e0b: \u70b9\u51fb\u4e92\u52a8,\u5728\u4e0b\u62c9\u5217\u8868\u4e2d\u9009\u62e9\u516c\u53f8\u7f51\u7ad9 \u5728\u8fdb\u5165\u7684\u9875\u9762\u4e2d\u70b9\u51fb \u5728\u8fd9\u91cc\u53ef\u4ee5\u8bbe\u7f6e\u53ef\u8ffd\u8e2a\u6765\u6e90\u7684url,\u70b9\u51fb \u65b0\u5efa\u53ef\u8ffd\u8e2aurl \u53ef\u914d\u7f6e\u6765\u6e90\u4e0e\u6765\u6e90\u5185\u5bb9 \u5c06\u4ee5\u4e0b\u8be5\u4ee3\u7801\u5c01\u88c5\u5165js\u6587\u4ef6\u4e2d,\u5728\u6bcf\u4e2a\u9875\u9762\u4e2d\u90fd\u8981\u5bfc\u5165\u8be5js\u6587\u4ef6 $(document).ready(function(){ var pageurl = window.location.href; var urlsource = ; if(pageurl.indexOf( cl_sr )!=-1){ var arrs = pageurl.split( cl_sr ); var urlsource = arrs[1]; urlsource = '?cl_sr' + urlsource; } $('a').each(function(){ var href = $(this).attr('href'); if(urlsource != ){ var Ahref = href + urlsource; $(this).attr( href ,Ahref); } }); }); \u8fd9\u6837\u6211\u4eec\u5c31\u80fd\u8ffd\u8e2a\u5230\u7528\u6237\u7684\u6765\u6e90","title":"Jscollection"},{"location":"track/jscollection/#_1","text":"\u8981\u5148\u5bfc\u5165\u57cb\u70b9\u7684js\u6587\u4ef6\u624d\u80fd\u4f7f\u7528\u57cb\u70b9\u529f\u80fd, \u767b\u5f55DM Hub,\u70b9\u51fb\u4e92\u52a8,\u5728\u4e0b\u62c9\u5217\u8868\u4e2d\u9009\u62e9\u516c\u53f8\u7f51\u7ad9 \u8fdb\u5165\u5982\u4e0b\u9875\u9762: \u70b9\u51fb\u8fde\u63a5\u7f51\u7ad9,\u5728\u6253\u5f00\u7684\u9875\u9762\u4e2d\u590d\u5236\u5982\u4e0b\u4ee3\u7801 \u8fd9\u6bb5\u4ee3\u7801\u5c31\u662f\u57cb\u70b9\u7684js\u6587\u4ef6,\u5728\u6bcf\u4e2a\u9875\u9762\u4e2d\u90fd\u8981\u5bfc\u5165\u8be5js\u6587\u4ef6,\u8fd9\u6837\u5c31\u53ef\u4ee5\u4f7f\u7528\u57cb\u70b9\u529f\u80fd\u6765\u8fdb\u884c\u8ffd\u8e2a\u548c\u7edf\u8ba1\u4e86","title":"\u516c\u5171\u57cb\u70b9\u8bf4\u660e"},{"location":"track/jscollection/#js","text":"\u5bf9\u4e8e\u6253\u5f00\u94fe\u63a5\u89e6\u53d1\u7684\u4e8b\u4ef6,\u53ea\u9700\u8981\u5728\u88ab\u6253\u5f00\u7684\u9875\u9762\u4e2d\u653e\u5165\u5982\u4e0b\u4ee3\u7801: script src= //cbe.convertlab.com/cbe/collect?tid=7680584538142272831 at=0 h=web /script script clab_tracker.ready(function(){ this.push({}); this.track(event,targetName,targetId); }); /script \u8fd8\u53ef\u4ee5\u76f4\u63a5\u5728\u94fe\u63a5\u4e0a \u6dfb\u52a0\u4e00\u4e2a\u5c5e\u6027 data-cl-event ,\u503c\u4e3a\u8981\u89e6\u53d1\u7684\u4e8b\u4ef6,\u5982: a data-cl-event = open_page /a \u5982\u679c\u4e8b\u4ef6\u7684\u89e6\u53d1\u4e0d\u662f\u6709\u94fe\u63a5\u7684\u70b9\u51fb\u89e6\u53d1\u7684\uff0c\u4e5f\u53ef\u4ee5\u4f7f\u7528track\u65b9\u6cd5\u6765\u63d0\u4ea4\u4e8b\u4ef6\uff0c track\u65b9\u6cd5\u7684\u5b9a\u4e49\uff1a track:function(event,targetName,targetId,properties,callback) properties\u53c2\u6570\u4e3a\u53ef\u9009\uff0c\u5982\u679c\u6709properties\u53c2\u6570\u4f1a\u66ff\u6362page\u7684properties callback \u53c2\u6570\u4e3a\u53ef\u9009\uff0c\u5982\u679c\u6709callback\u5728\u5b8c\u6210track\u53d1\u9001\u52a8\u4f5c\u540e\u8c03\u7528\u6b64\u65b9\u6cd5 \u5bf9\u4e8e\u70b9\u51fb\u6309\u94ae\u4e8b\u4ef6,\u9700\u8981\u5728\u8be5\u6309\u94ae\u89e6\u53d1\u7684onclick\u65b9\u6cd5\u4e2d\u6dfb\u52a0\u5982\u4e0b\u4ee3\u7801: if(_cl_tracker){ _cl_tracker.track(event,targetName,targetId); } Track\u65b9\u6cd5\u7684\u53c2\u6570\u610f\u4e49 Event \u4e8b\u4ef6\u7c7b\u578b targetName \u6bd4\u5982\u5982\u679c\u4e8b\u4ef6\u4e3a\u5173\u6ce8\u516c\u4f17\u53f7\uff0ctargetName\u4e3a\u516c\u4f17\u53f7\u7684\u540d\u5b57 targetId \u6bd4\u5982\u5982\u679c\u4e8b\u4ef6\u4e3a\u5173\u6ce8\u516c\u4f17\u53f7\uff0ctargetId\u4e3a\u516c\u4f17\u53f7\u5728DM Hub\u7cfb\u7edf\u4e2d\u7684id","title":"\u4e8b\u4ef6\u63a8\u9001 js\u57cb\u70b9"},{"location":"track/jscollection/#form","text":"","title":"\u83b7\u53d6\u5d4c\u5165\u5f0fform\u8868\u5355"},{"location":"track/jscollection/#1-dm-hub","text":"","title":"1. \u767b\u5f55 DM Hub"},{"location":"track/jscollection/#2","text":"\u9009\u62e9\u516c\u53f8\u7f51\u7ad9\u540e,\u8fdb\u5165\u5982\u4e0b\u9875\u9762 \u70b9\u51fb\u8bbf\u5ba2\u4fe1\u606f\u6536\u96c6,\u70b9\u51fb\u540e\u8fdb\u5165form\u8868\u5355\u9875\u9762,\u70b9\u51fb\u53f3\u4fa7\u7684 \u65b0\u5efa\u8868\u5355 : \u8fd9\u6837\u6211\u4eec\u5c31\u8fdb\u5165\u4e86\u521b\u5efaform\u8868\u5355\u9875\u9762,\u8868\u5355\u540d\u53ef\u81ea\u5b9a\u4e49,\u9875\u9762\u5e03\u5c40\u5982\u4e0b: \u5de6\u4fa7\u914d\u7f6e\u8868\u5355\u4fe1\u606f,\u914d\u7f6eform\u8868\u5355\u7684\u5c5e\u6027,\u8bf7\u70b9\u51fb\u6309\u94ae \u6dfb\u52a0\u5b57\u6bb5 \u5982\u679c\u9700\u8981\u81ea\u5b9a\u4e49\u5c5e\u6027,\u8bf7\u70b9\u51fb\u6309\u94ae \u65b0\u5efa\u5ba2\u6237\u5c5e\u6027 \u70b9\u51fb\u540e,\u5728\u8f93\u5165\u6846\u4e2d\u8f93\u5165\u81ea\u5b9a\u4e49\u7684\u5c5e\u6027\u540d\u79f0,\u70b9\u51fb\u4fdd\u5b58\u540e,\u6dfb\u52a0\u81ea\u5b9a\u4e49\u5c5e\u6027\u6210\u529f","title":"2. \u70b9\u51fb\u4e92\u52a8\u6309\u94ae,\u51fa\u73b0\u4e0b\u62c9\u6846\u9009\u9879,\u9009\u62e9\u516c\u53f8\u7f51\u7ad9"},{"location":"track/jscollection/#3-form","text":"\u70b9\u51fb\u53f3\u4e0a\u89d2\u7684 \u4fdd\u5b58 \u6309\u94ae,\u4fdd\u5b58form\u8868\u5355","title":"3. \u521b\u5efaform\u8868\u5355,\u70b9\u51fb\u9700\u8981\u7684\u5c5e\u6027,\u53f3\u8fb9\u4f1a\u751f\u6210\u5bf9\u5e94\u7684\u8868\u5355"},{"location":"track/jscollection/#4-formformform","text":"","title":"4. \u4fdd\u5b58\u6210\u529f\u540e,\u8df3\u8f6c\u5230form\u5217\u8868,\u5217\u51fa\u4f60\u521b\u5efa\u7684\u6240\u6709\u7684form\u8868\u5355,\u53ef\u4ee5\u901a\u8fc7\u8868\u5355\u540d\u79f0\u67e5\u770b\u6307\u5b9a\u7684form\u8868\u5355"},{"location":"track/jscollection/#5-form-form","text":"\u628a\u8fd9\u6bb5\u4ee3\u7801\u653e\u5165\u9700\u8981\u5d4c\u5165\u8868\u5355\u7684\u5730\u65b9,\u5c31\u53ef\u4ee5\u751f\u6210\u5bf9\u5e94\u7684form\u8868\u5355","title":"5. \u83b7\u53d6form\u8868\u5355\u4ee3\u7801,\u70b9\u51fb\u6309\u94ae \u8868\u5355\u4ee3\u7801,\u5f39\u51fa\u6846\u4e2d\u663e\u793a\u7684\u5c31\u662fform\u8868\u5355\u7684\u4ee3\u7801"},{"location":"track/jscollection/#_2","text":"\u5982\u4f55\u4f7f\u7528\u81ea\u5df1\u7684form\u8868\u5355\u6837\u5f0f \u6211\u4eec\u5df2\u7ecf\u521b\u5efa\u597d\u4e86form\u8868\u5355,\u4f46\u662f\u539f\u751fform\u8868\u5355\u7684\u6837\u5f0f\u662f\u65e0\u6cd5\u4fee\u6539\u7684,\u5982\u679c\u7528\u6237\u60f3\u8981\u4f7f\u7528\u81ea\u5df1\u7684\u8868\u5355\u6837\u5f0f, \u64cd\u4f5c\u6d41\u7a0b\u5982\u4e0b:","title":"\u7528\u6237\u81ea\u7531\u8868\u5355\u63d0\u4ea4\u6570\u636e"},{"location":"track/jscollection/#1-id","text":"\u8fdb\u5165\u8bbe\u7f6e\u4e2d\u5fc3\u540e,\u70b9\u51fb\u6309\u94ae\u201d\u5ba2\u6237\u5c5e\u6027\u201d \u8fdb\u5165\u5ba2\u6237\u5c5e\u6027\u9875\u9762,\u91cc\u9762\u6709\u5ba2\u6237\u5c5e\u6027\u7684id,\u5305\u62ec\u81ea\u5b9a\u4e49\u7684\u5c5e\u6027","title":"1. \u67e5\u8be2\u5c5e\u6027\u7684id"},{"location":"track/jscollection/#2-action","text":"\u5c06\u7528\u6237\u7684form\u8868\u5355\u4e2d\u7684 name \u548caction\u66ff\u6362\u4e3aDM hub\u63d0\u4f9b\u7684 name \u548caction,\u5c31\u80fd\u4f7f\u7528\u81ea\u5df1\u7684form\u8868\u5355\u6837\u5f0f,\u5c06\u6570\u636e\u63d0\u4ea4\u5230DM hub\u4e2d","title":"2. \u83b7\u53d6action"},{"location":"track/jscollection/#3-uuid","text":"\u8fd9\u662f\u6211\u4eec\u521b\u5efa\u7684\u8868\u5355,\u70b9\u51fb\u8868\u5355\u540d\u79f0,\u8df3\u8f6c\u5230\u8868\u5355\u6570\u636e\u9875\u9762,\u6ce8\u610f\u8868\u5355\u7684url \u6700\u540e\u4e00\u4e2a\u53c2\u6570\u5c31\u662fuuid \u5728\u6253\u5f00\u9875\u9762\u65f6\uff0c\u53d1GET\u8bf7\u6c42\u83b7\u53d6cltoken\uff0c\u8be5token\u5728\u63d0\u4ea4\u8868\u5355\u65f6\u4f7f\u7528\uff0c\u5e76\u4e14\u53ea\u80fd\u4f7f\u7528\u4e00\u6b21\uff0c\u5982\u679c\u8981\u518d\u6b21\u63d0\u4ea4\u9700\u91cd\u65b0\u83b7\u53d6cltoken, \u5982\u679c\u8981\u91cd\u590d\u4f7f\u7528token,\u8bf7\u53c2\u8003\u5982\u4e0bdemo: \u7ea2\u8272\u6846\u6ce8\u660e\u7684\u662f\u8981\u6dfb\u52a0\u5230\u5916\u90e8form\u8868\u5355\u4e2d\u7684 GET: http://host.convertlab.com/formdata/get/{uuid} \u8fd4\u56de\u7684\u7ed3\u679c\u683c\u5f0f\u5982\u4e0b: { uuid : d8625e52aa2b42d8882546b581a5046c , title : \u65b0\u8868\u5355 , content : {\\ fields\\ :[{\\ name\\ :\\ name\\ ,\\ type\\ :\\ Text\\ ,\\ label\\ :\\ \u59d3\u540d\\ ,\\ description\\ :\\ \\ ,\\ required\\ :false,\\ placeholder\\ :\\ \u59d3\u540d\\ },{\\ name\\ :\\ wechat\\ ,\\ type\\ :\\ Text\\ ,\\ label\\ :\\ \u5fae\u4fe1\u53f7\\ ,\\ description\\ :\\ \\ ,\\ required\\ :false,\\ placeholder\\ :\\ \u5fae\u4fe1\u53f7\\ }],\\ btnText\\ :\\ \u63d0\u4ea4\\ ,\\ style\\ :{\\ label\\ :{\\ fontFamily\\ :\\ Microsoft YaHei\\ ,\\ fontSize\\ :\\ medium\\ ,\\ bold\\ :false,\\ color\\ :\\ #444444\\ },\\ description\\ :{\\ fontFamily\\ :\\ Microsoft YaHei\\ ,\\ fontSize\\ :\\ medium\\ ,\\ bold\\ :false,\\ color\\ :\\ #9a9a9a\\ },\\ option\\ :{\\ fontFamily\\ :\\ Microsoft YaHei\\ ,\\ fontSize\\ :\\ medium\\ ,\\ bold\\ :false,\\ color\\ :\\ #777777\\ },\\ lingHeight\\ :\\ small\\ ,\\ field\\ :{\\ radius\\ :\\ on\\ ,\\ size\\ :\\ 1\\ ,\\ color\\ :\\ #e6e2e2\\ },\\ button\\ :{\\ shadow\\ :\\ off\\ ,\\ size\\ :\\ medium\\ ,\\ color\\ :\\ #2eb2ed\\ ,\\ borderRadius\\ :\\ on\\ ,\\ borderSize\\ :\\ 0\\ ,\\ borderColor\\ :\\ #2eb2ed\\ ,\\ textFont\\ :\\ Microsoft YaHei\\ ,\\ textSize\\ :\\ medium\\ ,\\ textColor\\ :\\ #ffffff\\ ,\\ textBold\\ :false,\\ layout\\ :\\ center\\ }}} , targetGroup : 0, submitScore : 0, styleId : 0, style : , stage : , showLimitSubmit : false, showTask : false, autoFill : false, taskTitle : , taskPriority : Medium , taskAssignee : 0 , redirectUuid : , redirectUrl : , redirectType : text , redirectText : , dateCreated : 2017-07-12T05:32:37Z , lastUpdated : 2017-07-12T05:32:37Z , server : http://host.convertlab.com , token : e3f1042e4c174f7f994b1ea4dd1c551b } \u83b7\u5f97\u7684\u6570\u636e\u4e2d\u5305\u542b\u540d\u79f0\u4e3a\u201ctoken\u201d\u7684\u6570\u636e\uff0c\u5373\u540e\u7eed\u63d0\u4ea4\u8868\u5355\u65f6\u8981\u4f7f\u7528\u7684cltoken \u600e\u6837\u83b7\u53d6\u6ce8\u518c\u7528\u6237\u7684\u4e8b\u4ef6 \u8981\u4f7f\u7528\u975e\u539f\u751f\u7684form\u8868\u5355,\u5e76\u8ffd\u8e2a\u6ce8\u518c\u7528\u6237\u6ce8\u518c\u4e4b\u524d\u4e5f\u4e4b\u540e\u7684\u6d4f\u89c8\u4e0e\u64cd\u4f5c\u8bb0\u5f55,\u8fd8\u9700\u8981\u5982\u4e0b\u914d\u7f6e: 1. \u5c06form\u8868\u5355\u7684data-cl-attached \u7684\u503c\u8bbe\u7f6e\u4e3a false 2. \u5728form\u8868\u5355\u4e2d\u6dfb\u52a0 input type= hidden id= utmb name= utmb value= / input type= hidden id= utma name= utma value= / Form\u8868\u5355\u793a\u4f8b\u4e0ejs\u65b9\u6cd5\u793a\u4f8b: form method= post data-cl-attached= false action= http://host.convertlab.com/form/bcd110f972d44083b2cdc569d6058af5 name= clForm id= clForm \u59d3\u540d: input type= text id= last_name_local name= name / br/ \u90ae\u7bb1: input id= email maxlength= 80 name= email size= 20 type= text / br/ input type= hidden id= cltoken name= cltoken value= / input type= hidden id= utmb name= utmb value= / input type= hidden id= utma name= utma value= / input type= button value= \u63d0\u4ea4 onclick= f1() class= buttons / /form script function f1(){ $.ajaxSettings.async = false; //\u8bbe\u7f6egetJson\u540c\u6b65 $.getJSON( http://host.convertlab.com/formdata/get/bcd110f972d44083b2cdc569d6058af5 , function(json) { $( #cltoken ).val(json.token); }); var cookievalue = $( input[name='cl_context'] ).val(); if(cookievalue == || cookievalue == null){ $( #utma ).val( ); $( #utmb ).val( ); }else{ var cookiearr = cookievalue.split( ); var str1 = cookiearr[0]; var utmas = str1.split( = ); var utmavalue =utmas[1]; var str2 = cookiearr[1]; var utmbs = str2.split( = ); var utmbvalue =utmbs[1]; $( #utma ).val(utmavalue); $( #utmb ).val(utmbvalue); } var fromurl = $( form ).attr( action ); $.ajax({ cache: true, type: POST , url:fromurl, data:$('#clForm').serialize(),// \u4f60\u7684formid async: false, error: function(request) { alert( Connection error ); }, success: function(data) { alert( success ); window.location= dengbaishi2.jsp ; } }); } /script script src= //cbe.convertlab.com/cbe/collect?tid=7680584538142272831 at=0 h=web /script script clab_tracker.ready(function(){ this.push({}); this.track( open_page , form\u8868\u5355 , 11 ); }); /script","title":"3. \u600e\u4e48\u67e5\u770buuid"},{"location":"track/jscollection/#_3","text":"\u5982\u679c\u8981\u5c06\u7f51\u7ad9\u9875\u9762\u6295\u653e\u5230\u5916\u90e8\u8425\u9500\u6e20\u9053\uff08\u4f8b\u5982\u767e\u5ea6\uff09\uff0c\u4f60\u53ef\u4ee5\u4e3aURL\u52a0\u4e0a\u6e20\u9053\u6765\u6e90\u53c2\u6570\uff0c\u8fdb\u884c\u6765\u6e90\u8ffd\u8e2a\u548c\u7edf\u8ba1 \u64cd\u4f5c\u6d41\u7a0b\u5982\u4e0b: \u70b9\u51fb\u4e92\u52a8,\u5728\u4e0b\u62c9\u5217\u8868\u4e2d\u9009\u62e9\u516c\u53f8\u7f51\u7ad9 \u5728\u8fdb\u5165\u7684\u9875\u9762\u4e2d\u70b9\u51fb \u5728\u8fd9\u91cc\u53ef\u4ee5\u8bbe\u7f6e\u53ef\u8ffd\u8e2a\u6765\u6e90\u7684url,\u70b9\u51fb \u65b0\u5efa\u53ef\u8ffd\u8e2aurl \u53ef\u914d\u7f6e\u6765\u6e90\u4e0e\u6765\u6e90\u5185\u5bb9 \u5c06\u4ee5\u4e0b\u8be5\u4ee3\u7801\u5c01\u88c5\u5165js\u6587\u4ef6\u4e2d,\u5728\u6bcf\u4e2a\u9875\u9762\u4e2d\u90fd\u8981\u5bfc\u5165\u8be5js\u6587\u4ef6 $(document).ready(function(){ var pageurl = window.location.href; var urlsource = ; if(pageurl.indexOf( cl_sr )!=-1){ var arrs = pageurl.split( cl_sr ); var urlsource = arrs[1]; urlsource = '?cl_sr' + urlsource; } $('a').each(function(){ var href = $(this).attr('href'); if(urlsource != ){ var Ahref = href + urlsource; $(this).attr( href ,Ahref); } }); }); \u8fd9\u6837\u6211\u4eec\u5c31\u80fd\u8ffd\u8e2a\u5230\u7528\u6237\u7684\u6765\u6e90","title":"\u6765\u6e90\u8ddf\u8e2a"},{"location":"track/site_collection_guide/","text":"1. \u7f51\u7ad9\u57cb\u70b9\u8bf4\u660e DM Hub \u4e2d\u7684\u7f51\u7ad9\u57cb\u70b9\u529f\u80fd\u53ef\u4ee5\u5e2e\u60a8\u7edf\u8ba1\u7f51\u7ad9\u6d41\u91cf\uff0c\u8ffd\u8e2a\u6d41\u91cf\u6765\u6e90\uff0c\u6355\u83b7\u7f51\u7ad9\u8bbf\u5ba2\u4fe1\u606f\u3002 \u6bd4\u8d77\u5355\u4e00\u7684\u7f51\u7ad9\u6d41\u91cf\u7edf\u8ba1\u4e0e\u8ffd\u8e2a\uff0cDM Hub \u80fd\u591f\u5c06\u7ebf\u7d22\u5728\u5404\u6e20\u9053\u7559\u4e0b\u7684\u75d5\u8ff9\u6574\u5408\uff0c\u4e3a\u8425\u9500\u4eba\u5458\u63d0\u4f9b\u5b8c\u6574\u7684\u5ba2\u6237\u753b\u50cf\uff0c\u4ee5\u8fdb\u884c\u66f4\u52a0\u7cbe\u51c6\u7684\u8425\u9500\u4e0e\u5185\u5bb9\u63a8\u9001\u3002 2. \u8bbe\u7f6e\u8ffd\u8e2a\u7f51\u7ad9 \u5728\u3010\u8bbe\u7f6e\u3011-\u3010\u8bbe\u7f6e\u4e2d\u5fc3\u3011\u4e2d\u9009\u62e9\u3010\u7f51\u7ad9\u3011\u6a21\u5757\u8fdb\u884c\u8ffd\u8e2a\u7f51\u7ad9\u8bbe\u7f6e\u3002 2.1 \u5d4c\u5165\u8ffd\u8e2a\u4ee3\u7801 \u5728\u6240\u6709\u9700\u8981\u7edf\u8ba1\u7684\u7f51\u7ad9\u9875\u9762\u4e2d\u5d4c\u5165\u8ffd\u8e2a\u4ee3\u7801\uff1a script src= //cbe.convertlab.com/cbe/collect?tid={YOUR_TID} at=0 h=web /script script clab_tracker.ready(function(){ this.push({ pageType : web }); this.track( open_page , {}); }); /script \u5176\u4e2d\u7684 {YOUR_TID} \u662f\u53d8\u5316\u7684\uff0c\u8bf7\u524d\u5f80\u8ffd\u8e2a\u7f51\u7ad9\u8bbe\u7f6e\u9875\u9762\u83b7\u53d6\u3002 2.2 \u8bbe\u7f6e\u8ffd\u8e2a\u57df\u540d \u8bbe\u7f6e\u8981\u8ffd\u8e2a\u7684\u7f51\u7ad9\u7684\u57df\u540d\uff0c\u53ea\u6709\u8bbe\u7f6e\u8fc7\u7684\u57df\u540d\u624d\u4f1a\u88ab\u8ffd\u8e2a\u3002 3. \u8ddf\u8e2a\u5ba2\u6237\u4e8b\u4ef6 3.1 \u6253\u5f00\u94fe\u63a5\u89e6\u53d1\u7684\u4e8b\u4ef6 \u5bf9\u4e8e\u6253\u5f00\u94fe\u63a5\u89e6\u53d1\u7684\u4e8b\u4ef6\uff0c\u6709\u4e24\u79cd\u65b9\u5f0f\u6765\u8fdb\u884c\u8ddf\u8e2a\uff0c\u5f00\u53d1\u8005\u53ef\u4ee5\u6839\u636e\u4f7f\u7528\u9700\u6c42\u9009\u62e9\u5176\u4e2d\u4e00\u79cd\u65b9\u5f0f\u3002 \u65b9\u5f0f\u4e00 \u5728\u88ab\u6253\u5f00\u7684\u9875\u9762\u4e2d\u653e\u5165\u5982\u4e0b\u4ee3\u7801\uff1a script src= //cbe.convertlab.com/cbe/collect?tid={YOUR_TID} at=0 h=web /script script clab_tracker.ready(function(){ this.push({}); this.track(event, targetName, targetId); }); /script \u5176\u4e2d\u7684 {YOUR_TID} \u662f\u53d8\u5316\u7684\uff0c\u8bf7\u524d\u5f80\u8ffd\u8e2a\u7f51\u7ad9\u8bbe\u7f6e\u9875\u9762\u83b7\u53d6\u3002 \u65b9\u5f0f\u4e8c \u5728\u94fe\u63a5\u4e0a\u6dfb\u52a0 data-cl-event \u548c data-cl-id \u5c5e\u6027\uff0c \u503c {event} \u4e3a\u8981\u89e6\u53d1\u7684\u4e8b\u4ef6, \u503c {id} \u4e3a\u4e8b\u4ef6\u7684targetId\u3002 a data-cl-event= {event} data-cl-id= {id} /a 3.2 \u5176\u4ed6\u884c\u4e3a\u89e6\u53d1\u7684\u4e8b\u4ef6 \u5982\u679c\u4e8b\u4ef6\u4e0d\u662f\u7531\u6253\u5f00\u94fe\u63a5\u89e6\u53d1\u7684\uff0c\u53ef\u4ee5\u901a\u8fc7\u5982\u4e0b track \u65b9\u6cd5\u6765\u63d0\u4ea4\u4e8b\u4ef6\uff1a if (clab_tracker) { clab_tracker.track(event, targetName, targetId, properties, callback); } track \u65b9\u6cd5\u53c2\u6570\u8bf4\u660e\uff1a \u53c2\u6570 \u8bf4\u660e event \u4e8b\u4ef6 id targetName \u6bd4\u5982\u4e8b\u4ef6\u4e3a\u5173\u6ce8\u516c\u4f17\u53f7\uff0ctargetName \u4e3a\u516c\u4f17\u53f7\u7684\u540d\u5b57 targetId \u6bd4\u5982\u4e8b\u4ef6\u4e3a\u5173\u6ce8\u516c\u4f17\u53f7\uff0ctargetId \u4e3a\u516c\u4f17\u53f7\u5728 DM Hub \u7cfb\u7edf\u4e2d\u7684 id properties \u53ef\u9009\uff0c\u5982\u679c\u6709 properties \u53c2\u6570\u4f1a\u66ff\u6362 page \u7684 properties callback \u53ef\u9009\uff0c\u5982\u679c\u6709 callback \u5728\u5b8c\u6210 track \u53d1\u9001\u52a8\u4f5c\u540e\u8c03\u7528\u6b64\u65b9\u6cd5 4. \u83b7\u53d6\u5d4c\u5165\u5f0f\u8868\u5355 4.1 \u65b0\u5efa\u8868\u5355 \u767b\u5f55 DM Hub \u7cfb\u7edf\uff0c\u5728\u3010\u4e92\u52a8\u3011-\u3010\u516c\u53f8\u7f51\u7ad9\u3011\u4e2d\u9009\u62e9\u3010\u8bbf\u5ba2\u4fe1\u606f\u6536\u96c6\u3011-\u3010\u5d4c\u5165\u5f0f\u8868\u5355\u3011\u65b0\u5efa\u5d4c\u5165\u5f0f\u8868\u5355\u3002 \u6839\u636e\u5b9e\u9645\u9700\u6c42\u521b\u5efa\u8868\u5355\u5b8c\u6210\u540e\uff0c\u70b9\u51fb\u3010\u4fdd\u5b58\u3011\u5b8c\u6210\u521b\u5efa\u3002 4.2 \u96c6\u6210\u8868\u5355 \u8868\u5355\u521b\u5efa\u5b8c\u6210\u540e\uff0c\u5728\u5d4c\u5165\u5f0f\u8868\u5355\u5217\u8868\u4e2d\u5c31\u4f1a\u51fa\u73b0\u65b0\u521b\u5efa\u7684\u8868\u5355\uff0c\u5f00\u53d1\u8005\u53ef\u4ee5\u70b9\u51fb\u5bf9\u5e94\u8868\u5355\u7684\u3010\u6587\u6863\u3011\u6309\u94ae\u67e5\u770b\u8868\u5355\u7684\u96c6\u6210\u6587\u6863\u3002 4.2.1 \u573a\u666f\u4e00\uff1a\u4f7f\u7528 DM Hub \u5d4c\u5165\u5f0f\u8868\u5355 \u4f7f\u7528\u8be5\u65b9\u5f0f\u5c06\u81ea\u52a8\u5728\u7f51\u9875\u4e0a\u751f\u6210\u8868\u5355\uff0c\u65e0\u9700\u81ea\u884c\u5f00\u53d1\u3002 form id= clForm data-cl-attached= true data-cl-id= {\u8868\u5355UUID} action= http://host.convertlab.com/form/{\u8868\u5355UUID} method= POST /form script type= text/javascript src= http://host.convertlab.com/js/forms/form.js /script script _clForm.loadForm( http://host.convertlab.com , {\u8868\u5355UUID} ,{ formInit: function(){}, beforeSubmit: function(){}, onSubmit: function(args){} }); /script \u5176\u4e2d {\u8868\u5355UUID} \u586b\u5199\u5728 DM Hub \u4e2d\u521b\u5efa\u7684\u5177\u4f53\u8868\u5355\u7684 uuid\u3002\u6b64\u5916\uff0c\u9700\u8981\u5728\u7f51\u9875\u7684\u5408\u9002\u5730\u65b9\u5d4c\u5165\u8ffd\u8e2a\u811a\u672c\uff0c\u5d4c\u5165\u65b9\u5f0f\u53c2\u8003 2. \u8bbe\u7f6e\u8ffd\u8e2a\u7f51\u7ad9 \u3002 4.2.2 \u573a\u666f\u4e8c\uff1a\u4f7f\u7528\u81ea\u5b9a\u4e49\u8868\u5355 \u5982\u679c\u9700\u8981\u4f7f\u7528\u81ea\u5b9a\u4e49\u8868\u5355\uff0c\u8bf7\u6309\u7167\u4e0b\u8ff0\u6b65\u9aa4\u81ea\u884c\u5f00\u53d1\uff1a \u81ea\u884c\u5f00\u53d1\u8868\u5355\uff0c\u5e76\u5728 DM Hub \u4e2d\u521b\u5efa\u76f8\u540c\u5b57\u6bb5\u7684\u5d4c\u5165\u5f0f\u8868\u5355\u7528\u6765\u63a5\u6536\u6570\u636e\u3002\u8bf7\u786e\u4fdd\u81ea\u5b9a\u4e49\u8868\u5355\u5b57\u6bb5\u7684 name \u5c5e\u6027\u548c\u751f\u6210\u7684\u5d4c\u5165\u5f0f\u8868\u5355\u4e2d\u5bf9\u5e94\u5b57\u6bb5\u7684 name \uff08\u5373 DM Hub \u5ba2\u6237\u5c5e\u6027 ID\uff09\u76f8\u540c\u3002 \u5728\u81ea\u5b9a\u4e49\u8868\u5355\u7684 form \u6807\u7b7e\u4e2d\u589e\u52a0\u5982\u4e0b\u4e24\u4e2a data \u5c5e\u6027\uff1a data-cl-attached=\"false\" data-cl-id=\"{\u8868\u5355UUID}\" \uff0c\u5176\u4e2d {\u8868\u5355UUID} \u586b\u5199\u5728 DM Hub \u4e2d\u521b\u5efa\u7684\u5177\u4f53\u8868\u5355\u7684 uuid\u3002 \u6309\u8981\u6c42\u5d4c\u5165\u8ffd\u8e2a\u811a\u672c\uff0c\u5d4c\u5165\u65b9\u5f0f\u53c2\u8003 2. \u8bbe\u7f6e\u8ffd\u8e2a\u7f51\u7ad9 \u3002 \u8ffd\u8e2a\u811a\u672c\u4f1a\u5728\u8868\u5355\u4e2d\u589e\u52a0\u5982\u4e0b\u5b57\u6bb5\uff1a input type=\"hidden\" name=\"cl_context\" value=\"utma=xxx.xxx utmb=xxx.xxx\" \u53d1 GET \u8bf7\u6c42\u83b7\u53d6 cltoken\uff0c\u8be5 token \u5728\u63d0\u4ea4\u8868\u5355\u65f6\u4f7f\u7528\uff0c\u5e76\u4e14\u53ea\u80fd\u4f7f\u7528\u4e00\u6b21\uff0c\u5982\u679c\u8981\u518d\u6b21\u63d0\u4ea4\u9700\u91cd\u65b0\u83b7\u53d6 cltoken\u3002\u83b7\u53d6\u65b9\u5f0f\u5982\u4e0b\uff1aGET: http://host.convertlab.com/formdata/get/{\u8868\u5355UUID} \uff0c\u5176\u4e2d {\u8868\u5355UUID} \u586b\u5199\u5177\u4f53\u8868\u5355\u7684 uuid\u3002\u83b7\u5f97\u7684\u6570\u636e\u4e2d\u5305\u542b\u540d\u79f0\u4e3a token \u7684\u6570\u636e\uff0c\u5373\u540e\u7eed\u63d0\u4ea4\u8868\u5355\u65f6\u8981\u4f7f\u7528\u7684 cltoken\u3002 \u63d0\u4ea4\u8868\u5355\u65f6\uff0c\u5c06\u8868\u5355\u6570\u636e\u4ee5 form data \u7684\u5f62\u5f0f\u63d0\u4ea4\uff0c\u8bf7\u6ce8\u610f\u5b57\u6bb5\u540d\u79f0\u5fc5\u987b\u548c\u521b\u5efa\u7684\u5d4c\u5165\u5f0f\u8868\u5355\u5339\u914d\uff0c\u540c\u65f6 form data \u91cc\u9700\u989d\u5916\u589e\u52a0\u4e00\u4e2a\u5b57\u6bb5 cltoken\uff0c\u503c\u4e3a\u524d\u9762\u8bf7\u6c42\u53d6\u5230\u7684 token \u503c\u3002\u9690\u85cf\u5b57\u6bb5 cl_context \u91cc\u9762\u7684 utma \u548c utmb \u4e5f\u8bf7\u4e00\u5e76\u63d0\u4ea4\u3002\u63d0\u4ea4\u8868\u5355\u7684\u5730\u5740\uff1aPOST: http://host.convertlab.com/page/{\u8868\u5355UUID}?channelType={channelType} userId={userId} \uff0c\u5176\u4e2d {\u8868\u5355UUID} \u586b\u5199\u5177\u4f53\u8868\u5355\u7684 uuid\uff0c {channelType} \u548c {userId} \u6839\u636e\u5b9e\u9645\u60c5\u51b5\u914c\u60c5\u6dfb\u52a0\uff0c {channelType} \u8868\u793a\u5f53\u524d\u6e20\u9053\uff0c\u4f8b\u5982 wechat\uff0c {userId} \u8868\u793a\u7528\u6237\u5728\u5f53\u524d\u6e20\u9053\u7684 ID\uff0c\u4f8b\u5982\u5f53\u524d\u7528\u6237\u7684 openId\u3002 \u4f7f\u7528\u81ea\u5b9a\u4e49\u8868\u5355\u7684\u793a\u4f8b\u4ee3\u7801\uff1a form id= clForm method= post data-cl-attached= false action= http://host.convertlab.com/page/{\u8868\u5355UUID}?channelType={channelType} userId={userId} !-- \u6b64\u5904\u793a\u4f8b 3 \u4e2a\u8868\u5355\u5b57\u6bb5\uff0c\u5b9e\u9645\u5f00\u53d1\u4e2d\u8bf7\u786e\u4fdd\u6bcf\u4e2a\u5b57\u6bb5\u7684 name \u5c5e\u6027\u548c DM Hub \u4e2d\u521b\u5efa\u7684\u5d4c\u5165\u5f0f\u8868\u5355\u4e2d\u5bf9\u5e94\u5b57\u6bb5\u7684 name \u76f8\u540c -- !-- DM Hub \u9884\u7f6e\u5ba2\u6237\u5c5e\u6027\uff0cDM Hub \u9884\u7f6e\uff0c\u4e0d\u53ef\u4fee\u6539 -- \u59d3\u540d\uff1a input type= text name= name / br/ !-- DM Hub \u9884\u7f6e\u5ba2\u6237\u5c5e\u6027\uff0cDM Hub \u9884\u7f6e\uff0c\u4e0d\u53ef\u4fee\u6539 -- \u624b\u673a\u53f7\u7801\uff1a input type= text name= mobile / br/ !-- DM Hub \u81ea\u5b9a\u4e49\u5ba2\u6237\u5c5e\u6027\uff0c\u6839\u636e\u4e1a\u52a1\u9700\u6c42\u81ea\u884c\u521b\u5efa -- \u81ea\u5b9a\u4e49\u5c5e\u6027\uff1a input type= text name= attr1 / br/ input type= hidden id= cltoken name= cltoken value= / input type= hidden id= utmb name= utmb value= / input type= hidden id= utma name= utma value= / input type= button value= \u63d0\u4ea4 onclick= f1() class= buttons / /form script function f1() { $.ajaxSettings.async = false; $.getJSON( http://host.convertlab.com/formdata/get/{\u8868\u5355UUID} , function(json) { $( #cltoken ).val(json.token); }); var cookievalue = $( input[name='cl_context'] ).val(); if (cookievalue == || cookievalue == null) { $( #utma ).val( ); $( #utmb ).val( ); } else { var cookiearr = cookievalue.split( ); var str1 = cookiearr[0]; var utmas = str1.split( = ); var utmavalue =utmas[1]; var str2 = cookiearr[1]; var utmbs = str2.split( = ); var utmbvalue =utmbs[1]; $( #utma ).val(utmavalue); $( #utmb ).val(utmbvalue); } var fromurl = $( form ).attr( action ); $.ajax({ cache: true, type: POST , url:fromurl, data:$('#clForm').serialize(), async: false, error: function(request) { alert( Connection error ); }, success: function(data) { alert( success ); window.location= xxxxxx.jsp ; } }); } /script 5. \u7528\u6237\u6765\u6e90\u8ddf\u8e2a \u5982\u679c\u9700\u8981\u5c06\u7f51\u7ad9\u9875\u9762\u6295\u653e\u5230\u5916\u90e8\u8425\u9500\u6e20\u9053\uff08\u4f8b\u5982\u767e\u5ea6\uff09\uff0c\u53ef\u4ee5\u5728 URL \u4e2d\u52a0\u4e0a\u6e20\u9053\u6765\u6e90\u53c2\u6570\uff0c\u8fdb\u884c\u6765\u6e90\u8ffd\u8e2a\u548c\u7edf\u8ba1\u3002 5.1 \u65b0\u5efa\u53ef\u8ffd\u8e2a URL \u767b\u5f55 DM Hub \u7cfb\u7edf\uff0c\u5728\u3010\u4e92\u52a8\u3011-\u3010\u516c\u53f8\u7f51\u7ad9\u3011\u4e2d\u9009\u62e9\u3010\u7f51\u9875\u6570\u636e\u7edf\u8ba1\u3011-\u3010\u4f20\u64ad\u4f60\u7684\u7f51\u9875\u3011\u65b0\u5efa\u53ef\u8ffd\u8e2a URL\u3002 5.2 \u7f51\u7ad9\u9875\u9762\u5f15\u5165 JS \u4ee3\u7801 \u521b\u5efa\u53ef\u8ffd\u8e2a URL \u540e\uff0c\u5728\u7f51\u7ad9\u7684\u6bcf\u4e2a\u9875\u9762\u4e2d\u90fd\u9700\u8981\u5f15\u5165\u5982\u4e0b JS \u4ee3\u7801\uff1a $(document).ready(function() { var pageurl = window.location.href; var urlsource = ; if(pageurl.indexOf( cl_sr ) != -1) { var arrs = pageurl.split( cl_sr ); var urlsource = arrs[1]; urlsource = ?cl_sr + urlsource; } $( a ).each(function() { var href = $(this).attr( href ); if(urlsource != ) { var Ahref = href + urlsource; $(this).attr( href , Ahref); } }); });","title":"\u901a\u8fc7\u7f51\u7ad9\u57cb\u70b9\u8fdb\u884c\u6570\u636e\u91c7\u96c6"},{"location":"track/site_collection_guide/#1","text":"DM Hub \u4e2d\u7684\u7f51\u7ad9\u57cb\u70b9\u529f\u80fd\u53ef\u4ee5\u5e2e\u60a8\u7edf\u8ba1\u7f51\u7ad9\u6d41\u91cf\uff0c\u8ffd\u8e2a\u6d41\u91cf\u6765\u6e90\uff0c\u6355\u83b7\u7f51\u7ad9\u8bbf\u5ba2\u4fe1\u606f\u3002 \u6bd4\u8d77\u5355\u4e00\u7684\u7f51\u7ad9\u6d41\u91cf\u7edf\u8ba1\u4e0e\u8ffd\u8e2a\uff0cDM Hub \u80fd\u591f\u5c06\u7ebf\u7d22\u5728\u5404\u6e20\u9053\u7559\u4e0b\u7684\u75d5\u8ff9\u6574\u5408\uff0c\u4e3a\u8425\u9500\u4eba\u5458\u63d0\u4f9b\u5b8c\u6574\u7684\u5ba2\u6237\u753b\u50cf\uff0c\u4ee5\u8fdb\u884c\u66f4\u52a0\u7cbe\u51c6\u7684\u8425\u9500\u4e0e\u5185\u5bb9\u63a8\u9001\u3002","title":"1. \u7f51\u7ad9\u57cb\u70b9\u8bf4\u660e"},{"location":"track/site_collection_guide/#2","text":"\u5728\u3010\u8bbe\u7f6e\u3011-\u3010\u8bbe\u7f6e\u4e2d\u5fc3\u3011\u4e2d\u9009\u62e9\u3010\u7f51\u7ad9\u3011\u6a21\u5757\u8fdb\u884c\u8ffd\u8e2a\u7f51\u7ad9\u8bbe\u7f6e\u3002","title":"2. \u8bbe\u7f6e\u8ffd\u8e2a\u7f51\u7ad9"},{"location":"track/site_collection_guide/#21","text":"\u5728\u6240\u6709\u9700\u8981\u7edf\u8ba1\u7684\u7f51\u7ad9\u9875\u9762\u4e2d\u5d4c\u5165\u8ffd\u8e2a\u4ee3\u7801\uff1a script src= //cbe.convertlab.com/cbe/collect?tid={YOUR_TID} at=0 h=web /script script clab_tracker.ready(function(){ this.push({ pageType : web }); this.track( open_page , {}); }); /script \u5176\u4e2d\u7684 {YOUR_TID} \u662f\u53d8\u5316\u7684\uff0c\u8bf7\u524d\u5f80\u8ffd\u8e2a\u7f51\u7ad9\u8bbe\u7f6e\u9875\u9762\u83b7\u53d6\u3002","title":"2.1 \u5d4c\u5165\u8ffd\u8e2a\u4ee3\u7801"},{"location":"track/site_collection_guide/#22","text":"\u8bbe\u7f6e\u8981\u8ffd\u8e2a\u7684\u7f51\u7ad9\u7684\u57df\u540d\uff0c\u53ea\u6709\u8bbe\u7f6e\u8fc7\u7684\u57df\u540d\u624d\u4f1a\u88ab\u8ffd\u8e2a\u3002","title":"2.2 \u8bbe\u7f6e\u8ffd\u8e2a\u57df\u540d"},{"location":"track/site_collection_guide/#3","text":"","title":"3. \u8ddf\u8e2a\u5ba2\u6237\u4e8b\u4ef6"},{"location":"track/site_collection_guide/#31","text":"\u5bf9\u4e8e\u6253\u5f00\u94fe\u63a5\u89e6\u53d1\u7684\u4e8b\u4ef6\uff0c\u6709\u4e24\u79cd\u65b9\u5f0f\u6765\u8fdb\u884c\u8ddf\u8e2a\uff0c\u5f00\u53d1\u8005\u53ef\u4ee5\u6839\u636e\u4f7f\u7528\u9700\u6c42\u9009\u62e9\u5176\u4e2d\u4e00\u79cd\u65b9\u5f0f\u3002 \u65b9\u5f0f\u4e00 \u5728\u88ab\u6253\u5f00\u7684\u9875\u9762\u4e2d\u653e\u5165\u5982\u4e0b\u4ee3\u7801\uff1a script src= //cbe.convertlab.com/cbe/collect?tid={YOUR_TID} at=0 h=web /script script clab_tracker.ready(function(){ this.push({}); this.track(event, targetName, targetId); }); /script \u5176\u4e2d\u7684 {YOUR_TID} \u662f\u53d8\u5316\u7684\uff0c\u8bf7\u524d\u5f80\u8ffd\u8e2a\u7f51\u7ad9\u8bbe\u7f6e\u9875\u9762\u83b7\u53d6\u3002 \u65b9\u5f0f\u4e8c \u5728\u94fe\u63a5\u4e0a\u6dfb\u52a0 data-cl-event \u548c data-cl-id \u5c5e\u6027\uff0c \u503c {event} \u4e3a\u8981\u89e6\u53d1\u7684\u4e8b\u4ef6, \u503c {id} \u4e3a\u4e8b\u4ef6\u7684targetId\u3002 a data-cl-event= {event} data-cl-id= {id} /a","title":"3.1 \u6253\u5f00\u94fe\u63a5\u89e6\u53d1\u7684\u4e8b\u4ef6"},{"location":"track/site_collection_guide/#32","text":"\u5982\u679c\u4e8b\u4ef6\u4e0d\u662f\u7531\u6253\u5f00\u94fe\u63a5\u89e6\u53d1\u7684\uff0c\u53ef\u4ee5\u901a\u8fc7\u5982\u4e0b track \u65b9\u6cd5\u6765\u63d0\u4ea4\u4e8b\u4ef6\uff1a if (clab_tracker) { clab_tracker.track(event, targetName, targetId, properties, callback); } track \u65b9\u6cd5\u53c2\u6570\u8bf4\u660e\uff1a \u53c2\u6570 \u8bf4\u660e event \u4e8b\u4ef6 id targetName \u6bd4\u5982\u4e8b\u4ef6\u4e3a\u5173\u6ce8\u516c\u4f17\u53f7\uff0ctargetName \u4e3a\u516c\u4f17\u53f7\u7684\u540d\u5b57 targetId \u6bd4\u5982\u4e8b\u4ef6\u4e3a\u5173\u6ce8\u516c\u4f17\u53f7\uff0ctargetId \u4e3a\u516c\u4f17\u53f7\u5728 DM Hub \u7cfb\u7edf\u4e2d\u7684 id properties \u53ef\u9009\uff0c\u5982\u679c\u6709 properties \u53c2\u6570\u4f1a\u66ff\u6362 page \u7684 properties callback \u53ef\u9009\uff0c\u5982\u679c\u6709 callback \u5728\u5b8c\u6210 track \u53d1\u9001\u52a8\u4f5c\u540e\u8c03\u7528\u6b64\u65b9\u6cd5","title":"3.2 \u5176\u4ed6\u884c\u4e3a\u89e6\u53d1\u7684\u4e8b\u4ef6"},{"location":"track/site_collection_guide/#4","text":"","title":"4. \u83b7\u53d6\u5d4c\u5165\u5f0f\u8868\u5355"},{"location":"track/site_collection_guide/#41","text":"\u767b\u5f55 DM Hub \u7cfb\u7edf\uff0c\u5728\u3010\u4e92\u52a8\u3011-\u3010\u516c\u53f8\u7f51\u7ad9\u3011\u4e2d\u9009\u62e9\u3010\u8bbf\u5ba2\u4fe1\u606f\u6536\u96c6\u3011-\u3010\u5d4c\u5165\u5f0f\u8868\u5355\u3011\u65b0\u5efa\u5d4c\u5165\u5f0f\u8868\u5355\u3002 \u6839\u636e\u5b9e\u9645\u9700\u6c42\u521b\u5efa\u8868\u5355\u5b8c\u6210\u540e\uff0c\u70b9\u51fb\u3010\u4fdd\u5b58\u3011\u5b8c\u6210\u521b\u5efa\u3002","title":"4.1 \u65b0\u5efa\u8868\u5355"},{"location":"track/site_collection_guide/#42","text":"\u8868\u5355\u521b\u5efa\u5b8c\u6210\u540e\uff0c\u5728\u5d4c\u5165\u5f0f\u8868\u5355\u5217\u8868\u4e2d\u5c31\u4f1a\u51fa\u73b0\u65b0\u521b\u5efa\u7684\u8868\u5355\uff0c\u5f00\u53d1\u8005\u53ef\u4ee5\u70b9\u51fb\u5bf9\u5e94\u8868\u5355\u7684\u3010\u6587\u6863\u3011\u6309\u94ae\u67e5\u770b\u8868\u5355\u7684\u96c6\u6210\u6587\u6863\u3002","title":"4.2 \u96c6\u6210\u8868\u5355"},{"location":"track/site_collection_guide/#421-dm-hub","text":"\u4f7f\u7528\u8be5\u65b9\u5f0f\u5c06\u81ea\u52a8\u5728\u7f51\u9875\u4e0a\u751f\u6210\u8868\u5355\uff0c\u65e0\u9700\u81ea\u884c\u5f00\u53d1\u3002 form id= clForm data-cl-attached= true data-cl-id= {\u8868\u5355UUID} action= http://host.convertlab.com/form/{\u8868\u5355UUID} method= POST /form script type= text/javascript src= http://host.convertlab.com/js/forms/form.js /script script _clForm.loadForm( http://host.convertlab.com , {\u8868\u5355UUID} ,{ formInit: function(){}, beforeSubmit: function(){}, onSubmit: function(args){} }); /script \u5176\u4e2d {\u8868\u5355UUID} \u586b\u5199\u5728 DM Hub \u4e2d\u521b\u5efa\u7684\u5177\u4f53\u8868\u5355\u7684 uuid\u3002\u6b64\u5916\uff0c\u9700\u8981\u5728\u7f51\u9875\u7684\u5408\u9002\u5730\u65b9\u5d4c\u5165\u8ffd\u8e2a\u811a\u672c\uff0c\u5d4c\u5165\u65b9\u5f0f\u53c2\u8003 2. \u8bbe\u7f6e\u8ffd\u8e2a\u7f51\u7ad9 \u3002","title":"4.2.1 \u573a\u666f\u4e00\uff1a\u4f7f\u7528 DM Hub \u5d4c\u5165\u5f0f\u8868\u5355"},{"location":"track/site_collection_guide/#422","text":"\u5982\u679c\u9700\u8981\u4f7f\u7528\u81ea\u5b9a\u4e49\u8868\u5355\uff0c\u8bf7\u6309\u7167\u4e0b\u8ff0\u6b65\u9aa4\u81ea\u884c\u5f00\u53d1\uff1a \u81ea\u884c\u5f00\u53d1\u8868\u5355\uff0c\u5e76\u5728 DM Hub \u4e2d\u521b\u5efa\u76f8\u540c\u5b57\u6bb5\u7684\u5d4c\u5165\u5f0f\u8868\u5355\u7528\u6765\u63a5\u6536\u6570\u636e\u3002\u8bf7\u786e\u4fdd\u81ea\u5b9a\u4e49\u8868\u5355\u5b57\u6bb5\u7684 name \u5c5e\u6027\u548c\u751f\u6210\u7684\u5d4c\u5165\u5f0f\u8868\u5355\u4e2d\u5bf9\u5e94\u5b57\u6bb5\u7684 name \uff08\u5373 DM Hub \u5ba2\u6237\u5c5e\u6027 ID\uff09\u76f8\u540c\u3002 \u5728\u81ea\u5b9a\u4e49\u8868\u5355\u7684 form \u6807\u7b7e\u4e2d\u589e\u52a0\u5982\u4e0b\u4e24\u4e2a data \u5c5e\u6027\uff1a data-cl-attached=\"false\" data-cl-id=\"{\u8868\u5355UUID}\" \uff0c\u5176\u4e2d {\u8868\u5355UUID} \u586b\u5199\u5728 DM Hub \u4e2d\u521b\u5efa\u7684\u5177\u4f53\u8868\u5355\u7684 uuid\u3002 \u6309\u8981\u6c42\u5d4c\u5165\u8ffd\u8e2a\u811a\u672c\uff0c\u5d4c\u5165\u65b9\u5f0f\u53c2\u8003 2. \u8bbe\u7f6e\u8ffd\u8e2a\u7f51\u7ad9 \u3002 \u8ffd\u8e2a\u811a\u672c\u4f1a\u5728\u8868\u5355\u4e2d\u589e\u52a0\u5982\u4e0b\u5b57\u6bb5\uff1a input type=\"hidden\" name=\"cl_context\" value=\"utma=xxx.xxx utmb=xxx.xxx\" \u53d1 GET \u8bf7\u6c42\u83b7\u53d6 cltoken\uff0c\u8be5 token \u5728\u63d0\u4ea4\u8868\u5355\u65f6\u4f7f\u7528\uff0c\u5e76\u4e14\u53ea\u80fd\u4f7f\u7528\u4e00\u6b21\uff0c\u5982\u679c\u8981\u518d\u6b21\u63d0\u4ea4\u9700\u91cd\u65b0\u83b7\u53d6 cltoken\u3002\u83b7\u53d6\u65b9\u5f0f\u5982\u4e0b\uff1aGET: http://host.convertlab.com/formdata/get/{\u8868\u5355UUID} \uff0c\u5176\u4e2d {\u8868\u5355UUID} \u586b\u5199\u5177\u4f53\u8868\u5355\u7684 uuid\u3002\u83b7\u5f97\u7684\u6570\u636e\u4e2d\u5305\u542b\u540d\u79f0\u4e3a token \u7684\u6570\u636e\uff0c\u5373\u540e\u7eed\u63d0\u4ea4\u8868\u5355\u65f6\u8981\u4f7f\u7528\u7684 cltoken\u3002 \u63d0\u4ea4\u8868\u5355\u65f6\uff0c\u5c06\u8868\u5355\u6570\u636e\u4ee5 form data \u7684\u5f62\u5f0f\u63d0\u4ea4\uff0c\u8bf7\u6ce8\u610f\u5b57\u6bb5\u540d\u79f0\u5fc5\u987b\u548c\u521b\u5efa\u7684\u5d4c\u5165\u5f0f\u8868\u5355\u5339\u914d\uff0c\u540c\u65f6 form data \u91cc\u9700\u989d\u5916\u589e\u52a0\u4e00\u4e2a\u5b57\u6bb5 cltoken\uff0c\u503c\u4e3a\u524d\u9762\u8bf7\u6c42\u53d6\u5230\u7684 token \u503c\u3002\u9690\u85cf\u5b57\u6bb5 cl_context \u91cc\u9762\u7684 utma \u548c utmb \u4e5f\u8bf7\u4e00\u5e76\u63d0\u4ea4\u3002\u63d0\u4ea4\u8868\u5355\u7684\u5730\u5740\uff1aPOST: http://host.convertlab.com/page/{\u8868\u5355UUID}?channelType={channelType} userId={userId} \uff0c\u5176\u4e2d {\u8868\u5355UUID} \u586b\u5199\u5177\u4f53\u8868\u5355\u7684 uuid\uff0c {channelType} \u548c {userId} \u6839\u636e\u5b9e\u9645\u60c5\u51b5\u914c\u60c5\u6dfb\u52a0\uff0c {channelType} \u8868\u793a\u5f53\u524d\u6e20\u9053\uff0c\u4f8b\u5982 wechat\uff0c {userId} \u8868\u793a\u7528\u6237\u5728\u5f53\u524d\u6e20\u9053\u7684 ID\uff0c\u4f8b\u5982\u5f53\u524d\u7528\u6237\u7684 openId\u3002 \u4f7f\u7528\u81ea\u5b9a\u4e49\u8868\u5355\u7684\u793a\u4f8b\u4ee3\u7801\uff1a form id= clForm method= post data-cl-attached= false action= http://host.convertlab.com/page/{\u8868\u5355UUID}?channelType={channelType} userId={userId} !-- \u6b64\u5904\u793a\u4f8b 3 \u4e2a\u8868\u5355\u5b57\u6bb5\uff0c\u5b9e\u9645\u5f00\u53d1\u4e2d\u8bf7\u786e\u4fdd\u6bcf\u4e2a\u5b57\u6bb5\u7684 name \u5c5e\u6027\u548c DM Hub \u4e2d\u521b\u5efa\u7684\u5d4c\u5165\u5f0f\u8868\u5355\u4e2d\u5bf9\u5e94\u5b57\u6bb5\u7684 name \u76f8\u540c -- !-- DM Hub \u9884\u7f6e\u5ba2\u6237\u5c5e\u6027\uff0cDM Hub \u9884\u7f6e\uff0c\u4e0d\u53ef\u4fee\u6539 -- \u59d3\u540d\uff1a input type= text name= name / br/ !-- DM Hub \u9884\u7f6e\u5ba2\u6237\u5c5e\u6027\uff0cDM Hub \u9884\u7f6e\uff0c\u4e0d\u53ef\u4fee\u6539 -- \u624b\u673a\u53f7\u7801\uff1a input type= text name= mobile / br/ !-- DM Hub \u81ea\u5b9a\u4e49\u5ba2\u6237\u5c5e\u6027\uff0c\u6839\u636e\u4e1a\u52a1\u9700\u6c42\u81ea\u884c\u521b\u5efa -- \u81ea\u5b9a\u4e49\u5c5e\u6027\uff1a input type= text name= attr1 / br/ input type= hidden id= cltoken name= cltoken value= / input type= hidden id= utmb name= utmb value= / input type= hidden id= utma name= utma value= / input type= button value= \u63d0\u4ea4 onclick= f1() class= buttons / /form script function f1() { $.ajaxSettings.async = false; $.getJSON( http://host.convertlab.com/formdata/get/{\u8868\u5355UUID} , function(json) { $( #cltoken ).val(json.token); }); var cookievalue = $( input[name='cl_context'] ).val(); if (cookievalue == || cookievalue == null) { $( #utma ).val( ); $( #utmb ).val( ); } else { var cookiearr = cookievalue.split( ); var str1 = cookiearr[0]; var utmas = str1.split( = ); var utmavalue =utmas[1]; var str2 = cookiearr[1]; var utmbs = str2.split( = ); var utmbvalue =utmbs[1]; $( #utma ).val(utmavalue); $( #utmb ).val(utmbvalue); } var fromurl = $( form ).attr( action ); $.ajax({ cache: true, type: POST , url:fromurl, data:$('#clForm').serialize(), async: false, error: function(request) { alert( Connection error ); }, success: function(data) { alert( success ); window.location= xxxxxx.jsp ; } }); } /script","title":"4.2.2 \u573a\u666f\u4e8c\uff1a\u4f7f\u7528\u81ea\u5b9a\u4e49\u8868\u5355"},{"location":"track/site_collection_guide/#5","text":"\u5982\u679c\u9700\u8981\u5c06\u7f51\u7ad9\u9875\u9762\u6295\u653e\u5230\u5916\u90e8\u8425\u9500\u6e20\u9053\uff08\u4f8b\u5982\u767e\u5ea6\uff09\uff0c\u53ef\u4ee5\u5728 URL \u4e2d\u52a0\u4e0a\u6e20\u9053\u6765\u6e90\u53c2\u6570\uff0c\u8fdb\u884c\u6765\u6e90\u8ffd\u8e2a\u548c\u7edf\u8ba1\u3002","title":"5. \u7528\u6237\u6765\u6e90\u8ddf\u8e2a"},{"location":"track/site_collection_guide/#51-url","text":"\u767b\u5f55 DM Hub \u7cfb\u7edf\uff0c\u5728\u3010\u4e92\u52a8\u3011-\u3010\u516c\u53f8\u7f51\u7ad9\u3011\u4e2d\u9009\u62e9\u3010\u7f51\u9875\u6570\u636e\u7edf\u8ba1\u3011-\u3010\u4f20\u64ad\u4f60\u7684\u7f51\u9875\u3011\u65b0\u5efa\u53ef\u8ffd\u8e2a URL\u3002","title":"5.1 \u65b0\u5efa\u53ef\u8ffd\u8e2a URL"},{"location":"track/site_collection_guide/#52-js","text":"\u521b\u5efa\u53ef\u8ffd\u8e2a URL \u540e\uff0c\u5728\u7f51\u7ad9\u7684\u6bcf\u4e2a\u9875\u9762\u4e2d\u90fd\u9700\u8981\u5f15\u5165\u5982\u4e0b JS \u4ee3\u7801\uff1a $(document).ready(function() { var pageurl = window.location.href; var urlsource = ; if(pageurl.indexOf( cl_sr ) != -1) { var arrs = pageurl.split( cl_sr ); var urlsource = arrs[1]; urlsource = ?cl_sr + urlsource; } $( a ).each(function() { var href = $(this).attr( href ); if(urlsource != ) { var Ahref = href + urlsource; $(this).attr( href , Ahref); } }); });","title":"5.2 \u7f51\u7ad9\u9875\u9762\u5f15\u5165 JS \u4ee3\u7801"},{"location":"track/sourcetracking/","text":"\u8fdb\u5165 \u5ba2\u6237 \u6765\u6e90\u7ba1\u7406 \uff0c\u521b\u5efa\u9700\u8981\u7684\u6765\u6e90 \u8fdb\u5165 \u5185\u5bb9 \u516c\u53f8\u7f51\u7ad9 \u7f51\u9875\u53ef\u8ffd\u8e2aURL \uff0c\u521b\u5efa\u53ef\u8ffd\u8e2aURL\uff0c\u5e76\u9009\u62e9\u9700\u8981\u7684\u6765\u6e90\u3002 \u5c06\u53ef\u8ffd\u8e2aURL\u4f20\u64ad\u51fa\u53bb\uff0c\u6bd4\u5982\u901a\u8fc7\u767e\u5ea6\u5e7f\u544a\uff0c\u90ae\u4ef6\uff0c\u5fae\u4fe1\u7b49\u3002 \u8fdb\u5165 \u5185\u5bb9 \u516c\u53f8\u7f51\u7ad9 \u7f51\u7ad9\u9875\u9762 \uff0c\u53ef\u4ee5\u770b\u5230\u7f51\u9875\u7684\u6765\u6e90\u8bbf\u95ee\u5206\u6790\u3002","title":"Sourcetracking"},{"location":"webhook/webhook/","text":"1. Webhook \u7b80\u4ecb DM Hub \u5e73\u53f0\u63d0\u4f9b\u4e86\u5404\u79cd Open API \u4f9b\u5916\u90e8\u7cfb\u7edf\u8c03\u7528\uff0c\u4f46\u5728\u67d0\u4e9b\u60c5\u51b5\u4e0b\uff0c\u53ef\u80fd\u9700\u8981 DM Hub \u5728 \u5408\u9002\u7684\u65f6\u523b \u80fd\u591f \u4e3b\u52a8\u63a8\u9001\u6d88\u606f \u7ed9\u5916\u90e8\u7cfb\u7edf\uff0c\u4f8b\u5982\u5728\u81ea\u52a8\u6d41\u7a0b\u6267\u884c\u5230\u7279\u5b9a\u6b65\u9aa4\u65f6\uff0c\u80fd\u63a8\u9001\u6d88\u606f\u7ed9\u5ba2\u6237\u7684\u5404\u79cd\u7ec8\u7aef\u7cfb\u7edf\u3002 Webhook \u529f\u80fd\u5c31\u662f DM Hub \u63d0\u4f9b\u7684\u6d88\u606f\u63a8\u9001\u673a\u5236\uff0c\u80fd\u591f\u7ed9\u5728 DM Hub \u5e73\u53f0\u4e0a\u6ce8\u518c\u8fc7\u7684\u63a5\u53e3\u63a8\u9001\u6d88\u606f\u3002 \u6bd4\u5982\uff0c\u5982\u679c\u67d0\u4e2a\u5ba2\u6237\u6d3b\u8dc3\u5ea6\u8fbe\u5230\u4e86 500 \u5206\uff0c\u8fbe\u5230\u4f60\u516c\u53f8\u7684\u201c\u9ad8\u8d28\u91cf\u7ebf\u7d22\u201d\u6807\u51c6\uff0c\u4f60\u5c31\u53ef\u4ee5\u4ee5\u201c\u6d3b\u8dc3\u5ea6\u8fbe\u5230 500 \u5206\u201d\u4e3a\u89e6\u53d1\u6761\u4ef6\uff0c\u4f7f\u7528DM Hub \u7684 Webhook \u529f\u80fd\uff0c\u81ea\u52a8\u7ed9\u4f60\u7684 CRM \u7cfb\u7edf\u53d1\u9001\u6b64\u901a\u77e5\uff0c\u5c06\u8be5\u5ba2\u6237\u7b49\u7ea7\u4e0a\u8c03\u3002 2. \u65b0\u5efa Webhook \u5728\u3010\u8bbe\u7f6e\u3011-\u3010Webhook\u3011\u4e2d\u65b0\u5efa Webhook\uff0c\u586b\u5199\u76f8\u5173\u53c2\u6570\u914d\u7f6e\u540e\uff0c\u70b9\u51fb\u3010\u4fdd\u5b58\u3011\u5b8c\u6210\u521b\u5efa\u3002 \u53c2\u6570\u8bf4\u660e\uff1a Web Hook \u914d\u7f6e\u540d\u79f0\uff1a\u7ed9\u65b0\u5efa\u7684 Webhook \u8d77\u4e00\u4e2a\u6709\u610f\u4e49\u7684\u540d\u79f0\uff0c\u8be5\u540d\u79f0\u4f1a\u663e\u793a\u5728\u5de6\u4fa7\u7684\u5217\u8868\u4e2d\uff0c\u65b9\u4fbf\u540e\u7eed\u67e5\u770b\u548c\u66f4\u6539\u3002 \u6d88\u606f\u63a5\u6536\u5730\u5740\uff1a\u8981\u63a5\u6536\u6d88\u606f\u63a8\u9001\u7684\u63a5\u53e3\u5730\u5740\uff0c\u5fc5\u987b\u662f\u5408\u6cd5\u7684\u5b8c\u6574\u5730\u5740\uff0c\u5305\u542b\u4f7f\u7528\u7684\u534f\u8bae\uff08\u5982 http \u6216 https\uff09\u3002 \u9274\u6743\u65b9\u5f0f\uff1a\u7528\u4e8e\u5bf9\u6d88\u606f\u4f20\u9012\u7684\u5b89\u5168\u6027\u8fdb\u884c\u4fdd\u62a4\u3002 \u79d8\u94a5\uff1a\u7528\u4e8e\u5bf9\u6d88\u606f\u5185\u5bb9\u8fdb\u884c\u7b7e\u540d\uff0c\u5728\u63a5\u6536\u5230\u6d88\u606f\u65f6\u8fdb\u884c \u9a8c\u7b7e \uff0c\u4ece\u800c\u4fdd\u8bc1\u6d88\u606f\u6765\u6e90\u4ee5\u53ca\u6d88\u606f\u5185\u5bb9\u6ca1\u6709\u88ab\u7be1\u6539\u8fc7\u3002 Basic Authentication: \u53d1\u9001\u6d88\u606f\u5230\u63a5\u6536\u670d\u52a1\u5668\u65f6\uff0c\u4f1a\u5728Http header\u4e2d\u52a0\u4e0a\u9884\u5148\u8bbe\u7f6e\u597d\u7684\u8eab\u4efd\u4fe1\u606f\uff0c\u4ee5\u4fdd\u8bc1\u6d88\u606f\u63a5\u6536\u670d\u52a1\u5668\u7684\u5b89\u5168\u3002 \u89e6\u53d1\u7c7b\u578b \u975e\u56fa\u5b9a\u4e8b\u4ef6\u89e6\u53d1\uff1a \u53ef\u5728\u81ea\u52a8\u6d41\u7a0b\u4e2d\u4f5c\u4e3a\u4e00\u4e2a\u52a8\u4f5c\u7ec4\u4ef6\uff0c\u6216\u624b\u52a8\u5708\u9009\u4eba\u7fa4\u63a8\u9001\u6d88\u606f\u3002\u9009\u62e9\u6b64\u89e6\u53d1\u7c7b\u578b\uff0c\u9700\u8bbe\u7f6e\u6d88\u606f\u7c7b\u578b\u548c\u6d88\u606f\u4f53\u3002 \u89c17.1\u975e\u56fa\u5b9a\u4e8b\u4ef6\u89e6\u53d1 \u6d88\u606f\u7c7b\u578b\uff1a \u53ef\u9009\u62e9\u4ee5Json\u6216\u8005\u6587\u672c\u683c\u5f0f\u53d1\u9001\u6d88\u606f\u3002\u5982\u679c\u6d88\u606f\u7c7b\u578b\u4e3aJson\uff0c\u5219Http header\u4e2d\u7684Content-Type\u4e3a application/json \uff0c\u5982\u679c\u4e3a\u6587\u672c\u5219\u4e3a text/plain \u6d88\u606f\u4f53\uff1a\u53ef\u81ea\u5b9a\u4e49\u6d88\u606f\u5185\u5bb9\uff0c\u5e76\u53ef\u9009\u62e9\u63d2\u5165\u5ba2\u6237\u7684\u5c5e\u6027\u3002 \u9009\u62e9\u4f1a\u5458\u5c5e\u6027/\u9009\u62e9\u5ba2\u6237\u5c5e\u6027\uff1a\u4ece\u4e0b\u62c9\u5217\u8868\u4e2d\u9009\u53d6\u4e00\u4e2a\u4f1a\u5458/\u5ba2\u6237\u5c5e\u6027\uff0c\u6dfb\u52a0\u5230\u6d88\u606f\u4f53\u4e2d\u3002 \u5c5e\u6027\u4e3a\u7a7a\u65f6\u663e\u793a\u5185\u5bb9\uff1a\u5f53\u9009\u62e9\u7684\u4f1a\u5458/\u5ba2\u6237\u5c5e\u6027\u4e0d\u5b58\u5728\uff0c\u5219\u4ee5\u6b64\u9879\u5185\u5bb9\u586b\u5145\u5230\u6d88\u606f\u4f53\u4e2d\u3002 \u56fa\u5b9a\u4e8b\u4ef6\u89e6\u53d1\uff1a\u6307\u5b9a\u89e6\u53d1\u4e8b\u4ef6\u540e\uff0c\u53d1\u751f\u8be5\u4e8b\u4ef6\u5c06\u81ea\u52a8\u89e6\u53d1\u6b64webhook\u3002\u76ee\u524d\u53ef\u9009\u62e9\u7684\u4e8b\u4ef6\u5305\u62ec\u4f1a\u5458\u7b49\u7ea7\u5347\u7ea7\uff0c\u4f1a\u5458\u7b49\u7ea7\u964d\u7ea7\uff0c\u7cfb\u7edf\u53d1\u653e\u4f18\u60e0\u5238\uff0c\u9886\u53d6\u4f18\u60e0\u5238\u548c\u6838\u9500\u4f18\u60e0\u5238\u3002 \u89c17.2\u56fa\u5b9a\u4e8b\u4ef6\u89e6\u53d1 \u662f\u5426\u6fc0\u6d3b\uff1aDM Hub \u53ea\u4f1a\u5411\u5904\u4e8e\u6fc0\u6d3b\u72b6\u6001\u7684 Webhook \u63a8\u9001\u6d88\u606f\uff0c\u5982\u679c\u4e0d\u60f3\u63a5\u6536\u6d88\u606f\u63a8\u9001\uff0c\u5219\u53ef\u4ee5\u5728\u6b64\u5173\u95ed\u63a8\u9001\u529f\u80fd\u3002 \u662f\u5426\u81ea\u52a8\u91cd\u8bd5\uff1a\u5982\u679c\u63a8\u9001\u5931\u8d25\uff0c\u4f1a\u81ea\u52a8\u8fdb\u884c\u91cd\u8bd5\u3002\u81ea\u52a8\u91cd\u8bd5\u673a\u5236\uff1a\u95f4\u9694 30 \u5206\u949f\u5de6\u53f3\u8fdb\u884c\u7b2c 1 \u6b21\u91cd\u8bd5\uff0c\u4e4b\u540e\u6bcf\u6b21\u91cd\u8bd5\u7684\u95f4\u9694\u9012\u589e 30 \u5206\u949f\u5de6\u53f3\uff0c\u76f4\u81f3\u63a8\u9001\u6210\u529f\u6216\u81ea\u52a8\u91cd\u8bd5\u6b21\u6570\u8fbe\u5230 3 \u6b21\u3002 3. \u7fa4\u53d1 Webhook\u6d88\u606f Webhook\u521b\u5efa\u5b8c\u6210\u540e\uff0c\u5982\u679c\u8be5Webhook\u7684\u89e6\u53d1\u7c7b\u578b\u4e3a\u975e\u56fa\u5b9a\u4e8b\u4ef6\u89e6\u53d1\uff0c\u9700\u8981\u8fdb\u884c\u624b\u52a8\u7fa4\u53d1\u3002 \u53d1\u9001\u6b65\u9aa4\uff1a \u5728Webhook\u5217\u8868\u4e2d\u9009\u62e9\u9700\u8981\u7fa4\u53d1\u7684Webhook\uff0c\u70b9\u51fb\u53d1\u9001\u6d88\u606f\u6309\u94ae\u3002 \u9009\u62e9\u7fa4\u53d1 \u5728\u53d1\u9001\u81f3\u7fa4\u7ec4\u7684\u4e0b\u62c9\u5217\u8868\u4e2d\u9009\u62e9\u7fa4\u7ec4 \u9009\u62e9\u53d1\u9001\u65f6\u95f4 \u5982\u679c\u9009\u62e9\u5b9a\u65f6\u53d1\u9001\u5219\u7cfb\u7edf\u4f1a\u5728\u6307\u5b9a\u7684\u65f6\u95f4\u5f00\u59cb\u53d1\u9001Webhook\u6d88\u606f\u3002 4. \u6d4b\u8bd5 Webhook \u5728\u9488\u5bf9\u7fa4\u7ec4\u8fdb\u884c\u7fa4\u53d1Webhook\u4e4b\u524d\uff0c\u53ef\u9009\u62e9\u67d0\u4e2a\u7528\u6237\u6765\u53d1\u9001\u5355\u6761\u6d88\u606f\u4ee5\u8fdb\u884c\u6d4b\u8bd5 \u6d4b\u8bd5\u6b65\u9aa4\uff1a \u5728Webhook\u5217\u8868\u4e2d\u9009\u62e9\u9700\u8981\u7fa4\u53d1\u7684Webhook\uff0c\u70b9\u51fb\u53d1\u9001\u6d88\u606f\u6309\u94ae\u3002 \u9009\u62e9\u6d4b\u8bd5\u53d1\u9001 \u5728\u8bf7\u9009\u62e9\u5ba2\u6237\u7684\u8f93\u5165\u6846\u4e2d\u8f93\u5165\u5ba2\u6237\u59d3\u540d\u3001\u5fae\u4fe1\u6635\u79f0\u6216\u8005\u624b\u673a\u53f7\u7801\u3002 5. \u67e5\u770b\u53d1\u9001\u7ed3\u679c \u5728webhook\u5217\u8868\u4e2d\u53ef\u67e5\u770bwebhook\u53d1\u9001\u7684\u7ed3\u679c\u3002 \u5982\u679c\u662f\u6d4b\u8bd5\u6d88\u606f\uff0c\u53ef\u67e5\u770b\u5230\u6d88\u606f\u53d1\u9001\u7684\u8be6\u60c5\uff0c\u5305\u62ec\u6d88\u606f\u4f53\u3001\u6d88\u606f\u5934\u4ee5\u53ca\u670d\u52a1\u5668\u7684\u54cd\u5e94\u7ed3\u679c \u5982\u679c\u662f\u7fa4\u53d1\u7684webhook\u6d88\u606f\uff0c\u53ef\u4ee5\u5728\u53d1\u9001\u5217\u8868\u9875\u4e0a\u770b\u5230\u8be5\u6d88\u606f\u7684\u53d1\u9001\u72b6\u6001\uff1a\u53d1\u9001\u4e2d\u3001\u5df2\u5b8c\u6210\u7b49\u3002 6. Webhook \u9274\u6743 6.1 Webhook\u79d8\u94a5 \u5bf9\u4e8e\u8bbe\u7f6e\u4e86\u79d8\u94a5\u7684 Webhook\uff0cDM Hub \u5411\u6d88\u606f\u63a5\u6536\u5730\u5740\u53d1\u9001\u8bf7\u6c42\u65f6\uff0c\u4f1a\u4f7f\u7528\u79d8\u94a5\u751f\u6210\u6d88\u606f\u5185\u5bb9\u7684 hmac sha256 hex \u6458\u8981\u7b7e\u540d\uff0c\u643a\u5e26\u5728 header \u7684 X-Clab-Hmac-Signature \u4e2d\u3002 \u5728\u63a5\u6536\u6d88\u606f\u7684\u4ee3\u7801\u4e2d\uff0c\u4f7f\u7528\u76f8\u540c\u7684\u79d8\u94a5\u751f\u6210\u63a5\u6536\u5230\u7684 payload \u7684 hmac sha256 hex \u6458\u8981\u7b7e\u540d\uff0c\u5e76\u4e0e header \u4e2d\u7684\u7b7e\u540d\u8fdb\u884c\u6bd4\u5bf9\uff0c\u5982\u679c\u4e24\u8005\u4e00\u81f4\uff0c\u5219\u9a8c\u7b7e\u901a\u8fc7\uff0c\u8868\u660e\u6d88\u606f\u6765\u6e90\u53ef\u9760\u4e14\u6d88\u606f\u5185\u5bb9\u6ca1\u6709\u88ab\u7be1\u6539\u8fc7\u3002 \u751f\u6210 hmac sha256 hex \u6458\u8981\u7b7e\u540d\uff1a \u4f7f\u7528\u7684 jar \u5305\uff1a com.google.code.gson:gson:2.8.1 commons-codec:commons-codec:1.10 \u751f\u6210\u7b7e\u540d\u4ee3\u7801\u793a\u4f8b\uff1a import com.google.gson.Gson import com.google.gson.GsonBuilder import org.apache.commons.codec.digest.HmacUtils String sign(Map payload, String secret) { Gson gson = new GsonBuilder().create(); String str = gson.toJson(payload); return HmacUtils.hmacSha256Hex(secret, str.replaceAll( \\\\s+ , )); } 6.2 \u57fa\u672c\u8eab\u4efd\u8ba4\u8bc1 \u5bf9\u4e8e\u8bbe\u7f6e\u4e86\u57fa\u672c\u8eab\u4efd\u8ba4\u8bc1\u7684 Webhook\uff0c DM Hub\u60f3\u6d88\u606f\u5730\u5740\u53d1\u9001\u8bf7\u6c42\u65f6\uff0c\u4f1a\u5728http header\u4e2d\u6dfb\u52a0Authorization\uff0c\u793a\u4f8b\u4ee3\u7801\u5982\u4e0b\uff1a String content = username + : + password; String token = Basic + Base64.getEncoder().encodeToString(content( utf-8 )); httpPost.setHeader( Authorization , token); 7. Webhook \u89e6\u53d1\u7c7b\u578b\u8bf4\u660e Webhook \u652f\u6301\u6d88\u606f\u7c7b\u578b\u5305\u62ec\uff1a\u81ea\u52a8\u6d41\u76f8\u5173\u3001\u8868\u5355\u63d0\u4ea4\u76f8\u5173\u4ee5\u53ca\u4f1a\u5458\u76f8\u5173\uff0c\u5177\u4f53\u4f7f\u7528\u5982\u4e0b\u6240\u8ff0\u3002 7.1 \u56fa\u5b9a\u4e8b\u4ef6\u89e6\u53d1 7.1.1 \u4f7f\u7528 Webhook \u63a5\u6536\u81ea\u52a8\u6d41\u76f8\u5173\u6d88\u606f \u5982\u4e0b\u56fe\u6240\u793a\uff0c\u5728\u521b\u5efa\u81ea\u52a8\u6d41\u7a0b\u65f6\uff0c\u53ef\u4ee5\u6dfb\u52a0 Webhook \u52a8\u4f5c\u8282\u70b9\uff0c\u7528\u4ee5\u5c06\u76f8\u5173\u7684\u4e0a\u4e0b\u6587\u4fe1\u606f\u901a\u8fc7 Webhook \u63a8\u9001\u7ed9\u5916\u90e8\u7cfb\u7edf\u3002 7.1.2 \u4f7f\u7528 Webhook \u63a5\u6536\u8868\u5355\u63d0\u4ea4\u76f8\u5173\u6d88\u606f \u5982\u4e0b\u56fe\u6240\u793a\uff0c\u5728\u5305\u542b\u8868\u5355\u7684\u5fae\u9875\u9762\u4e2d\uff0c\u53ef\u4ee5\u8bbe\u7f6e\u63d0\u4ea4\u8868\u5355\u540e\u89e6\u53d1 Webhook\uff0c\u7528\u4ee5\u5c06\u76f8\u5173\u7684\u4e0a\u4e0b\u6587\u4fe1\u606f\u901a\u8fc7 Webhook \u63a8\u9001\u7ed9\u5916\u90e8\u7cfb\u7edf\u3002 7.2 \u56fa\u5b9a\u4e8b\u4ef6\u89e6\u53d1 \u76ee\u524d\u652f\u6301\u4ee5\u4e0b5\u79cd\u4f1a\u5458\u76f8\u5173\u4e8b\u4ef6\u3002 7.2.1 \u4f1a\u5458\u7b49\u7ea7\u5347\u7ea7\u4e8b\u4ef6 loyalty/membership_level_up \u6d88\u606f\u5185\u5bb9 payload\uff1a { tenantId : tenantId , event : loyalty/membership_level_up , membershipId : \u4f1a\u5458 ID , date : \u4e8b\u4ef6\u53d1\u751f\u7684\u65f6\u95f4 , oldLevelId : \u539f\u7b49\u7ea7 ID , newLevelId : \u65b0\u7b49\u7ea7 ID , oldLevel : \u539f\u7b49\u7ea7\u540d\u79f0 , newLevel : \u65b0\u7b49\u7ea7\u540d\u79f0 } 7.2.2 \u4f1a\u5458\u7b49\u7ea7\u964d\u7ea7\u4e8b\u4ef6 loyalty/membership_level_down \u6d88\u606f\u5185\u5bb9 payload\uff1a { tenantId : tenantId , event : loyalty/membership_level_down , membershipId : \u4f1a\u5458 ID , date : \u4e8b\u4ef6\u53d1\u751f\u7684\u65f6\u95f4 , oldLevelId : \u539f\u7b49\u7ea7 ID , newLevelId : \u65b0\u7b49\u7ea7 ID , oldLevel : \u539f\u7b49\u7ea7\u540d\u79f0 , newLevel : \u65b0\u7b49\u7ea7\u540d\u79f0 } 7.2.3 \u7cfb\u7edf\u53d1\u653e\u4f18\u60e0\u5238\u4e8b\u4ef6 loyalty/loyalty_dispatch_coupon \u6d88\u606f\u5185\u5bb9 payload\uff1a { tenantId : tenantId , event : loyalty/loyalty_dispatch_coupon , membershipId : \u4f1a\u5458 ID , date : \u4e8b\u4ef6\u53d1\u751f\u7684\u65f6\u95f4 , couponId : \u4f18\u60e0\u5238 ID , couponName : \u4f18\u60e0\u5238\u540d\u79f0 , batchId : \u6279\u6b21\u53f7 , couponCode : \u4f18\u60e0\u5238 code\uff08\u8be5\u5ba2\u6237\u7684\u552f\u4e00 code\uff09 , startDate : \u8d77\u59cb\u6709\u6548\u65e5\u671f , endDate : \u622a\u6b62\u6709\u6548\u65e5\u671f } 7.2.4 \u9886\u53d6\u4f18\u60e0\u5238\u4e8b\u4ef6 loyalty/membership_draw_coupon \u6d88\u606f\u5185\u5bb9 payload\uff1a { tenantId : tenantId , event : loyalty/membership_draw_coupon , membershipId : \u4f1a\u5458 ID , date : \u4e8b\u4ef6\u53d1\u751f\u7684\u65f6\u95f4 , couponId : \u4f18\u60e0\u5238 ID , couponName : \u4f18\u60e0\u5238\u540d\u79f0 , couponCode : \u4f18\u60e0\u5238 code\uff08\u8be5\u5ba2\u6237\u7684\u552f\u4e00 code\uff09 , startDate : \u8d77\u59cb\u6709\u6548\u65e5\u671f , endDate : \u622a\u6b62\u6709\u6548\u65e5\u671f } 7.2.5 \u6838\u9500\u4f18\u60e0\u5238\u4e8b\u4ef6 loyalty/membership_redeem_coupon \u6d88\u606f\u5185\u5bb9 payload\uff1a { tenantId : tenantId , event : loyalty/membership_redeem_coupon , membershipId : \u4f1a\u5458 ID , date : \u4e8b\u4ef6\u53d1\u751f\u7684\u65f6\u95f4 , couponId : \u4f18\u60e0\u5238 ID , couponName : \u4f18\u60e0\u5238\u540d\u79f0 , couponCode : \u4f18\u60e0\u5238 code\uff08\u8be5\u5ba2\u6237\u7684\u552f\u4e00 code\uff09 }","title":"Webhook \u4f7f\u7528\u8bf4\u660e"},{"location":"webhook/webhook/#1-webhook","text":"DM Hub \u5e73\u53f0\u63d0\u4f9b\u4e86\u5404\u79cd Open API \u4f9b\u5916\u90e8\u7cfb\u7edf\u8c03\u7528\uff0c\u4f46\u5728\u67d0\u4e9b\u60c5\u51b5\u4e0b\uff0c\u53ef\u80fd\u9700\u8981 DM Hub \u5728 \u5408\u9002\u7684\u65f6\u523b \u80fd\u591f \u4e3b\u52a8\u63a8\u9001\u6d88\u606f \u7ed9\u5916\u90e8\u7cfb\u7edf\uff0c\u4f8b\u5982\u5728\u81ea\u52a8\u6d41\u7a0b\u6267\u884c\u5230\u7279\u5b9a\u6b65\u9aa4\u65f6\uff0c\u80fd\u63a8\u9001\u6d88\u606f\u7ed9\u5ba2\u6237\u7684\u5404\u79cd\u7ec8\u7aef\u7cfb\u7edf\u3002 Webhook \u529f\u80fd\u5c31\u662f DM Hub \u63d0\u4f9b\u7684\u6d88\u606f\u63a8\u9001\u673a\u5236\uff0c\u80fd\u591f\u7ed9\u5728 DM Hub \u5e73\u53f0\u4e0a\u6ce8\u518c\u8fc7\u7684\u63a5\u53e3\u63a8\u9001\u6d88\u606f\u3002 \u6bd4\u5982\uff0c\u5982\u679c\u67d0\u4e2a\u5ba2\u6237\u6d3b\u8dc3\u5ea6\u8fbe\u5230\u4e86 500 \u5206\uff0c\u8fbe\u5230\u4f60\u516c\u53f8\u7684\u201c\u9ad8\u8d28\u91cf\u7ebf\u7d22\u201d\u6807\u51c6\uff0c\u4f60\u5c31\u53ef\u4ee5\u4ee5\u201c\u6d3b\u8dc3\u5ea6\u8fbe\u5230 500 \u5206\u201d\u4e3a\u89e6\u53d1\u6761\u4ef6\uff0c\u4f7f\u7528DM Hub \u7684 Webhook \u529f\u80fd\uff0c\u81ea\u52a8\u7ed9\u4f60\u7684 CRM \u7cfb\u7edf\u53d1\u9001\u6b64\u901a\u77e5\uff0c\u5c06\u8be5\u5ba2\u6237\u7b49\u7ea7\u4e0a\u8c03\u3002","title":"1. Webhook \u7b80\u4ecb"},{"location":"webhook/webhook/#2-webhook","text":"\u5728\u3010\u8bbe\u7f6e\u3011-\u3010Webhook\u3011\u4e2d\u65b0\u5efa Webhook\uff0c\u586b\u5199\u76f8\u5173\u53c2\u6570\u914d\u7f6e\u540e\uff0c\u70b9\u51fb\u3010\u4fdd\u5b58\u3011\u5b8c\u6210\u521b\u5efa\u3002 \u53c2\u6570\u8bf4\u660e\uff1a Web Hook \u914d\u7f6e\u540d\u79f0\uff1a\u7ed9\u65b0\u5efa\u7684 Webhook \u8d77\u4e00\u4e2a\u6709\u610f\u4e49\u7684\u540d\u79f0\uff0c\u8be5\u540d\u79f0\u4f1a\u663e\u793a\u5728\u5de6\u4fa7\u7684\u5217\u8868\u4e2d\uff0c\u65b9\u4fbf\u540e\u7eed\u67e5\u770b\u548c\u66f4\u6539\u3002 \u6d88\u606f\u63a5\u6536\u5730\u5740\uff1a\u8981\u63a5\u6536\u6d88\u606f\u63a8\u9001\u7684\u63a5\u53e3\u5730\u5740\uff0c\u5fc5\u987b\u662f\u5408\u6cd5\u7684\u5b8c\u6574\u5730\u5740\uff0c\u5305\u542b\u4f7f\u7528\u7684\u534f\u8bae\uff08\u5982 http \u6216 https\uff09\u3002 \u9274\u6743\u65b9\u5f0f\uff1a\u7528\u4e8e\u5bf9\u6d88\u606f\u4f20\u9012\u7684\u5b89\u5168\u6027\u8fdb\u884c\u4fdd\u62a4\u3002 \u79d8\u94a5\uff1a\u7528\u4e8e\u5bf9\u6d88\u606f\u5185\u5bb9\u8fdb\u884c\u7b7e\u540d\uff0c\u5728\u63a5\u6536\u5230\u6d88\u606f\u65f6\u8fdb\u884c \u9a8c\u7b7e \uff0c\u4ece\u800c\u4fdd\u8bc1\u6d88\u606f\u6765\u6e90\u4ee5\u53ca\u6d88\u606f\u5185\u5bb9\u6ca1\u6709\u88ab\u7be1\u6539\u8fc7\u3002 Basic Authentication: \u53d1\u9001\u6d88\u606f\u5230\u63a5\u6536\u670d\u52a1\u5668\u65f6\uff0c\u4f1a\u5728Http header\u4e2d\u52a0\u4e0a\u9884\u5148\u8bbe\u7f6e\u597d\u7684\u8eab\u4efd\u4fe1\u606f\uff0c\u4ee5\u4fdd\u8bc1\u6d88\u606f\u63a5\u6536\u670d\u52a1\u5668\u7684\u5b89\u5168\u3002 \u89e6\u53d1\u7c7b\u578b \u975e\u56fa\u5b9a\u4e8b\u4ef6\u89e6\u53d1\uff1a \u53ef\u5728\u81ea\u52a8\u6d41\u7a0b\u4e2d\u4f5c\u4e3a\u4e00\u4e2a\u52a8\u4f5c\u7ec4\u4ef6\uff0c\u6216\u624b\u52a8\u5708\u9009\u4eba\u7fa4\u63a8\u9001\u6d88\u606f\u3002\u9009\u62e9\u6b64\u89e6\u53d1\u7c7b\u578b\uff0c\u9700\u8bbe\u7f6e\u6d88\u606f\u7c7b\u578b\u548c\u6d88\u606f\u4f53\u3002 \u89c17.1\u975e\u56fa\u5b9a\u4e8b\u4ef6\u89e6\u53d1 \u6d88\u606f\u7c7b\u578b\uff1a \u53ef\u9009\u62e9\u4ee5Json\u6216\u8005\u6587\u672c\u683c\u5f0f\u53d1\u9001\u6d88\u606f\u3002\u5982\u679c\u6d88\u606f\u7c7b\u578b\u4e3aJson\uff0c\u5219Http header\u4e2d\u7684Content-Type\u4e3a application/json \uff0c\u5982\u679c\u4e3a\u6587\u672c\u5219\u4e3a text/plain \u6d88\u606f\u4f53\uff1a\u53ef\u81ea\u5b9a\u4e49\u6d88\u606f\u5185\u5bb9\uff0c\u5e76\u53ef\u9009\u62e9\u63d2\u5165\u5ba2\u6237\u7684\u5c5e\u6027\u3002 \u9009\u62e9\u4f1a\u5458\u5c5e\u6027/\u9009\u62e9\u5ba2\u6237\u5c5e\u6027\uff1a\u4ece\u4e0b\u62c9\u5217\u8868\u4e2d\u9009\u53d6\u4e00\u4e2a\u4f1a\u5458/\u5ba2\u6237\u5c5e\u6027\uff0c\u6dfb\u52a0\u5230\u6d88\u606f\u4f53\u4e2d\u3002 \u5c5e\u6027\u4e3a\u7a7a\u65f6\u663e\u793a\u5185\u5bb9\uff1a\u5f53\u9009\u62e9\u7684\u4f1a\u5458/\u5ba2\u6237\u5c5e\u6027\u4e0d\u5b58\u5728\uff0c\u5219\u4ee5\u6b64\u9879\u5185\u5bb9\u586b\u5145\u5230\u6d88\u606f\u4f53\u4e2d\u3002 \u56fa\u5b9a\u4e8b\u4ef6\u89e6\u53d1\uff1a\u6307\u5b9a\u89e6\u53d1\u4e8b\u4ef6\u540e\uff0c\u53d1\u751f\u8be5\u4e8b\u4ef6\u5c06\u81ea\u52a8\u89e6\u53d1\u6b64webhook\u3002\u76ee\u524d\u53ef\u9009\u62e9\u7684\u4e8b\u4ef6\u5305\u62ec\u4f1a\u5458\u7b49\u7ea7\u5347\u7ea7\uff0c\u4f1a\u5458\u7b49\u7ea7\u964d\u7ea7\uff0c\u7cfb\u7edf\u53d1\u653e\u4f18\u60e0\u5238\uff0c\u9886\u53d6\u4f18\u60e0\u5238\u548c\u6838\u9500\u4f18\u60e0\u5238\u3002 \u89c17.2\u56fa\u5b9a\u4e8b\u4ef6\u89e6\u53d1 \u662f\u5426\u6fc0\u6d3b\uff1aDM Hub \u53ea\u4f1a\u5411\u5904\u4e8e\u6fc0\u6d3b\u72b6\u6001\u7684 Webhook \u63a8\u9001\u6d88\u606f\uff0c\u5982\u679c\u4e0d\u60f3\u63a5\u6536\u6d88\u606f\u63a8\u9001\uff0c\u5219\u53ef\u4ee5\u5728\u6b64\u5173\u95ed\u63a8\u9001\u529f\u80fd\u3002 \u662f\u5426\u81ea\u52a8\u91cd\u8bd5\uff1a\u5982\u679c\u63a8\u9001\u5931\u8d25\uff0c\u4f1a\u81ea\u52a8\u8fdb\u884c\u91cd\u8bd5\u3002\u81ea\u52a8\u91cd\u8bd5\u673a\u5236\uff1a\u95f4\u9694 30 \u5206\u949f\u5de6\u53f3\u8fdb\u884c\u7b2c 1 \u6b21\u91cd\u8bd5\uff0c\u4e4b\u540e\u6bcf\u6b21\u91cd\u8bd5\u7684\u95f4\u9694\u9012\u589e 30 \u5206\u949f\u5de6\u53f3\uff0c\u76f4\u81f3\u63a8\u9001\u6210\u529f\u6216\u81ea\u52a8\u91cd\u8bd5\u6b21\u6570\u8fbe\u5230 3 \u6b21\u3002","title":"2. \u65b0\u5efa Webhook"},{"location":"webhook/webhook/#3-webhook","text":"Webhook\u521b\u5efa\u5b8c\u6210\u540e\uff0c\u5982\u679c\u8be5Webhook\u7684\u89e6\u53d1\u7c7b\u578b\u4e3a\u975e\u56fa\u5b9a\u4e8b\u4ef6\u89e6\u53d1\uff0c\u9700\u8981\u8fdb\u884c\u624b\u52a8\u7fa4\u53d1\u3002 \u53d1\u9001\u6b65\u9aa4\uff1a \u5728Webhook\u5217\u8868\u4e2d\u9009\u62e9\u9700\u8981\u7fa4\u53d1\u7684Webhook\uff0c\u70b9\u51fb\u53d1\u9001\u6d88\u606f\u6309\u94ae\u3002 \u9009\u62e9\u7fa4\u53d1 \u5728\u53d1\u9001\u81f3\u7fa4\u7ec4\u7684\u4e0b\u62c9\u5217\u8868\u4e2d\u9009\u62e9\u7fa4\u7ec4 \u9009\u62e9\u53d1\u9001\u65f6\u95f4 \u5982\u679c\u9009\u62e9\u5b9a\u65f6\u53d1\u9001\u5219\u7cfb\u7edf\u4f1a\u5728\u6307\u5b9a\u7684\u65f6\u95f4\u5f00\u59cb\u53d1\u9001Webhook\u6d88\u606f\u3002","title":"3. \u7fa4\u53d1 Webhook\u6d88\u606f"},{"location":"webhook/webhook/#4-webhook","text":"\u5728\u9488\u5bf9\u7fa4\u7ec4\u8fdb\u884c\u7fa4\u53d1Webhook\u4e4b\u524d\uff0c\u53ef\u9009\u62e9\u67d0\u4e2a\u7528\u6237\u6765\u53d1\u9001\u5355\u6761\u6d88\u606f\u4ee5\u8fdb\u884c\u6d4b\u8bd5 \u6d4b\u8bd5\u6b65\u9aa4\uff1a \u5728Webhook\u5217\u8868\u4e2d\u9009\u62e9\u9700\u8981\u7fa4\u53d1\u7684Webhook\uff0c\u70b9\u51fb\u53d1\u9001\u6d88\u606f\u6309\u94ae\u3002 \u9009\u62e9\u6d4b\u8bd5\u53d1\u9001 \u5728\u8bf7\u9009\u62e9\u5ba2\u6237\u7684\u8f93\u5165\u6846\u4e2d\u8f93\u5165\u5ba2\u6237\u59d3\u540d\u3001\u5fae\u4fe1\u6635\u79f0\u6216\u8005\u624b\u673a\u53f7\u7801\u3002","title":"4. \u6d4b\u8bd5 Webhook"},{"location":"webhook/webhook/#5","text":"\u5728webhook\u5217\u8868\u4e2d\u53ef\u67e5\u770bwebhook\u53d1\u9001\u7684\u7ed3\u679c\u3002 \u5982\u679c\u662f\u6d4b\u8bd5\u6d88\u606f\uff0c\u53ef\u67e5\u770b\u5230\u6d88\u606f\u53d1\u9001\u7684\u8be6\u60c5\uff0c\u5305\u62ec\u6d88\u606f\u4f53\u3001\u6d88\u606f\u5934\u4ee5\u53ca\u670d\u52a1\u5668\u7684\u54cd\u5e94\u7ed3\u679c \u5982\u679c\u662f\u7fa4\u53d1\u7684webhook\u6d88\u606f\uff0c\u53ef\u4ee5\u5728\u53d1\u9001\u5217\u8868\u9875\u4e0a\u770b\u5230\u8be5\u6d88\u606f\u7684\u53d1\u9001\u72b6\u6001\uff1a\u53d1\u9001\u4e2d\u3001\u5df2\u5b8c\u6210\u7b49\u3002","title":"5. \u67e5\u770b\u53d1\u9001\u7ed3\u679c"},{"location":"webhook/webhook/#6-webhook","text":"","title":"6. Webhook \u9274\u6743"},{"location":"webhook/webhook/#61-webhook","text":"\u5bf9\u4e8e\u8bbe\u7f6e\u4e86\u79d8\u94a5\u7684 Webhook\uff0cDM Hub \u5411\u6d88\u606f\u63a5\u6536\u5730\u5740\u53d1\u9001\u8bf7\u6c42\u65f6\uff0c\u4f1a\u4f7f\u7528\u79d8\u94a5\u751f\u6210\u6d88\u606f\u5185\u5bb9\u7684 hmac sha256 hex \u6458\u8981\u7b7e\u540d\uff0c\u643a\u5e26\u5728 header \u7684 X-Clab-Hmac-Signature \u4e2d\u3002 \u5728\u63a5\u6536\u6d88\u606f\u7684\u4ee3\u7801\u4e2d\uff0c\u4f7f\u7528\u76f8\u540c\u7684\u79d8\u94a5\u751f\u6210\u63a5\u6536\u5230\u7684 payload \u7684 hmac sha256 hex \u6458\u8981\u7b7e\u540d\uff0c\u5e76\u4e0e header \u4e2d\u7684\u7b7e\u540d\u8fdb\u884c\u6bd4\u5bf9\uff0c\u5982\u679c\u4e24\u8005\u4e00\u81f4\uff0c\u5219\u9a8c\u7b7e\u901a\u8fc7\uff0c\u8868\u660e\u6d88\u606f\u6765\u6e90\u53ef\u9760\u4e14\u6d88\u606f\u5185\u5bb9\u6ca1\u6709\u88ab\u7be1\u6539\u8fc7\u3002 \u751f\u6210 hmac sha256 hex \u6458\u8981\u7b7e\u540d\uff1a \u4f7f\u7528\u7684 jar \u5305\uff1a com.google.code.gson:gson:2.8.1 commons-codec:commons-codec:1.10 \u751f\u6210\u7b7e\u540d\u4ee3\u7801\u793a\u4f8b\uff1a import com.google.gson.Gson import com.google.gson.GsonBuilder import org.apache.commons.codec.digest.HmacUtils String sign(Map payload, String secret) { Gson gson = new GsonBuilder().create(); String str = gson.toJson(payload); return HmacUtils.hmacSha256Hex(secret, str.replaceAll( \\\\s+ , )); }","title":"6.1 Webhook\u79d8\u94a5"},{"location":"webhook/webhook/#62","text":"\u5bf9\u4e8e\u8bbe\u7f6e\u4e86\u57fa\u672c\u8eab\u4efd\u8ba4\u8bc1\u7684 Webhook\uff0c DM Hub\u60f3\u6d88\u606f\u5730\u5740\u53d1\u9001\u8bf7\u6c42\u65f6\uff0c\u4f1a\u5728http header\u4e2d\u6dfb\u52a0Authorization\uff0c\u793a\u4f8b\u4ee3\u7801\u5982\u4e0b\uff1a String content = username + : + password; String token = Basic + Base64.getEncoder().encodeToString(content( utf-8 )); httpPost.setHeader( Authorization , token);","title":"6.2 \u57fa\u672c\u8eab\u4efd\u8ba4\u8bc1"},{"location":"webhook/webhook/#7-webhook","text":"Webhook \u652f\u6301\u6d88\u606f\u7c7b\u578b\u5305\u62ec\uff1a\u81ea\u52a8\u6d41\u76f8\u5173\u3001\u8868\u5355\u63d0\u4ea4\u76f8\u5173\u4ee5\u53ca\u4f1a\u5458\u76f8\u5173\uff0c\u5177\u4f53\u4f7f\u7528\u5982\u4e0b\u6240\u8ff0\u3002","title":"7. Webhook \u89e6\u53d1\u7c7b\u578b\u8bf4\u660e"},{"location":"webhook/webhook/#71","text":"","title":"7.1 \u56fa\u5b9a\u4e8b\u4ef6\u89e6\u53d1"},{"location":"webhook/webhook/#711-webhook","text":"\u5982\u4e0b\u56fe\u6240\u793a\uff0c\u5728\u521b\u5efa\u81ea\u52a8\u6d41\u7a0b\u65f6\uff0c\u53ef\u4ee5\u6dfb\u52a0 Webhook \u52a8\u4f5c\u8282\u70b9\uff0c\u7528\u4ee5\u5c06\u76f8\u5173\u7684\u4e0a\u4e0b\u6587\u4fe1\u606f\u901a\u8fc7 Webhook \u63a8\u9001\u7ed9\u5916\u90e8\u7cfb\u7edf\u3002","title":"7.1.1 \u4f7f\u7528 Webhook \u63a5\u6536\u81ea\u52a8\u6d41\u76f8\u5173\u6d88\u606f"},{"location":"webhook/webhook/#712-webhook","text":"\u5982\u4e0b\u56fe\u6240\u793a\uff0c\u5728\u5305\u542b\u8868\u5355\u7684\u5fae\u9875\u9762\u4e2d\uff0c\u53ef\u4ee5\u8bbe\u7f6e\u63d0\u4ea4\u8868\u5355\u540e\u89e6\u53d1 Webhook\uff0c\u7528\u4ee5\u5c06\u76f8\u5173\u7684\u4e0a\u4e0b\u6587\u4fe1\u606f\u901a\u8fc7 Webhook \u63a8\u9001\u7ed9\u5916\u90e8\u7cfb\u7edf\u3002","title":"7.1.2 \u4f7f\u7528 Webhook \u63a5\u6536\u8868\u5355\u63d0\u4ea4\u76f8\u5173\u6d88\u606f"},{"location":"webhook/webhook/#72","text":"\u76ee\u524d\u652f\u6301\u4ee5\u4e0b5\u79cd\u4f1a\u5458\u76f8\u5173\u4e8b\u4ef6\u3002","title":"7.2 \u56fa\u5b9a\u4e8b\u4ef6\u89e6\u53d1"},{"location":"webhook/webhook/#721","text":"loyalty/membership_level_up \u6d88\u606f\u5185\u5bb9 payload\uff1a { tenantId : tenantId , event : loyalty/membership_level_up , membershipId : \u4f1a\u5458 ID , date : \u4e8b\u4ef6\u53d1\u751f\u7684\u65f6\u95f4 , oldLevelId : \u539f\u7b49\u7ea7 ID , newLevelId : \u65b0\u7b49\u7ea7 ID , oldLevel : \u539f\u7b49\u7ea7\u540d\u79f0 , newLevel : \u65b0\u7b49\u7ea7\u540d\u79f0 }","title":"7.2.1 \u4f1a\u5458\u7b49\u7ea7\u5347\u7ea7\u4e8b\u4ef6"},{"location":"webhook/webhook/#722","text":"loyalty/membership_level_down \u6d88\u606f\u5185\u5bb9 payload\uff1a { tenantId : tenantId , event : loyalty/membership_level_down , membershipId : \u4f1a\u5458 ID , date : \u4e8b\u4ef6\u53d1\u751f\u7684\u65f6\u95f4 , oldLevelId : \u539f\u7b49\u7ea7 ID , newLevelId : \u65b0\u7b49\u7ea7 ID , oldLevel : \u539f\u7b49\u7ea7\u540d\u79f0 , newLevel : \u65b0\u7b49\u7ea7\u540d\u79f0 }","title":"7.2.2 \u4f1a\u5458\u7b49\u7ea7\u964d\u7ea7\u4e8b\u4ef6"},{"location":"webhook/webhook/#723","text":"loyalty/loyalty_dispatch_coupon \u6d88\u606f\u5185\u5bb9 payload\uff1a { tenantId : tenantId , event : loyalty/loyalty_dispatch_coupon , membershipId : \u4f1a\u5458 ID , date : \u4e8b\u4ef6\u53d1\u751f\u7684\u65f6\u95f4 , couponId : \u4f18\u60e0\u5238 ID , couponName : \u4f18\u60e0\u5238\u540d\u79f0 , batchId : \u6279\u6b21\u53f7 , couponCode : \u4f18\u60e0\u5238 code\uff08\u8be5\u5ba2\u6237\u7684\u552f\u4e00 code\uff09 , startDate : \u8d77\u59cb\u6709\u6548\u65e5\u671f , endDate : \u622a\u6b62\u6709\u6548\u65e5\u671f }","title":"7.2.3 \u7cfb\u7edf\u53d1\u653e\u4f18\u60e0\u5238\u4e8b\u4ef6"},{"location":"webhook/webhook/#724","text":"loyalty/membership_draw_coupon \u6d88\u606f\u5185\u5bb9 payload\uff1a { tenantId : tenantId , event : loyalty/membership_draw_coupon , membershipId : \u4f1a\u5458 ID , date : \u4e8b\u4ef6\u53d1\u751f\u7684\u65f6\u95f4 , couponId : \u4f18\u60e0\u5238 ID , couponName : \u4f18\u60e0\u5238\u540d\u79f0 , couponCode : \u4f18\u60e0\u5238 code\uff08\u8be5\u5ba2\u6237\u7684\u552f\u4e00 code\uff09 , startDate : \u8d77\u59cb\u6709\u6548\u65e5\u671f , endDate : \u622a\u6b62\u6709\u6548\u65e5\u671f }","title":"7.2.4 \u9886\u53d6\u4f18\u60e0\u5238\u4e8b\u4ef6"},{"location":"webhook/webhook/#725","text":"loyalty/membership_redeem_coupon \u6d88\u606f\u5185\u5bb9 payload\uff1a { tenantId : tenantId , event : loyalty/membership_redeem_coupon , membershipId : \u4f1a\u5458 ID , date : \u4e8b\u4ef6\u53d1\u751f\u7684\u65f6\u95f4 , couponId : \u4f18\u60e0\u5238 ID , couponName : \u4f18\u60e0\u5238\u540d\u79f0 , couponCode : \u4f18\u60e0\u5238 code\uff08\u8be5\u5ba2\u6237\u7684\u552f\u4e00 code\uff09 }","title":"7.2.5 \u6838\u9500\u4f18\u60e0\u5238\u4e8b\u4ef6"},{"location":"webhook/webhook_payload/","text":"Webhook \u6d88\u606f\u76ee\u524d\u53ea\u652f\u6301 JSON \u683c\u5f0f\u3002 JSON \u6d88\u606f\u652f\u6301\u53d8\u91cf\uff0c\u4f8b\u5982\uff0c\u53d8\u91cf var \u5728\u6d88\u606f\u4e2d\u8868\u793a\u4e3a \"${var}\" \uff1b \u76ee\u524d JSON \u53d8\u91cf\u5305\u542b \u5185\u7f6e\u53d8\u91cf \u548c \u5ba2\u6237\u5c5e\u6027\u53d8\u91cf \uff0c \u5ba2\u6237\u5c5e\u6027\u53d8\u91cf \u9700\u8981\u6dfb\u52a0 customer \u524d\u7f00\u3002\u4ee5\u4e0b \u5185\u7f6e\u53d8\u91cf \uff0c\u4e0d\u9700\u8981\u4efb\u4f55\u524d\u7f00\uff1a \"flowId\" \uff08\u81ea\u52a8\u6d41\u7a0b ID\uff09, \"flowStep\" \uff08\u81ea\u52a8\u6d41\u7a0b\u6b65\u9aa4\uff09, \"customerId\" \uff08\u5ba2\u6237 ID\uff09\u3002 \u5ba2\u6237\u5c5e\u6027\u53d8\u91cf \uff0c\u4f8b\u5982\u5ba2\u6237\u540d\u79f0\uff08 customer.name \uff09\uff0c\u5ba2\u6237\u90ae\u7bb1\uff08 customer.email \uff09\uff0c\u5ba2\u6237\u7535\u8bdd\uff08 customer.mobile \uff09 \u7b49\uff1b\u4e5f\u652f\u6301 \u5ba2\u6237\u81ea\u5b9a\u4e49\u5c5e\u6027 \uff08ID\u4ee5 attr \u5f00\u5934\uff09 \u66f4\u591a\u5ba2\u6237\u5c5e\u6027\uff0c\u8bf7\u5230 \"\u8bbe\u7f6e\u4e2d\u5fc3\" - \"\u5ba2\u6237\u5c5e\u6027\" \u67e5\u770b\u3002 \u6ca1\u6709\u5b9a\u4e49\u7684\u5ba2\u6237\u5c5e\u6027\u6216\u8005\u5ba2\u6237\u7684\u5c5e\u6027\u503c\u4e3a\u7a7a\uff0c\u6d88\u606f\u4f53\u5185\u7684\u5185\u5bb9\u4e5f\u4e3a\u7a7a\u3002 \u4ee5\u4e0b\u662f\u4e00\u4e2a\u5b9e\u9645\u7684 Webhook \u6d88\u606f\u7684\u4f8b\u5b50 - { customerId : ${customerId} , flowId : ${flowId} , flowStep : ${flowStep} , email : ${customer.email} , mobile : ${customer.mobile} , customerAdditionInfo : ${customer.attr1} , webhookSource : convertlab } \u5982\u679c\u5ba2\u6237\u7684 id \u4e3a 123456\uff0c \u81ea\u52a8\u6d41 id \u4e3a 789\uff0c \u81ea\u52a8\u6d41\u6b65\u9aa4\u4e3a 5\uff0c \u5ba2\u6237email \u4e3a customer@company.com\uff0c \u5ba2\u6237\u7535\u8bdd\u53f7\u7801\u4e3a\u7a7a\uff0c \u5ba2\u6237\u7684 attr1 \u5c5e\u6027\u4e3a \"\u84dd\u8272\"\uff0c\u5219\u7528\u6237\u6536\u5230\u7684 webhook\u6d88\u606f\u4e3a - { customerId : 123456 , flowId : 789 , flowStep : 3 , email : customer@company.com , mobile : , customerAdditionInfo : \u84dd\u8272 , webhookSource : convertlab }","title":"Webhook payload"}]}