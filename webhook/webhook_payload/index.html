<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">   
    <link rel="canonical" href="http://api-docs.convertlab.com/webhook/webhook_payload/"> 
    <link rel="shortcut icon" href="../../img/favicon.ico">
    <title>自动流中webhook消息体定制说明 - Convertlab 文档中心</title>
    <link href="../../css/bootstrap-custom.min.css" rel="stylesheet">
    <link href="../../css/font-awesome-4.0.3.css" rel="stylesheet">
    <link href="../../css/base.css" rel="stylesheet">
    <link rel="stylesheet" href="../../css/highlight.css">
    <link href="../../test/css/print.css" rel="stylesheet">

    
</head>
<body>
    <div class="navbar navbar-default" role="navigation">
    <div class="container">

        <!-- Collapsed navigation -->
        <div class="navbar-header">
            
            <!-- Expander button -->
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            

            <!-- Main title -->
            <a class="navbar-brand" href="http://www.convertlab.com/">Convertlab 文档中心</a>
        </div>

        <!-- Expanded navigation -->
        <div class="navbar-collapse collapse">
            
                <!-- Main navigation -->
                <ul class="nav navbar-nav navbar-right">
                
                  <li class="pull-left">
                    
                    <a href="../..">OpenAPI V1</a>
                    
                  </li>
                
                  <li class="pull-left">
                    
                    <a href="../../track/jscollection/">前端埋点</a>
                    
                  </li>
                
                  <li class="pull-left active">
                    
                    <a href="./">Webhook</a>
                    
                  </li>
                
                  <li class="pull-left">
                    
                    <a href="../../member/">会员(Beta)</a>
                    
                  </li>
                
                  <!--<li class="pull-left">
                    
                    <a href="/test/">TRY IT</a>
                    
                  </li>-->
                </ul>
            
        </div>
    </div>
</div>
    <div class="container main">
       <!--   <div class="toolbar clearfix">
  <ol class="breadcrumb pull-left">
    <li><a href="">文档</a></li>
    <li>自动流中webhook消息体定制说明</li>
  </ol>

  
    
      <a href="https://github.com/xsio/open_api_docs/" class="github-edit pull-right"><i class="fa fa-github"></i> Edit on GitHub</a>
    
  

</div> -->
        <div class="col-md-3"><div class="bs-sidebar hidden-print" data-spy="affix" data-offset-top="80" role="complementary">
    <ul class="nav bs-sidenav">
     
      
        
      

    
      
        
      

    
      
        
          

              <li class="active">
                <a class="itm-l1" href="./">自动流中webhook消息体定制说明</a>
                
                  <ul class="nav">
                  
                  </ul>
                
              </li>

          
        
      

    
      
        
      

    
    </ul>
</div></div>
        <div class="col-md-9 content-body" role="main">
             

<h1>自动流中webhook消息体定制说明</h1>

<ol>
<li><code>Webhook</code> 消息目前只支持 <code>JSON</code> 格式。</li>
<li><code>JSON</code> 消息支持变量，例如，变量 var 在消息中表示为 <code>"${var}"</code>；</li>
<li>目前 <code>JSON</code> 变量包含<code>内置变量</code>和<code>客户属性变量</code>，<code>客户属性变量</code>需要添加 <code>customer</code> 前缀。以下<code>内置变量</code>，不需要任何前缀： <code>"flowId"</code>（自动流程 ID）, <code>"flowStep"</code>（自动流程步骤）, <code>"customerId"</code>（客户 ID）。</li>
<li><code>客户属性变量</code>，例如客户名称（<code>customer.name</code>），客户邮箱（<code>customer.email</code>），客户电话（<code>customer.mobile</code>） 等；也支持<code>客户自定义属性</code>（ID以 attr 开头） 更多客户属性，请到 "设置中心" -&gt; "客户属性" 查看。</li>
<li>没有定义的客户属性或者客户的属性值为空，消息体内的内容也为空。</li>
<li>以下是一个实际的 <code>Webhook</code> 消息的例子 - </li>
</ol>
<pre><code>{
  &quot;customerId&quot;: &quot;${customerId}&quot;,
  &quot;flowId&quot;: &quot;${flowId}&quot;,
  &quot;flowStep&quot;: &quot;${flowStep}&quot;,
  &quot;email&quot; : &quot;${customer.email}&quot;,
  &quot;mobile&quot;: &quot;${customer.mobile}&quot;,
  &quot;customerAdditionInfo&quot;: &quot;${customer.attr1}&quot;,
  &quot;webhookSource&quot;: &quot;convertlab&quot;
}
</code></pre>

<p>如果客户的 id 为 123456， 自动流 id 为 789， 自动流步骤为 5， 客户email 为 customer@company.com， 客户电话号码为空， 客户的 attr1 属性为 "蓝色"，则用户收到的 webhook消息为 -</p>
<pre><code>{
  &quot;customerId&quot;: &quot;123456&quot;,
  &quot;flowId&quot;: &quot;789&quot;,
  &quot;flowStep&quot;: &quot;3&quot;,
  &quot;email&quot; : &quot;customer@company.com&quot;,
  &quot;mobile&quot;: &quot;&quot;,
  &quot;customerAdditionInfo&quot;: &quot;蓝色&quot;,
  &quot;webhookSource&quot;: &quot;convertlab&quot;
}
</code></pre>
            <div class="ds-thread" data-thread-key="自动流中webhook消息体定制说明" data-title="自动流中webhook消息体定制说明" data-url=""></div>
        </div>
        
    </div>
    
    </script>
</body>

</html>