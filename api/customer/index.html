<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">   
    <link rel="canonical" href="http://api-docs.convertlab.com/api/customer/"> 
    <link rel="shortcut icon" href="../../img/favicon.ico">
    <title>客户信息 - Convertlab 文档中心</title>
    <link href="../../css/bootstrap-custom.min.css" rel="stylesheet">
    <link href="../../css/font-awesome-4.0.3.css" rel="stylesheet">
    <link href="../../css/base.css" rel="stylesheet">
    <link rel="stylesheet" href="../../css/highlight.css">
    <link href="../../test/css/print.css" rel="stylesheet">

    
</head>
<body>
    <div class="navbar navbar-default" role="navigation">
    <div class="container">

        <!-- Collapsed navigation -->
        <div class="navbar-header">
            
            <!-- Expander button -->
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            

            <!-- Main title -->
            <a class="navbar-brand" href="http://www.convertlab.com/">Convertlab 文档中心</a>
        </div>

        <!-- Expanded navigation -->
        <div class="navbar-collapse collapse">
            
                <!-- Main navigation -->
                <ul class="nav navbar-nav navbar-right">
                
                  <li class="pull-left active">
                    
                    <a href="../..">OpenAPI V1</a>
                    
                  </li>
                
                  <li class="pull-left">
                    
                    <a href="../../track/jscollection/">前端埋点</a>
                    
                  </li>
                
                  <li class="pull-left">
                    
                    <a href="../../webhook/webhook_payload/">Webhook</a>
                    
                  </li>
                
                  <li class="pull-left">
                    
                    <a href="../../member/">会员(Beta)</a>
                    
                  </li>
                
                  <!--<li class="pull-left">
                    
                    <a href="/test/">TRY IT</a>
                    
                  </li>-->
                </ul>
            
        </div>
    </div>
</div>
    <div class="container main">
       <!--   <div class="toolbar clearfix">
  <ol class="breadcrumb pull-left">
    <li><a href="">文档</a></li>
    <li>客户信息</li>
  </ol>

  
    
      <a href="https://github.com/xsio/open_api_docs/" class="github-edit pull-right"><i class="fa fa-github"></i> Edit on GitHub</a>
    
  

</div> -->
        <div class="col-md-3"><div class="bs-sidebar hidden-print" data-spy="affix" data-offset-top="80" role="complementary">
    <ul class="nav bs-sidenav">
     
      
        
          

              <li class="">
                <a class="itm-l1" href="../..">创建集成应用</a>
                
              </li>

          

              <li class="">
                <a class="itm-l1" href="../accesstoken/">获取ACCESS_TOKEN</a>
                
              </li>

          

              <li class="active">
                <a class="itm-l1" href="./">客户信息</a>
                
                  <ul class="nav">
                  
                    <li class="active "><a href="#_1">客户模型</a></li>
                    
                  
                    <li class=""><a href="#_2">客户身份模型</a></li>
                    
                  
                    <li class=""><a href="#_3">创建客户</a></li>
                    
                      <ul class="nav nav-l2">
                        <li><a class="itm-l2" href="#api">带身份创建客户的API</a></li>
                      </ul>
                    
                      <ul class="nav nav-l2">
                        <li><a class="itm-l2" href="#api_1">普通创建客户API</a></li>
                      </ul>
                    
                  
                    <li class=""><a href="#api_2">更新客户的API</a></li>
                    
                  
                    <li class=""><a href="#api_3">删除客户的API</a></li>
                    
                  
                    <li class=""><a href="#api_4">获取单个客户的API</a></li>
                    
                  
                    <li class=""><a href="#api_5">查询客户的API</a></li>
                    
                  
                    <li class=""><a href="#api_6">获取客户数量的API</a></li>
                    
                  
                    <li class=""><a href="#api_7">添加客户身份的API</a></li>
                    
                  
                    <li class=""><a href="#api_8">查询客户身份的API</a></li>
                    
                  
                    <li class=""><a href="#_4">查询客户的统计信息</a></li>
                    
                  
                  </ul>
                
              </li>

          

              <li class="">
                <a class="itm-l1" href="../customerevent/">客户事件</a>
                
              </li>

          

              <li class="">
                <a class="itm-l1" href="../tag/">客户标签</a>
                
              </li>

          

              <li class="">
                <a class="itm-l1" href="../list/">客户群组</a>
                
              </li>

          

              <li class="">
                <a class="itm-l1" href="../deal/">客户交易</a>
                
              </li>

          
        
      

    
      
        
      

    
      
        
      

    
      
        
      

    
    </ul>
</div></div>
        <div class="col-md-9 content-body" role="main">
             

<h1>客户信息</h1>

<h2 id="_1">客户模型</h2>
<p><img src="../../resources/customer.png" width="600"/></p>
<p>DM Hub为客户内置一些比较通用的客户属性，这些属性的名称和类型如下表所示：</p>
<table>
<thead>
<tr>
<th>属性</th>
<th>界面显示名称</th>
<th>类型</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>id</td>
<td>客户ID</td>
<td>Long</td>
<td>只读字段</td>
</tr>
<tr>
<td>displayName</td>
<td>显示名</td>
<td>String</td>
<td>只读字段。如果name不为空，等于name的值，否则等于nickName的值</td>
</tr>
<tr>
<td>name</td>
<td>姓名</td>
<td>String</td>
<td></td>
</tr>
<tr>
<td>img</td>
<td>用户头像</td>
<td>String</td>
<td>头像地址URL</td>
</tr>
<tr>
<td>gender</td>
<td>性别</td>
<td>Integer</td>
<td>0和空代表未知，1代表男，2代表女</td>
</tr>
<tr>
<td>mobile</td>
<td>手机号码</td>
<td>String</td>
<td></td>
</tr>
<tr>
<td>mobileVerified</td>
<td>手机号码是否验证</td>
<td>Boolean</td>
<td>值为true或false</td>
</tr>
<tr>
<td>email</td>
<td>邮箱</td>
<td>String</td>
<td></td>
</tr>
<tr>
<td>emailVerified</td>
<td>邮箱是否验证</td>
<td>Boolean</td>
<td>值为true或false</td>
</tr>
<tr>
<td>birthday</td>
<td>生日</td>
<td>String</td>
<td>格式为:</td>
</tr>
<tr>
<td>wechat</td>
<td>微信号</td>
<td>String</td>
<td></td>
</tr>
<tr>
<td>nickName</td>
<td>微信昵称</td>
<td>String</td>
<td></td>
</tr>
<tr>
<td>country</td>
<td>国家</td>
<td>String</td>
<td></td>
</tr>
<tr>
<td>province</td>
<td>省份</td>
<td>String</td>
<td></td>
</tr>
<tr>
<td>city</td>
<td>城市</td>
<td>String</td>
<td></td>
</tr>
<tr>
<td>county</td>
<td>区/县</td>
<td>String</td>
<td></td>
</tr>
<tr>
<td>homeAddress</td>
<td>家庭地址</td>
<td>String</td>
<td>最长512个字符</td>
</tr>
<tr>
<td>officeAddress</td>
<td>公司地址</td>
<td>String</td>
<td>最长512个字符</td>
</tr>
<tr>
<td>qq</td>
<td>QQ</td>
<td>String</td>
<td></td>
</tr>
<tr>
<td>weibo</td>
<td>微博</td>
<td>String</td>
<td></td>
</tr>
<tr>
<td>stage</td>
<td>当前阶段</td>
<td>String</td>
<td></td>
</tr>
<tr>
<td>dateJoin</td>
<td>创建时间</td>
<td>String</td>
<td>格式为:“2017-06-01T12:12:12Z” 为UTC时间 对于微信粉丝，这个字段记录其关注微信的时间。</td>
</tr>
<tr>
<td>source</td>
<td>初始来源</td>
<td>String</td>
<td></td>
</tr>
<tr>
<td>contentName</td>
<td>初始来源内容</td>
<td>String</td>
<td></td>
</tr>
<tr>
<td>company</td>
<td>公司</td>
<td>String</td>
<td></td>
</tr>
<tr>
<td>title</td>
<td>职位</td>
<td>String</td>
<td></td>
</tr>
<tr>
<td>industry</td>
<td>公司行业</td>
<td>String</td>
<td></td>
</tr>
<tr>
<td>employeeNumber</td>
<td>公司员工数</td>
<td>Integer</td>
<td></td>
</tr>
<tr>
<td>annualRevenue</td>
<td>公司年收入</td>
<td>BigDecimal</td>
<td></td>
</tr>
<tr>
<td>website</td>
<td>公司网站</td>
<td>String</td>
<td></td>
</tr>
<tr>
<td>telephone</td>
<td>座机</td>
<td>String</td>
<td></td>
</tr>
<tr>
<td>isEmployee</td>
<td>是否本公司员工</td>
<td>Boolean</td>
<td></td>
</tr>
<tr>
<td>campaignId</td>
<td>营销活动ID</td>
<td>String</td>
<td></td>
</tr>
<tr>
<td>campaignName</td>
<td>营销活动</td>
<td>String</td>
<td></td>
</tr>
<tr>
<td>lastUpdated</td>
<td>最后更新时间</td>
<td>String</td>
<td>只读字段，格式为:“2017-06-01T12:12:12Z”为UTC时间</td>
</tr>
<tr>
<td>remark</td>
<td>备注</td>
<td>String</td>
<td></td>
</tr>
<tr>
<td>dateCreated</td>
<td>系统创建时间</td>
<td>String</td>
<td>只读字段，格式为:“2017-06-01T12:12:12Z”为UTC时间</td>
</tr>
<tr>
<td>attr</td>
<td>自定义字段</td>
<td>Object</td>
<td>自定义字段数据存放在该对象上</td>
</tr>
</tbody>
</table>
<p>除了系统内置的客户属性外，您还可以增加自定义属性。请登录DM Hub，并打开 设置 &gt; 客户属性 设置页面:</p>
<p><img src="../../resources/customer1.png" width="600"/></p>
<p>进入客户属性页面后，点击右上角的 新建用户属性 按钮，新建客户属性：</p>
<p><img src="../../resources/customer2.png" width="600"/></p>
<p>新建的用户属性会在客户属性列表页显示其技术名，如attr1，attr2等：</p>
<p><img src="../../resources/customer3.png" width="600"/></p>
<p>客户自定义属性会作为客户attr字段的属性，attr字段是一个对象类型。以下是含有自定义字段attr1的客户数据的JSON示例：</p>
<pre><code>{
    &quot;name&quot;: &quot;西门吹雪&quot;,
    &quot;attr&quot;: {
        &quot;attr1&quot;: &quot;西门剑铺&quot;
    }
}
</code></pre>

<h2 id="_2">客户身份模型</h2>
<p>客户通常是跨触点的，即一个客户同时在多个触点上与您接触。比如一个客户既使用浏览器浏览您的官网，又关注了您的微信公众号，同时又在您的某网上商城购买了东西。通常情况下，客户在任一个触点，都拥有一个该触点所特有的身份信息，如网页里的cookie，微信的openid，网上商城的登录账号。在DM Hub系统中一个客户可以同时拥有多个身份。DM Hub可以通过身份信息将多个触点上的客户信息进行合并。</p>
<p>客户身份有身份类型和身份值两个字段组成：</p>
<table>
<thead>
<tr>
<th>字段</th>
<th>型</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>type</td>
<td>字符串(String)</td>
<td>身份类型，如wechat表示微信openid，最长32位字符。对于自定义的身份类型，进入「设置中心」点击「客户身份」并「新建客户身份」</td>
</tr>
<tr>
<td>value</td>
<td>字符串(String)</td>
<td>身份值，与type对应的值，如果type为wechat，value就是对应的openid。最长128位字符</td>
</tr>
</tbody>
</table>
<p>DM Hub内置了几个身份类型:</p>
<table>
<thead>
<tr>
<th>内置身份类型</th>
<th>含义</th>
</tr>
</thead>
<tbody>
<tr>
<td>wechat</td>
<td>微信的openid</td>
</tr>
<tr>
<td>wechat-unionid</td>
<td>微信的unionid</td>
</tr>
<tr>
<td>email</td>
<td>邮箱</td>
</tr>
<tr>
<td>mobile</td>
<td>手机号</td>
</tr>
</tbody>
</table>
<h2 id="_3">创建客户</h2>
<h3 id="api">带身份创建客户的API</h3>
<p>带身份的客户创建，顾名思义是创建客户的时候提供一个或多个客户身份。如果提供的身份已绑定到DM Hub中的现有客户，那么该API便不会创建新的客户，而是更新既有客户，同时将其他身份绑定到该客户上；如果客户信息内提供了手机和邮件地址信息，并且能通过该手机号或邮件地址在DM Hub查到客户，那么该API也不会创建新客户，而是更新找到的客户，并把身份绑定到该客户身上。如果以上两种情况都没找到客户，那么该API会创建一个新客户，并将所有客户身份信息绑定到该客户上。</p>
<p>需要注意的是，调用该接口更新现有客户的时候，无法将客户的字段清空。如果确实想清空客户的某些字段，请调用 更新客户API</p>
<p><strong>调用请求</strong></p>
<pre><code>HTTP请求方式: POST
https://api.convertlab.com/v1/customerandidentities?access_token={access_token}
POST数据示例:
{
    &quot;customer&quot;: {
        &quot;name&quot;: &quot;小D&quot;,
        &quot;mobile&quot;: &quot;18612341234&quot;,
        &quot;mobileVerified&quot;: true,
        &quot;gender&quot;: 1
    },

    &quot;customerIdentities&quot;: [
        {
            &quot;identityType&quot;: &quot;wechat&quot;,
            &quot;identityValue&quot;: &quot;o123456...&quot;,
            &quot;identityName&quot;: &quot;微信昵称&quot;
        },
        {
            &quot;identityType&quot;: &quot;your-system-account&quot;,
            &quot;identityValue&quot;: &quot;user123&quot;,
            &quot;identityName&quot;: &quot;您系统里的用户名&quot;
        }
    ]
}
</code></pre>

<p><strong>参数说明</strong></p>
<ul>
<li>{access_token}用从“获取身份权限”节拿到的access_token替换</li>
<li>customerIdentities字段可以填写多个客户的身份，当身份是微信的openid时，identityType填写为”wechat”；当身份为微信的unionid时，identityType填为”wechat-unionid”。identityValue则对应的填写为客户的openid或unionid。</li>
</ul>
<p>请求体中同时需要提供customer和customerIdentities的信息。</p>
<p>其中身份类型，可以使用DM Hub内置的身份类型，如wechat, wechat-unionid, mobile, email，也可以使用自定义的身份类型，对于自定义的身份类型，建议使用小写字母加中划线或下划线的方式，如taobao-account，这样便于使用身份搜索客户。</p>
<p><strong>返回结果</strong></p>
<pre><code>{
  &quot;id&quot;: 7,
  &quot;displayName&quot;: &quot;小D&quot;,
  &quot;name&quot;: &quot;小D&quot;,
  &quot;img&quot;: null,
  &quot;gender&quot;: 1,
  &quot;mobile&quot;: &quot;18612341234&quot;,
  &quot;mobileVerified&quot;: true,
  &quot;email&quot;: null,
  &quot;emailVerified&quot;: false,
  &quot;birthday&quot;: null,
  &quot;wechat&quot;: null,
  &quot;nickName&quot;: null,
  &quot;country&quot;: null,
  &quot;province&quot;: null,
  &quot;city&quot;: null,
  &quot;county&quot;: null,
  &quot;homeAddress&quot;: null,
  &quot;officeAddress&quot;: null,
  &quot;qq&quot;: null,
  &quot;weibo&quot;: null,
  &quot;stage&quot;: null,
  &quot;dateJoin&quot;: &quot;2017-06-06T03:18:23Z&quot;,
  &quot;source&quot;: null,
  &quot;contentName&quot;: null,
  &quot;company&quot;: null,
  &quot;title&quot;: null,
  &quot;industry&quot;: null,
  &quot;employeeNumber&quot;: null,
  &quot;annualRevenue&quot;: null,
  &quot;website&quot;: null,
  &quot;telephone&quot;: null,
  &quot;ownerId&quot;: null,
  &quot;ownerName&quot;: null,
  &quot;isEmployee&quot;: false,
  &quot;campaignId&quot;: null,
  &quot;campaignName&quot;: null,
  &quot;lastUpdated&quot;: &quot;2017-06-06T03:18:23Z&quot;,
  &quot;remark&quot;: null,
  &quot;isMember&quot;: false,
  &quot;dateCreated&quot;: &quot;2017-06-06T03:18:23Z&quot;,
  &quot;attr&quot;: {
    &quot;attr1&quot;: null
  }
}
</code></pre>

<p><strong>注意事项:</strong> 使用微信openid或unionid作为客户身份之前，请将微信公众号绑定到DM Hub系统，并将微信粉丝导入到DM Hub系统。</p>
<h3 id="api_1">普通创建客户API</h3>
<p>普通创建客户API会根据请求体中的手机号码和邮件地址去查找现有客户，如果能查找到客户，就会更新现有客户，否则则创建一下新客户。</p>
<p><strong>调用请求</strong></p>
<pre><code>HTTP请求方式: POST
https://api.convertlab.com/v1/customers?access_token={access_token}
POST数据示例:
{
    &quot;name&quot;: &quot;小D&quot;,
    &quot;mobile&quot;: &quot;18612341234&quot;,
    &quot;mobileVerified&quot;: true,
    &quot;gender&quot;: 1,
    &quot;createMethod&quot;: &quot;ImportFromExternalSystem&quot;
}
参数说明

{access_token} 的值为调用API的令牌，请参见 获取access_token
返回结果

{
  &quot;id&quot;: 7,
  &quot;displayName&quot;: &quot;小D&quot;,
  &quot;name&quot;: &quot;小D&quot;,
  &quot;img&quot;: null,
  &quot;gender&quot;: 1,
  &quot;mobile&quot;: &quot;18612341234&quot;,
  &quot;mobileVerified&quot;: true,
  &quot;email&quot;: null,
  &quot;emailVerified&quot;: false,
  &quot;birthday&quot;: null,
  &quot;wechat&quot;: null,
  &quot;nickName&quot;: null,
  &quot;country&quot;: null,
  &quot;province&quot;: null,
  &quot;city&quot;: null,
  &quot;county&quot;: null,
  &quot;homeAddress&quot;: null,
  &quot;officeAddress&quot;: null,
  &quot;qq&quot;: null,
  &quot;weibo&quot;: null,
  &quot;stage&quot;: null,
  &quot;dateJoin&quot;: &quot;2017-06-06T03:18:23Z&quot;,
  &quot;source&quot;: null,
  &quot;contentName&quot;: null,
  &quot;company&quot;: null,
  &quot;title&quot;: null,
  &quot;industry&quot;: null,
  &quot;employeeNumber&quot;: null,
  &quot;annualRevenue&quot;: null,
  &quot;website&quot;: null,
  &quot;telephone&quot;: null,
  &quot;ownerId&quot;: null,
  &quot;ownerName&quot;: null,
  &quot;isEmployee&quot;: false,
  &quot;campaignId&quot;: null,
  &quot;campaignName&quot;: null,
  &quot;lastUpdated&quot;: &quot;2017-06-06T03:18:23Z&quot;,
  &quot;remark&quot;: null,
  &quot;isMember&quot;: false,
  &quot;dateCreated&quot;: &quot;2017-06-06T03:18:23Z&quot;,
  &quot;attr&quot;: {
    &quot;attr1&quot;: null
  }
}
</code></pre>

<h2 id="api_2">更新客户的API</h2>
<p>调用该API可以对DM Hub系统中的客户进行修改。 需要注意的一点是，对于mobileVerified为true的手机号，在手机号码不变的情况下，无法将mobileVerified字段改为false。对于emailVerified为true的电子邮箱，在邮箱地址不变的情况下，无法将emailVerified字段改为false。</p>
<p><strong>调用请求</strong></p>
<pre><code>HTTP请求方式: PUT
https://api.convertlab.com/v1/customers/{id}?access_token={access_token}
PUT数据示例：
{
    &quot;name&quot;: &quot;小D&quot;,
    &quot;mobile&quot;: &quot;18612341234&quot;,
    &quot;mobileVerified&quot;: true,
    &quot;gender&quot;: 1
}
</code></pre>

<p><strong>参数说明</strong></p>
<ul>
<li>{access_token} 访问该API的令牌，请参见 获取access_token</li>
<li>id 要修改的客户id</li>
</ul>
<p><strong>返回结果</strong></p>
<pre><code>返回修改后的客户信息
</code></pre>

<h2 id="api_3">删除客户的API</h2>
<p>删除指定的客户</p>
<p><strong>调用请求</strong></p>
<pre><code>HTTP请求方式: DELETE
https://api.convertlab.com/v1/customers/{id}?access_token={access_token}
</code></pre>

<p><strong>参数说明</strong></p>
<ul>
<li>access_token 访问该API的令牌，请参见 获取access_token</li>
<li>id 要修改的客户id</li>
</ul>
<p><strong>返回结果</strong></p>
<pre><code>返回状态码为204
</code></pre>

<h2 id="api_4">获取单个客户的API</h2>
<p><strong>调用请求</strong></p>
<pre><code>HTTP请求方式: GET
https://api.convertlab.com/v1/customers/{id}?access_token={access_token}
</code></pre>

<p><strong>参数说明</strong></p>
<ul>
<li>{id}是要获取客户的id</li>
<li>{access_token}用从“获取身份权限”节拿到的access_token替换</li>
</ul>
<p><strong>返回结果</strong></p>
<pre><code>{
  &quot;id&quot;: 7,
  &quot;displayName&quot;: &quot;小D&quot;,
  &quot;name&quot;: &quot;小D&quot;,
  &quot;img&quot;: null,
  &quot;gender&quot;: 1,
  &quot;mobile&quot;: &quot;18612341234&quot;,
  &quot;mobileVerified&quot;: true,
  &quot;email&quot;: null,
  &quot;emailVerified&quot;: false,
  &quot;birthday&quot;: null,
  &quot;wechat&quot;: null,
  &quot;nickName&quot;: null,
  &quot;country&quot;: null,
  &quot;province&quot;: null,
  &quot;city&quot;: null,
  &quot;county&quot;: null,
  &quot;homeAddress&quot;: null,
  &quot;officeAddress&quot;: null,
  &quot;qq&quot;: null,
  &quot;weibo&quot;: null,
  &quot;stage&quot;: null,
  &quot;dateJoin&quot;: &quot;2017-06-06T03:18:23Z&quot;,
  &quot;source&quot;: null,
  &quot;contentName&quot;: null,
  &quot;company&quot;: null,
  &quot;title&quot;: null,
  &quot;industry&quot;: null,
  &quot;employeeNumber&quot;: null,
  &quot;annualRevenue&quot;: null,
  &quot;website&quot;: null,
  &quot;telephone&quot;: null,
  &quot;ownerId&quot;: null,
  &quot;ownerName&quot;: null,
  &quot;isEmployee&quot;: false,
  &quot;campaignId&quot;: null,
  &quot;campaignName&quot;: null,
  &quot;lastUpdated&quot;: &quot;2017-06-06T03:18:23Z&quot;,
  &quot;remark&quot;: null,
  &quot;isMember&quot;: false,
  &quot;dateCreated&quot;: &quot;2017-06-06T03:18:23Z&quot;,
  &quot;attr&quot;: {
    &quot;attr1&quot;: null
  }
}
</code></pre>

<h2 id="api_5">查询客户的API</h2>
<p><strong>调用请求</strong></p>
<pre><code>HTTP请求方式: GET
https://api.convertlab.com/v1/customers?access_token={access_token}&amp;stage={stage}&amp;source={source}&amp;mobile={mobile}&amp;email={email}&amp;gender={gender}&amp;idList={idList}&amp;dateCreatedFrom={dateCreatedFrom}&amp;dateCreatedTo&amp;lastUpdatedFrom={lastUpdatedFrom}&amp;lastUpdatedTo={lastUpdatedTo}&amp;select={select}&amp;rows={rows}&amp;page={page}&amp;sidx={sidx}&amp;sord={sord}
</code></pre>

<p><strong>参数说明</strong></p>
<table>
<thead>
<tr>
<th>参数</th>
<th>是否必填</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>access_token</td>
<td>是</td>
<td>访问API的令牌</td>
</tr>
<tr>
<td>stage</td>
<td>否</td>
<td>用客户所处的阶段查询，如过查询的阶段为空，请使用stage=_empty</td>
</tr>
<tr>
<td>source</td>
<td>否</td>
<td>用客户的初始来源查询</td>
</tr>
<tr>
<td>mobile</td>
<td>否</td>
<td>用客户的手机查询</td>
</tr>
<tr>
<td>email</td>
<td>否</td>
<td>用客户的邮箱查询</td>
</tr>
<tr>
<td>gender</td>
<td>否</td>
<td>用客户的性别查询, 1代表男性，2代表女性，0代表未知</td>
</tr>
<tr>
<td>idList</td>
<td>否</td>
<td>支持以逗号分开的客户id列表，如idList=1,2,3,4</td>
</tr>
<tr>
<td>dateCreatedFrom</td>
<td>否</td>
<td>客户创建的起始时间，时间格式为 “2016-11-11T11:11:11” 为UTC事件</td>
</tr>
<tr>
<td>dateCreatedTo</td>
<td>否</td>
<td>客户创建的结束时间</td>
</tr>
<tr>
<td>lastUpdatedFrom</td>
<td>否</td>
<td>客户更新的起始时间(包含)</td>
</tr>
<tr>
<td>lastUpdatedTo</td>
<td>否</td>
<td>客户更新的结束时间</td>
</tr>
<tr>
<td>select</td>
<td>否</td>
<td>返回的字段，多个字段用逗号隔开。默认返回所有字段，可以用select指定要返回的字段</td>
</tr>
<tr>
<td>rows</td>
<td>否</td>
<td>每页的记录数，默认每页返回20行</td>
</tr>
<tr>
<td>page</td>
<td>否</td>
<td>返回第几页，默认返回第1页</td>
</tr>
<tr>
<td>sidx</td>
<td>否</td>
<td>按什么字段排序，默认按id排序</td>
</tr>
<tr>
<td>sord</td>
<td>否</td>
<td>asc表示升序，desc表示降序。默认按升序排序</td>
</tr>
</tbody>
</table>
<p><strong>返回结果</strong>
- 返回的所有客户数据保存在名叫rows的array字段中</p>
<pre><code>{
  &quot;rows&quot;: [
    {
      &quot;id&quot;: 1,
      &quot;displayName&quot;: &quot;大D&quot;,
      &quot;name&quot;: &quot;大D&quot;,
      &quot;img&quot;: null,
      &quot;gender&quot;: 1,
      &quot;mobile&quot;: &quot;18612341234&quot;,
      &quot;mobileVerified&quot;: true,
      &quot;email&quot;: null
      // 客户的其他字段
    },
    {
      &quot;id&quot;: 7,
      &quot;displayName&quot;: &quot;小D&quot;,
      &quot;name&quot;: &quot;小D&quot;,
      &quot;img&quot;: null,
      &quot;gender&quot;: 1,
      &quot;mobile&quot;: &quot;18612341235&quot;,
      &quot;mobileVerified&quot;: true,
      &quot;email&quot;: null
      // 客户的其他字段
    }
  ]
}
</code></pre>

<h2 id="api_6">获取客户数量的API</h2>
<p><strong>调用请求</strong></p>
<pre><code>HTTP请求方式: GET
https://api.convertlab.com/v1/customers/count?access_token={access_token}&amp;stage={stage}&amp;source={source}&amp;mobile={mobile}&amp;gender={gender}&amp;idList={idList}&amp;dateCreatedFrom={dateCreatedFrom}&amp;dateCreatedTo&amp;lastUpdatedFrom={lastUpdatedFrom}&amp;lastUpdatedTo={lastUpdatedTo}
</code></pre>

<p><strong>参数说明</strong></p>
<table>
<thead>
<tr>
<th>参数</th>
<th>是否必填</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>access_token</td>
<td>是</td>
<td>访问API的令牌</td>
</tr>
<tr>
<td>stage</td>
<td>否</td>
<td>用客户所处的阶段查询，如过查询的阶段为空，请使用stage=_empty</td>
</tr>
<tr>
<td>source</td>
<td>否</td>
<td>用客户的初始来源查询</td>
</tr>
<tr>
<td>mobile</td>
<td>否</td>
<td>用客户的手机查询</td>
</tr>
<tr>
<td>gender</td>
<td>否</td>
<td>用客户的性别查询, 1代表男性，2代表女性，0代表未知</td>
</tr>
<tr>
<td>idList</td>
<td>否</td>
<td>支持以逗号分开的客户id列表，如idList=1,2,3,4</td>
</tr>
<tr>
<td>dateCreatedFrom</td>
<td>否</td>
<td>客户创建的起始时间，时间格式为 “2016-11-11T11:11:11” 为UTC事件</td>
</tr>
<tr>
<td>dateCreatedTo</td>
<td>否</td>
<td>客户创建的结束时间</td>
</tr>
<tr>
<td>lastUpdatedFrom</td>
<td>否</td>
<td>客户更新的其实时间(包含)</td>
</tr>
<tr>
<td>lastUpdateTo</td>
<td>否</td>
<td>客户更新的结束时间</td>
</tr>
<tr>
<td>select</td>
<td>否</td>
<td>返回的字段，多个字段用逗号隔开。默认返回所有字段，可以用select指定要返回的字段</td>
</tr>
</tbody>
</table>
<p><strong>返回结果</strong></p>
<pre><code>返回满足条件的客户的数量
</code></pre>

<h2 id="api_7">添加客户身份的API</h2>
<p>可以为DM Hub系统中的现有客户添加客户身份。新添加的身份将出现在客户详情页的左下角</p>
<p><strong>调用请求</strong></p>
<pre><code>HTTP请求方式: POST
https://api.convertlab.com/v1/customeridentities?access_token={access_token}

POST请求示例：

{
  &quot;customerId&quot;: &quot;123456&quot;,
  &quot;identityType&quot;: &quot;myshop-account&quot;,
  &quot;identityValue&quot;: &quot;user12345&quot;,
  &quot;identityName&quot;: &quot;小羊苏西&quot;
}
</code></pre>

<p><strong>参数说明</strong></p>
<table>
<thead>
<tr>
<th>参数</th>
<th>是否必填</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>access_token</td>
<td>是</td>
<td>访问API的令牌</td>
</tr>
<tr>
<td>customerId</td>
<td>是</td>
<td>需要添加身份的客户id</td>
</tr>
<tr>
<td>identityType</td>
<td>是</td>
<td>要添加的客户身份类型，详见 客户身份模型,最长32位字符</td>
</tr>
<tr>
<td>identityValue</td>
<td>是</td>
<td>要添加的客户身份值，最长128位字符</td>
</tr>
<tr>
<td>identityName</td>
<td>否</td>
<td>客户身份对应的昵称，最长256位字符</td>
</tr>
</tbody>
</table>
<p><strong>返回结果</strong></p>
<pre><code>{
  &quot;customerId&quot;: &quot;123456&quot;,
  &quot;identityType&quot;: &quot;myshop-account&quot;,
  &quot;identityValue&quot;: &quot;user12345&quot;,
  &quot;identityName&quot;: &quot;小羊苏西&quot;
}
</code></pre>

<h2 id="api_8">查询客户身份的API</h2>
<p>可以根据一个或多个客户id查询客户的身份，也可以通过身份的类型和身份值查询客户id</p>
<p><strong>调用请求</strong></p>
<pre><code>HTTP请求方式: GET
https://api.convertlab.com/v1/customeridentities?access_token={access_token}&amp;customerIds={customerIds}&amp;identityType={identityType}&amp;identityValue={identityValue}
</code></pre>

<p><strong>参数说明</strong></p>
<table>
<thead>
<tr>
<th>参数</th>
<th>是否必填</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>access_token</td>
<td>是</td>
<td>访问API的令牌</td>
</tr>
<tr>
<td>customerIds</td>
<td>否</td>
<td>要查询客户身份的客户id列表，多个客户id用逗号隔开，如 “123，124”</td>
</tr>
<tr>
<td>identityType</td>
<td>否</td>
<td>要查询客户id的身份类型，与identityValue同时使用</td>
</tr>
<tr>
<td>identityValue</td>
<td>否</td>
<td>要查询客户id的身份值，与identityType同时使用</td>
</tr>
</tbody>
</table>
<p><strong>返回结果</strong></p>
<pre><code>[
  {
    &quot;customerId&quot;: &quot;123456&quot;,
    &quot;identityType&quot;: &quot;myshop-account&quot;,
    &quot;identityValue&quot;: &quot;user12345&quot;,
    &quot;identityName&quot;: &quot;小羊苏西&quot;
  },
  {
    &quot;customerId&quot;: &quot;123456&quot;,
    &quot;identityType&quot;: &quot;wechat&quot;,
    &quot;identityValue&quot;: &quot;openid12345&quot;,
    &quot;identityName&quot;: &quot;小羊苏西&quot;
  }
]
</code></pre>

<p><strong>返回参数说明</strong></p>
<ul>
<li>identityTyp 客户身份类型</li>
<li>identityValue 客户的在你系统中的id</li>
<li>customerId 客户的id</li>
<li>identityName客户身份名称</li>
</ul>
<h2 id="_4">查询客户的统计信息</h2>
<p><strong>调用请求</strong></p>
<pre><code>GET
/v1/customerStatistics?access_token={access_token}&amp;rows={rows}&amp;page={page}&amp;sidx={sidx}&amp;sord={sord}&amp;customerId={customerId}
</code></pre>

<p><strong>请求参数说明</strong></p>
<table>
<thead>
<tr>
<th>Name</th>
<th>In</th>
<th>Required</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>access_token</td>
<td>query</td>
<td>yes</td>
<td>string</td>
<td>用从“获取身份权限”节拿到的access_token替换</td>
</tr>
<tr>
<td>rows</td>
<td>query</td>
<td>no</td>
<td>number</td>
<td>一页包含多少条记录，默认值为5</td>
</tr>
<tr>
<td>page</td>
<td>query</td>
<td>no</td>
<td>number</td>
<td>取第几页的数据，默认值为1</td>
</tr>
<tr>
<td>sidx</td>
<td>query</td>
<td>no</td>
<td>string</td>
<td>用于排序的字段，默认为“id”</td>
</tr>
<tr>
<td>sord</td>
<td>query</td>
<td>no</td>
<td>string</td>
<td>排序方式，asc表示升序，desc表示降序，默认为asc</td>
</tr>
<tr>
<td>customerId</td>
<td>query</td>
<td>no</td>
<td>number</td>
<td>精确查询某个客户的记录</td>
</tr>
</tbody>
</table>
<p><strong>返回数据</strong></p>
<pre><code>  {
      &quot;items&quot;:[
          {
              &quot;customerId&quot;: 4678,
              &quot;firstOrderDate&quot;: &quot;2015-04-28T03:43:33Z&quot;,
              &quot;id&quot;: 10948,
              &quot;lastOrderDate&quot;: &quot;2015-04-28T03:43:33Z&quot;,
              &quot;lastOrderDays&quot;: 635,
              &quot;lastUpdated&quot;: &quot;2017-01-22T16:34:03Z&quot;,
              &quot;latest30daysScore&quot;: 0,
              &quot;orderAMT&quot;: 0.05,
              &quot;orderAMTA&quot;: 4.2,
              &quot;orderAPCT&quot;: 88,
              &quot;orderTotal&quot;: 1,
              &quot;orderTotalAmount&quot;: 88,
              &quot;totalScore&quot;: 0
          }
      ],
      &quot;meta&quot;: {
          &quot;records&quot;: 20,
          &quot;total&quot;: 7,
          &quot;hasNext&quot;: true
      }
  }
</code></pre>

<p><strong>返回数据说明</strong></p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>items</td>
<td>array</td>
<td>数据块标签</td>
</tr>
<tr>
<td>customerId</td>
<td></td>
<td></td>
</tr>
<tr>
<td>firstOrderDate</td>
<td></td>
<td></td>
</tr>
<tr>
<td>id</td>
<td>number</td>
<td>这条记录的ID</td>
</tr>
<tr>
<td>lastOrderDate</td>
<td></td>
<td></td>
</tr>
<tr>
<td>lastOrderDays</td>
<td></td>
<td></td>
</tr>
<tr>
<td>lastUpdated</td>
<td></td>
<td></td>
</tr>
<tr>
<td>latest30daysScore</td>
<td></td>
<td></td>
</tr>
<tr>
<td>orderAMT</td>
<td></td>
<td></td>
</tr>
<tr>
<td>orderAMTA</td>
<td></td>
<td></td>
</tr>
<tr>
<td>orderAPCT</td>
<td></td>
<td></td>
</tr>
<tr>
<td>orderTotal</td>
<td></td>
<td></td>
</tr>
<tr>
<td>orderTotalAmount</td>
<td></td>
<td></td>
</tr>
<tr>
<td>totalScore</td>
<td>number</td>
<td>客户活跃度值</td>
</tr>
<tr>
<td>meta</td>
<td>object</td>
<td>元数据块标签</td>
</tr>
<tr>
<td>records</td>
<td>number</td>
<td>总记录条数</td>
</tr>
<tr>
<td>total</td>
<td>number</td>
<td>总页数</td>
</tr>
<tr>
<td>hasNext</td>
<td>boolean</td>
<td>是否还有记录</td>
</tr>
</tbody>
</table>
            <div class="ds-thread" data-thread-key="客户信息" data-title="客户信息" data-url=""></div>
        </div>
        
    </div>
    
    </script>
</body>

</html>